(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))o(u);new MutationObserver(u=>{for(const d of u)if(d.type==="childList")for(const f of d.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&o(f)}).observe(document,{childList:!0,subtree:!0});function a(u){const d={};return u.integrity&&(d.integrity=u.integrity),u.referrerPolicy&&(d.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?d.credentials="include":u.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function o(u){if(u.ep)return;u.ep=!0;const d=a(u);fetch(u.href,d)}})();function kv(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var _h={exports:{}},wo={};var _0;function Cv(){if(_0)return wo;_0=1;var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function a(o,u,d){var f=null;if(d!==void 0&&(f=""+d),u.key!==void 0&&(f=""+u.key),"key"in u){d={};for(var m in u)m!=="key"&&(d[m]=u[m])}else d=u;return u=d.ref,{$$typeof:n,type:o,key:f,ref:u!==void 0?u:null,props:d}}return wo.Fragment=r,wo.jsx=a,wo.jsxs=a,wo}var j0;function Tv(){return j0||(j0=1,_h.exports=Cv()),_h.exports}var i=Tv(),jh={exports:{}},ze={};var S0;function Av(){if(S0)return ze;S0=1;var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),f=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),E=Symbol.iterator;function A(y){return y===null||typeof y!="object"?null:(y=E&&y[E]||y["@@iterator"],typeof y=="function"?y:null)}var $={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},D=Object.assign,k={};function H(y,T,J){this.props=y,this.context=T,this.refs=k,this.updater=J||$}H.prototype.isReactComponent={},H.prototype.setState=function(y,T){if(typeof y!="object"&&typeof y!="function"&&y!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,y,T,"setState")},H.prototype.forceUpdate=function(y){this.updater.enqueueForceUpdate(this,y,"forceUpdate")};function P(){}P.prototype=H.prototype;function q(y,T,J){this.props=y,this.context=T,this.refs=k,this.updater=J||$}var K=q.prototype=new P;K.constructor=q,D(K,H.prototype),K.isPureReactComponent=!0;var ie=Array.isArray;function X(){}var F={H:null,A:null,T:null,S:null},fe=Object.prototype.hasOwnProperty;function ve(y,T,J){var te=J.ref;return{$$typeof:n,type:y,key:T,ref:te!==void 0?te:null,props:J}}function Se(y,T){return ve(y.type,T,y.props)}function Re(y){return typeof y=="object"&&y!==null&&y.$$typeof===n}function Oe(y){var T={"=":"=0",":":"=2"};return"$"+y.replace(/[=:]/g,function(J){return T[J]})}var ut=/\/+/g;function lt(y,T){return typeof y=="object"&&y!==null&&y.key!=null?Oe(""+y.key):T.toString(36)}function at(y){switch(y.status){case"fulfilled":return y.value;case"rejected":throw y.reason;default:switch(typeof y.status=="string"?y.then(X,X):(y.status="pending",y.then(function(T){y.status==="pending"&&(y.status="fulfilled",y.value=T)},function(T){y.status==="pending"&&(y.status="rejected",y.reason=T)})),y.status){case"fulfilled":return y.value;case"rejected":throw y.reason}}throw y}function I(y,T,J,te,ue){var pe=typeof y;(pe==="undefined"||pe==="boolean")&&(y=null);var de=!1;if(y===null)de=!0;else switch(pe){case"bigint":case"string":case"number":de=!0;break;case"object":switch(y.$$typeof){case n:case r:de=!0;break;case w:return de=y._init,I(de(y._payload),T,J,te,ue)}}if(de)return ue=ue(y),de=te===""?"."+lt(y,0):te,ie(ue)?(J="",de!=null&&(J=de.replace(ut,"$&/")+"/"),I(ue,T,J,"",function(Zt){return Zt})):ue!=null&&(Re(ue)&&(ue=Se(ue,J+(ue.key==null||y&&y.key===ue.key?"":(""+ue.key).replace(ut,"$&/")+"/")+de)),T.push(ue)),1;de=0;var He=te===""?".":te+":";if(ie(y))for(var Ue=0;Ue<y.length;Ue++)te=y[Ue],pe=He+lt(te,Ue),de+=I(te,T,J,pe,ue);else if(Ue=A(y),typeof Ue=="function")for(y=Ue.call(y),Ue=0;!(te=y.next()).done;)te=te.value,pe=He+lt(te,Ue++),de+=I(te,T,J,pe,ue);else if(pe==="object"){if(typeof y.then=="function")return I(at(y),T,J,te,ue);throw T=String(y),Error("Objects are not valid as a React child (found: "+(T==="[object Object]"?"object with keys {"+Object.keys(y).join(", ")+"}":T)+"). If you meant to render a collection of children, use an array instead.")}return de}function R(y,T,J){if(y==null)return y;var te=[],ue=0;return I(y,te,"","",function(pe){return T.call(J,pe,ue++)}),te}function le(y){if(y._status===-1){var T=y._result;T=T(),T.then(function(J){(y._status===0||y._status===-1)&&(y._status=1,y._result=J)},function(J){(y._status===0||y._status===-1)&&(y._status=2,y._result=J)}),y._status===-1&&(y._status=0,y._result=T)}if(y._status===1)return y._result.default;throw y._result}var _e=typeof reportError=="function"?reportError:function(y){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var T=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof y=="object"&&y!==null&&typeof y.message=="string"?String(y.message):String(y),error:y});if(!window.dispatchEvent(T))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",y);return}console.error(y)},me={map:R,forEach:function(y,T,J){R(y,function(){T.apply(this,arguments)},J)},count:function(y){var T=0;return R(y,function(){T++}),T},toArray:function(y){return R(y,function(T){return T})||[]},only:function(y){if(!Re(y))throw Error("React.Children.only expected to receive a single React element child.");return y}};return ze.Activity=N,ze.Children=me,ze.Component=H,ze.Fragment=a,ze.Profiler=u,ze.PureComponent=q,ze.StrictMode=o,ze.Suspense=p,ze.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=F,ze.__COMPILER_RUNTIME={__proto__:null,c:function(y){return F.H.useMemoCache(y)}},ze.cache=function(y){return function(){return y.apply(null,arguments)}},ze.cacheSignal=function(){return null},ze.cloneElement=function(y,T,J){if(y==null)throw Error("The argument must be a React element, but you passed "+y+".");var te=D({},y.props),ue=y.key;if(T!=null)for(pe in T.key!==void 0&&(ue=""+T.key),T)!fe.call(T,pe)||pe==="key"||pe==="__self"||pe==="__source"||pe==="ref"&&T.ref===void 0||(te[pe]=T[pe]);var pe=arguments.length-2;if(pe===1)te.children=J;else if(1<pe){for(var de=Array(pe),He=0;He<pe;He++)de[He]=arguments[He+2];te.children=de}return ve(y.type,ue,te)},ze.createContext=function(y){return y={$$typeof:f,_currentValue:y,_currentValue2:y,_threadCount:0,Provider:null,Consumer:null},y.Provider=y,y.Consumer={$$typeof:d,_context:y},y},ze.createElement=function(y,T,J){var te,ue={},pe=null;if(T!=null)for(te in T.key!==void 0&&(pe=""+T.key),T)fe.call(T,te)&&te!=="key"&&te!=="__self"&&te!=="__source"&&(ue[te]=T[te]);var de=arguments.length-2;if(de===1)ue.children=J;else if(1<de){for(var He=Array(de),Ue=0;Ue<de;Ue++)He[Ue]=arguments[Ue+2];ue.children=He}if(y&&y.defaultProps)for(te in de=y.defaultProps,de)ue[te]===void 0&&(ue[te]=de[te]);return ve(y,pe,ue)},ze.createRef=function(){return{current:null}},ze.forwardRef=function(y){return{$$typeof:m,render:y}},ze.isValidElement=Re,ze.lazy=function(y){return{$$typeof:w,_payload:{_status:-1,_result:y},_init:le}},ze.memo=function(y,T){return{$$typeof:x,type:y,compare:T===void 0?null:T}},ze.startTransition=function(y){var T=F.T,J={};F.T=J;try{var te=y(),ue=F.S;ue!==null&&ue(J,te),typeof te=="object"&&te!==null&&typeof te.then=="function"&&te.then(X,_e)}catch(pe){_e(pe)}finally{T!==null&&J.types!==null&&(T.types=J.types),F.T=T}},ze.unstable_useCacheRefresh=function(){return F.H.useCacheRefresh()},ze.use=function(y){return F.H.use(y)},ze.useActionState=function(y,T,J){return F.H.useActionState(y,T,J)},ze.useCallback=function(y,T){return F.H.useCallback(y,T)},ze.useContext=function(y){return F.H.useContext(y)},ze.useDebugValue=function(){},ze.useDeferredValue=function(y,T){return F.H.useDeferredValue(y,T)},ze.useEffect=function(y,T){return F.H.useEffect(y,T)},ze.useEffectEvent=function(y){return F.H.useEffectEvent(y)},ze.useId=function(){return F.H.useId()},ze.useImperativeHandle=function(y,T,J){return F.H.useImperativeHandle(y,T,J)},ze.useInsertionEffect=function(y,T){return F.H.useInsertionEffect(y,T)},ze.useLayoutEffect=function(y,T){return F.H.useLayoutEffect(y,T)},ze.useMemo=function(y,T){return F.H.useMemo(y,T)},ze.useOptimistic=function(y,T){return F.H.useOptimistic(y,T)},ze.useReducer=function(y,T,J){return F.H.useReducer(y,T,J)},ze.useRef=function(y){return F.H.useRef(y)},ze.useState=function(y){return F.H.useState(y)},ze.useSyncExternalStore=function(y,T,J){return F.H.useSyncExternalStore(y,T,J)},ze.useTransition=function(){return F.H.useTransition()},ze.version="19.2.3",ze}var N0;function ff(){return N0||(N0=1,jh.exports=Av()),jh.exports}var S=ff(),Sh={exports:{}},_o={},Nh={exports:{}},Eh={};var E0;function Rv(){return E0||(E0=1,(function(n){function r(I,R){var le=I.length;I.push(R);e:for(;0<le;){var _e=le-1>>>1,me=I[_e];if(0<u(me,R))I[_e]=R,I[le]=me,le=_e;else break e}}function a(I){return I.length===0?null:I[0]}function o(I){if(I.length===0)return null;var R=I[0],le=I.pop();if(le!==R){I[0]=le;e:for(var _e=0,me=I.length,y=me>>>1;_e<y;){var T=2*(_e+1)-1,J=I[T],te=T+1,ue=I[te];if(0>u(J,le))te<me&&0>u(ue,J)?(I[_e]=ue,I[te]=le,_e=te):(I[_e]=J,I[T]=le,_e=T);else if(te<me&&0>u(ue,le))I[_e]=ue,I[te]=le,_e=te;else break e}}return R}function u(I,R){var le=I.sortIndex-R.sortIndex;return le!==0?le:I.id-R.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;n.unstable_now=function(){return d.now()}}else{var f=Date,m=f.now();n.unstable_now=function(){return f.now()-m}}var p=[],x=[],w=1,N=null,E=3,A=!1,$=!1,D=!1,k=!1,H=typeof setTimeout=="function"?setTimeout:null,P=typeof clearTimeout=="function"?clearTimeout:null,q=typeof setImmediate<"u"?setImmediate:null;function K(I){for(var R=a(x);R!==null;){if(R.callback===null)o(x);else if(R.startTime<=I)o(x),R.sortIndex=R.expirationTime,r(p,R);else break;R=a(x)}}function ie(I){if(D=!1,K(I),!$)if(a(p)!==null)$=!0,X||(X=!0,Oe());else{var R=a(x);R!==null&&at(ie,R.startTime-I)}}var X=!1,F=-1,fe=5,ve=-1;function Se(){return k?!0:!(n.unstable_now()-ve<fe)}function Re(){if(k=!1,X){var I=n.unstable_now();ve=I;var R=!0;try{e:{$=!1,D&&(D=!1,P(F),F=-1),A=!0;var le=E;try{t:{for(K(I),N=a(p);N!==null&&!(N.expirationTime>I&&Se());){var _e=N.callback;if(typeof _e=="function"){N.callback=null,E=N.priorityLevel;var me=_e(N.expirationTime<=I);if(I=n.unstable_now(),typeof me=="function"){N.callback=me,K(I),R=!0;break t}N===a(p)&&o(p),K(I)}else o(p);N=a(p)}if(N!==null)R=!0;else{var y=a(x);y!==null&&at(ie,y.startTime-I),R=!1}}break e}finally{N=null,E=le,A=!1}R=void 0}}finally{R?Oe():X=!1}}}var Oe;if(typeof q=="function")Oe=function(){q(Re)};else if(typeof MessageChannel<"u"){var ut=new MessageChannel,lt=ut.port2;ut.port1.onmessage=Re,Oe=function(){lt.postMessage(null)}}else Oe=function(){H(Re,0)};function at(I,R){F=H(function(){I(n.unstable_now())},R)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(I){I.callback=null},n.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):fe=0<I?Math.floor(1e3/I):5},n.unstable_getCurrentPriorityLevel=function(){return E},n.unstable_next=function(I){switch(E){case 1:case 2:case 3:var R=3;break;default:R=E}var le=E;E=R;try{return I()}finally{E=le}},n.unstable_requestPaint=function(){k=!0},n.unstable_runWithPriority=function(I,R){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var le=E;E=I;try{return R()}finally{E=le}},n.unstable_scheduleCallback=function(I,R,le){var _e=n.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?_e+le:_e):le=_e,I){case 1:var me=-1;break;case 2:me=250;break;case 5:me=1073741823;break;case 4:me=1e4;break;default:me=5e3}return me=le+me,I={id:w++,callback:R,priorityLevel:I,startTime:le,expirationTime:me,sortIndex:-1},le>_e?(I.sortIndex=le,r(x,I),a(p)===null&&I===a(x)&&(D?(P(F),F=-1):D=!0,at(ie,le-_e))):(I.sortIndex=me,r(p,I),$||A||($=!0,X||(X=!0,Oe()))),I},n.unstable_shouldYield=Se,n.unstable_wrapCallback=function(I){var R=E;return function(){var le=E;E=R;try{return I.apply(this,arguments)}finally{E=le}}}})(Eh)),Eh}var k0;function Ov(){return k0||(k0=1,Nh.exports=Rv()),Nh.exports}var kh={exports:{}},Ht={};var C0;function zv(){if(C0)return Ht;C0=1;var n=ff();function r(p){var x="https://react.dev/errors/"+p;if(1<arguments.length){x+="?args[]="+encodeURIComponent(arguments[1]);for(var w=2;w<arguments.length;w++)x+="&args[]="+encodeURIComponent(arguments[w])}return"Minified React error #"+p+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(){}var o={d:{f:a,r:function(){throw Error(r(522))},D:a,C:a,L:a,m:a,X:a,S:a,M:a},p:0,findDOMNode:null},u=Symbol.for("react.portal");function d(p,x,w){var N=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:N==null?null:""+N,children:p,containerInfo:x,implementation:w}}var f=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(p,x){if(p==="font")return"";if(typeof x=="string")return x==="use-credentials"?x:""}return Ht.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,Ht.createPortal=function(p,x){var w=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!x||x.nodeType!==1&&x.nodeType!==9&&x.nodeType!==11)throw Error(r(299));return d(p,x,null,w)},Ht.flushSync=function(p){var x=f.T,w=o.p;try{if(f.T=null,o.p=2,p)return p()}finally{f.T=x,o.p=w,o.d.f()}},Ht.preconnect=function(p,x){typeof p=="string"&&(x?(x=x.crossOrigin,x=typeof x=="string"?x==="use-credentials"?x:"":void 0):x=null,o.d.C(p,x))},Ht.prefetchDNS=function(p){typeof p=="string"&&o.d.D(p)},Ht.preinit=function(p,x){if(typeof p=="string"&&x&&typeof x.as=="string"){var w=x.as,N=m(w,x.crossOrigin),E=typeof x.integrity=="string"?x.integrity:void 0,A=typeof x.fetchPriority=="string"?x.fetchPriority:void 0;w==="style"?o.d.S(p,typeof x.precedence=="string"?x.precedence:void 0,{crossOrigin:N,integrity:E,fetchPriority:A}):w==="script"&&o.d.X(p,{crossOrigin:N,integrity:E,fetchPriority:A,nonce:typeof x.nonce=="string"?x.nonce:void 0})}},Ht.preinitModule=function(p,x){if(typeof p=="string")if(typeof x=="object"&&x!==null){if(x.as==null||x.as==="script"){var w=m(x.as,x.crossOrigin);o.d.M(p,{crossOrigin:w,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0})}}else x==null&&o.d.M(p)},Ht.preload=function(p,x){if(typeof p=="string"&&typeof x=="object"&&x!==null&&typeof x.as=="string"){var w=x.as,N=m(w,x.crossOrigin);o.d.L(p,w,{crossOrigin:N,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0,type:typeof x.type=="string"?x.type:void 0,fetchPriority:typeof x.fetchPriority=="string"?x.fetchPriority:void 0,referrerPolicy:typeof x.referrerPolicy=="string"?x.referrerPolicy:void 0,imageSrcSet:typeof x.imageSrcSet=="string"?x.imageSrcSet:void 0,imageSizes:typeof x.imageSizes=="string"?x.imageSizes:void 0,media:typeof x.media=="string"?x.media:void 0})}},Ht.preloadModule=function(p,x){if(typeof p=="string")if(x){var w=m(x.as,x.crossOrigin);o.d.m(p,{as:typeof x.as=="string"&&x.as!=="script"?x.as:void 0,crossOrigin:w,integrity:typeof x.integrity=="string"?x.integrity:void 0})}else o.d.m(p)},Ht.requestFormReset=function(p){o.d.r(p)},Ht.unstable_batchedUpdates=function(p,x){return p(x)},Ht.useFormState=function(p,x,w){return f.H.useFormState(p,x,w)},Ht.useFormStatus=function(){return f.H.useHostTransitionStatus()},Ht.version="19.2.3",Ht}var T0;function Dv(){if(T0)return kh.exports;T0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(r){console.error(r)}}return n(),kh.exports=zv(),kh.exports}var A0;function Uv(){if(A0)return _o;A0=1;var n=Ov(),r=ff(),a=Dv();function o(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)t+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function u(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function d(e){var t=e,s=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(s=t.return),e=t.return;while(e)}return t.tag===3?s:null}function f(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function m(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function p(e){if(d(e)!==e)throw Error(o(188))}function x(e){var t=e.alternate;if(!t){if(t=d(e),t===null)throw Error(o(188));return t!==e?null:e}for(var s=e,l=t;;){var c=s.return;if(c===null)break;var h=c.alternate;if(h===null){if(l=c.return,l!==null){s=l;continue}break}if(c.child===h.child){for(h=c.child;h;){if(h===s)return p(c),e;if(h===l)return p(c),t;h=h.sibling}throw Error(o(188))}if(s.return!==l.return)s=c,l=h;else{for(var v=!1,j=c.child;j;){if(j===s){v=!0,s=c,l=h;break}if(j===l){v=!0,l=c,s=h;break}j=j.sibling}if(!v){for(j=h.child;j;){if(j===s){v=!0,s=h,l=c;break}if(j===l){v=!0,l=h,s=c;break}j=j.sibling}if(!v)throw Error(o(189))}}if(s.alternate!==l)throw Error(o(190))}if(s.tag!==3)throw Error(o(188));return s.stateNode.current===s?e:t}function w(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=w(e),t!==null)return t;e=e.sibling}return null}var N=Object.assign,E=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),$=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),H=Symbol.for("react.profiler"),P=Symbol.for("react.consumer"),q=Symbol.for("react.context"),K=Symbol.for("react.forward_ref"),ie=Symbol.for("react.suspense"),X=Symbol.for("react.suspense_list"),F=Symbol.for("react.memo"),fe=Symbol.for("react.lazy"),ve=Symbol.for("react.activity"),Se=Symbol.for("react.memo_cache_sentinel"),Re=Symbol.iterator;function Oe(e){return e===null||typeof e!="object"?null:(e=Re&&e[Re]||e["@@iterator"],typeof e=="function"?e:null)}var ut=Symbol.for("react.client.reference");function lt(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===ut?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case D:return"Fragment";case H:return"Profiler";case k:return"StrictMode";case ie:return"Suspense";case X:return"SuspenseList";case ve:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case $:return"Portal";case q:return e.displayName||"Context";case P:return(e._context.displayName||"Context")+".Consumer";case K:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case F:return t=e.displayName||null,t!==null?t:lt(e.type)||"Memo";case fe:t=e._payload,e=e._init;try{return lt(e(t))}catch{}}return null}var at=Array.isArray,I=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,R=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le={pending:!1,data:null,method:null,action:null},_e=[],me=-1;function y(e){return{current:e}}function T(e){0>me||(e.current=_e[me],_e[me]=null,me--)}function J(e,t){me++,_e[me]=e.current,e.current=t}var te=y(null),ue=y(null),pe=y(null),de=y(null);function He(e,t){switch(J(pe,t),J(ue,e),J(te,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Gp(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Gp(t),e=Yp(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}T(te),J(te,e)}function Ue(){T(te),T(ue),T(pe)}function Zt(e){e.memoizedState!==null&&J(de,e);var t=te.current,s=Yp(t,e.type);t!==s&&(J(ue,e),J(te,s))}function Kr(e){ue.current===e&&(T(te),T(ue)),de.current===e&&(T(de),xo._currentValue=le)}var $n,Bn;function la(e){if($n===void 0)try{throw Error()}catch(s){var t=s.stack.trim().match(/\n( *(at )?)/);$n=t&&t[1]||"",Bn=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+$n+e+Bn}var Pn=!1;function Bo(e,t){if(!e||Pn)return"";Pn=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(t){var ae=function(){throw Error()};if(Object.defineProperty(ae.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ae,[])}catch(Q){var Y=Q}Reflect.construct(e,[],ae)}else{try{ae.call()}catch(Q){Y=Q}e.call(ae.prototype)}}else{try{throw Error()}catch(Q){Y=Q}(ae=e())&&typeof ae.catch=="function"&&ae.catch(function(){})}}catch(Q){if(Q&&Y&&typeof Q.stack=="string")return[Q.stack,Y.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var c=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");c&&c.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var h=l.DetermineComponentFrameRoot(),v=h[0],j=h[1];if(v&&j){var O=v.split(`
`),G=j.split(`
`);for(c=l=0;l<O.length&&!O[l].includes("DetermineComponentFrameRoot");)l++;for(;c<G.length&&!G[c].includes("DetermineComponentFrameRoot");)c++;if(l===O.length||c===G.length)for(l=O.length-1,c=G.length-1;1<=l&&0<=c&&O[l]!==G[c];)c--;for(;1<=l&&0<=c;l--,c--)if(O[l]!==G[c]){if(l!==1||c!==1)do if(l--,c--,0>c||O[l]!==G[c]){var ee=`
`+O[l].replace(" at new "," at ");return e.displayName&&ee.includes("<anonymous>")&&(ee=ee.replace("<anonymous>",e.displayName)),ee}while(1<=l&&0<=c);break}}}finally{Pn=!1,Error.prepareStackTrace=s}return(s=e?e.displayName||e.name:"")?la(s):""}function kf(e,t){switch(e.tag){case 26:case 27:case 5:return la(e.type);case 16:return la("Lazy");case 13:return e.child!==t&&t!==null?la("Suspense Fallback"):la("Suspense");case 19:return la("SuspenseList");case 0:case 15:return Bo(e.type,!1);case 11:return Bo(e.type.render,!1);case 1:return Bo(e.type,!0);case 31:return la("Activity");default:return""}}function Xa(e){try{var t="",s=null;do t+=kf(e,s),s=e,e=e.return;while(e);return t}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var Hn=Object.prototype.hasOwnProperty,Rr=n.unstable_scheduleCallback,Wr=n.unstable_cancelCallback,oa=n.unstable_shouldYield,cs=n.unstable_requestPaint,Dt=n.unstable_now,Po=n.unstable_getCurrentPriorityLevel,Uu=n.unstable_ImmediatePriority,ol=n.unstable_UserBlockingPriority,ca=n.unstable_NormalPriority,Mu=n.unstable_LowPriority,Or=n.unstable_IdlePriority,us=n.log,Rs=n.unstable_setDisableYieldValue,zr=null,Rt=null;function Dr(e){if(typeof us=="function"&&Rs(e),Rt&&typeof Rt.setStrictMode=="function")try{Rt.setStrictMode(zr,e)}catch{}}var Ut=Math.clz32?Math.clz32:In,Ja=Math.log,Ho=Math.LN2;function In(e){return e>>>=0,e===0?32:31-(Ja(e)/Ho|0)|0}var Vn=256,Ur=262144,Qa=4194304;function ds(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Os(e,t,s){var l=e.pendingLanes;if(l===0)return 0;var c=0,h=e.suspendedLanes,v=e.pingedLanes;e=e.warmLanes;var j=l&134217727;return j!==0?(l=j&~h,l!==0?c=ds(l):(v&=j,v!==0?c=ds(v):s||(s=j&~e,s!==0&&(c=ds(s))))):(j=l&~h,j!==0?c=ds(j):v!==0?c=ds(v):s||(s=l&~e,s!==0&&(c=ds(s)))),c===0?0:t!==0&&t!==c&&(t&h)===0&&(h=c&-c,s=t&-t,h>=s||h===32&&(s&4194048)!==0)?t:c}function ua(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Io(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function cl(){var e=Qa;return Qa<<=1,(Qa&62914560)===0&&(Qa=4194304),e}function Za(e){for(var t=[],s=0;31>s;s++)t.push(e);return t}function Fa(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function ul(e,t,s,l,c,h){var v=e.pendingLanes;e.pendingLanes=s,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=s,e.entangledLanes&=s,e.errorRecoveryDisabledLanes&=s,e.shellSuspendCounter=0;var j=e.entanglements,O=e.expirationTimes,G=e.hiddenUpdates;for(s=v&~s;0<s;){var ee=31-Ut(s),ae=1<<ee;j[ee]=0,O[ee]=-1;var Y=G[ee];if(Y!==null)for(G[ee]=null,ee=0;ee<Y.length;ee++){var Q=Y[ee];Q!==null&&(Q.lane&=-536870913)}s&=~ae}l!==0&&Vo(e,l,0),h!==0&&c===0&&e.tag!==0&&(e.suspendedLanes|=h&~(v&~t))}function Vo(e,t,s){e.pendingLanes|=t,e.suspendedLanes&=~t;var l=31-Ut(t);e.entangledLanes|=t,e.entanglements[l]=e.entanglements[l]|1073741824|s&261930}function Gn(e,t){var s=e.entangledLanes|=t;for(e=e.entanglements;s;){var l=31-Ut(s),c=1<<l;c&t|e[l]&t&&(e[l]|=t),s&=~c}}function Go(e,t){var s=t&-t;return s=(s&42)!==0?1:Bt(s),(s&(e.suspendedLanes|t))!==0?0:s}function Bt(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function da(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Lu(){var e=R.p;return e!==0?e:(e=window.event,e===void 0?32:p0(e.type))}function qu(e,t){var s=R.p;try{return R.p=e,t()}finally{R.p=s}}var Xr=Math.random().toString(36).slice(2),kt="__reactFiber$"+Xr,It="__reactProps$"+Xr,en="__reactContainer$"+Xr,Yo="__reactEvents$"+Xr,Cf="__reactListeners$"+Xr,$u="__reactHandles$"+Xr,tn="__reactResources$"+Xr,Yn="__reactMarker$"+Xr;function Ko(e){delete e[kt],delete e[It],delete e[Yo],delete e[Cf],delete e[$u]}function hs(e){var t=e[kt];if(t)return t;for(var s=e.parentNode;s;){if(t=s[en]||s[kt]){if(s=t.alternate,t.child!==null||s!==null&&s.child!==null)for(e=Fp(e);e!==null;){if(s=e[kt])return s;e=Fp(e)}return t}e=s,s=e.parentNode}return null}function Jr(e){if(e=e[kt]||e[en]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function Ft(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(o(33))}function er(e){var t=e[tn];return t||(t=e[tn]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function pt(e){e[Yn]=!0}var rn=new Set,Bu={};function ha(e,t){zs(e,t),zs(e+"Capture",t)}function zs(e,t){for(Bu[e]=t,e=0;e<t.length;e++)rn.add(t[e])}var Kn=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),dl={},sn={};function Wo(e){return Hn.call(sn,e)?!0:Hn.call(dl,e)?!1:Kn.test(e)?sn[e]=!0:(dl[e]=!0,!1)}function fs(e,t,s){if(Wo(t))if(s===null)e.removeAttribute(t);else{switch(typeof s){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var l=t.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+s)}}function an(e,t,s){if(s===null)e.removeAttribute(t);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+s)}}function Vt(e,t,s,l){if(l===null)e.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(s);return}e.setAttributeNS(t,s,""+l)}}function tr(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Wn(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function ms(e,t,s){var l=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var c=l.get,h=l.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(v){s=""+v,h.call(this,v)}}),Object.defineProperty(e,t,{enumerable:l.enumerable}),{getValue:function(){return s},setValue:function(v){s=""+v},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function fa(e){if(!e._valueTracker){var t=Wn(e)?"checked":"value";e._valueTracker=ms(e,t,""+e[t])}}function nn(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var s=t.getValue(),l="";return e&&(l=Wn(e)?e.checked?"true":"false":e.value),e=l,e!==s?(t.setValue(e),!0):!1}function Ds(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var pr=/[\n"\\]/g;function Gt(e){return e.replace(pr,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function gr(e,t,s,l,c,h,v,j){e.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.type=v:e.removeAttribute("type"),t!=null?v==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+tr(t)):e.value!==""+tr(t)&&(e.value=""+tr(t)):v!=="submit"&&v!=="reset"||e.removeAttribute("value"),t!=null?Xn(e,v,tr(t)):s!=null?Xn(e,v,tr(s)):l!=null&&e.removeAttribute("value"),c==null&&h!=null&&(e.defaultChecked=!!h),c!=null&&(e.checked=c&&typeof c!="function"&&typeof c!="symbol"),j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"?e.name=""+tr(j):e.removeAttribute("name")}function Us(e,t,s,l,c,h,v,j){if(h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"&&(e.type=h),t!=null||s!=null){if(!(h!=="submit"&&h!=="reset"||t!=null)){fa(e);return}s=s!=null?""+tr(s):"",t=t!=null?""+tr(t):s,j||t===e.value||(e.value=t),e.defaultValue=t}l=l??c,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=j?e.checked:!!l,e.defaultChecked=!!l,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(e.name=v),fa(e)}function Xn(e,t,s){t==="number"&&Ds(e.ownerDocument)===e||e.defaultValue===""+s||(e.defaultValue=""+s)}function ps(e,t,s,l){if(e=e.options,t){t={};for(var c=0;c<s.length;c++)t["$"+s[c]]=!0;for(s=0;s<e.length;s++)c=t.hasOwnProperty("$"+e[s].value),e[s].selected!==c&&(e[s].selected=c),c&&l&&(e[s].defaultSelected=!0)}else{for(s=""+tr(s),t=null,c=0;c<e.length;c++){if(e[c].value===s){e[c].selected=!0,l&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function Jn(e,t,s){if(t!=null&&(t=""+tr(t),t!==e.value&&(e.value=t),s==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=s!=null?""+tr(s):""}function hl(e,t,s,l){if(t==null){if(l!=null){if(s!=null)throw Error(o(92));if(at(l)){if(1<l.length)throw Error(o(93));l=l[0]}s=l}s==null&&(s=""),t=s}s=tr(t),e.defaultValue=s,l=e.textContent,l===s&&l!==""&&l!==null&&(e.value=l),fa(e)}function gs(e,t){if(t){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=t;return}}e.textContent=t}var Xo=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ln(e,t,s){var l=t.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?l?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":l?e.setProperty(t,s):typeof s!="number"||s===0||Xo.has(t)?t==="float"?e.cssFloat=s:e[t]=(""+s).trim():e[t]=s+"px"}function fl(e,t,s){if(t!=null&&typeof t!="object")throw Error(o(62));if(e=e.style,s!=null){for(var l in s)!s.hasOwnProperty(l)||t!=null&&t.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var c in t)l=t[c],t.hasOwnProperty(c)&&s[c]!==l&&ln(e,c,l)}else for(var h in t)t.hasOwnProperty(h)&&ln(e,h,t[h])}function Qr(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Pu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Qn=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function on(e){return Qn.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function rr(){}var Zn=null;function Ge(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var sr=null,xr=null;function xs(e){var t=Jr(e);if(t&&(e=t.stateNode)){var s=e[It]||null;e:switch(e=t.stateNode,t.type){case"input":if(gr(e,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),t=s.name,s.type==="radio"&&t!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+Gt(""+t)+'"][type="radio"]'),t=0;t<s.length;t++){var l=s[t];if(l!==e&&l.form===e.form){var c=l[It]||null;if(!c)throw Error(o(90));gr(l,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name)}}for(t=0;t<s.length;t++)l=s[t],l.form===e.form&&nn(l)}break e;case"textarea":Jn(e,s.value,s.defaultValue);break e;case"select":t=s.value,t!=null&&ps(e,!!s.multiple,t,!1)}}}var ye=!1;function Fn(e,t,s){if(ye)return e(t,s);ye=!0;try{var l=e(t);return l}finally{if(ye=!1,(sr!==null||xr!==null)&&(Vc(),sr&&(t=sr,e=xr,xr=sr=null,xs(t),e)))for(t=0;t<e.length;t++)xs(e[t])}}function Mr(e,t){var s=e.stateNode;if(s===null)return null;var l=s[It]||null;if(l===null)return null;s=l[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(o(231,t,typeof s));return s}var Je=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ms=!1;if(Je)try{var vs={};Object.defineProperty(vs,"passive",{get:function(){Ms=!0}}),window.addEventListener("test",vs,vs),window.removeEventListener("test",vs,vs)}catch{Ms=!1}var ys=null,cn=null,ei=null;function ml(){if(ei)return ei;var e,t=cn,s=t.length,l,c="value"in ys?ys.value:ys.textContent,h=c.length;for(e=0;e<s&&t[e]===c[e];e++);var v=s-e;for(l=1;l<=v&&t[s-l]===c[h-l];l++);return ei=c.slice(e,1<l?1-l:void 0)}function pl(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function gl(){return!0}function ti(){return!1}function ht(e){function t(s,l,c,h,v){this._reactName=s,this._targetInst=c,this.type=l,this.nativeEvent=h,this.target=v,this.currentTarget=null;for(var j in e)e.hasOwnProperty(j)&&(s=e[j],this[j]=s?s(h):h[j]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?gl:ti,this.isPropagationStopped=ti,this}return N(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=gl)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=gl)},persist:function(){},isPersistent:gl}),t}var Zr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ri=ht(Zr),ma=N({},Zr,{view:0,detail:0}),Jo=ht(ma),Qo,xl,un,si=N({},ma,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ga,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==un&&(un&&e.type==="mousemove"?(Qo=e.screenX-un.screenX,xl=e.screenY-un.screenY):xl=Qo=0,un=e),Qo)},movementY:function(e){return"movementY"in e?e.movementY:xl}}),vl=ht(si),yl=N({},si,{dataTransfer:0}),bl=ht(yl),Zo=N({},ma,{relatedTarget:0}),bs=ht(Zo),dn=N({},Zr,{animationName:0,elapsedTime:0,pseudoElement:0}),Hu=ht(dn),wl=N({},Zr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Fo=ht(wl),hn=N({},Zr,{data:0}),Yt=ht(hn),_l={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pa={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function mn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=pa[e])?!!t[e]:!1}function ga(){return mn}var ec=N({},ma,{key:function(e){if(e.key){var t=_l[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=pl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?fn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ga,charCode:function(e){return e.type==="keypress"?pl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?pl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Me=ht(ec),jl=N({},si,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ai=ht(jl),ni=N({},ma,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ga}),Sl=ht(ni),ii=N({},Zr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Iu=ht(ii),Vu=N({},si,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),tc=ht(Vu),rc=N({},Zr,{newState:0,oldState:0}),sc=ht(rc),pn=[9,13,27,32],ac=Je&&"CompositionEvent"in window,li=null;Je&&"documentMode"in document&&(li=document.documentMode);var Nl=Je&&"TextEvent"in window&&!li,El=Je&&(!ac||li&&8<li&&11>=li),oi=" ",nc=!1;function ci(e,t){switch(e){case"keyup":return pn.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function gn(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var xa=!1;function kl(e,t){switch(e){case"compositionend":return gn(t);case"keypress":return t.which!==32?null:(nc=!0,oi);case"textInput":return e=t.data,e===oi&&nc?null:e;default:return null}}function Cl(e,t){if(xa)return e==="compositionend"||!ac&&ci(e,t)?(e=ml(),ei=cn=ys=null,xa=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return El&&t.locale!=="ko"?null:t.data;default:return null}}var ui={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ws(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!ui[e.type]:t==="textarea"}function di(e,t,s,l){sr?xr?xr.push(l):xr=[l]:sr=l,t=Qc(t,"onChange"),0<t.length&&(s=new ri("onChange","change",null,s,l),e.push({event:s,listeners:t}))}var va=null,Ls=null;function qs(e){$p(e,0)}function ya(e){var t=Ft(e);if(nn(t))return e}function Tl(e,t){if(e==="change")return t}var ic=!1;if(Je){var hi;if(Je){var fi="oninput"in document;if(!fi){var lc=document.createElement("div");lc.setAttribute("oninput","return;"),fi=typeof lc.oninput=="function"}hi=fi}else hi=!1;ic=hi&&(!document.documentMode||9<document.documentMode)}function _s(){va&&(va.detachEvent("onpropertychange",Kt),Ls=va=null)}function Kt(e){if(e.propertyName==="value"&&ya(Ls)){var t=[];di(t,Ls,e,Ge(e)),Fn(qs,t)}}function Al(e,t,s){e==="focusin"?(_s(),va=t,Ls=s,va.attachEvent("onpropertychange",Kt)):e==="focusout"&&_s()}function js(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ya(Ls)}function $s(e,t){if(e==="click")return ya(t)}function Ss(e,t){if(e==="input"||e==="change")return ya(t)}function oc(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Pt=typeof Object.is=="function"?Object.is:oc;function Lr(e,t){if(Pt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var s=Object.keys(e),l=Object.keys(t);if(s.length!==l.length)return!1;for(l=0;l<s.length;l++){var c=s[l];if(!Hn.call(t,c)||!Pt(e[c],t[c]))return!1}return!0}function qr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Fr(e,t){var s=qr(e);e=0;for(var l;s;){if(s.nodeType===3){if(l=e+s.textContent.length,e<=t&&l>=t)return{node:s,offset:t-e};e=l}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=qr(s)}}function mi(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?mi(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function cc(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Ds(e.document);t instanceof e.HTMLIFrameElement;){try{var s=typeof t.contentWindow.location.href=="string"}catch{s=!1}if(s)e=t.contentWindow;else break;t=Ds(e.document)}return t}function Rl(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var Gu=Je&&"documentMode"in document&&11>=document.documentMode,ba=null,Ol=null,$r=null,zl=!1;function uc(e,t,s){var l=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;zl||ba==null||ba!==Ds(l)||(l=ba,"selectionStart"in l&&Rl(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),$r&&Lr($r,l)||($r=l,l=Qc(Ol,"onSelect"),0<l.length&&(t=new ri("onSelect","select",null,t,s),e.push({event:t,listeners:l}),t.target=ba)))}function Bs(e,t){var s={};return s[e.toLowerCase()]=t.toLowerCase(),s["Webkit"+e]="webkit"+t,s["Moz"+e]="moz"+t,s}var Wt={animationend:Bs("Animation","AnimationEnd"),animationiteration:Bs("Animation","AnimationIteration"),animationstart:Bs("Animation","AnimationStart"),transitionrun:Bs("Transition","TransitionRun"),transitionstart:Bs("Transition","TransitionStart"),transitioncancel:Bs("Transition","TransitionCancel"),transitionend:Bs("Transition","TransitionEnd")},wa={},dc={};Je&&(dc=document.createElement("div").style,"AnimationEvent"in window||(delete Wt.animationend.animation,delete Wt.animationiteration.animation,delete Wt.animationstart.animation),"TransitionEvent"in window||delete Wt.transitionend.transition);function Ps(e){if(wa[e])return wa[e];if(!Wt[e])return e;var t=Wt[e],s;for(s in t)if(t.hasOwnProperty(s)&&s in dc)return wa[e]=t[s];return e}var hc=Ps("animationend"),fc=Ps("animationiteration"),mc=Ps("animationstart"),pi=Ps("transitionrun"),xn=Ps("transitionstart"),Z=Ps("transitioncancel"),gi=Ps("transitionend"),pc=new Map,Dl="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Dl.push("scrollEnd");function vr(e,t){pc.set(e,t),ha(t,[e])}var xi=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},ar=[],_a=0,Ul=0;function vi(){for(var e=_a,t=Ul=_a=0;t<e;){var s=ar[t];ar[t++]=null;var l=ar[t];ar[t++]=null;var c=ar[t];ar[t++]=null;var h=ar[t];if(ar[t++]=null,l!==null&&c!==null){var v=l.pending;v===null?c.next=c:(c.next=v.next,v.next=c),l.pending=c}h!==0&&gc(s,c,h)}}function yi(e,t,s,l){ar[_a++]=e,ar[_a++]=t,ar[_a++]=s,ar[_a++]=l,Ul|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function bi(e,t,s,l){return yi(e,t,s,l),vn(e)}function Hs(e,t){return yi(e,null,null,t),vn(e)}function gc(e,t,s){e.lanes|=s;var l=e.alternate;l!==null&&(l.lanes|=s);for(var c=!1,h=e.return;h!==null;)h.childLanes|=s,l=h.alternate,l!==null&&(l.childLanes|=s),h.tag===22&&(e=h.stateNode,e===null||e._visibility&1||(c=!0)),e=h,h=h.return;return e.tag===3?(h=e.stateNode,c&&t!==null&&(c=31-Ut(s),e=h.hiddenUpdates,l=e[c],l===null?e[c]=[t]:l.push(t),t.lane=s|536870912),h):null}function vn(e){if(50<co)throw co=0,Yd=null,Error(o(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var ja={};function Yu(e,t,s,l){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xt(e,t,s,l){return new Yu(e,t,s,l)}function Ml(e){return e=e.prototype,!(!e||!e.isReactComponent)}function es(e,t){var s=e.alternate;return s===null?(s=Xt(e.tag,t,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=t,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&65011712,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,t=e.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s.refCleanup=e.refCleanup,s}function Ll(e,t){e.flags&=65011714;var s=e.alternate;return s===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=s.childLanes,e.lanes=s.lanes,e.child=s.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=s.memoizedProps,e.memoizedState=s.memoizedState,e.updateQueue=s.updateQueue,e.type=s.type,t=s.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function wi(e,t,s,l,c,h){var v=0;if(l=e,typeof e=="function")Ml(e)&&(v=1);else if(typeof e=="string")v=pv(e,s,te.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case ve:return e=Xt(31,s,t,c),e.elementType=ve,e.lanes=h,e;case D:return Ns(s.children,c,h,t);case k:v=8,c|=24;break;case H:return e=Xt(12,s,t,c|2),e.elementType=H,e.lanes=h,e;case ie:return e=Xt(13,s,t,c),e.elementType=ie,e.lanes=h,e;case X:return e=Xt(19,s,t,c),e.elementType=X,e.lanes=h,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case q:v=10;break e;case P:v=9;break e;case K:v=11;break e;case F:v=14;break e;case fe:v=16,l=null;break e}v=29,s=Error(o(130,e===null?"null":typeof e,"")),l=null}return t=Xt(v,s,t,c),t.elementType=e,t.type=l,t.lanes=h,t}function Ns(e,t,s,l){return e=Xt(7,e,l,t),e.lanes=s,e}function ql(e,t,s){return e=Xt(6,e,null,t),e.lanes=s,e}function yn(e){var t=Xt(18,null,null,0);return t.stateNode=e,t}function $l(e,t,s){return t=Xt(4,e.children!==null?e.children:[],e.key,t),t.lanes=s,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Bl=new WeakMap;function nr(e,t){if(typeof e=="object"&&e!==null){var s=Bl.get(e);return s!==void 0?s:(t={value:e,source:t,stack:Xa(t)},Bl.set(e,t),t)}return{value:e,source:t,stack:Xa(t)}}var Sa=[],Na=0,_i=null,Ea=0,ir=[],lr=0,Es=null,yr=1,br="";function ts(e,t){Sa[Na++]=Ea,Sa[Na++]=_i,_i=e,Ea=t}function ji(e,t,s){ir[lr++]=yr,ir[lr++]=br,ir[lr++]=Es,Es=e;var l=yr;e=br;var c=32-Ut(l)-1;l&=~(1<<c),s+=1;var h=32-Ut(t)+c;if(30<h){var v=c-c%5;h=(l&(1<<v)-1).toString(32),l>>=v,c-=v,yr=1<<32-Ut(t)+c|s<<c|l,br=h+e}else yr=1<<h|s<<c|l,br=e}function Pl(e){e.return!==null&&(ts(e,1),ji(e,1,0))}function Hl(e){for(;e===_i;)_i=Sa[--Na],Sa[Na]=null,Ea=Sa[--Na],Sa[Na]=null;for(;e===Es;)Es=ir[--lr],ir[lr]=null,br=ir[--lr],ir[lr]=null,yr=ir[--lr],ir[lr]=null}function Il(e,t){ir[lr++]=yr,ir[lr++]=br,ir[lr++]=Es,yr=t.id,br=t.overflow,Es=e}var Ct=null,nt=null,$e=!1,ks=null,or=!1,Si=Error(o(519));function rs(e){var t=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw C(nr(t,e)),Si}function Ku(e){var t=e.stateNode,s=e.type,l=e.memoizedProps;switch(t[kt]=e,t[It]=l,s){case"dialog":Pe("cancel",t),Pe("close",t);break;case"iframe":case"object":case"embed":Pe("load",t);break;case"video":case"audio":for(s=0;s<ho.length;s++)Pe(ho[s],t);break;case"source":Pe("error",t);break;case"img":case"image":case"link":Pe("error",t),Pe("load",t);break;case"details":Pe("toggle",t);break;case"input":Pe("invalid",t),Us(t,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Pe("invalid",t);break;case"textarea":Pe("invalid",t),hl(t,l.value,l.defaultValue,l.children)}s=l.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||t.textContent===""+s||l.suppressHydrationWarning===!0||Ip(t.textContent,s)?(l.popover!=null&&(Pe("beforetoggle",t),Pe("toggle",t)),l.onScroll!=null&&Pe("scroll",t),l.onScrollEnd!=null&&Pe("scrollend",t),l.onClick!=null&&(t.onclick=rr),t=!0):t=!1,t||rs(e,!0)}function xc(e){for(Ct=e.return;Ct;)switch(Ct.tag){case 5:case 31:case 13:or=!1;return;case 27:case 3:or=!0;return;default:Ct=Ct.return}}function g(e){if(e!==Ct)return!1;if(!$e)return xc(e),$e=!0,!1;var t=e.tag,s;if((s=t!==3&&t!==27)&&((s=t===5)&&(s=e.type,s=!(s!=="form"&&s!=="button")||lh(e.type,e.memoizedProps)),s=!s),s&&nt&&rs(e),xc(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));nt=Zp(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));nt=Zp(e)}else t===27?(t=nt,$a(e.type)?(e=hh,hh=null,nt=e):nt=t):nt=Ct?Pr(e.stateNode.nextSibling):null;return!0}function b(){nt=Ct=null,$e=!1}function _(){var e=ks;return e!==null&&(hr===null?hr=e:hr.push.apply(hr,e),ks=null),e}function C(e){ks===null?ks=[e]:ks.push(e)}var L=y(null),z=null,W=null;function re(e,t,s){J(L,t._currentValue),t._currentValue=s}function ce(e){e._currentValue=L.current,T(L)}function ne(e,t,s){for(;e!==null;){var l=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,l!==null&&(l.childLanes|=t)):l!==null&&(l.childLanes&t)!==t&&(l.childLanes|=t),e===s)break;e=e.return}}function he(e,t,s,l){var c=e.child;for(c!==null&&(c.return=e);c!==null;){var h=c.dependencies;if(h!==null){var v=c.child;h=h.firstContext;e:for(;h!==null;){var j=h;h=c;for(var O=0;O<t.length;O++)if(j.context===t[O]){h.lanes|=s,j=h.alternate,j!==null&&(j.lanes|=s),ne(h.return,s,e),l||(v=null);break e}h=j.next}}else if(c.tag===18){if(v=c.return,v===null)throw Error(o(341));v.lanes|=s,h=v.alternate,h!==null&&(h.lanes|=s),ne(v,s,e),v=null}else v=c.child;if(v!==null)v.return=c;else for(v=c;v!==null;){if(v===e){v=null;break}if(c=v.sibling,c!==null){c.return=v.return,v=c;break}v=v.return}c=v}}function be(e,t,s,l){e=null;for(var c=t,h=!1;c!==null;){if(!h){if((c.flags&524288)!==0)h=!0;else if((c.flags&262144)!==0)break}if(c.tag===10){var v=c.alternate;if(v===null)throw Error(o(387));if(v=v.memoizedProps,v!==null){var j=c.type;Pt(c.pendingProps.value,v.value)||(e!==null?e.push(j):e=[j])}}else if(c===de.current){if(v=c.alternate,v===null)throw Error(o(387));v.memoizedState.memoizedState!==c.memoizedState.memoizedState&&(e!==null?e.push(xo):e=[xo])}c=c.return}e!==null&&he(t,e,s,l),t.flags|=262144}function oe(e){for(e=e.firstContext;e!==null;){if(!Pt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function xe(e){z=e,W=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function ge(e){return We(z,e)}function Qe(e,t){return z===null&&xe(e),We(e,t)}function We(e,t){var s=t._currentValue;if(t={context:t,memoizedValue:s,next:null},W===null){if(e===null)throw Error(o(308));W=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else W=W.next=t;return s}var et=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(s,l){e.push(l)}};this.abort=function(){t.aborted=!0,e.forEach(function(s){return s()})}},ft=n.unstable_scheduleCallback,wr=n.unstable_NormalPriority,ot={$$typeof:q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Wu(){return{controller:new et,data:new Map,refCount:0}}function Vl(e){e.refCount--,e.refCount===0&&ft(wr,function(){e.controller.abort()})}var Gl=null,Xu=0,Ni=0,Ei=null;function mx(e,t){if(Gl===null){var s=Gl=[];Xu=0,Ni=Zd(),Ei={status:"pending",value:void 0,then:function(l){s.push(l)}}}return Xu++,t.then(Tf,Tf),t}function Tf(){if(--Xu===0&&Gl!==null){Ei!==null&&(Ei.status="fulfilled");var e=Gl;Gl=null,Ni=0,Ei=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function px(e,t){var s=[],l={status:"pending",value:null,reason:null,then:function(c){s.push(c)}};return e.then(function(){l.status="fulfilled",l.value=t;for(var c=0;c<s.length;c++)(0,s[c])(t)},function(c){for(l.status="rejected",l.reason=c,c=0;c<s.length;c++)(0,s[c])(void 0)}),l}var Af=I.S;I.S=function(e,t){fp=Dt(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&mx(e,t),Af!==null&&Af(e,t)};var bn=y(null);function Ju(){var e=bn.current;return e!==null?e:it.pooledCache}function vc(e,t){t===null?J(bn,bn.current):J(bn,t.pool)}function Rf(){var e=Ju();return e===null?null:{parent:ot._currentValue,pool:e}}var ki=Error(o(460)),Qu=Error(o(474)),yc=Error(o(542)),bc={then:function(){}};function Of(e){return e=e.status,e==="fulfilled"||e==="rejected"}function zf(e,t,s){switch(s=e[s],s===void 0?e.push(t):s!==t&&(t.then(rr,rr),t=s),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Uf(e),e;default:if(typeof t.status=="string")t.then(rr,rr);else{if(e=it,e!==null&&100<e.shellSuspendCounter)throw Error(o(482));e=t,e.status="pending",e.then(function(l){if(t.status==="pending"){var c=t;c.status="fulfilled",c.value=l}},function(l){if(t.status==="pending"){var c=t;c.status="rejected",c.reason=l}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Uf(e),e}throw _n=t,ki}}function wn(e){try{var t=e._init;return t(e._payload)}catch(s){throw s!==null&&typeof s=="object"&&typeof s.then=="function"?(_n=s,ki):s}}var _n=null;function Df(){if(_n===null)throw Error(o(459));var e=_n;return _n=null,e}function Uf(e){if(e===ki||e===yc)throw Error(o(483))}var Ci=null,Yl=0;function wc(e){var t=Yl;return Yl+=1,Ci===null&&(Ci=[]),zf(Ci,e,t)}function Kl(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function _c(e,t){throw t.$$typeof===E?Error(o(525)):(e=Object.prototype.toString.call(t),Error(o(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Mf(e){function t(B,M){if(e){var V=B.deletions;V===null?(B.deletions=[M],B.flags|=16):V.push(M)}}function s(B,M){if(!e)return null;for(;M!==null;)t(B,M),M=M.sibling;return null}function l(B){for(var M=new Map;B!==null;)B.key!==null?M.set(B.key,B):M.set(B.index,B),B=B.sibling;return M}function c(B,M){return B=es(B,M),B.index=0,B.sibling=null,B}function h(B,M,V){return B.index=V,e?(V=B.alternate,V!==null?(V=V.index,V<M?(B.flags|=67108866,M):V):(B.flags|=67108866,M)):(B.flags|=1048576,M)}function v(B){return e&&B.alternate===null&&(B.flags|=67108866),B}function j(B,M,V,se){return M===null||M.tag!==6?(M=ql(V,B.mode,se),M.return=B,M):(M=c(M,V),M.return=B,M)}function O(B,M,V,se){var ke=V.type;return ke===D?ee(B,M,V.props.children,se,V.key):M!==null&&(M.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===fe&&wn(ke)===M.type)?(M=c(M,V.props),Kl(M,V),M.return=B,M):(M=wi(V.type,V.key,V.props,null,B.mode,se),Kl(M,V),M.return=B,M)}function G(B,M,V,se){return M===null||M.tag!==4||M.stateNode.containerInfo!==V.containerInfo||M.stateNode.implementation!==V.implementation?(M=$l(V,B.mode,se),M.return=B,M):(M=c(M,V.children||[]),M.return=B,M)}function ee(B,M,V,se,ke){return M===null||M.tag!==7?(M=Ns(V,B.mode,se,ke),M.return=B,M):(M=c(M,V),M.return=B,M)}function ae(B,M,V){if(typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint")return M=ql(""+M,B.mode,V),M.return=B,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case A:return V=wi(M.type,M.key,M.props,null,B.mode,V),Kl(V,M),V.return=B,V;case $:return M=$l(M,B.mode,V),M.return=B,M;case fe:return M=wn(M),ae(B,M,V)}if(at(M)||Oe(M))return M=Ns(M,B.mode,V,null),M.return=B,M;if(typeof M.then=="function")return ae(B,wc(M),V);if(M.$$typeof===q)return ae(B,Qe(B,M),V);_c(B,M)}return null}function Y(B,M,V,se){var ke=M!==null?M.key:null;if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return ke!==null?null:j(B,M,""+V,se);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case A:return V.key===ke?O(B,M,V,se):null;case $:return V.key===ke?G(B,M,V,se):null;case fe:return V=wn(V),Y(B,M,V,se)}if(at(V)||Oe(V))return ke!==null?null:ee(B,M,V,se,null);if(typeof V.then=="function")return Y(B,M,wc(V),se);if(V.$$typeof===q)return Y(B,M,Qe(B,V),se);_c(B,V)}return null}function Q(B,M,V,se,ke){if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return B=B.get(V)||null,j(M,B,""+se,ke);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case A:return B=B.get(se.key===null?V:se.key)||null,O(M,B,se,ke);case $:return B=B.get(se.key===null?V:se.key)||null,G(M,B,se,ke);case fe:return se=wn(se),Q(B,M,V,se,ke)}if(at(se)||Oe(se))return B=B.get(V)||null,ee(M,B,se,ke,null);if(typeof se.then=="function")return Q(B,M,V,wc(se),ke);if(se.$$typeof===q)return Q(B,M,V,Qe(M,se),ke);_c(M,se)}return null}function we(B,M,V,se){for(var ke=null,Ye=null,je=M,qe=M=0,Ve=null;je!==null&&qe<V.length;qe++){je.index>qe?(Ve=je,je=null):Ve=je.sibling;var Ke=Y(B,je,V[qe],se);if(Ke===null){je===null&&(je=Ve);break}e&&je&&Ke.alternate===null&&t(B,je),M=h(Ke,M,qe),Ye===null?ke=Ke:Ye.sibling=Ke,Ye=Ke,je=Ve}if(qe===V.length)return s(B,je),$e&&ts(B,qe),ke;if(je===null){for(;qe<V.length;qe++)je=ae(B,V[qe],se),je!==null&&(M=h(je,M,qe),Ye===null?ke=je:Ye.sibling=je,Ye=je);return $e&&ts(B,qe),ke}for(je=l(je);qe<V.length;qe++)Ve=Q(je,B,qe,V[qe],se),Ve!==null&&(e&&Ve.alternate!==null&&je.delete(Ve.key===null?qe:Ve.key),M=h(Ve,M,qe),Ye===null?ke=Ve:Ye.sibling=Ve,Ye=Ve);return e&&je.forEach(function(Va){return t(B,Va)}),$e&&ts(B,qe),ke}function Ce(B,M,V,se){if(V==null)throw Error(o(151));for(var ke=null,Ye=null,je=M,qe=M=0,Ve=null,Ke=V.next();je!==null&&!Ke.done;qe++,Ke=V.next()){je.index>qe?(Ve=je,je=null):Ve=je.sibling;var Va=Y(B,je,Ke.value,se);if(Va===null){je===null&&(je=Ve);break}e&&je&&Va.alternate===null&&t(B,je),M=h(Va,M,qe),Ye===null?ke=Va:Ye.sibling=Va,Ye=Va,je=Ve}if(Ke.done)return s(B,je),$e&&ts(B,qe),ke;if(je===null){for(;!Ke.done;qe++,Ke=V.next())Ke=ae(B,Ke.value,se),Ke!==null&&(M=h(Ke,M,qe),Ye===null?ke=Ke:Ye.sibling=Ke,Ye=Ke);return $e&&ts(B,qe),ke}for(je=l(je);!Ke.done;qe++,Ke=V.next())Ke=Q(je,B,qe,Ke.value,se),Ke!==null&&(e&&Ke.alternate!==null&&je.delete(Ke.key===null?qe:Ke.key),M=h(Ke,M,qe),Ye===null?ke=Ke:Ye.sibling=Ke,Ye=Ke);return e&&je.forEach(function(Ev){return t(B,Ev)}),$e&&ts(B,qe),ke}function st(B,M,V,se){if(typeof V=="object"&&V!==null&&V.type===D&&V.key===null&&(V=V.props.children),typeof V=="object"&&V!==null){switch(V.$$typeof){case A:e:{for(var ke=V.key;M!==null;){if(M.key===ke){if(ke=V.type,ke===D){if(M.tag===7){s(B,M.sibling),se=c(M,V.props.children),se.return=B,B=se;break e}}else if(M.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===fe&&wn(ke)===M.type){s(B,M.sibling),se=c(M,V.props),Kl(se,V),se.return=B,B=se;break e}s(B,M);break}else t(B,M);M=M.sibling}V.type===D?(se=Ns(V.props.children,B.mode,se,V.key),se.return=B,B=se):(se=wi(V.type,V.key,V.props,null,B.mode,se),Kl(se,V),se.return=B,B=se)}return v(B);case $:e:{for(ke=V.key;M!==null;){if(M.key===ke)if(M.tag===4&&M.stateNode.containerInfo===V.containerInfo&&M.stateNode.implementation===V.implementation){s(B,M.sibling),se=c(M,V.children||[]),se.return=B,B=se;break e}else{s(B,M);break}else t(B,M);M=M.sibling}se=$l(V,B.mode,se),se.return=B,B=se}return v(B);case fe:return V=wn(V),st(B,M,V,se)}if(at(V))return we(B,M,V,se);if(Oe(V)){if(ke=Oe(V),typeof ke!="function")throw Error(o(150));return V=ke.call(V),Ce(B,M,V,se)}if(typeof V.then=="function")return st(B,M,wc(V),se);if(V.$$typeof===q)return st(B,M,Qe(B,V),se);_c(B,V)}return typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint"?(V=""+V,M!==null&&M.tag===6?(s(B,M.sibling),se=c(M,V),se.return=B,B=se):(s(B,M),se=ql(V,B.mode,se),se.return=B,B=se),v(B)):s(B,M)}return function(B,M,V,se){try{Yl=0;var ke=st(B,M,V,se);return Ci=null,ke}catch(je){if(je===ki||je===yc)throw je;var Ye=Xt(29,je,null,B.mode);return Ye.lanes=se,Ye.return=B,Ye}}}var jn=Mf(!0),Lf=Mf(!1),ka=!1;function Zu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Fu(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ca(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Ta(e,t,s){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(Xe&2)!==0){var c=l.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),l.pending=t,t=vn(e),gc(e,null,s),t}return yi(e,l,t,s),vn(e)}function Wl(e,t,s){if(t=t.updateQueue,t!==null&&(t=t.shared,(s&4194048)!==0)){var l=t.lanes;l&=e.pendingLanes,s|=l,t.lanes=s,Gn(e,s)}}function ed(e,t){var s=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,s===l)){var c=null,h=null;if(s=s.firstBaseUpdate,s!==null){do{var v={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};h===null?c=h=v:h=h.next=v,s=s.next}while(s!==null);h===null?c=h=t:h=h.next=t}else c=h=t;s={baseState:l.baseState,firstBaseUpdate:c,lastBaseUpdate:h,shared:l.shared,callbacks:l.callbacks},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=t:e.next=t,s.lastBaseUpdate=t}var td=!1;function Xl(){if(td){var e=Ei;if(e!==null)throw e}}function Jl(e,t,s,l){td=!1;var c=e.updateQueue;ka=!1;var h=c.firstBaseUpdate,v=c.lastBaseUpdate,j=c.shared.pending;if(j!==null){c.shared.pending=null;var O=j,G=O.next;O.next=null,v===null?h=G:v.next=G,v=O;var ee=e.alternate;ee!==null&&(ee=ee.updateQueue,j=ee.lastBaseUpdate,j!==v&&(j===null?ee.firstBaseUpdate=G:j.next=G,ee.lastBaseUpdate=O))}if(h!==null){var ae=c.baseState;v=0,ee=G=O=null,j=h;do{var Y=j.lane&-536870913,Q=Y!==j.lane;if(Q?(Ie&Y)===Y:(l&Y)===Y){Y!==0&&Y===Ni&&(td=!0),ee!==null&&(ee=ee.next={lane:0,tag:j.tag,payload:j.payload,callback:null,next:null});e:{var we=e,Ce=j;Y=t;var st=s;switch(Ce.tag){case 1:if(we=Ce.payload,typeof we=="function"){ae=we.call(st,ae,Y);break e}ae=we;break e;case 3:we.flags=we.flags&-65537|128;case 0:if(we=Ce.payload,Y=typeof we=="function"?we.call(st,ae,Y):we,Y==null)break e;ae=N({},ae,Y);break e;case 2:ka=!0}}Y=j.callback,Y!==null&&(e.flags|=64,Q&&(e.flags|=8192),Q=c.callbacks,Q===null?c.callbacks=[Y]:Q.push(Y))}else Q={lane:Y,tag:j.tag,payload:j.payload,callback:j.callback,next:null},ee===null?(G=ee=Q,O=ae):ee=ee.next=Q,v|=Y;if(j=j.next,j===null){if(j=c.shared.pending,j===null)break;Q=j,j=Q.next,Q.next=null,c.lastBaseUpdate=Q,c.shared.pending=null}}while(!0);ee===null&&(O=ae),c.baseState=O,c.firstBaseUpdate=G,c.lastBaseUpdate=ee,h===null&&(c.shared.lanes=0),Da|=v,e.lanes=v,e.memoizedState=ae}}function qf(e,t){if(typeof e!="function")throw Error(o(191,e));e.call(t)}function $f(e,t){var s=e.callbacks;if(s!==null)for(e.callbacks=null,e=0;e<s.length;e++)qf(s[e],t)}var Ti=y(null),jc=y(0);function Bf(e,t){e=Qs,J(jc,e),J(Ti,t),Qs=e|t.baseLanes}function rd(){J(jc,Qs),J(Ti,Ti.current)}function sd(){Qs=jc.current,T(Ti),T(jc)}var _r=y(null),Br=null;function Aa(e){var t=e.alternate;J(wt,wt.current&1),J(_r,e),Br===null&&(t===null||Ti.current!==null||t.memoizedState!==null)&&(Br=e)}function ad(e){J(wt,wt.current),J(_r,e),Br===null&&(Br=e)}function Pf(e){e.tag===22?(J(wt,wt.current),J(_r,e),Br===null&&(Br=e)):Ra()}function Ra(){J(wt,wt.current),J(_r,_r.current)}function jr(e){T(_r),Br===e&&(Br=null),T(wt)}var wt=y(0);function Sc(e){for(var t=e;t!==null;){if(t.tag===13){var s=t.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||uh(s)||dh(s)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Is=0,Le=null,tt=null,jt=null,Nc=!1,Ai=!1,Sn=!1,Ec=0,Ql=0,Ri=null,gx=0;function vt(){throw Error(o(321))}function nd(e,t){if(t===null)return!1;for(var s=0;s<t.length&&s<e.length;s++)if(!Pt(e[s],t[s]))return!1;return!0}function id(e,t,s,l,c,h){return Is=h,Le=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,I.H=e===null||e.memoizedState===null?Sm:wd,Sn=!1,h=s(l,c),Sn=!1,Ai&&(h=If(t,s,l,c)),Hf(e),h}function Hf(e){I.H=eo;var t=tt!==null&&tt.next!==null;if(Is=0,jt=tt=Le=null,Nc=!1,Ql=0,Ri=null,t)throw Error(o(300));e===null||St||(e=e.dependencies,e!==null&&oe(e)&&(St=!0))}function If(e,t,s,l){Le=e;var c=0;do{if(Ai&&(Ri=null),Ql=0,Ai=!1,25<=c)throw Error(o(301));if(c+=1,jt=tt=null,e.updateQueue!=null){var h=e.updateQueue;h.lastEffect=null,h.events=null,h.stores=null,h.memoCache!=null&&(h.memoCache.index=0)}I.H=Nm,h=t(s,l)}while(Ai);return h}function xx(){var e=I.H,t=e.useState()[0];return t=typeof t.then=="function"?Zl(t):t,e=e.useState()[0],(tt!==null?tt.memoizedState:null)!==e&&(Le.flags|=1024),t}function ld(){var e=Ec!==0;return Ec=0,e}function od(e,t,s){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s}function cd(e){if(Nc){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Nc=!1}Is=0,jt=tt=Le=null,Ai=!1,Ql=Ec=0,Ri=null}function Jt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return jt===null?Le.memoizedState=jt=e:jt=jt.next=e,jt}function _t(){if(tt===null){var e=Le.alternate;e=e!==null?e.memoizedState:null}else e=tt.next;var t=jt===null?Le.memoizedState:jt.next;if(t!==null)jt=t,tt=e;else{if(e===null)throw Le.alternate===null?Error(o(467)):Error(o(310));tt=e,e={memoizedState:tt.memoizedState,baseState:tt.baseState,baseQueue:tt.baseQueue,queue:tt.queue,next:null},jt===null?Le.memoizedState=jt=e:jt=jt.next=e}return jt}function kc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Zl(e){var t=Ql;return Ql+=1,Ri===null&&(Ri=[]),e=zf(Ri,e,t),t=Le,(jt===null?t.memoizedState:jt.next)===null&&(t=t.alternate,I.H=t===null||t.memoizedState===null?Sm:wd),e}function Cc(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Zl(e);if(e.$$typeof===q)return ge(e)}throw Error(o(438,String(e)))}function ud(e){var t=null,s=Le.updateQueue;if(s!==null&&(t=s.memoCache),t==null){var l=Le.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(t={data:l.data.map(function(c){return c.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),s===null&&(s=kc(),Le.updateQueue=s),s.memoCache=t,s=t.data[t.index],s===void 0)for(s=t.data[t.index]=Array(e),l=0;l<e;l++)s[l]=Se;return t.index++,s}function Vs(e,t){return typeof t=="function"?t(e):t}function Tc(e){var t=_t();return dd(t,tt,e)}function dd(e,t,s){var l=e.queue;if(l===null)throw Error(o(311));l.lastRenderedReducer=s;var c=e.baseQueue,h=l.pending;if(h!==null){if(c!==null){var v=c.next;c.next=h.next,h.next=v}t.baseQueue=c=h,l.pending=null}if(h=e.baseState,c===null)e.memoizedState=h;else{t=c.next;var j=v=null,O=null,G=t,ee=!1;do{var ae=G.lane&-536870913;if(ae!==G.lane?(Ie&ae)===ae:(Is&ae)===ae){var Y=G.revertLane;if(Y===0)O!==null&&(O=O.next={lane:0,revertLane:0,gesture:null,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),ae===Ni&&(ee=!0);else if((Is&Y)===Y){G=G.next,Y===Ni&&(ee=!0);continue}else ae={lane:0,revertLane:G.revertLane,gesture:null,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},O===null?(j=O=ae,v=h):O=O.next=ae,Le.lanes|=Y,Da|=Y;ae=G.action,Sn&&s(h,ae),h=G.hasEagerState?G.eagerState:s(h,ae)}else Y={lane:ae,revertLane:G.revertLane,gesture:G.gesture,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},O===null?(j=O=Y,v=h):O=O.next=Y,Le.lanes|=ae,Da|=ae;G=G.next}while(G!==null&&G!==t);if(O===null?v=h:O.next=j,!Pt(h,e.memoizedState)&&(St=!0,ee&&(s=Ei,s!==null)))throw s;e.memoizedState=h,e.baseState=v,e.baseQueue=O,l.lastRenderedState=h}return c===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function hd(e){var t=_t(),s=t.queue;if(s===null)throw Error(o(311));s.lastRenderedReducer=e;var l=s.dispatch,c=s.pending,h=t.memoizedState;if(c!==null){s.pending=null;var v=c=c.next;do h=e(h,v.action),v=v.next;while(v!==c);Pt(h,t.memoizedState)||(St=!0),t.memoizedState=h,t.baseQueue===null&&(t.baseState=h),s.lastRenderedState=h}return[h,l]}function Vf(e,t,s){var l=Le,c=_t(),h=$e;if(h){if(s===void 0)throw Error(o(407));s=s()}else s=t();var v=!Pt((tt||c).memoizedState,s);if(v&&(c.memoizedState=s,St=!0),c=c.queue,pd(Kf.bind(null,l,c,e),[e]),c.getSnapshot!==t||v||jt!==null&&jt.memoizedState.tag&1){if(l.flags|=2048,Oi(9,{destroy:void 0},Yf.bind(null,l,c,s,t),null),it===null)throw Error(o(349));h||(Is&127)!==0||Gf(l,t,s)}return s}function Gf(e,t,s){e.flags|=16384,e={getSnapshot:t,value:s},t=Le.updateQueue,t===null?(t=kc(),Le.updateQueue=t,t.stores=[e]):(s=t.stores,s===null?t.stores=[e]:s.push(e))}function Yf(e,t,s,l){t.value=s,t.getSnapshot=l,Wf(t)&&Xf(e)}function Kf(e,t,s){return s(function(){Wf(t)&&Xf(e)})}function Wf(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!Pt(e,s)}catch{return!0}}function Xf(e){var t=Hs(e,2);t!==null&&fr(t,e,2)}function fd(e){var t=Jt();if(typeof e=="function"){var s=e;if(e=s(),Sn){Dr(!0);try{s()}finally{Dr(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vs,lastRenderedState:e},t}function Jf(e,t,s,l){return e.baseState=s,dd(e,tt,typeof l=="function"?l:Vs)}function vx(e,t,s,l,c){if(Oc(e))throw Error(o(485));if(e=t.action,e!==null){var h={payload:c,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){h.listeners.push(v)}};I.T!==null?s(!0):h.isTransition=!1,l(h),s=t.pending,s===null?(h.next=t.pending=h,Qf(t,h)):(h.next=s.next,t.pending=s.next=h)}}function Qf(e,t){var s=t.action,l=t.payload,c=e.state;if(t.isTransition){var h=I.T,v={};I.T=v;try{var j=s(c,l),O=I.S;O!==null&&O(v,j),Zf(e,t,j)}catch(G){md(e,t,G)}finally{h!==null&&v.types!==null&&(h.types=v.types),I.T=h}}else try{h=s(c,l),Zf(e,t,h)}catch(G){md(e,t,G)}}function Zf(e,t,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(l){Ff(e,t,l)},function(l){return md(e,t,l)}):Ff(e,t,s)}function Ff(e,t,s){t.status="fulfilled",t.value=s,em(t),e.state=s,t=e.pending,t!==null&&(s=t.next,s===t?e.pending=null:(s=s.next,t.next=s,Qf(e,s)))}function md(e,t,s){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do t.status="rejected",t.reason=s,em(t),t=t.next;while(t!==l)}e.action=null}function em(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function tm(e,t){return t}function rm(e,t){if($e){var s=it.formState;if(s!==null){e:{var l=Le;if($e){if(nt){t:{for(var c=nt,h=or;c.nodeType!==8;){if(!h){c=null;break t}if(c=Pr(c.nextSibling),c===null){c=null;break t}}h=c.data,c=h==="F!"||h==="F"?c:null}if(c){nt=Pr(c.nextSibling),l=c.data==="F!";break e}}rs(l)}l=!1}l&&(t=s[0])}}return s=Jt(),s.memoizedState=s.baseState=t,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:tm,lastRenderedState:t},s.queue=l,s=wm.bind(null,Le,l),l.dispatch=s,l=fd(!1),h=bd.bind(null,Le,!1,l.queue),l=Jt(),c={state:t,dispatch:null,action:e,pending:null},l.queue=c,s=vx.bind(null,Le,c,h,s),c.dispatch=s,l.memoizedState=e,[t,s,!1]}function sm(e){var t=_t();return am(t,tt,e)}function am(e,t,s){if(t=dd(e,t,tm)[0],e=Tc(Vs)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var l=Zl(t)}catch(v){throw v===ki?yc:v}else l=t;t=_t();var c=t.queue,h=c.dispatch;return s!==t.memoizedState&&(Le.flags|=2048,Oi(9,{destroy:void 0},yx.bind(null,c,s),null)),[l,h,e]}function yx(e,t){e.action=t}function nm(e){var t=_t(),s=tt;if(s!==null)return am(t,s,e);_t(),t=t.memoizedState,s=_t();var l=s.queue.dispatch;return s.memoizedState=e,[t,l,!1]}function Oi(e,t,s,l){return e={tag:e,create:s,deps:l,inst:t,next:null},t=Le.updateQueue,t===null&&(t=kc(),Le.updateQueue=t),s=t.lastEffect,s===null?t.lastEffect=e.next=e:(l=s.next,s.next=e,e.next=l,t.lastEffect=e),e}function im(){return _t().memoizedState}function Ac(e,t,s,l){var c=Jt();Le.flags|=e,c.memoizedState=Oi(1|t,{destroy:void 0},s,l===void 0?null:l)}function Rc(e,t,s,l){var c=_t();l=l===void 0?null:l;var h=c.memoizedState.inst;tt!==null&&l!==null&&nd(l,tt.memoizedState.deps)?c.memoizedState=Oi(t,h,s,l):(Le.flags|=e,c.memoizedState=Oi(1|t,h,s,l))}function lm(e,t){Ac(8390656,8,e,t)}function pd(e,t){Rc(2048,8,e,t)}function bx(e){Le.flags|=4;var t=Le.updateQueue;if(t===null)t=kc(),Le.updateQueue=t,t.events=[e];else{var s=t.events;s===null?t.events=[e]:s.push(e)}}function om(e){var t=_t().memoizedState;return bx({ref:t,nextImpl:e}),function(){if((Xe&2)!==0)throw Error(o(440));return t.impl.apply(void 0,arguments)}}function cm(e,t){return Rc(4,2,e,t)}function um(e,t){return Rc(4,4,e,t)}function dm(e,t){if(typeof t=="function"){e=e();var s=t(e);return function(){typeof s=="function"?s():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function hm(e,t,s){s=s!=null?s.concat([e]):null,Rc(4,4,dm.bind(null,t,e),s)}function gd(){}function fm(e,t){var s=_t();t=t===void 0?null:t;var l=s.memoizedState;return t!==null&&nd(t,l[1])?l[0]:(s.memoizedState=[e,t],e)}function mm(e,t){var s=_t();t=t===void 0?null:t;var l=s.memoizedState;if(t!==null&&nd(t,l[1]))return l[0];if(l=e(),Sn){Dr(!0);try{e()}finally{Dr(!1)}}return s.memoizedState=[l,t],l}function xd(e,t,s){return s===void 0||(Is&1073741824)!==0&&(Ie&261930)===0?e.memoizedState=t:(e.memoizedState=s,e=pp(),Le.lanes|=e,Da|=e,s)}function pm(e,t,s,l){return Pt(s,t)?s:Ti.current!==null?(e=xd(e,s,l),Pt(e,t)||(St=!0),e):(Is&42)===0||(Is&1073741824)!==0&&(Ie&261930)===0?(St=!0,e.memoizedState=s):(e=pp(),Le.lanes|=e,Da|=e,t)}function gm(e,t,s,l,c){var h=R.p;R.p=h!==0&&8>h?h:8;var v=I.T,j={};I.T=j,bd(e,!1,t,s);try{var O=c(),G=I.S;if(G!==null&&G(j,O),O!==null&&typeof O=="object"&&typeof O.then=="function"){var ee=px(O,l);Fl(e,t,ee,Er(e))}else Fl(e,t,l,Er(e))}catch(ae){Fl(e,t,{then:function(){},status:"rejected",reason:ae},Er())}finally{R.p=h,v!==null&&j.types!==null&&(v.types=j.types),I.T=v}}function wx(){}function vd(e,t,s,l){if(e.tag!==5)throw Error(o(476));var c=xm(e).queue;gm(e,c,t,le,s===null?wx:function(){return vm(e),s(l)})}function xm(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:le,baseState:le,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vs,lastRenderedState:le},next:null};var s={};return t.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vs,lastRenderedState:s},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function vm(e){var t=xm(e);t.next===null&&(t=e.alternate.memoizedState),Fl(e,t.next.queue,{},Er())}function yd(){return ge(xo)}function ym(){return _t().memoizedState}function bm(){return _t().memoizedState}function _x(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var s=Er();e=Ca(s);var l=Ta(t,e,s);l!==null&&(fr(l,t,s),Wl(l,t,s)),t={cache:Wu()},e.payload=t;return}t=t.return}}function jx(e,t,s){var l=Er();s={lane:l,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},Oc(e)?_m(t,s):(s=bi(e,t,s,l),s!==null&&(fr(s,e,l),jm(s,t,l)))}function wm(e,t,s){var l=Er();Fl(e,t,s,l)}function Fl(e,t,s,l){var c={lane:l,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null};if(Oc(e))_m(t,c);else{var h=e.alternate;if(e.lanes===0&&(h===null||h.lanes===0)&&(h=t.lastRenderedReducer,h!==null))try{var v=t.lastRenderedState,j=h(v,s);if(c.hasEagerState=!0,c.eagerState=j,Pt(j,v))return yi(e,t,c,0),it===null&&vi(),!1}catch{}if(s=bi(e,t,c,l),s!==null)return fr(s,e,l),jm(s,t,l),!0}return!1}function bd(e,t,s,l){if(l={lane:2,revertLane:Zd(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Oc(e)){if(t)throw Error(o(479))}else t=bi(e,s,l,2),t!==null&&fr(t,e,2)}function Oc(e){var t=e.alternate;return e===Le||t!==null&&t===Le}function _m(e,t){Ai=Nc=!0;var s=e.pending;s===null?t.next=t:(t.next=s.next,s.next=t),e.pending=t}function jm(e,t,s){if((s&4194048)!==0){var l=t.lanes;l&=e.pendingLanes,s|=l,t.lanes=s,Gn(e,s)}}var eo={readContext:ge,use:Cc,useCallback:vt,useContext:vt,useEffect:vt,useImperativeHandle:vt,useLayoutEffect:vt,useInsertionEffect:vt,useMemo:vt,useReducer:vt,useRef:vt,useState:vt,useDebugValue:vt,useDeferredValue:vt,useTransition:vt,useSyncExternalStore:vt,useId:vt,useHostTransitionStatus:vt,useFormState:vt,useActionState:vt,useOptimistic:vt,useMemoCache:vt,useCacheRefresh:vt};eo.useEffectEvent=vt;var Sm={readContext:ge,use:Cc,useCallback:function(e,t){return Jt().memoizedState=[e,t===void 0?null:t],e},useContext:ge,useEffect:lm,useImperativeHandle:function(e,t,s){s=s!=null?s.concat([e]):null,Ac(4194308,4,dm.bind(null,t,e),s)},useLayoutEffect:function(e,t){return Ac(4194308,4,e,t)},useInsertionEffect:function(e,t){Ac(4,2,e,t)},useMemo:function(e,t){var s=Jt();t=t===void 0?null:t;var l=e();if(Sn){Dr(!0);try{e()}finally{Dr(!1)}}return s.memoizedState=[l,t],l},useReducer:function(e,t,s){var l=Jt();if(s!==void 0){var c=s(t);if(Sn){Dr(!0);try{s(t)}finally{Dr(!1)}}}else c=t;return l.memoizedState=l.baseState=c,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:c},l.queue=e,e=e.dispatch=jx.bind(null,Le,e),[l.memoizedState,e]},useRef:function(e){var t=Jt();return e={current:e},t.memoizedState=e},useState:function(e){e=fd(e);var t=e.queue,s=wm.bind(null,Le,t);return t.dispatch=s,[e.memoizedState,s]},useDebugValue:gd,useDeferredValue:function(e,t){var s=Jt();return xd(s,e,t)},useTransition:function(){var e=fd(!1);return e=gm.bind(null,Le,e.queue,!0,!1),Jt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,s){var l=Le,c=Jt();if($e){if(s===void 0)throw Error(o(407));s=s()}else{if(s=t(),it===null)throw Error(o(349));(Ie&127)!==0||Gf(l,t,s)}c.memoizedState=s;var h={value:s,getSnapshot:t};return c.queue=h,lm(Kf.bind(null,l,h,e),[e]),l.flags|=2048,Oi(9,{destroy:void 0},Yf.bind(null,l,h,s,t),null),s},useId:function(){var e=Jt(),t=it.identifierPrefix;if($e){var s=br,l=yr;s=(l&~(1<<32-Ut(l)-1)).toString(32)+s,t="_"+t+"R_"+s,s=Ec++,0<s&&(t+="H"+s.toString(32)),t+="_"}else s=gx++,t="_"+t+"r_"+s.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:yd,useFormState:rm,useActionState:rm,useOptimistic:function(e){var t=Jt();t.memoizedState=t.baseState=e;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=s,t=bd.bind(null,Le,!0,s),s.dispatch=t,[e,t]},useMemoCache:ud,useCacheRefresh:function(){return Jt().memoizedState=_x.bind(null,Le)},useEffectEvent:function(e){var t=Jt(),s={impl:e};return t.memoizedState=s,function(){if((Xe&2)!==0)throw Error(o(440));return s.impl.apply(void 0,arguments)}}},wd={readContext:ge,use:Cc,useCallback:fm,useContext:ge,useEffect:pd,useImperativeHandle:hm,useInsertionEffect:cm,useLayoutEffect:um,useMemo:mm,useReducer:Tc,useRef:im,useState:function(){return Tc(Vs)},useDebugValue:gd,useDeferredValue:function(e,t){var s=_t();return pm(s,tt.memoizedState,e,t)},useTransition:function(){var e=Tc(Vs)[0],t=_t().memoizedState;return[typeof e=="boolean"?e:Zl(e),t]},useSyncExternalStore:Vf,useId:ym,useHostTransitionStatus:yd,useFormState:sm,useActionState:sm,useOptimistic:function(e,t){var s=_t();return Jf(s,tt,e,t)},useMemoCache:ud,useCacheRefresh:bm};wd.useEffectEvent=om;var Nm={readContext:ge,use:Cc,useCallback:fm,useContext:ge,useEffect:pd,useImperativeHandle:hm,useInsertionEffect:cm,useLayoutEffect:um,useMemo:mm,useReducer:hd,useRef:im,useState:function(){return hd(Vs)},useDebugValue:gd,useDeferredValue:function(e,t){var s=_t();return tt===null?xd(s,e,t):pm(s,tt.memoizedState,e,t)},useTransition:function(){var e=hd(Vs)[0],t=_t().memoizedState;return[typeof e=="boolean"?e:Zl(e),t]},useSyncExternalStore:Vf,useId:ym,useHostTransitionStatus:yd,useFormState:nm,useActionState:nm,useOptimistic:function(e,t){var s=_t();return tt!==null?Jf(s,tt,e,t):(s.baseState=e,[e,s.queue.dispatch])},useMemoCache:ud,useCacheRefresh:bm};Nm.useEffectEvent=om;function _d(e,t,s,l){t=e.memoizedState,s=s(l,t),s=s==null?t:N({},t,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var jd={enqueueSetState:function(e,t,s){e=e._reactInternals;var l=Er(),c=Ca(l);c.payload=t,s!=null&&(c.callback=s),t=Ta(e,c,l),t!==null&&(fr(t,e,l),Wl(t,e,l))},enqueueReplaceState:function(e,t,s){e=e._reactInternals;var l=Er(),c=Ca(l);c.tag=1,c.payload=t,s!=null&&(c.callback=s),t=Ta(e,c,l),t!==null&&(fr(t,e,l),Wl(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var s=Er(),l=Ca(s);l.tag=2,t!=null&&(l.callback=t),t=Ta(e,l,s),t!==null&&(fr(t,e,s),Wl(t,e,s))}};function Em(e,t,s,l,c,h,v){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,h,v):t.prototype&&t.prototype.isPureReactComponent?!Lr(s,l)||!Lr(c,h):!0}function km(e,t,s,l){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(s,l),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(s,l),t.state!==e&&jd.enqueueReplaceState(t,t.state,null)}function Nn(e,t){var s=t;if("ref"in t){s={};for(var l in t)l!=="ref"&&(s[l]=t[l])}if(e=e.defaultProps){s===t&&(s=N({},s));for(var c in e)s[c]===void 0&&(s[c]=e[c])}return s}function Cm(e){xi(e)}function Tm(e){console.error(e)}function Am(e){xi(e)}function zc(e,t){try{var s=e.onUncaughtError;s(t.value,{componentStack:t.stack})}catch(l){setTimeout(function(){throw l})}}function Rm(e,t,s){try{var l=e.onCaughtError;l(s.value,{componentStack:s.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(c){setTimeout(function(){throw c})}}function Sd(e,t,s){return s=Ca(s),s.tag=3,s.payload={element:null},s.callback=function(){zc(e,t)},s}function Om(e){return e=Ca(e),e.tag=3,e}function zm(e,t,s,l){var c=s.type.getDerivedStateFromError;if(typeof c=="function"){var h=l.value;e.payload=function(){return c(h)},e.callback=function(){Rm(t,s,l)}}var v=s.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(e.callback=function(){Rm(t,s,l),typeof c!="function"&&(Ua===null?Ua=new Set([this]):Ua.add(this));var j=l.stack;this.componentDidCatch(l.value,{componentStack:j!==null?j:""})})}function Sx(e,t,s,l,c){if(s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(t=s.alternate,t!==null&&be(t,s,c,!0),s=_r.current,s!==null){switch(s.tag){case 31:case 13:return Br===null?Gc():s.alternate===null&&yt===0&&(yt=3),s.flags&=-257,s.flags|=65536,s.lanes=c,l===bc?s.flags|=16384:(t=s.updateQueue,t===null?s.updateQueue=new Set([l]):t.add(l),Xd(e,l,c)),!1;case 22:return s.flags|=65536,l===bc?s.flags|=16384:(t=s.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([l])},s.updateQueue=t):(s=t.retryQueue,s===null?t.retryQueue=new Set([l]):s.add(l)),Xd(e,l,c)),!1}throw Error(o(435,s.tag))}return Xd(e,l,c),Gc(),!1}if($e)return t=_r.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=c,l!==Si&&(e=Error(o(422),{cause:l}),C(nr(e,s)))):(l!==Si&&(t=Error(o(423),{cause:l}),C(nr(t,s))),e=e.current.alternate,e.flags|=65536,c&=-c,e.lanes|=c,l=nr(l,s),c=Sd(e.stateNode,l,c),ed(e,c),yt!==4&&(yt=2)),!1;var h=Error(o(520),{cause:l});if(h=nr(h,s),oo===null?oo=[h]:oo.push(h),yt!==4&&(yt=2),t===null)return!0;l=nr(l,s),s=t;do{switch(s.tag){case 3:return s.flags|=65536,e=c&-c,s.lanes|=e,e=Sd(s.stateNode,l,e),ed(s,e),!1;case 1:if(t=s.type,h=s.stateNode,(s.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||h!==null&&typeof h.componentDidCatch=="function"&&(Ua===null||!Ua.has(h))))return s.flags|=65536,c&=-c,s.lanes|=c,c=Om(c),zm(c,e,s,l),ed(s,c),!1}s=s.return}while(s!==null);return!1}var Nd=Error(o(461)),St=!1;function Mt(e,t,s,l){t.child=e===null?Lf(t,null,s,l):jn(t,e.child,s,l)}function Dm(e,t,s,l,c){s=s.render;var h=t.ref;if("ref"in l){var v={};for(var j in l)j!=="ref"&&(v[j]=l[j])}else v=l;return xe(t),l=id(e,t,s,v,h,c),j=ld(),e!==null&&!St?(od(e,t,c),Gs(e,t,c)):($e&&j&&Pl(t),t.flags|=1,Mt(e,t,l,c),t.child)}function Um(e,t,s,l,c){if(e===null){var h=s.type;return typeof h=="function"&&!Ml(h)&&h.defaultProps===void 0&&s.compare===null?(t.tag=15,t.type=h,Mm(e,t,h,l,c)):(e=wi(s.type,null,l,t,t.mode,c),e.ref=t.ref,e.return=t,t.child=e)}if(h=e.child,!zd(e,c)){var v=h.memoizedProps;if(s=s.compare,s=s!==null?s:Lr,s(v,l)&&e.ref===t.ref)return Gs(e,t,c)}return t.flags|=1,e=es(h,l),e.ref=t.ref,e.return=t,t.child=e}function Mm(e,t,s,l,c){if(e!==null){var h=e.memoizedProps;if(Lr(h,l)&&e.ref===t.ref)if(St=!1,t.pendingProps=l=h,zd(e,c))(e.flags&131072)!==0&&(St=!0);else return t.lanes=e.lanes,Gs(e,t,c)}return Ed(e,t,s,l,c)}function Lm(e,t,s,l){var c=l.children,h=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((t.flags&128)!==0){if(h=h!==null?h.baseLanes|s:s,e!==null){for(l=t.child=e.child,c=0;l!==null;)c=c|l.lanes|l.childLanes,l=l.sibling;l=c&~h}else l=0,t.child=null;return qm(e,t,h,s,l)}if((s&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&vc(t,h!==null?h.cachePool:null),h!==null?Bf(t,h):rd(),Pf(t);else return l=t.lanes=536870912,qm(e,t,h!==null?h.baseLanes|s:s,s,l)}else h!==null?(vc(t,h.cachePool),Bf(t,h),Ra(),t.memoizedState=null):(e!==null&&vc(t,null),rd(),Ra());return Mt(e,t,c,s),t.child}function to(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function qm(e,t,s,l,c){var h=Ju();return h=h===null?null:{parent:ot._currentValue,pool:h},t.memoizedState={baseLanes:s,cachePool:h},e!==null&&vc(t,null),rd(),Pf(t),e!==null&&be(e,t,l,!0),t.childLanes=c,null}function Dc(e,t){return t=Mc({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function $m(e,t,s){return jn(t,e.child,null,s),e=Dc(t,t.pendingProps),e.flags|=2,jr(t),t.memoizedState=null,e}function Nx(e,t,s){var l=t.pendingProps,c=(t.flags&128)!==0;if(t.flags&=-129,e===null){if($e){if(l.mode==="hidden")return e=Dc(t,l),t.lanes=536870912,to(null,e);if(ad(t),(e=nt)?(e=Qp(e,or),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Es!==null?{id:yr,overflow:br}:null,retryLane:536870912,hydrationErrors:null},s=yn(e),s.return=t,t.child=s,Ct=t,nt=null)):e=null,e===null)throw rs(t);return t.lanes=536870912,null}return Dc(t,l)}var h=e.memoizedState;if(h!==null){var v=h.dehydrated;if(ad(t),c)if(t.flags&256)t.flags&=-257,t=$m(e,t,s);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(o(558));else if(St||be(e,t,s,!1),c=(s&e.childLanes)!==0,St||c){if(l=it,l!==null&&(v=Go(l,s),v!==0&&v!==h.retryLane))throw h.retryLane=v,Hs(e,v),fr(l,e,v),Nd;Gc(),t=$m(e,t,s)}else e=h.treeContext,nt=Pr(v.nextSibling),Ct=t,$e=!0,ks=null,or=!1,e!==null&&Il(t,e),t=Dc(t,l),t.flags|=4096;return t}return e=es(e.child,{mode:l.mode,children:l.children}),e.ref=t.ref,t.child=e,e.return=t,e}function Uc(e,t){var s=t.ref;if(s===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(o(284));(e===null||e.ref!==s)&&(t.flags|=4194816)}}function Ed(e,t,s,l,c){return xe(t),s=id(e,t,s,l,void 0,c),l=ld(),e!==null&&!St?(od(e,t,c),Gs(e,t,c)):($e&&l&&Pl(t),t.flags|=1,Mt(e,t,s,c),t.child)}function Bm(e,t,s,l,c,h){return xe(t),t.updateQueue=null,s=If(t,l,s,c),Hf(e),l=ld(),e!==null&&!St?(od(e,t,h),Gs(e,t,h)):($e&&l&&Pl(t),t.flags|=1,Mt(e,t,s,h),t.child)}function Pm(e,t,s,l,c){if(xe(t),t.stateNode===null){var h=ja,v=s.contextType;typeof v=="object"&&v!==null&&(h=ge(v)),h=new s(l,h),t.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=jd,t.stateNode=h,h._reactInternals=t,h=t.stateNode,h.props=l,h.state=t.memoizedState,h.refs={},Zu(t),v=s.contextType,h.context=typeof v=="object"&&v!==null?ge(v):ja,h.state=t.memoizedState,v=s.getDerivedStateFromProps,typeof v=="function"&&(_d(t,s,v,l),h.state=t.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(v=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),v!==h.state&&jd.enqueueReplaceState(h,h.state,null),Jl(t,l,h,c),Xl(),h.state=t.memoizedState),typeof h.componentDidMount=="function"&&(t.flags|=4194308),l=!0}else if(e===null){h=t.stateNode;var j=t.memoizedProps,O=Nn(s,j);h.props=O;var G=h.context,ee=s.contextType;v=ja,typeof ee=="object"&&ee!==null&&(v=ge(ee));var ae=s.getDerivedStateFromProps;ee=typeof ae=="function"||typeof h.getSnapshotBeforeUpdate=="function",j=t.pendingProps!==j,ee||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(j||G!==v)&&km(t,h,l,v),ka=!1;var Y=t.memoizedState;h.state=Y,Jl(t,l,h,c),Xl(),G=t.memoizedState,j||Y!==G||ka?(typeof ae=="function"&&(_d(t,s,ae,l),G=t.memoizedState),(O=ka||Em(t,s,O,l,Y,G,v))?(ee||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(t.flags|=4194308)):(typeof h.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=l,t.memoizedState=G),h.props=l,h.state=G,h.context=v,l=O):(typeof h.componentDidMount=="function"&&(t.flags|=4194308),l=!1)}else{h=t.stateNode,Fu(e,t),v=t.memoizedProps,ee=Nn(s,v),h.props=ee,ae=t.pendingProps,Y=h.context,G=s.contextType,O=ja,typeof G=="object"&&G!==null&&(O=ge(G)),j=s.getDerivedStateFromProps,(G=typeof j=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(v!==ae||Y!==O)&&km(t,h,l,O),ka=!1,Y=t.memoizedState,h.state=Y,Jl(t,l,h,c),Xl();var Q=t.memoizedState;v!==ae||Y!==Q||ka||e!==null&&e.dependencies!==null&&oe(e.dependencies)?(typeof j=="function"&&(_d(t,s,j,l),Q=t.memoizedState),(ee=ka||Em(t,s,ee,l,Y,Q,O)||e!==null&&e.dependencies!==null&&oe(e.dependencies))?(G||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(l,Q,O),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(l,Q,O)),typeof h.componentDidUpdate=="function"&&(t.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof h.componentDidUpdate!="function"||v===e.memoizedProps&&Y===e.memoizedState||(t.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&Y===e.memoizedState||(t.flags|=1024),t.memoizedProps=l,t.memoizedState=Q),h.props=l,h.state=Q,h.context=O,l=ee):(typeof h.componentDidUpdate!="function"||v===e.memoizedProps&&Y===e.memoizedState||(t.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&Y===e.memoizedState||(t.flags|=1024),l=!1)}return h=l,Uc(e,t),l=(t.flags&128)!==0,h||l?(h=t.stateNode,s=l&&typeof s.getDerivedStateFromError!="function"?null:h.render(),t.flags|=1,e!==null&&l?(t.child=jn(t,e.child,null,c),t.child=jn(t,null,s,c)):Mt(e,t,s,c),t.memoizedState=h.state,e=t.child):e=Gs(e,t,c),e}function Hm(e,t,s,l){return b(),t.flags|=256,Mt(e,t,s,l),t.child}var kd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Cd(e){return{baseLanes:e,cachePool:Rf()}}function Td(e,t,s){return e=e!==null?e.childLanes&~s:0,t&&(e|=Nr),e}function Im(e,t,s){var l=t.pendingProps,c=!1,h=(t.flags&128)!==0,v;if((v=h)||(v=e!==null&&e.memoizedState===null?!1:(wt.current&2)!==0),v&&(c=!0,t.flags&=-129),v=(t.flags&32)!==0,t.flags&=-33,e===null){if($e){if(c?Aa(t):Ra(),(e=nt)?(e=Qp(e,or),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Es!==null?{id:yr,overflow:br}:null,retryLane:536870912,hydrationErrors:null},s=yn(e),s.return=t,t.child=s,Ct=t,nt=null)):e=null,e===null)throw rs(t);return dh(e)?t.lanes=32:t.lanes=536870912,null}var j=l.children;return l=l.fallback,c?(Ra(),c=t.mode,j=Mc({mode:"hidden",children:j},c),l=Ns(l,c,s,null),j.return=t,l.return=t,j.sibling=l,t.child=j,l=t.child,l.memoizedState=Cd(s),l.childLanes=Td(e,v,s),t.memoizedState=kd,to(null,l)):(Aa(t),Ad(t,j))}var O=e.memoizedState;if(O!==null&&(j=O.dehydrated,j!==null)){if(h)t.flags&256?(Aa(t),t.flags&=-257,t=Rd(e,t,s)):t.memoizedState!==null?(Ra(),t.child=e.child,t.flags|=128,t=null):(Ra(),j=l.fallback,c=t.mode,l=Mc({mode:"visible",children:l.children},c),j=Ns(j,c,s,null),j.flags|=2,l.return=t,j.return=t,l.sibling=j,t.child=l,jn(t,e.child,null,s),l=t.child,l.memoizedState=Cd(s),l.childLanes=Td(e,v,s),t.memoizedState=kd,t=to(null,l));else if(Aa(t),dh(j)){if(v=j.nextSibling&&j.nextSibling.dataset,v)var G=v.dgst;v=G,l=Error(o(419)),l.stack="",l.digest=v,C({value:l,source:null,stack:null}),t=Rd(e,t,s)}else if(St||be(e,t,s,!1),v=(s&e.childLanes)!==0,St||v){if(v=it,v!==null&&(l=Go(v,s),l!==0&&l!==O.retryLane))throw O.retryLane=l,Hs(e,l),fr(v,e,l),Nd;uh(j)||Gc(),t=Rd(e,t,s)}else uh(j)?(t.flags|=192,t.child=e.child,t=null):(e=O.treeContext,nt=Pr(j.nextSibling),Ct=t,$e=!0,ks=null,or=!1,e!==null&&Il(t,e),t=Ad(t,l.children),t.flags|=4096);return t}return c?(Ra(),j=l.fallback,c=t.mode,O=e.child,G=O.sibling,l=es(O,{mode:"hidden",children:l.children}),l.subtreeFlags=O.subtreeFlags&65011712,G!==null?j=es(G,j):(j=Ns(j,c,s,null),j.flags|=2),j.return=t,l.return=t,l.sibling=j,t.child=l,to(null,l),l=t.child,j=e.child.memoizedState,j===null?j=Cd(s):(c=j.cachePool,c!==null?(O=ot._currentValue,c=c.parent!==O?{parent:O,pool:O}:c):c=Rf(),j={baseLanes:j.baseLanes|s,cachePool:c}),l.memoizedState=j,l.childLanes=Td(e,v,s),t.memoizedState=kd,to(e.child,l)):(Aa(t),s=e.child,e=s.sibling,s=es(s,{mode:"visible",children:l.children}),s.return=t,s.sibling=null,e!==null&&(v=t.deletions,v===null?(t.deletions=[e],t.flags|=16):v.push(e)),t.child=s,t.memoizedState=null,s)}function Ad(e,t){return t=Mc({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Mc(e,t){return e=Xt(22,e,null,t),e.lanes=0,e}function Rd(e,t,s){return jn(t,e.child,null,s),e=Ad(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Vm(e,t,s){e.lanes|=t;var l=e.alternate;l!==null&&(l.lanes|=t),ne(e.return,t,s)}function Od(e,t,s,l,c,h){var v=e.memoizedState;v===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:l,tail:s,tailMode:c,treeForkCount:h}:(v.isBackwards=t,v.rendering=null,v.renderingStartTime=0,v.last=l,v.tail=s,v.tailMode=c,v.treeForkCount=h)}function Gm(e,t,s){var l=t.pendingProps,c=l.revealOrder,h=l.tail;l=l.children;var v=wt.current,j=(v&2)!==0;if(j?(v=v&1|2,t.flags|=128):v&=1,J(wt,v),Mt(e,t,l,s),l=$e?Ea:0,!j&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Vm(e,s,t);else if(e.tag===19)Vm(e,s,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(c){case"forwards":for(s=t.child,c=null;s!==null;)e=s.alternate,e!==null&&Sc(e)===null&&(c=s),s=s.sibling;s=c,s===null?(c=t.child,t.child=null):(c=s.sibling,s.sibling=null),Od(t,!1,c,s,h,l);break;case"backwards":case"unstable_legacy-backwards":for(s=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&Sc(e)===null){t.child=c;break}e=c.sibling,c.sibling=s,s=c,c=e}Od(t,!0,s,null,h,l);break;case"together":Od(t,!1,null,null,void 0,l);break;default:t.memoizedState=null}return t.child}function Gs(e,t,s){if(e!==null&&(t.dependencies=e.dependencies),Da|=t.lanes,(s&t.childLanes)===0)if(e!==null){if(be(e,t,s,!1),(s&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(o(153));if(t.child!==null){for(e=t.child,s=es(e,e.pendingProps),t.child=s,s.return=t;e.sibling!==null;)e=e.sibling,s=s.sibling=es(e,e.pendingProps),s.return=t;s.sibling=null}return t.child}function zd(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&oe(e)))}function Ex(e,t,s){switch(t.tag){case 3:He(t,t.stateNode.containerInfo),re(t,ot,e.memoizedState.cache),b();break;case 27:case 5:Zt(t);break;case 4:He(t,t.stateNode.containerInfo);break;case 10:re(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,ad(t),null;break;case 13:var l=t.memoizedState;if(l!==null)return l.dehydrated!==null?(Aa(t),t.flags|=128,null):(s&t.child.childLanes)!==0?Im(e,t,s):(Aa(t),e=Gs(e,t,s),e!==null?e.sibling:null);Aa(t);break;case 19:var c=(e.flags&128)!==0;if(l=(s&t.childLanes)!==0,l||(be(e,t,s,!1),l=(s&t.childLanes)!==0),c){if(l)return Gm(e,t,s);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),J(wt,wt.current),l)break;return null;case 22:return t.lanes=0,Lm(e,t,s,t.pendingProps);case 24:re(t,ot,e.memoizedState.cache)}return Gs(e,t,s)}function Ym(e,t,s){if(e!==null)if(e.memoizedProps!==t.pendingProps)St=!0;else{if(!zd(e,s)&&(t.flags&128)===0)return St=!1,Ex(e,t,s);St=(e.flags&131072)!==0}else St=!1,$e&&(t.flags&1048576)!==0&&ji(t,Ea,t.index);switch(t.lanes=0,t.tag){case 16:e:{var l=t.pendingProps;if(e=wn(t.elementType),t.type=e,typeof e=="function")Ml(e)?(l=Nn(e,l),t.tag=1,t=Pm(null,t,e,l,s)):(t.tag=0,t=Ed(null,t,e,l,s));else{if(e!=null){var c=e.$$typeof;if(c===K){t.tag=11,t=Dm(null,t,e,l,s);break e}else if(c===F){t.tag=14,t=Um(null,t,e,l,s);break e}}throw t=lt(e)||e,Error(o(306,t,""))}}return t;case 0:return Ed(e,t,t.type,t.pendingProps,s);case 1:return l=t.type,c=Nn(l,t.pendingProps),Pm(e,t,l,c,s);case 3:e:{if(He(t,t.stateNode.containerInfo),e===null)throw Error(o(387));l=t.pendingProps;var h=t.memoizedState;c=h.element,Fu(e,t),Jl(t,l,null,s);var v=t.memoizedState;if(l=v.cache,re(t,ot,l),l!==h.cache&&he(t,[ot],s,!0),Xl(),l=v.element,h.isDehydrated)if(h={element:l,isDehydrated:!1,cache:v.cache},t.updateQueue.baseState=h,t.memoizedState=h,t.flags&256){t=Hm(e,t,l,s);break e}else if(l!==c){c=nr(Error(o(424)),t),C(c),t=Hm(e,t,l,s);break e}else for(e=t.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,nt=Pr(e.firstChild),Ct=t,$e=!0,ks=null,or=!0,s=Lf(t,null,l,s),t.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(b(),l===c){t=Gs(e,t,s);break e}Mt(e,t,l,s)}t=t.child}return t;case 26:return Uc(e,t),e===null?(s=s0(t.type,null,t.pendingProps,null))?t.memoizedState=s:$e||(s=t.type,e=t.pendingProps,l=Zc(pe.current).createElement(s),l[kt]=t,l[It]=e,Lt(l,s,e),pt(l),t.stateNode=l):t.memoizedState=s0(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Zt(t),e===null&&$e&&(l=t.stateNode=e0(t.type,t.pendingProps,pe.current),Ct=t,or=!0,c=nt,$a(t.type)?(hh=c,nt=Pr(l.firstChild)):nt=c),Mt(e,t,t.pendingProps.children,s),Uc(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&$e&&((c=l=nt)&&(l=rv(l,t.type,t.pendingProps,or),l!==null?(t.stateNode=l,Ct=t,nt=Pr(l.firstChild),or=!1,c=!0):c=!1),c||rs(t)),Zt(t),c=t.type,h=t.pendingProps,v=e!==null?e.memoizedProps:null,l=h.children,lh(c,h)?l=null:v!==null&&lh(c,v)&&(t.flags|=32),t.memoizedState!==null&&(c=id(e,t,xx,null,null,s),xo._currentValue=c),Uc(e,t),Mt(e,t,l,s),t.child;case 6:return e===null&&$e&&((e=s=nt)&&(s=sv(s,t.pendingProps,or),s!==null?(t.stateNode=s,Ct=t,nt=null,e=!0):e=!1),e||rs(t)),null;case 13:return Im(e,t,s);case 4:return He(t,t.stateNode.containerInfo),l=t.pendingProps,e===null?t.child=jn(t,null,l,s):Mt(e,t,l,s),t.child;case 11:return Dm(e,t,t.type,t.pendingProps,s);case 7:return Mt(e,t,t.pendingProps,s),t.child;case 8:return Mt(e,t,t.pendingProps.children,s),t.child;case 12:return Mt(e,t,t.pendingProps.children,s),t.child;case 10:return l=t.pendingProps,re(t,t.type,l.value),Mt(e,t,l.children,s),t.child;case 9:return c=t.type._context,l=t.pendingProps.children,xe(t),c=ge(c),l=l(c),t.flags|=1,Mt(e,t,l,s),t.child;case 14:return Um(e,t,t.type,t.pendingProps,s);case 15:return Mm(e,t,t.type,t.pendingProps,s);case 19:return Gm(e,t,s);case 31:return Nx(e,t,s);case 22:return Lm(e,t,s,t.pendingProps);case 24:return xe(t),l=ge(ot),e===null?(c=Ju(),c===null&&(c=it,h=Wu(),c.pooledCache=h,h.refCount++,h!==null&&(c.pooledCacheLanes|=s),c=h),t.memoizedState={parent:l,cache:c},Zu(t),re(t,ot,c)):((e.lanes&s)!==0&&(Fu(e,t),Jl(t,null,null,s),Xl()),c=e.memoizedState,h=t.memoizedState,c.parent!==l?(c={parent:l,cache:l},t.memoizedState=c,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=c),re(t,ot,l)):(l=h.cache,re(t,ot,l),l!==c.cache&&he(t,[ot],s,!0))),Mt(e,t,t.pendingProps.children,s),t.child;case 29:throw t.pendingProps}throw Error(o(156,t.tag))}function Ys(e){e.flags|=4}function Dd(e,t,s,l,c){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(c&335544128)===c)if(e.stateNode.complete)e.flags|=8192;else if(yp())e.flags|=8192;else throw _n=bc,Qu}else e.flags&=-16777217}function Km(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!o0(t))if(yp())e.flags|=8192;else throw _n=bc,Qu}function Lc(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?cl():536870912,e.lanes|=t,Mi|=t)}function ro(e,t){if(!$e)switch(e.tailMode){case"hidden":t=e.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function dt(e){var t=e.alternate!==null&&e.alternate.child===e.child,s=0,l=0;if(t)for(var c=e.child;c!==null;)s|=c.lanes|c.childLanes,l|=c.subtreeFlags&65011712,l|=c.flags&65011712,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)s|=c.lanes|c.childLanes,l|=c.subtreeFlags,l|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=l,e.childLanes=s,t}function kx(e,t,s){var l=t.pendingProps;switch(Hl(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return dt(t),null;case 1:return dt(t),null;case 3:return s=t.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),t.memoizedState.cache!==l&&(t.flags|=2048),ce(ot),Ue(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(g(t)?Ys(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,_())),dt(t),null;case 26:var c=t.type,h=t.memoizedState;return e===null?(Ys(t),h!==null?(dt(t),Km(t,h)):(dt(t),Dd(t,c,null,l,s))):h?h!==e.memoizedState?(Ys(t),dt(t),Km(t,h)):(dt(t),t.flags&=-16777217):(e=e.memoizedProps,e!==l&&Ys(t),dt(t),Dd(t,c,e,l,s)),null;case 27:if(Kr(t),s=pe.current,c=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&Ys(t);else{if(!l){if(t.stateNode===null)throw Error(o(166));return dt(t),null}e=te.current,g(t)?Ku(t):(e=e0(c,l,s),t.stateNode=e,Ys(t))}return dt(t),null;case 5:if(Kr(t),c=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&Ys(t);else{if(!l){if(t.stateNode===null)throw Error(o(166));return dt(t),null}if(h=te.current,g(t))Ku(t);else{var v=Zc(pe.current);switch(h){case 1:h=v.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:h=v.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":h=v.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":h=v.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":h=v.createElement("div"),h.innerHTML="<script><\/script>",h=h.removeChild(h.firstChild);break;case"select":h=typeof l.is=="string"?v.createElement("select",{is:l.is}):v.createElement("select"),l.multiple?h.multiple=!0:l.size&&(h.size=l.size);break;default:h=typeof l.is=="string"?v.createElement(c,{is:l.is}):v.createElement(c)}}h[kt]=t,h[It]=l;e:for(v=t.child;v!==null;){if(v.tag===5||v.tag===6)h.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===t)break e;for(;v.sibling===null;){if(v.return===null||v.return===t)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}t.stateNode=h;e:switch(Lt(h,c,l),c){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&Ys(t)}}return dt(t),Dd(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,s),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==l&&Ys(t);else{if(typeof l!="string"&&t.stateNode===null)throw Error(o(166));if(e=pe.current,g(t)){if(e=t.stateNode,s=t.memoizedProps,l=null,c=Ct,c!==null)switch(c.tag){case 27:case 5:l=c.memoizedProps}e[kt]=t,e=!!(e.nodeValue===s||l!==null&&l.suppressHydrationWarning===!0||Ip(e.nodeValue,s)),e||rs(t,!0)}else e=Zc(e).createTextNode(l),e[kt]=t,t.stateNode=e}return dt(t),null;case 31:if(s=t.memoizedState,e===null||e.memoizedState!==null){if(l=g(t),s!==null){if(e===null){if(!l)throw Error(o(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(557));e[kt]=t}else b(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;dt(t),e=!1}else s=_(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=s),e=!0;if(!e)return t.flags&256?(jr(t),t):(jr(t),null);if((t.flags&128)!==0)throw Error(o(558))}return dt(t),null;case 13:if(l=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(c=g(t),l!==null&&l.dehydrated!==null){if(e===null){if(!c)throw Error(o(318));if(c=t.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(o(317));c[kt]=t}else b(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;dt(t),c=!1}else c=_(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=c),c=!0;if(!c)return t.flags&256?(jr(t),t):(jr(t),null)}return jr(t),(t.flags&128)!==0?(t.lanes=s,t):(s=l!==null,e=e!==null&&e.memoizedState!==null,s&&(l=t.child,c=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(c=l.alternate.memoizedState.cachePool.pool),h=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(h=l.memoizedState.cachePool.pool),h!==c&&(l.flags|=2048)),s!==e&&s&&(t.child.flags|=8192),Lc(t,t.updateQueue),dt(t),null);case 4:return Ue(),e===null&&rh(t.stateNode.containerInfo),dt(t),null;case 10:return ce(t.type),dt(t),null;case 19:if(T(wt),l=t.memoizedState,l===null)return dt(t),null;if(c=(t.flags&128)!==0,h=l.rendering,h===null)if(c)ro(l,!1);else{if(yt!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(h=Sc(e),h!==null){for(t.flags|=128,ro(l,!1),e=h.updateQueue,t.updateQueue=e,Lc(t,e),t.subtreeFlags=0,e=s,s=t.child;s!==null;)Ll(s,e),s=s.sibling;return J(wt,wt.current&1|2),$e&&ts(t,l.treeForkCount),t.child}e=e.sibling}l.tail!==null&&Dt()>Hc&&(t.flags|=128,c=!0,ro(l,!1),t.lanes=4194304)}else{if(!c)if(e=Sc(h),e!==null){if(t.flags|=128,c=!0,e=e.updateQueue,t.updateQueue=e,Lc(t,e),ro(l,!0),l.tail===null&&l.tailMode==="hidden"&&!h.alternate&&!$e)return dt(t),null}else 2*Dt()-l.renderingStartTime>Hc&&s!==536870912&&(t.flags|=128,c=!0,ro(l,!1),t.lanes=4194304);l.isBackwards?(h.sibling=t.child,t.child=h):(e=l.last,e!==null?e.sibling=h:t.child=h,l.last=h)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=Dt(),e.sibling=null,s=wt.current,J(wt,c?s&1|2:s&1),$e&&ts(t,l.treeForkCount),e):(dt(t),null);case 22:case 23:return jr(t),sd(),l=t.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(t.flags|=8192):l&&(t.flags|=8192),l?(s&536870912)!==0&&(t.flags&128)===0&&(dt(t),t.subtreeFlags&6&&(t.flags|=8192)):dt(t),s=t.updateQueue,s!==null&&Lc(t,s.retryQueue),s=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),l=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),l!==s&&(t.flags|=2048),e!==null&&T(bn),null;case 24:return s=null,e!==null&&(s=e.memoizedState.cache),t.memoizedState.cache!==s&&(t.flags|=2048),ce(ot),dt(t),null;case 25:return null;case 30:return null}throw Error(o(156,t.tag))}function Cx(e,t){switch(Hl(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ce(ot),Ue(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Kr(t),null;case 31:if(t.memoizedState!==null){if(jr(t),t.alternate===null)throw Error(o(340));b()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(jr(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(o(340));b()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return T(wt),null;case 4:return Ue(),null;case 10:return ce(t.type),null;case 22:case 23:return jr(t),sd(),e!==null&&T(bn),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return ce(ot),null;case 25:return null;default:return null}}function Wm(e,t){switch(Hl(t),t.tag){case 3:ce(ot),Ue();break;case 26:case 27:case 5:Kr(t);break;case 4:Ue();break;case 31:t.memoizedState!==null&&jr(t);break;case 13:jr(t);break;case 19:T(wt);break;case 10:ce(t.type);break;case 22:case 23:jr(t),sd(),e!==null&&T(bn);break;case 24:ce(ot)}}function so(e,t){try{var s=t.updateQueue,l=s!==null?s.lastEffect:null;if(l!==null){var c=l.next;s=c;do{if((s.tag&e)===e){l=void 0;var h=s.create,v=s.inst;l=h(),v.destroy=l}s=s.next}while(s!==c)}}catch(j){Fe(t,t.return,j)}}function Oa(e,t,s){try{var l=t.updateQueue,c=l!==null?l.lastEffect:null;if(c!==null){var h=c.next;l=h;do{if((l.tag&e)===e){var v=l.inst,j=v.destroy;if(j!==void 0){v.destroy=void 0,c=t;var O=s,G=j;try{G()}catch(ee){Fe(c,O,ee)}}}l=l.next}while(l!==h)}}catch(ee){Fe(t,t.return,ee)}}function Xm(e){var t=e.updateQueue;if(t!==null){var s=e.stateNode;try{$f(t,s)}catch(l){Fe(e,e.return,l)}}}function Jm(e,t,s){s.props=Nn(e.type,e.memoizedProps),s.state=e.memoizedState;try{s.componentWillUnmount()}catch(l){Fe(e,t,l)}}function ao(e,t){try{var s=e.ref;if(s!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof s=="function"?e.refCleanup=s(l):s.current=l}}catch(c){Fe(e,t,c)}}function Cs(e,t){var s=e.ref,l=e.refCleanup;if(s!==null)if(typeof l=="function")try{l()}catch(c){Fe(e,t,c)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(c){Fe(e,t,c)}else s.current=null}function Qm(e){var t=e.type,s=e.memoizedProps,l=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":s.autoFocus&&l.focus();break e;case"img":s.src?l.src=s.src:s.srcSet&&(l.srcset=s.srcSet)}}catch(c){Fe(e,e.return,c)}}function Ud(e,t,s){try{var l=e.stateNode;Jx(l,e.type,s,t),l[It]=t}catch(c){Fe(e,e.return,c)}}function Zm(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&$a(e.type)||e.tag===4}function Md(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Zm(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&$a(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ld(e,t,s){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(e,t):(t=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,t.appendChild(e),s=s._reactRootContainer,s!=null||t.onclick!==null||(t.onclick=rr));else if(l!==4&&(l===27&&$a(e.type)&&(s=e.stateNode,t=null),e=e.child,e!==null))for(Ld(e,t,s),e=e.sibling;e!==null;)Ld(e,t,s),e=e.sibling}function qc(e,t,s){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?s.insertBefore(e,t):s.appendChild(e);else if(l!==4&&(l===27&&$a(e.type)&&(s=e.stateNode),e=e.child,e!==null))for(qc(e,t,s),e=e.sibling;e!==null;)qc(e,t,s),e=e.sibling}function Fm(e){var t=e.stateNode,s=e.memoizedProps;try{for(var l=e.type,c=t.attributes;c.length;)t.removeAttributeNode(c[0]);Lt(t,l,s),t[kt]=e,t[It]=s}catch(h){Fe(e,e.return,h)}}var Ks=!1,Nt=!1,qd=!1,ep=typeof WeakSet=="function"?WeakSet:Set,Ot=null;function Tx(e,t){if(e=e.containerInfo,nh=nu,e=cc(e),Rl(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var l=s.getSelection&&s.getSelection();if(l&&l.rangeCount!==0){s=l.anchorNode;var c=l.anchorOffset,h=l.focusNode;l=l.focusOffset;try{s.nodeType,h.nodeType}catch{s=null;break e}var v=0,j=-1,O=-1,G=0,ee=0,ae=e,Y=null;t:for(;;){for(var Q;ae!==s||c!==0&&ae.nodeType!==3||(j=v+c),ae!==h||l!==0&&ae.nodeType!==3||(O=v+l),ae.nodeType===3&&(v+=ae.nodeValue.length),(Q=ae.firstChild)!==null;)Y=ae,ae=Q;for(;;){if(ae===e)break t;if(Y===s&&++G===c&&(j=v),Y===h&&++ee===l&&(O=v),(Q=ae.nextSibling)!==null)break;ae=Y,Y=ae.parentNode}ae=Q}s=j===-1||O===-1?null:{start:j,end:O}}else s=null}s=s||{start:0,end:0}}else s=null;for(ih={focusedElem:e,selectionRange:s},nu=!1,Ot=t;Ot!==null;)if(t=Ot,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ot=e;else for(;Ot!==null;){switch(t=Ot,h=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(s=0;s<e.length;s++)c=e[s],c.ref.impl=c.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&h!==null){e=void 0,s=t,c=h.memoizedProps,h=h.memoizedState,l=s.stateNode;try{var we=Nn(s.type,c);e=l.getSnapshotBeforeUpdate(we,h),l.__reactInternalSnapshotBeforeUpdate=e}catch(Ce){Fe(s,s.return,Ce)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,s=e.nodeType,s===9)ch(e);else if(s===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":ch(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(o(163))}if(e=t.sibling,e!==null){e.return=t.return,Ot=e;break}Ot=t.return}}function tp(e,t,s){var l=s.flags;switch(s.tag){case 0:case 11:case 15:Xs(e,s),l&4&&so(5,s);break;case 1:if(Xs(e,s),l&4)if(e=s.stateNode,t===null)try{e.componentDidMount()}catch(v){Fe(s,s.return,v)}else{var c=Nn(s.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(c,t,e.__reactInternalSnapshotBeforeUpdate)}catch(v){Fe(s,s.return,v)}}l&64&&Xm(s),l&512&&ao(s,s.return);break;case 3:if(Xs(e,s),l&64&&(e=s.updateQueue,e!==null)){if(t=null,s.child!==null)switch(s.child.tag){case 27:case 5:t=s.child.stateNode;break;case 1:t=s.child.stateNode}try{$f(e,t)}catch(v){Fe(s,s.return,v)}}break;case 27:t===null&&l&4&&Fm(s);case 26:case 5:Xs(e,s),t===null&&l&4&&Qm(s),l&512&&ao(s,s.return);break;case 12:Xs(e,s);break;case 31:Xs(e,s),l&4&&ap(e,s);break;case 13:Xs(e,s),l&4&&np(e,s),l&64&&(e=s.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(s=qx.bind(null,s),av(e,s))));break;case 22:if(l=s.memoizedState!==null||Ks,!l){t=t!==null&&t.memoizedState!==null||Nt,c=Ks;var h=Nt;Ks=l,(Nt=t)&&!h?Js(e,s,(s.subtreeFlags&8772)!==0):Xs(e,s),Ks=c,Nt=h}break;case 30:break;default:Xs(e,s)}}function rp(e){var t=e.alternate;t!==null&&(e.alternate=null,rp(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Ko(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var mt=null,cr=!1;function Ws(e,t,s){for(s=s.child;s!==null;)sp(e,t,s),s=s.sibling}function sp(e,t,s){if(Rt&&typeof Rt.onCommitFiberUnmount=="function")try{Rt.onCommitFiberUnmount(zr,s)}catch{}switch(s.tag){case 26:Nt||Cs(s,t),Ws(e,t,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:Nt||Cs(s,t);var l=mt,c=cr;$a(s.type)&&(mt=s.stateNode,cr=!1),Ws(e,t,s),mo(s.stateNode),mt=l,cr=c;break;case 5:Nt||Cs(s,t);case 6:if(l=mt,c=cr,mt=null,Ws(e,t,s),mt=l,cr=c,mt!==null)if(cr)try{(mt.nodeType===9?mt.body:mt.nodeName==="HTML"?mt.ownerDocument.body:mt).removeChild(s.stateNode)}catch(h){Fe(s,t,h)}else try{mt.removeChild(s.stateNode)}catch(h){Fe(s,t,h)}break;case 18:mt!==null&&(cr?(e=mt,Xp(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,s.stateNode),Vi(e)):Xp(mt,s.stateNode));break;case 4:l=mt,c=cr,mt=s.stateNode.containerInfo,cr=!0,Ws(e,t,s),mt=l,cr=c;break;case 0:case 11:case 14:case 15:Oa(2,s,t),Nt||Oa(4,s,t),Ws(e,t,s);break;case 1:Nt||(Cs(s,t),l=s.stateNode,typeof l.componentWillUnmount=="function"&&Jm(s,t,l)),Ws(e,t,s);break;case 21:Ws(e,t,s);break;case 22:Nt=(l=Nt)||s.memoizedState!==null,Ws(e,t,s),Nt=l;break;default:Ws(e,t,s)}}function ap(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Vi(e)}catch(s){Fe(t,t.return,s)}}}function np(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Vi(e)}catch(s){Fe(t,t.return,s)}}function Ax(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new ep),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new ep),t;default:throw Error(o(435,e.tag))}}function $c(e,t){var s=Ax(e);t.forEach(function(l){if(!s.has(l)){s.add(l);var c=$x.bind(null,e,l);l.then(c,c)}})}function ur(e,t){var s=t.deletions;if(s!==null)for(var l=0;l<s.length;l++){var c=s[l],h=e,v=t,j=v;e:for(;j!==null;){switch(j.tag){case 27:if($a(j.type)){mt=j.stateNode,cr=!1;break e}break;case 5:mt=j.stateNode,cr=!1;break e;case 3:case 4:mt=j.stateNode.containerInfo,cr=!0;break e}j=j.return}if(mt===null)throw Error(o(160));sp(h,v,c),mt=null,cr=!1,h=c.alternate,h!==null&&(h.return=null),c.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)ip(t,e),t=t.sibling}var ss=null;function ip(e,t){var s=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:ur(t,e),dr(e),l&4&&(Oa(3,e,e.return),so(3,e),Oa(5,e,e.return));break;case 1:ur(t,e),dr(e),l&512&&(Nt||s===null||Cs(s,s.return)),l&64&&Ks&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(s=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=s===null?l:s.concat(l))));break;case 26:var c=ss;if(ur(t,e),dr(e),l&512&&(Nt||s===null||Cs(s,s.return)),l&4){var h=s!==null?s.memoizedState:null;if(l=e.memoizedState,s===null)if(l===null)if(e.stateNode===null){e:{l=e.type,s=e.memoizedProps,c=c.ownerDocument||c;t:switch(l){case"title":h=c.getElementsByTagName("title")[0],(!h||h[Yn]||h[kt]||h.namespaceURI==="http://www.w3.org/2000/svg"||h.hasAttribute("itemprop"))&&(h=c.createElement(l),c.head.insertBefore(h,c.querySelector("head > title"))),Lt(h,l,s),h[kt]=e,pt(h),l=h;break e;case"link":var v=i0("link","href",c).get(l+(s.href||""));if(v){for(var j=0;j<v.length;j++)if(h=v[j],h.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&h.getAttribute("rel")===(s.rel==null?null:s.rel)&&h.getAttribute("title")===(s.title==null?null:s.title)&&h.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){v.splice(j,1);break t}}h=c.createElement(l),Lt(h,l,s),c.head.appendChild(h);break;case"meta":if(v=i0("meta","content",c).get(l+(s.content||""))){for(j=0;j<v.length;j++)if(h=v[j],h.getAttribute("content")===(s.content==null?null:""+s.content)&&h.getAttribute("name")===(s.name==null?null:s.name)&&h.getAttribute("property")===(s.property==null?null:s.property)&&h.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&h.getAttribute("charset")===(s.charSet==null?null:s.charSet)){v.splice(j,1);break t}}h=c.createElement(l),Lt(h,l,s),c.head.appendChild(h);break;default:throw Error(o(468,l))}h[kt]=e,pt(h),l=h}e.stateNode=l}else l0(c,e.type,e.stateNode);else e.stateNode=n0(c,l,e.memoizedProps);else h!==l?(h===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):h.count--,l===null?l0(c,e.type,e.stateNode):n0(c,l,e.memoizedProps)):l===null&&e.stateNode!==null&&Ud(e,e.memoizedProps,s.memoizedProps)}break;case 27:ur(t,e),dr(e),l&512&&(Nt||s===null||Cs(s,s.return)),s!==null&&l&4&&Ud(e,e.memoizedProps,s.memoizedProps);break;case 5:if(ur(t,e),dr(e),l&512&&(Nt||s===null||Cs(s,s.return)),e.flags&32){c=e.stateNode;try{gs(c,"")}catch(we){Fe(e,e.return,we)}}l&4&&e.stateNode!=null&&(c=e.memoizedProps,Ud(e,c,s!==null?s.memoizedProps:c)),l&1024&&(qd=!0);break;case 6:if(ur(t,e),dr(e),l&4){if(e.stateNode===null)throw Error(o(162));l=e.memoizedProps,s=e.stateNode;try{s.nodeValue=l}catch(we){Fe(e,e.return,we)}}break;case 3:if(tu=null,c=ss,ss=Fc(t.containerInfo),ur(t,e),ss=c,dr(e),l&4&&s!==null&&s.memoizedState.isDehydrated)try{Vi(t.containerInfo)}catch(we){Fe(e,e.return,we)}qd&&(qd=!1,lp(e));break;case 4:l=ss,ss=Fc(e.stateNode.containerInfo),ur(t,e),dr(e),ss=l;break;case 12:ur(t,e),dr(e);break;case 31:ur(t,e),dr(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,$c(e,l)));break;case 13:ur(t,e),dr(e),e.child.flags&8192&&e.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(Pc=Dt()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,$c(e,l)));break;case 22:c=e.memoizedState!==null;var O=s!==null&&s.memoizedState!==null,G=Ks,ee=Nt;if(Ks=G||c,Nt=ee||O,ur(t,e),Nt=ee,Ks=G,dr(e),l&8192)e:for(t=e.stateNode,t._visibility=c?t._visibility&-2:t._visibility|1,c&&(s===null||O||Ks||Nt||En(e)),s=null,t=e;;){if(t.tag===5||t.tag===26){if(s===null){O=s=t;try{if(h=O.stateNode,c)v=h.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{j=O.stateNode;var ae=O.memoizedProps.style,Y=ae!=null&&ae.hasOwnProperty("display")?ae.display:null;j.style.display=Y==null||typeof Y=="boolean"?"":(""+Y).trim()}}catch(we){Fe(O,O.return,we)}}}else if(t.tag===6){if(s===null){O=t;try{O.stateNode.nodeValue=c?"":O.memoizedProps}catch(we){Fe(O,O.return,we)}}}else if(t.tag===18){if(s===null){O=t;try{var Q=O.stateNode;c?Jp(Q,!0):Jp(O.stateNode,!1)}catch(we){Fe(O,O.return,we)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;s===t&&(s=null),t=t.return}s===t&&(s=null),t.sibling.return=t.return,t=t.sibling}l&4&&(l=e.updateQueue,l!==null&&(s=l.retryQueue,s!==null&&(l.retryQueue=null,$c(e,s))));break;case 19:ur(t,e),dr(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,$c(e,l)));break;case 30:break;case 21:break;default:ur(t,e),dr(e)}}function dr(e){var t=e.flags;if(t&2){try{for(var s,l=e.return;l!==null;){if(Zm(l)){s=l;break}l=l.return}if(s==null)throw Error(o(160));switch(s.tag){case 27:var c=s.stateNode,h=Md(e);qc(e,h,c);break;case 5:var v=s.stateNode;s.flags&32&&(gs(v,""),s.flags&=-33);var j=Md(e);qc(e,j,v);break;case 3:case 4:var O=s.stateNode.containerInfo,G=Md(e);Ld(e,G,O);break;default:throw Error(o(161))}}catch(ee){Fe(e,e.return,ee)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function lp(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;lp(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Xs(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)tp(e,t.alternate,t),t=t.sibling}function En(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Oa(4,t,t.return),En(t);break;case 1:Cs(t,t.return);var s=t.stateNode;typeof s.componentWillUnmount=="function"&&Jm(t,t.return,s),En(t);break;case 27:mo(t.stateNode);case 26:case 5:Cs(t,t.return),En(t);break;case 22:t.memoizedState===null&&En(t);break;case 30:En(t);break;default:En(t)}e=e.sibling}}function Js(e,t,s){for(s=s&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var l=t.alternate,c=e,h=t,v=h.flags;switch(h.tag){case 0:case 11:case 15:Js(c,h,s),so(4,h);break;case 1:if(Js(c,h,s),l=h,c=l.stateNode,typeof c.componentDidMount=="function")try{c.componentDidMount()}catch(G){Fe(l,l.return,G)}if(l=h,c=l.updateQueue,c!==null){var j=l.stateNode;try{var O=c.shared.hiddenCallbacks;if(O!==null)for(c.shared.hiddenCallbacks=null,c=0;c<O.length;c++)qf(O[c],j)}catch(G){Fe(l,l.return,G)}}s&&v&64&&Xm(h),ao(h,h.return);break;case 27:Fm(h);case 26:case 5:Js(c,h,s),s&&l===null&&v&4&&Qm(h),ao(h,h.return);break;case 12:Js(c,h,s);break;case 31:Js(c,h,s),s&&v&4&&ap(c,h);break;case 13:Js(c,h,s),s&&v&4&&np(c,h);break;case 22:h.memoizedState===null&&Js(c,h,s),ao(h,h.return);break;case 30:break;default:Js(c,h,s)}t=t.sibling}}function $d(e,t){var s=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==s&&(e!=null&&e.refCount++,s!=null&&Vl(s))}function Bd(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Vl(e))}function as(e,t,s,l){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)op(e,t,s,l),t=t.sibling}function op(e,t,s,l){var c=t.flags;switch(t.tag){case 0:case 11:case 15:as(e,t,s,l),c&2048&&so(9,t);break;case 1:as(e,t,s,l);break;case 3:as(e,t,s,l),c&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Vl(e)));break;case 12:if(c&2048){as(e,t,s,l),e=t.stateNode;try{var h=t.memoizedProps,v=h.id,j=h.onPostCommit;typeof j=="function"&&j(v,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(O){Fe(t,t.return,O)}}else as(e,t,s,l);break;case 31:as(e,t,s,l);break;case 13:as(e,t,s,l);break;case 23:break;case 22:h=t.stateNode,v=t.alternate,t.memoizedState!==null?h._visibility&2?as(e,t,s,l):no(e,t):h._visibility&2?as(e,t,s,l):(h._visibility|=2,zi(e,t,s,l,(t.subtreeFlags&10256)!==0||!1)),c&2048&&$d(v,t);break;case 24:as(e,t,s,l),c&2048&&Bd(t.alternate,t);break;default:as(e,t,s,l)}}function zi(e,t,s,l,c){for(c=c&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var h=e,v=t,j=s,O=l,G=v.flags;switch(v.tag){case 0:case 11:case 15:zi(h,v,j,O,c),so(8,v);break;case 23:break;case 22:var ee=v.stateNode;v.memoizedState!==null?ee._visibility&2?zi(h,v,j,O,c):no(h,v):(ee._visibility|=2,zi(h,v,j,O,c)),c&&G&2048&&$d(v.alternate,v);break;case 24:zi(h,v,j,O,c),c&&G&2048&&Bd(v.alternate,v);break;default:zi(h,v,j,O,c)}t=t.sibling}}function no(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var s=e,l=t,c=l.flags;switch(l.tag){case 22:no(s,l),c&2048&&$d(l.alternate,l);break;case 24:no(s,l),c&2048&&Bd(l.alternate,l);break;default:no(s,l)}t=t.sibling}}var io=8192;function Di(e,t,s){if(e.subtreeFlags&io)for(e=e.child;e!==null;)cp(e,t,s),e=e.sibling}function cp(e,t,s){switch(e.tag){case 26:Di(e,t,s),e.flags&io&&e.memoizedState!==null&&gv(s,ss,e.memoizedState,e.memoizedProps);break;case 5:Di(e,t,s);break;case 3:case 4:var l=ss;ss=Fc(e.stateNode.containerInfo),Di(e,t,s),ss=l;break;case 22:e.memoizedState===null&&(l=e.alternate,l!==null&&l.memoizedState!==null?(l=io,io=16777216,Di(e,t,s),io=l):Di(e,t,s));break;default:Di(e,t,s)}}function up(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function lo(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var s=0;s<t.length;s++){var l=t[s];Ot=l,hp(l,e)}up(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)dp(e),e=e.sibling}function dp(e){switch(e.tag){case 0:case 11:case 15:lo(e),e.flags&2048&&Oa(9,e,e.return);break;case 3:lo(e);break;case 12:lo(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Bc(e)):lo(e);break;default:lo(e)}}function Bc(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var s=0;s<t.length;s++){var l=t[s];Ot=l,hp(l,e)}up(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Oa(8,t,t.return),Bc(t);break;case 22:s=t.stateNode,s._visibility&2&&(s._visibility&=-3,Bc(t));break;default:Bc(t)}e=e.sibling}}function hp(e,t){for(;Ot!==null;){var s=Ot;switch(s.tag){case 0:case 11:case 15:Oa(8,s,t);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var l=s.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Vl(s.memoizedState.cache)}if(l=s.child,l!==null)l.return=s,Ot=l;else e:for(s=e;Ot!==null;){l=Ot;var c=l.sibling,h=l.return;if(rp(l),l===s){Ot=null;break e}if(c!==null){c.return=h,Ot=c;break e}Ot=h}}}var Rx={getCacheForType:function(e){var t=ge(ot),s=t.data.get(e);return s===void 0&&(s=e(),t.data.set(e,s)),s},cacheSignal:function(){return ge(ot).controller.signal}},Ox=typeof WeakMap=="function"?WeakMap:Map,Xe=0,it=null,Be=null,Ie=0,Ze=0,Sr=null,za=!1,Ui=!1,Pd=!1,Qs=0,yt=0,Da=0,kn=0,Hd=0,Nr=0,Mi=0,oo=null,hr=null,Id=!1,Pc=0,fp=0,Hc=1/0,Ic=null,Ua=null,Tt=0,Ma=null,Li=null,Zs=0,Vd=0,Gd=null,mp=null,co=0,Yd=null;function Er(){return(Xe&2)!==0&&Ie!==0?Ie&-Ie:I.T!==null?Zd():Lu()}function pp(){if(Nr===0)if((Ie&536870912)===0||$e){var e=Ur;Ur<<=1,(Ur&3932160)===0&&(Ur=262144),Nr=e}else Nr=536870912;return e=_r.current,e!==null&&(e.flags|=32),Nr}function fr(e,t,s){(e===it&&(Ze===2||Ze===9)||e.cancelPendingCommit!==null)&&(qi(e,0),La(e,Ie,Nr,!1)),Fa(e,s),((Xe&2)===0||e!==it)&&(e===it&&((Xe&2)===0&&(kn|=s),yt===4&&La(e,Ie,Nr,!1)),Ts(e))}function gp(e,t,s){if((Xe&6)!==0)throw Error(o(327));var l=!s&&(t&127)===0&&(t&e.expiredLanes)===0||ua(e,t),c=l?Ux(e,t):Wd(e,t,!0),h=l;do{if(c===0){Ui&&!l&&La(e,t,0,!1);break}else{if(s=e.current.alternate,h&&!zx(s)){c=Wd(e,t,!1),h=!1;continue}if(c===2){if(h=t,e.errorRecoveryDisabledLanes&h)var v=0;else v=e.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){t=v;e:{var j=e;c=oo;var O=j.current.memoizedState.isDehydrated;if(O&&(qi(j,v).flags|=256),v=Wd(j,v,!1),v!==2){if(Pd&&!O){j.errorRecoveryDisabledLanes|=h,kn|=h,c=4;break e}h=hr,hr=c,h!==null&&(hr===null?hr=h:hr.push.apply(hr,h))}c=v}if(h=!1,c!==2)continue}}if(c===1){qi(e,0),La(e,t,0,!0);break}e:{switch(l=e,h=c,h){case 0:case 1:throw Error(o(345));case 4:if((t&4194048)!==t)break;case 6:La(l,t,Nr,!za);break e;case 2:hr=null;break;case 3:case 5:break;default:throw Error(o(329))}if((t&62914560)===t&&(c=Pc+300-Dt(),10<c)){if(La(l,t,Nr,!za),Os(l,0,!0)!==0)break e;Zs=t,l.timeoutHandle=Kp(xp.bind(null,l,s,hr,Ic,Id,t,Nr,kn,Mi,za,h,"Throttled",-0,0),c);break e}xp(l,s,hr,Ic,Id,t,Nr,kn,Mi,za,h,null,-0,0)}}break}while(!0);Ts(e)}function xp(e,t,s,l,c,h,v,j,O,G,ee,ae,Y,Q){if(e.timeoutHandle=-1,ae=t.subtreeFlags,ae&8192||(ae&16785408)===16785408){ae={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:rr},cp(t,h,ae);var we=(h&62914560)===h?Pc-Dt():(h&4194048)===h?fp-Dt():0;if(we=xv(ae,we),we!==null){Zs=h,e.cancelPendingCommit=we(Np.bind(null,e,t,h,s,l,c,v,j,O,ee,ae,null,Y,Q)),La(e,h,v,!G);return}}Np(e,t,h,s,l,c,v,j,O)}function zx(e){for(var t=e;;){var s=t.tag;if((s===0||s===11||s===15)&&t.flags&16384&&(s=t.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var l=0;l<s.length;l++){var c=s[l],h=c.getSnapshot;c=c.value;try{if(!Pt(h(),c))return!1}catch{return!1}}if(s=t.child,t.subtreeFlags&16384&&s!==null)s.return=t,t=s;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function La(e,t,s,l){t&=~Hd,t&=~kn,e.suspendedLanes|=t,e.pingedLanes&=~t,l&&(e.warmLanes|=t),l=e.expirationTimes;for(var c=t;0<c;){var h=31-Ut(c),v=1<<h;l[h]=-1,c&=~v}s!==0&&Vo(e,s,t)}function Vc(){return(Xe&6)===0?(uo(0),!1):!0}function Kd(){if(Be!==null){if(Ze===0)var e=Be.return;else e=Be,W=z=null,cd(e),Ci=null,Yl=0,e=Be;for(;e!==null;)Wm(e.alternate,e),e=e.return;Be=null}}function qi(e,t){var s=e.timeoutHandle;s!==-1&&(e.timeoutHandle=-1,Fx(s)),s=e.cancelPendingCommit,s!==null&&(e.cancelPendingCommit=null,s()),Zs=0,Kd(),it=e,Be=s=es(e.current,null),Ie=t,Ze=0,Sr=null,za=!1,Ui=ua(e,t),Pd=!1,Mi=Nr=Hd=kn=Da=yt=0,hr=oo=null,Id=!1,(t&8)!==0&&(t|=t&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=t;0<l;){var c=31-Ut(l),h=1<<c;t|=e[c],l&=~h}return Qs=t,vi(),s}function vp(e,t){Le=null,I.H=eo,t===ki||t===yc?(t=Df(),Ze=3):t===Qu?(t=Df(),Ze=4):Ze=t===Nd?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Sr=t,Be===null&&(yt=1,zc(e,nr(t,e.current)))}function yp(){var e=_r.current;return e===null?!0:(Ie&4194048)===Ie?Br===null:(Ie&62914560)===Ie||(Ie&536870912)!==0?e===Br:!1}function bp(){var e=I.H;return I.H=eo,e===null?eo:e}function wp(){var e=I.A;return I.A=Rx,e}function Gc(){yt=4,za||(Ie&4194048)!==Ie&&_r.current!==null||(Ui=!0),(Da&134217727)===0&&(kn&134217727)===0||it===null||La(it,Ie,Nr,!1)}function Wd(e,t,s){var l=Xe;Xe|=2;var c=bp(),h=wp();(it!==e||Ie!==t)&&(Ic=null,qi(e,t)),t=!1;var v=yt;e:do try{if(Ze!==0&&Be!==null){var j=Be,O=Sr;switch(Ze){case 8:Kd(),v=6;break e;case 3:case 2:case 9:case 6:_r.current===null&&(t=!0);var G=Ze;if(Ze=0,Sr=null,$i(e,j,O,G),s&&Ui){v=0;break e}break;default:G=Ze,Ze=0,Sr=null,$i(e,j,O,G)}}Dx(),v=yt;break}catch(ee){vp(e,ee)}while(!0);return t&&e.shellSuspendCounter++,W=z=null,Xe=l,I.H=c,I.A=h,Be===null&&(it=null,Ie=0,vi()),v}function Dx(){for(;Be!==null;)_p(Be)}function Ux(e,t){var s=Xe;Xe|=2;var l=bp(),c=wp();it!==e||Ie!==t?(Ic=null,Hc=Dt()+500,qi(e,t)):Ui=ua(e,t);e:do try{if(Ze!==0&&Be!==null){t=Be;var h=Sr;t:switch(Ze){case 1:Ze=0,Sr=null,$i(e,t,h,1);break;case 2:case 9:if(Of(h)){Ze=0,Sr=null,jp(t);break}t=function(){Ze!==2&&Ze!==9||it!==e||(Ze=7),Ts(e)},h.then(t,t);break e;case 3:Ze=7;break e;case 4:Ze=5;break e;case 7:Of(h)?(Ze=0,Sr=null,jp(t)):(Ze=0,Sr=null,$i(e,t,h,7));break;case 5:var v=null;switch(Be.tag){case 26:v=Be.memoizedState;case 5:case 27:var j=Be;if(v?o0(v):j.stateNode.complete){Ze=0,Sr=null;var O=j.sibling;if(O!==null)Be=O;else{var G=j.return;G!==null?(Be=G,Yc(G)):Be=null}break t}}Ze=0,Sr=null,$i(e,t,h,5);break;case 6:Ze=0,Sr=null,$i(e,t,h,6);break;case 8:Kd(),yt=6;break e;default:throw Error(o(462))}}Mx();break}catch(ee){vp(e,ee)}while(!0);return W=z=null,I.H=l,I.A=c,Xe=s,Be!==null?0:(it=null,Ie=0,vi(),yt)}function Mx(){for(;Be!==null&&!oa();)_p(Be)}function _p(e){var t=Ym(e.alternate,e,Qs);e.memoizedProps=e.pendingProps,t===null?Yc(e):Be=t}function jp(e){var t=e,s=t.alternate;switch(t.tag){case 15:case 0:t=Bm(s,t,t.pendingProps,t.type,void 0,Ie);break;case 11:t=Bm(s,t,t.pendingProps,t.type.render,t.ref,Ie);break;case 5:cd(t);default:Wm(s,t),t=Be=Ll(t,Qs),t=Ym(s,t,Qs)}e.memoizedProps=e.pendingProps,t===null?Yc(e):Be=t}function $i(e,t,s,l){W=z=null,cd(t),Ci=null,Yl=0;var c=t.return;try{if(Sx(e,c,t,s,Ie)){yt=1,zc(e,nr(s,e.current)),Be=null;return}}catch(h){if(c!==null)throw Be=c,h;yt=1,zc(e,nr(s,e.current)),Be=null;return}t.flags&32768?($e||l===1?e=!0:Ui||(Ie&536870912)!==0?e=!1:(za=e=!0,(l===2||l===9||l===3||l===6)&&(l=_r.current,l!==null&&l.tag===13&&(l.flags|=16384))),Sp(t,e)):Yc(t)}function Yc(e){var t=e;do{if((t.flags&32768)!==0){Sp(t,za);return}e=t.return;var s=kx(t.alternate,t,Qs);if(s!==null){Be=s;return}if(t=t.sibling,t!==null){Be=t;return}Be=t=e}while(t!==null);yt===0&&(yt=5)}function Sp(e,t){do{var s=Cx(e.alternate,e);if(s!==null){s.flags&=32767,Be=s;return}if(s=e.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!t&&(e=e.sibling,e!==null)){Be=e;return}Be=e=s}while(e!==null);yt=6,Be=null}function Np(e,t,s,l,c,h,v,j,O){e.cancelPendingCommit=null;do Kc();while(Tt!==0);if((Xe&6)!==0)throw Error(o(327));if(t!==null){if(t===e.current)throw Error(o(177));if(h=t.lanes|t.childLanes,h|=Ul,ul(e,s,h,v,j,O),e===it&&(Be=it=null,Ie=0),Li=t,Ma=e,Zs=s,Vd=h,Gd=c,mp=l,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Bx(ca,function(){return Ap(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||l){l=I.T,I.T=null,c=R.p,R.p=2,v=Xe,Xe|=4;try{Tx(e,t,s)}finally{Xe=v,R.p=c,I.T=l}}Tt=1,Ep(),kp(),Cp()}}function Ep(){if(Tt===1){Tt=0;var e=Ma,t=Li,s=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||s){s=I.T,I.T=null;var l=R.p;R.p=2;var c=Xe;Xe|=4;try{ip(t,e);var h=ih,v=cc(e.containerInfo),j=h.focusedElem,O=h.selectionRange;if(v!==j&&j&&j.ownerDocument&&mi(j.ownerDocument.documentElement,j)){if(O!==null&&Rl(j)){var G=O.start,ee=O.end;if(ee===void 0&&(ee=G),"selectionStart"in j)j.selectionStart=G,j.selectionEnd=Math.min(ee,j.value.length);else{var ae=j.ownerDocument||document,Y=ae&&ae.defaultView||window;if(Y.getSelection){var Q=Y.getSelection(),we=j.textContent.length,Ce=Math.min(O.start,we),st=O.end===void 0?Ce:Math.min(O.end,we);!Q.extend&&Ce>st&&(v=st,st=Ce,Ce=v);var B=Fr(j,Ce),M=Fr(j,st);if(B&&M&&(Q.rangeCount!==1||Q.anchorNode!==B.node||Q.anchorOffset!==B.offset||Q.focusNode!==M.node||Q.focusOffset!==M.offset)){var V=ae.createRange();V.setStart(B.node,B.offset),Q.removeAllRanges(),Ce>st?(Q.addRange(V),Q.extend(M.node,M.offset)):(V.setEnd(M.node,M.offset),Q.addRange(V))}}}}for(ae=[],Q=j;Q=Q.parentNode;)Q.nodeType===1&&ae.push({element:Q,left:Q.scrollLeft,top:Q.scrollTop});for(typeof j.focus=="function"&&j.focus(),j=0;j<ae.length;j++){var se=ae[j];se.element.scrollLeft=se.left,se.element.scrollTop=se.top}}nu=!!nh,ih=nh=null}finally{Xe=c,R.p=l,I.T=s}}e.current=t,Tt=2}}function kp(){if(Tt===2){Tt=0;var e=Ma,t=Li,s=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||s){s=I.T,I.T=null;var l=R.p;R.p=2;var c=Xe;Xe|=4;try{tp(e,t.alternate,t)}finally{Xe=c,R.p=l,I.T=s}}Tt=3}}function Cp(){if(Tt===4||Tt===3){Tt=0,cs();var e=Ma,t=Li,s=Zs,l=mp;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?Tt=5:(Tt=0,Li=Ma=null,Tp(e,e.pendingLanes));var c=e.pendingLanes;if(c===0&&(Ua=null),da(s),t=t.stateNode,Rt&&typeof Rt.onCommitFiberRoot=="function")try{Rt.onCommitFiberRoot(zr,t,void 0,(t.current.flags&128)===128)}catch{}if(l!==null){t=I.T,c=R.p,R.p=2,I.T=null;try{for(var h=e.onRecoverableError,v=0;v<l.length;v++){var j=l[v];h(j.value,{componentStack:j.stack})}}finally{I.T=t,R.p=c}}(Zs&3)!==0&&Kc(),Ts(e),c=e.pendingLanes,(s&261930)!==0&&(c&42)!==0?e===Yd?co++:(co=0,Yd=e):co=0,uo(0)}}function Tp(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Vl(t)))}function Kc(){return Ep(),kp(),Cp(),Ap()}function Ap(){if(Tt!==5)return!1;var e=Ma,t=Vd;Vd=0;var s=da(Zs),l=I.T,c=R.p;try{R.p=32>s?32:s,I.T=null,s=Gd,Gd=null;var h=Ma,v=Zs;if(Tt=0,Li=Ma=null,Zs=0,(Xe&6)!==0)throw Error(o(331));var j=Xe;if(Xe|=4,dp(h.current),op(h,h.current,v,s),Xe=j,uo(0,!1),Rt&&typeof Rt.onPostCommitFiberRoot=="function")try{Rt.onPostCommitFiberRoot(zr,h)}catch{}return!0}finally{R.p=c,I.T=l,Tp(e,t)}}function Rp(e,t,s){t=nr(s,t),t=Sd(e.stateNode,t,2),e=Ta(e,t,2),e!==null&&(Fa(e,2),Ts(e))}function Fe(e,t,s){if(e.tag===3)Rp(e,e,s);else for(;t!==null;){if(t.tag===3){Rp(t,e,s);break}else if(t.tag===1){var l=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Ua===null||!Ua.has(l))){e=nr(s,e),s=Om(2),l=Ta(t,s,2),l!==null&&(zm(s,l,t,e),Fa(l,2),Ts(l));break}}t=t.return}}function Xd(e,t,s){var l=e.pingCache;if(l===null){l=e.pingCache=new Ox;var c=new Set;l.set(t,c)}else c=l.get(t),c===void 0&&(c=new Set,l.set(t,c));c.has(s)||(Pd=!0,c.add(s),e=Lx.bind(null,e,t,s),t.then(e,e))}function Lx(e,t,s){var l=e.pingCache;l!==null&&l.delete(t),e.pingedLanes|=e.suspendedLanes&s,e.warmLanes&=~s,it===e&&(Ie&s)===s&&(yt===4||yt===3&&(Ie&62914560)===Ie&&300>Dt()-Pc?(Xe&2)===0&&qi(e,0):Hd|=s,Mi===Ie&&(Mi=0)),Ts(e)}function Op(e,t){t===0&&(t=cl()),e=Hs(e,t),e!==null&&(Fa(e,t),Ts(e))}function qx(e){var t=e.memoizedState,s=0;t!==null&&(s=t.retryLane),Op(e,s)}function $x(e,t){var s=0;switch(e.tag){case 31:case 13:var l=e.stateNode,c=e.memoizedState;c!==null&&(s=c.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(o(314))}l!==null&&l.delete(t),Op(e,s)}function Bx(e,t){return Rr(e,t)}var Wc=null,Bi=null,Jd=!1,Xc=!1,Qd=!1,qa=0;function Ts(e){e!==Bi&&e.next===null&&(Bi===null?Wc=Bi=e:Bi=Bi.next=e),Xc=!0,Jd||(Jd=!0,Hx())}function uo(e,t){if(!Qd&&Xc){Qd=!0;do for(var s=!1,l=Wc;l!==null;){if(e!==0){var c=l.pendingLanes;if(c===0)var h=0;else{var v=l.suspendedLanes,j=l.pingedLanes;h=(1<<31-Ut(42|e)+1)-1,h&=c&~(v&~j),h=h&201326741?h&201326741|1:h?h|2:0}h!==0&&(s=!0,Mp(l,h))}else h=Ie,h=Os(l,l===it?h:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(h&3)===0||ua(l,h)||(s=!0,Mp(l,h));l=l.next}while(s);Qd=!1}}function Px(){zp()}function zp(){Xc=Jd=!1;var e=0;qa!==0&&Zx()&&(e=qa);for(var t=Dt(),s=null,l=Wc;l!==null;){var c=l.next,h=Dp(l,t);h===0?(l.next=null,s===null?Wc=c:s.next=c,c===null&&(Bi=s)):(s=l,(e!==0||(h&3)!==0)&&(Xc=!0)),l=c}Tt!==0&&Tt!==5||uo(e),qa!==0&&(qa=0)}function Dp(e,t){for(var s=e.suspendedLanes,l=e.pingedLanes,c=e.expirationTimes,h=e.pendingLanes&-62914561;0<h;){var v=31-Ut(h),j=1<<v,O=c[v];O===-1?((j&s)===0||(j&l)!==0)&&(c[v]=Io(j,t)):O<=t&&(e.expiredLanes|=j),h&=~j}if(t=it,s=Ie,s=Os(e,e===t?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,s===0||e===t&&(Ze===2||Ze===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&Wr(l),e.callbackNode=null,e.callbackPriority=0;if((s&3)===0||ua(e,s)){if(t=s&-s,t===e.callbackPriority)return t;switch(l!==null&&Wr(l),da(s)){case 2:case 8:s=ol;break;case 32:s=ca;break;case 268435456:s=Or;break;default:s=ca}return l=Up.bind(null,e),s=Rr(s,l),e.callbackPriority=t,e.callbackNode=s,t}return l!==null&&l!==null&&Wr(l),e.callbackPriority=2,e.callbackNode=null,2}function Up(e,t){if(Tt!==0&&Tt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var s=e.callbackNode;if(Kc()&&e.callbackNode!==s)return null;var l=Ie;return l=Os(e,e===it?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(gp(e,l,t),Dp(e,Dt()),e.callbackNode!=null&&e.callbackNode===s?Up.bind(null,e):null)}function Mp(e,t){if(Kc())return null;gp(e,t,!0)}function Hx(){ev(function(){(Xe&6)!==0?Rr(Uu,Px):zp()})}function Zd(){if(qa===0){var e=Ni;e===0&&(e=Vn,Vn<<=1,(Vn&261888)===0&&(Vn=256)),qa=e}return qa}function Lp(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:on(""+e)}function qp(e,t){var s=t.ownerDocument.createElement("input");return s.name=t.name,s.value=t.value,e.id&&s.setAttribute("form",e.id),t.parentNode.insertBefore(s,t),e=new FormData(e),s.parentNode.removeChild(s),e}function Ix(e,t,s,l,c){if(t==="submit"&&s&&s.stateNode===c){var h=Lp((c[It]||null).action),v=l.submitter;v&&(t=(t=v[It]||null)?Lp(t.formAction):v.getAttribute("formAction"),t!==null&&(h=t,v=null));var j=new ri("action","action",null,l,c);e.push({event:j,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(qa!==0){var O=v?qp(c,v):new FormData(c);vd(s,{pending:!0,data:O,method:c.method,action:h},null,O)}}else typeof h=="function"&&(j.preventDefault(),O=v?qp(c,v):new FormData(c),vd(s,{pending:!0,data:O,method:c.method,action:h},h,O))},currentTarget:c}]})}}for(var Fd=0;Fd<Dl.length;Fd++){var eh=Dl[Fd],Vx=eh.toLowerCase(),Gx=eh[0].toUpperCase()+eh.slice(1);vr(Vx,"on"+Gx)}vr(hc,"onAnimationEnd"),vr(fc,"onAnimationIteration"),vr(mc,"onAnimationStart"),vr("dblclick","onDoubleClick"),vr("focusin","onFocus"),vr("focusout","onBlur"),vr(pi,"onTransitionRun"),vr(xn,"onTransitionStart"),vr(Z,"onTransitionCancel"),vr(gi,"onTransitionEnd"),zs("onMouseEnter",["mouseout","mouseover"]),zs("onMouseLeave",["mouseout","mouseover"]),zs("onPointerEnter",["pointerout","pointerover"]),zs("onPointerLeave",["pointerout","pointerover"]),ha("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ha("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ha("onBeforeInput",["compositionend","keypress","textInput","paste"]),ha("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ha("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ha("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ho="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Yx=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ho));function $p(e,t){t=(t&4)!==0;for(var s=0;s<e.length;s++){var l=e[s],c=l.event;l=l.listeners;e:{var h=void 0;if(t)for(var v=l.length-1;0<=v;v--){var j=l[v],O=j.instance,G=j.currentTarget;if(j=j.listener,O!==h&&c.isPropagationStopped())break e;h=j,c.currentTarget=G;try{h(c)}catch(ee){xi(ee)}c.currentTarget=null,h=O}else for(v=0;v<l.length;v++){if(j=l[v],O=j.instance,G=j.currentTarget,j=j.listener,O!==h&&c.isPropagationStopped())break e;h=j,c.currentTarget=G;try{h(c)}catch(ee){xi(ee)}c.currentTarget=null,h=O}}}}function Pe(e,t){var s=t[Yo];s===void 0&&(s=t[Yo]=new Set);var l=e+"__bubble";s.has(l)||(Bp(t,e,2,!1),s.add(l))}function th(e,t,s){var l=0;t&&(l|=4),Bp(s,e,l,t)}var Jc="_reactListening"+Math.random().toString(36).slice(2);function rh(e){if(!e[Jc]){e[Jc]=!0,rn.forEach(function(s){s!=="selectionchange"&&(Yx.has(s)||th(s,!1,e),th(s,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Jc]||(t[Jc]=!0,th("selectionchange",!1,t))}}function Bp(e,t,s,l){switch(p0(t)){case 2:var c=bv;break;case 8:c=wv;break;default:c=xh}s=c.bind(null,t,s,e),c=void 0,!Ms||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),l?c!==void 0?e.addEventListener(t,s,{capture:!0,passive:c}):e.addEventListener(t,s,!0):c!==void 0?e.addEventListener(t,s,{passive:c}):e.addEventListener(t,s,!1)}function sh(e,t,s,l,c){var h=l;if((t&1)===0&&(t&2)===0&&l!==null)e:for(;;){if(l===null)return;var v=l.tag;if(v===3||v===4){var j=l.stateNode.containerInfo;if(j===c)break;if(v===4)for(v=l.return;v!==null;){var O=v.tag;if((O===3||O===4)&&v.stateNode.containerInfo===c)return;v=v.return}for(;j!==null;){if(v=hs(j),v===null)return;if(O=v.tag,O===5||O===6||O===26||O===27){l=h=v;continue e}j=j.parentNode}}l=l.return}Fn(function(){var G=h,ee=Ge(s),ae=[];e:{var Y=pc.get(e);if(Y!==void 0){var Q=ri,we=e;switch(e){case"keypress":if(pl(s)===0)break e;case"keydown":case"keyup":Q=Me;break;case"focusin":we="focus",Q=bs;break;case"focusout":we="blur",Q=bs;break;case"beforeblur":case"afterblur":Q=bs;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Q=vl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Q=bl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Q=Sl;break;case hc:case fc:case mc:Q=Hu;break;case gi:Q=Iu;break;case"scroll":case"scrollend":Q=Jo;break;case"wheel":Q=tc;break;case"copy":case"cut":case"paste":Q=Fo;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Q=ai;break;case"toggle":case"beforetoggle":Q=sc}var Ce=(t&4)!==0,st=!Ce&&(e==="scroll"||e==="scrollend"),B=Ce?Y!==null?Y+"Capture":null:Y;Ce=[];for(var M=G,V;M!==null;){var se=M;if(V=se.stateNode,se=se.tag,se!==5&&se!==26&&se!==27||V===null||B===null||(se=Mr(M,B),se!=null&&Ce.push(fo(M,se,V))),st)break;M=M.return}0<Ce.length&&(Y=new Q(Y,we,null,s,ee),ae.push({event:Y,listeners:Ce}))}}if((t&7)===0){e:{if(Y=e==="mouseover"||e==="pointerover",Q=e==="mouseout"||e==="pointerout",Y&&s!==Zn&&(we=s.relatedTarget||s.fromElement)&&(hs(we)||we[en]))break e;if((Q||Y)&&(Y=ee.window===ee?ee:(Y=ee.ownerDocument)?Y.defaultView||Y.parentWindow:window,Q?(we=s.relatedTarget||s.toElement,Q=G,we=we?hs(we):null,we!==null&&(st=d(we),Ce=we.tag,we!==st||Ce!==5&&Ce!==27&&Ce!==6)&&(we=null)):(Q=null,we=G),Q!==we)){if(Ce=vl,se="onMouseLeave",B="onMouseEnter",M="mouse",(e==="pointerout"||e==="pointerover")&&(Ce=ai,se="onPointerLeave",B="onPointerEnter",M="pointer"),st=Q==null?Y:Ft(Q),V=we==null?Y:Ft(we),Y=new Ce(se,M+"leave",Q,s,ee),Y.target=st,Y.relatedTarget=V,se=null,hs(ee)===G&&(Ce=new Ce(B,M+"enter",we,s,ee),Ce.target=V,Ce.relatedTarget=st,se=Ce),st=se,Q&&we)t:{for(Ce=Kx,B=Q,M=we,V=0,se=B;se;se=Ce(se))V++;se=0;for(var ke=M;ke;ke=Ce(ke))se++;for(;0<V-se;)B=Ce(B),V--;for(;0<se-V;)M=Ce(M),se--;for(;V--;){if(B===M||M!==null&&B===M.alternate){Ce=B;break t}B=Ce(B),M=Ce(M)}Ce=null}else Ce=null;Q!==null&&Pp(ae,Y,Q,Ce,!1),we!==null&&st!==null&&Pp(ae,st,we,Ce,!0)}}e:{if(Y=G?Ft(G):window,Q=Y.nodeName&&Y.nodeName.toLowerCase(),Q==="select"||Q==="input"&&Y.type==="file")var Ye=Tl;else if(ws(Y))if(ic)Ye=Ss;else{Ye=js;var je=Al}else Q=Y.nodeName,!Q||Q.toLowerCase()!=="input"||Y.type!=="checkbox"&&Y.type!=="radio"?G&&Qr(G.elementType)&&(Ye=Tl):Ye=$s;if(Ye&&(Ye=Ye(e,G))){di(ae,Ye,s,ee);break e}je&&je(e,Y,G),e==="focusout"&&G&&Y.type==="number"&&G.memoizedProps.value!=null&&Xn(Y,"number",Y.value)}switch(je=G?Ft(G):window,e){case"focusin":(ws(je)||je.contentEditable==="true")&&(ba=je,Ol=G,$r=null);break;case"focusout":$r=Ol=ba=null;break;case"mousedown":zl=!0;break;case"contextmenu":case"mouseup":case"dragend":zl=!1,uc(ae,s,ee);break;case"selectionchange":if(Gu)break;case"keydown":case"keyup":uc(ae,s,ee)}var qe;if(ac)e:{switch(e){case"compositionstart":var Ve="onCompositionStart";break e;case"compositionend":Ve="onCompositionEnd";break e;case"compositionupdate":Ve="onCompositionUpdate";break e}Ve=void 0}else xa?ci(e,s)&&(Ve="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(Ve="onCompositionStart");Ve&&(El&&s.locale!=="ko"&&(xa||Ve!=="onCompositionStart"?Ve==="onCompositionEnd"&&xa&&(qe=ml()):(ys=ee,cn="value"in ys?ys.value:ys.textContent,xa=!0)),je=Qc(G,Ve),0<je.length&&(Ve=new Yt(Ve,e,null,s,ee),ae.push({event:Ve,listeners:je}),qe?Ve.data=qe:(qe=gn(s),qe!==null&&(Ve.data=qe)))),(qe=Nl?kl(e,s):Cl(e,s))&&(Ve=Qc(G,"onBeforeInput"),0<Ve.length&&(je=new Yt("onBeforeInput","beforeinput",null,s,ee),ae.push({event:je,listeners:Ve}),je.data=qe)),Ix(ae,e,G,s,ee)}$p(ae,t)})}function fo(e,t,s){return{instance:e,listener:t,currentTarget:s}}function Qc(e,t){for(var s=t+"Capture",l=[];e!==null;){var c=e,h=c.stateNode;if(c=c.tag,c!==5&&c!==26&&c!==27||h===null||(c=Mr(e,s),c!=null&&l.unshift(fo(e,c,h)),c=Mr(e,t),c!=null&&l.push(fo(e,c,h))),e.tag===3)return l;e=e.return}return[]}function Kx(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Pp(e,t,s,l,c){for(var h=t._reactName,v=[];s!==null&&s!==l;){var j=s,O=j.alternate,G=j.stateNode;if(j=j.tag,O!==null&&O===l)break;j!==5&&j!==26&&j!==27||G===null||(O=G,c?(G=Mr(s,h),G!=null&&v.unshift(fo(s,G,O))):c||(G=Mr(s,h),G!=null&&v.push(fo(s,G,O)))),s=s.return}v.length!==0&&e.push({event:t,listeners:v})}var Wx=/\r\n?/g,Xx=/\u0000|\uFFFD/g;function Hp(e){return(typeof e=="string"?e:""+e).replace(Wx,`
`).replace(Xx,"")}function Ip(e,t){return t=Hp(t),Hp(e)===t}function rt(e,t,s,l,c,h){switch(s){case"children":typeof l=="string"?t==="body"||t==="textarea"&&l===""||gs(e,l):(typeof l=="number"||typeof l=="bigint")&&t!=="body"&&gs(e,""+l);break;case"className":an(e,"class",l);break;case"tabIndex":an(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":an(e,s,l);break;case"style":fl(e,l,h);break;case"data":if(t!=="object"){an(e,"data",l);break}case"src":case"href":if(l===""&&(t!=="a"||s!=="href")){e.removeAttribute(s);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(s);break}l=on(""+l),e.setAttribute(s,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof h=="function"&&(s==="formAction"?(t!=="input"&&rt(e,t,"name",c.name,c,null),rt(e,t,"formEncType",c.formEncType,c,null),rt(e,t,"formMethod",c.formMethod,c,null),rt(e,t,"formTarget",c.formTarget,c,null)):(rt(e,t,"encType",c.encType,c,null),rt(e,t,"method",c.method,c,null),rt(e,t,"target",c.target,c,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(s);break}l=on(""+l),e.setAttribute(s,l);break;case"onClick":l!=null&&(e.onclick=rr);break;case"onScroll":l!=null&&Pe("scroll",e);break;case"onScrollEnd":l!=null&&Pe("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(o(61));if(s=l.__html,s!=null){if(c.children!=null)throw Error(o(60));e.innerHTML=s}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}s=on(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(s,""+l):e.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(s,""):e.removeAttribute(s);break;case"capture":case"download":l===!0?e.setAttribute(s,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(s,l):e.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(s,l):e.removeAttribute(s);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(s):e.setAttribute(s,l);break;case"popover":Pe("beforetoggle",e),Pe("toggle",e),fs(e,"popover",l);break;case"xlinkActuate":Vt(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Vt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Vt(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Vt(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Vt(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Vt(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Vt(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Vt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Vt(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":fs(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=Pu.get(s)||s,fs(e,s,l))}}function ah(e,t,s,l,c,h){switch(s){case"style":fl(e,l,h);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(o(61));if(s=l.__html,s!=null){if(c.children!=null)throw Error(o(60));e.innerHTML=s}}break;case"children":typeof l=="string"?gs(e,l):(typeof l=="number"||typeof l=="bigint")&&gs(e,""+l);break;case"onScroll":l!=null&&Pe("scroll",e);break;case"onScrollEnd":l!=null&&Pe("scrollend",e);break;case"onClick":l!=null&&(e.onclick=rr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Bu.hasOwnProperty(s))e:{if(s[0]==="o"&&s[1]==="n"&&(c=s.endsWith("Capture"),t=s.slice(2,c?s.length-7:void 0),h=e[It]||null,h=h!=null?h[s]:null,typeof h=="function"&&e.removeEventListener(t,h,c),typeof l=="function")){typeof h!="function"&&h!==null&&(s in e?e[s]=null:e.hasAttribute(s)&&e.removeAttribute(s)),e.addEventListener(t,l,c);break e}s in e?e[s]=l:l===!0?e.setAttribute(s,""):fs(e,s,l)}}}function Lt(e,t,s){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Pe("error",e),Pe("load",e);var l=!1,c=!1,h;for(h in s)if(s.hasOwnProperty(h)){var v=s[h];if(v!=null)switch(h){case"src":l=!0;break;case"srcSet":c=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:rt(e,t,h,v,s,null)}}c&&rt(e,t,"srcSet",s.srcSet,s,null),l&&rt(e,t,"src",s.src,s,null);return;case"input":Pe("invalid",e);var j=h=v=c=null,O=null,G=null;for(l in s)if(s.hasOwnProperty(l)){var ee=s[l];if(ee!=null)switch(l){case"name":c=ee;break;case"type":v=ee;break;case"checked":O=ee;break;case"defaultChecked":G=ee;break;case"value":h=ee;break;case"defaultValue":j=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(o(137,t));break;default:rt(e,t,l,ee,s,null)}}Us(e,h,j,O,G,v,c,!1);return;case"select":Pe("invalid",e),l=v=h=null;for(c in s)if(s.hasOwnProperty(c)&&(j=s[c],j!=null))switch(c){case"value":h=j;break;case"defaultValue":v=j;break;case"multiple":l=j;default:rt(e,t,c,j,s,null)}t=h,s=v,e.multiple=!!l,t!=null?ps(e,!!l,t,!1):s!=null&&ps(e,!!l,s,!0);return;case"textarea":Pe("invalid",e),h=c=l=null;for(v in s)if(s.hasOwnProperty(v)&&(j=s[v],j!=null))switch(v){case"value":l=j;break;case"defaultValue":c=j;break;case"children":h=j;break;case"dangerouslySetInnerHTML":if(j!=null)throw Error(o(91));break;default:rt(e,t,v,j,s,null)}hl(e,l,c,h);return;case"option":for(O in s)s.hasOwnProperty(O)&&(l=s[O],l!=null)&&(O==="selected"?e.selected=l&&typeof l!="function"&&typeof l!="symbol":rt(e,t,O,l,s,null));return;case"dialog":Pe("beforetoggle",e),Pe("toggle",e),Pe("cancel",e),Pe("close",e);break;case"iframe":case"object":Pe("load",e);break;case"video":case"audio":for(l=0;l<ho.length;l++)Pe(ho[l],e);break;case"image":Pe("error",e),Pe("load",e);break;case"details":Pe("toggle",e);break;case"embed":case"source":case"link":Pe("error",e),Pe("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(G in s)if(s.hasOwnProperty(G)&&(l=s[G],l!=null))switch(G){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:rt(e,t,G,l,s,null)}return;default:if(Qr(t)){for(ee in s)s.hasOwnProperty(ee)&&(l=s[ee],l!==void 0&&ah(e,t,ee,l,s,void 0));return}}for(j in s)s.hasOwnProperty(j)&&(l=s[j],l!=null&&rt(e,t,j,l,s,null))}function Jx(e,t,s,l){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var c=null,h=null,v=null,j=null,O=null,G=null,ee=null;for(Q in s){var ae=s[Q];if(s.hasOwnProperty(Q)&&ae!=null)switch(Q){case"checked":break;case"value":break;case"defaultValue":O=ae;default:l.hasOwnProperty(Q)||rt(e,t,Q,null,l,ae)}}for(var Y in l){var Q=l[Y];if(ae=s[Y],l.hasOwnProperty(Y)&&(Q!=null||ae!=null))switch(Y){case"type":h=Q;break;case"name":c=Q;break;case"checked":G=Q;break;case"defaultChecked":ee=Q;break;case"value":v=Q;break;case"defaultValue":j=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(o(137,t));break;default:Q!==ae&&rt(e,t,Y,Q,l,ae)}}gr(e,v,j,O,G,ee,h,c);return;case"select":Q=v=j=Y=null;for(h in s)if(O=s[h],s.hasOwnProperty(h)&&O!=null)switch(h){case"value":break;case"multiple":Q=O;default:l.hasOwnProperty(h)||rt(e,t,h,null,l,O)}for(c in l)if(h=l[c],O=s[c],l.hasOwnProperty(c)&&(h!=null||O!=null))switch(c){case"value":Y=h;break;case"defaultValue":j=h;break;case"multiple":v=h;default:h!==O&&rt(e,t,c,h,l,O)}t=j,s=v,l=Q,Y!=null?ps(e,!!s,Y,!1):!!l!=!!s&&(t!=null?ps(e,!!s,t,!0):ps(e,!!s,s?[]:"",!1));return;case"textarea":Q=Y=null;for(j in s)if(c=s[j],s.hasOwnProperty(j)&&c!=null&&!l.hasOwnProperty(j))switch(j){case"value":break;case"children":break;default:rt(e,t,j,null,l,c)}for(v in l)if(c=l[v],h=s[v],l.hasOwnProperty(v)&&(c!=null||h!=null))switch(v){case"value":Y=c;break;case"defaultValue":Q=c;break;case"children":break;case"dangerouslySetInnerHTML":if(c!=null)throw Error(o(91));break;default:c!==h&&rt(e,t,v,c,l,h)}Jn(e,Y,Q);return;case"option":for(var we in s)Y=s[we],s.hasOwnProperty(we)&&Y!=null&&!l.hasOwnProperty(we)&&(we==="selected"?e.selected=!1:rt(e,t,we,null,l,Y));for(O in l)Y=l[O],Q=s[O],l.hasOwnProperty(O)&&Y!==Q&&(Y!=null||Q!=null)&&(O==="selected"?e.selected=Y&&typeof Y!="function"&&typeof Y!="symbol":rt(e,t,O,Y,l,Q));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ce in s)Y=s[Ce],s.hasOwnProperty(Ce)&&Y!=null&&!l.hasOwnProperty(Ce)&&rt(e,t,Ce,null,l,Y);for(G in l)if(Y=l[G],Q=s[G],l.hasOwnProperty(G)&&Y!==Q&&(Y!=null||Q!=null))switch(G){case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(o(137,t));break;default:rt(e,t,G,Y,l,Q)}return;default:if(Qr(t)){for(var st in s)Y=s[st],s.hasOwnProperty(st)&&Y!==void 0&&!l.hasOwnProperty(st)&&ah(e,t,st,void 0,l,Y);for(ee in l)Y=l[ee],Q=s[ee],!l.hasOwnProperty(ee)||Y===Q||Y===void 0&&Q===void 0||ah(e,t,ee,Y,l,Q);return}}for(var B in s)Y=s[B],s.hasOwnProperty(B)&&Y!=null&&!l.hasOwnProperty(B)&&rt(e,t,B,null,l,Y);for(ae in l)Y=l[ae],Q=s[ae],!l.hasOwnProperty(ae)||Y===Q||Y==null&&Q==null||rt(e,t,ae,Y,l,Q)}function Vp(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Qx(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,s=performance.getEntriesByType("resource"),l=0;l<s.length;l++){var c=s[l],h=c.transferSize,v=c.initiatorType,j=c.duration;if(h&&j&&Vp(v)){for(v=0,j=c.responseEnd,l+=1;l<s.length;l++){var O=s[l],G=O.startTime;if(G>j)break;var ee=O.transferSize,ae=O.initiatorType;ee&&Vp(ae)&&(O=O.responseEnd,v+=ee*(O<j?1:(j-G)/(O-G)))}if(--l,t+=8*(h+v)/(c.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var nh=null,ih=null;function Zc(e){return e.nodeType===9?e:e.ownerDocument}function Gp(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Yp(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function lh(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var oh=null;function Zx(){var e=window.event;return e&&e.type==="popstate"?e===oh?!1:(oh=e,!0):(oh=null,!1)}var Kp=typeof setTimeout=="function"?setTimeout:void 0,Fx=typeof clearTimeout=="function"?clearTimeout:void 0,Wp=typeof Promise=="function"?Promise:void 0,ev=typeof queueMicrotask=="function"?queueMicrotask:typeof Wp<"u"?function(e){return Wp.resolve(null).then(e).catch(tv)}:Kp;function tv(e){setTimeout(function(){throw e})}function $a(e){return e==="head"}function Xp(e,t){var s=t,l=0;do{var c=s.nextSibling;if(e.removeChild(s),c&&c.nodeType===8)if(s=c.data,s==="/$"||s==="/&"){if(l===0){e.removeChild(c),Vi(t);return}l--}else if(s==="$"||s==="$?"||s==="$~"||s==="$!"||s==="&")l++;else if(s==="html")mo(e.ownerDocument.documentElement);else if(s==="head"){s=e.ownerDocument.head,mo(s);for(var h=s.firstChild;h;){var v=h.nextSibling,j=h.nodeName;h[Yn]||j==="SCRIPT"||j==="STYLE"||j==="LINK"&&h.rel.toLowerCase()==="stylesheet"||s.removeChild(h),h=v}}else s==="body"&&mo(e.ownerDocument.body);s=c}while(s);Vi(t)}function Jp(e,t){var s=e;e=0;do{var l=s.nextSibling;if(s.nodeType===1?t?(s._stashedDisplay=s.style.display,s.style.display="none"):(s.style.display=s._stashedDisplay||"",s.getAttribute("style")===""&&s.removeAttribute("style")):s.nodeType===3&&(t?(s._stashedText=s.nodeValue,s.nodeValue=""):s.nodeValue=s._stashedText||""),l&&l.nodeType===8)if(s=l.data,s==="/$"){if(e===0)break;e--}else s!=="$"&&s!=="$?"&&s!=="$~"&&s!=="$!"||e++;s=l}while(s)}function ch(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var s=t;switch(t=t.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":ch(s),Ko(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}e.removeChild(s)}}function rv(e,t,s,l){for(;e.nodeType===1;){var c=s;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[Yn])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(h=e.getAttribute("rel"),h==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(h!==c.rel||e.getAttribute("href")!==(c.href==null||c.href===""?null:c.href)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin)||e.getAttribute("title")!==(c.title==null?null:c.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(h=e.getAttribute("src"),(h!==(c.src==null?null:c.src)||e.getAttribute("type")!==(c.type==null?null:c.type)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin))&&h&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var h=c.name==null?null:""+c.name;if(c.type==="hidden"&&e.getAttribute("name")===h)return e}else return e;if(e=Pr(e.nextSibling),e===null)break}return null}function sv(e,t,s){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!s||(e=Pr(e.nextSibling),e===null))return null;return e}function Qp(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=Pr(e.nextSibling),e===null))return null;return e}function uh(e){return e.data==="$?"||e.data==="$~"}function dh(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function av(e,t){var s=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||s.readyState!=="loading")t();else{var l=function(){t(),s.removeEventListener("DOMContentLoaded",l)};s.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function Pr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var hh=null;function Zp(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"||s==="/&"){if(t===0)return Pr(e.nextSibling);t--}else s!=="$"&&s!=="$!"&&s!=="$?"&&s!=="$~"&&s!=="&"||t++}e=e.nextSibling}return null}function Fp(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"){if(t===0)return e;t--}else s!=="/$"&&s!=="/&"||t++}e=e.previousSibling}return null}function e0(e,t,s){switch(t=Zc(s),e){case"html":if(e=t.documentElement,!e)throw Error(o(452));return e;case"head":if(e=t.head,!e)throw Error(o(453));return e;case"body":if(e=t.body,!e)throw Error(o(454));return e;default:throw Error(o(451))}}function mo(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Ko(e)}var Hr=new Map,t0=new Set;function Fc(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Fs=R.d;R.d={f:nv,r:iv,D:lv,C:ov,L:cv,m:uv,X:hv,S:dv,M:fv};function nv(){var e=Fs.f(),t=Vc();return e||t}function iv(e){var t=Jr(e);t!==null&&t.tag===5&&t.type==="form"?vm(t):Fs.r(e)}var Pi=typeof document>"u"?null:document;function r0(e,t,s){var l=Pi;if(l&&typeof t=="string"&&t){var c=Gt(t);c='link[rel="'+e+'"][href="'+c+'"]',typeof s=="string"&&(c+='[crossorigin="'+s+'"]'),t0.has(c)||(t0.add(c),e={rel:e,crossOrigin:s,href:t},l.querySelector(c)===null&&(t=l.createElement("link"),Lt(t,"link",e),pt(t),l.head.appendChild(t)))}}function lv(e){Fs.D(e),r0("dns-prefetch",e,null)}function ov(e,t){Fs.C(e,t),r0("preconnect",e,t)}function cv(e,t,s){Fs.L(e,t,s);var l=Pi;if(l&&e&&t){var c='link[rel="preload"][as="'+Gt(t)+'"]';t==="image"&&s&&s.imageSrcSet?(c+='[imagesrcset="'+Gt(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(c+='[imagesizes="'+Gt(s.imageSizes)+'"]')):c+='[href="'+Gt(e)+'"]';var h=c;switch(t){case"style":h=Hi(e);break;case"script":h=Ii(e)}Hr.has(h)||(e=N({rel:"preload",href:t==="image"&&s&&s.imageSrcSet?void 0:e,as:t},s),Hr.set(h,e),l.querySelector(c)!==null||t==="style"&&l.querySelector(po(h))||t==="script"&&l.querySelector(go(h))||(t=l.createElement("link"),Lt(t,"link",e),pt(t),l.head.appendChild(t)))}}function uv(e,t){Fs.m(e,t);var s=Pi;if(s&&e){var l=t&&typeof t.as=="string"?t.as:"script",c='link[rel="modulepreload"][as="'+Gt(l)+'"][href="'+Gt(e)+'"]',h=c;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":h=Ii(e)}if(!Hr.has(h)&&(e=N({rel:"modulepreload",href:e},t),Hr.set(h,e),s.querySelector(c)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(go(h)))return}l=s.createElement("link"),Lt(l,"link",e),pt(l),s.head.appendChild(l)}}}function dv(e,t,s){Fs.S(e,t,s);var l=Pi;if(l&&e){var c=er(l).hoistableStyles,h=Hi(e);t=t||"default";var v=c.get(h);if(!v){var j={loading:0,preload:null};if(v=l.querySelector(po(h)))j.loading=5;else{e=N({rel:"stylesheet",href:e,"data-precedence":t},s),(s=Hr.get(h))&&fh(e,s);var O=v=l.createElement("link");pt(O),Lt(O,"link",e),O._p=new Promise(function(G,ee){O.onload=G,O.onerror=ee}),O.addEventListener("load",function(){j.loading|=1}),O.addEventListener("error",function(){j.loading|=2}),j.loading|=4,eu(v,t,l)}v={type:"stylesheet",instance:v,count:1,state:j},c.set(h,v)}}}function hv(e,t){Fs.X(e,t);var s=Pi;if(s&&e){var l=er(s).hoistableScripts,c=Ii(e),h=l.get(c);h||(h=s.querySelector(go(c)),h||(e=N({src:e,async:!0},t),(t=Hr.get(c))&&mh(e,t),h=s.createElement("script"),pt(h),Lt(h,"link",e),s.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},l.set(c,h))}}function fv(e,t){Fs.M(e,t);var s=Pi;if(s&&e){var l=er(s).hoistableScripts,c=Ii(e),h=l.get(c);h||(h=s.querySelector(go(c)),h||(e=N({src:e,async:!0,type:"module"},t),(t=Hr.get(c))&&mh(e,t),h=s.createElement("script"),pt(h),Lt(h,"link",e),s.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},l.set(c,h))}}function s0(e,t,s,l){var c=(c=pe.current)?Fc(c):null;if(!c)throw Error(o(446));switch(e){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(t=Hi(s.href),s=er(c).hoistableStyles,l=s.get(t),l||(l={type:"style",instance:null,count:0,state:null},s.set(t,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){e=Hi(s.href);var h=er(c).hoistableStyles,v=h.get(e);if(v||(c=c.ownerDocument||c,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},h.set(e,v),(h=c.querySelector(po(e)))&&!h._p&&(v.instance=h,v.state.loading=5),Hr.has(e)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},Hr.set(e,s),h||mv(c,e,s,v.state))),t&&l===null)throw Error(o(528,""));return v}if(t&&l!==null)throw Error(o(529,""));return null;case"script":return t=s.async,s=s.src,typeof s=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Ii(s),s=er(c).hoistableScripts,l=s.get(t),l||(l={type:"script",instance:null,count:0,state:null},s.set(t,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,e))}}function Hi(e){return'href="'+Gt(e)+'"'}function po(e){return'link[rel="stylesheet"]['+e+"]"}function a0(e){return N({},e,{"data-precedence":e.precedence,precedence:null})}function mv(e,t,s,l){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?l.loading=1:(t=e.createElement("link"),l.preload=t,t.addEventListener("load",function(){return l.loading|=1}),t.addEventListener("error",function(){return l.loading|=2}),Lt(t,"link",s),pt(t),e.head.appendChild(t))}function Ii(e){return'[src="'+Gt(e)+'"]'}function go(e){return"script[async]"+e}function n0(e,t,s){if(t.count++,t.instance===null)switch(t.type){case"style":var l=e.querySelector('style[data-href~="'+Gt(s.href)+'"]');if(l)return t.instance=l,pt(l),l;var c=N({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),pt(l),Lt(l,"style",c),eu(l,s.precedence,e),t.instance=l;case"stylesheet":c=Hi(s.href);var h=e.querySelector(po(c));if(h)return t.state.loading|=4,t.instance=h,pt(h),h;l=a0(s),(c=Hr.get(c))&&fh(l,c),h=(e.ownerDocument||e).createElement("link"),pt(h);var v=h;return v._p=new Promise(function(j,O){v.onload=j,v.onerror=O}),Lt(h,"link",l),t.state.loading|=4,eu(h,s.precedence,e),t.instance=h;case"script":return h=Ii(s.src),(c=e.querySelector(go(h)))?(t.instance=c,pt(c),c):(l=s,(c=Hr.get(h))&&(l=N({},s),mh(l,c)),e=e.ownerDocument||e,c=e.createElement("script"),pt(c),Lt(c,"link",l),e.head.appendChild(c),t.instance=c);case"void":return null;default:throw Error(o(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(l=t.instance,t.state.loading|=4,eu(l,s.precedence,e));return t.instance}function eu(e,t,s){for(var l=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),c=l.length?l[l.length-1]:null,h=c,v=0;v<l.length;v++){var j=l[v];if(j.dataset.precedence===t)h=j;else if(h!==c)break}h?h.parentNode.insertBefore(e,h.nextSibling):(t=s.nodeType===9?s.head:s,t.insertBefore(e,t.firstChild))}function fh(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function mh(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var tu=null;function i0(e,t,s){if(tu===null){var l=new Map,c=tu=new Map;c.set(s,l)}else c=tu,l=c.get(s),l||(l=new Map,c.set(s,l));if(l.has(e))return l;for(l.set(e,null),s=s.getElementsByTagName(e),c=0;c<s.length;c++){var h=s[c];if(!(h[Yn]||h[kt]||e==="link"&&h.getAttribute("rel")==="stylesheet")&&h.namespaceURI!=="http://www.w3.org/2000/svg"){var v=h.getAttribute(t)||"";v=e+v;var j=l.get(v);j?j.push(h):l.set(v,[h])}}return l}function l0(e,t,s){e=e.ownerDocument||e,e.head.insertBefore(s,t==="title"?e.querySelector("head > title"):null)}function pv(e,t,s){if(s===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;return t.rel==="stylesheet"?(e=t.disabled,typeof t.precedence=="string"&&e==null):!0;case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function o0(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function gv(e,t,s,l){if(s.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var c=Hi(l.href),h=t.querySelector(po(c));if(h){t=h._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=ru.bind(e),t.then(e,e)),s.state.loading|=4,s.instance=h,pt(h);return}h=t.ownerDocument||t,l=a0(l),(c=Hr.get(c))&&fh(l,c),h=h.createElement("link"),pt(h);var v=h;v._p=new Promise(function(j,O){v.onload=j,v.onerror=O}),Lt(h,"link",l),s.instance=h}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(s,t),(t=s.state.preload)&&(s.state.loading&3)===0&&(e.count++,s=ru.bind(e),t.addEventListener("load",s),t.addEventListener("error",s))}}var ph=0;function xv(e,t){return e.stylesheets&&e.count===0&&au(e,e.stylesheets),0<e.count||0<e.imgCount?function(s){var l=setTimeout(function(){if(e.stylesheets&&au(e,e.stylesheets),e.unsuspend){var h=e.unsuspend;e.unsuspend=null,h()}},6e4+t);0<e.imgBytes&&ph===0&&(ph=62500*Qx());var c=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&au(e,e.stylesheets),e.unsuspend)){var h=e.unsuspend;e.unsuspend=null,h()}},(e.imgBytes>ph?50:800)+t);return e.unsuspend=s,function(){e.unsuspend=null,clearTimeout(l),clearTimeout(c)}}:null}function ru(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)au(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var su=null;function au(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,su=new Map,t.forEach(vv,e),su=null,ru.call(e))}function vv(e,t){if(!(t.state.loading&4)){var s=su.get(e);if(s)var l=s.get(null);else{s=new Map,su.set(e,s);for(var c=e.querySelectorAll("link[data-precedence],style[data-precedence]"),h=0;h<c.length;h++){var v=c[h];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(s.set(v.dataset.precedence,v),l=v)}l&&s.set(null,l)}c=t.instance,v=c.getAttribute("data-precedence"),h=s.get(v)||l,h===l&&s.set(null,c),s.set(v,c),this.count++,l=ru.bind(this),c.addEventListener("load",l),c.addEventListener("error",l),h?h.parentNode.insertBefore(c,h.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(c,e.firstChild)),t.state.loading|=4}}var xo={$$typeof:q,Provider:null,Consumer:null,_currentValue:le,_currentValue2:le,_threadCount:0};function yv(e,t,s,l,c,h,v,j,O){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Za(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Za(0),this.hiddenUpdates=Za(null),this.identifierPrefix=l,this.onUncaughtError=c,this.onCaughtError=h,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=O,this.incompleteTransitions=new Map}function c0(e,t,s,l,c,h,v,j,O,G,ee,ae){return e=new yv(e,t,s,v,O,G,ee,ae,j),t=1,h===!0&&(t|=24),h=Xt(3,null,null,t),e.current=h,h.stateNode=e,t=Wu(),t.refCount++,e.pooledCache=t,t.refCount++,h.memoizedState={element:l,isDehydrated:s,cache:t},Zu(h),e}function u0(e){return e?(e=ja,e):ja}function d0(e,t,s,l,c,h){c=u0(c),l.context===null?l.context=c:l.pendingContext=c,l=Ca(t),l.payload={element:s},h=h===void 0?null:h,h!==null&&(l.callback=h),s=Ta(e,l,t),s!==null&&(fr(s,e,t),Wl(s,e,t))}function h0(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<t?s:t}}function gh(e,t){h0(e,t),(e=e.alternate)&&h0(e,t)}function f0(e){if(e.tag===13||e.tag===31){var t=Hs(e,67108864);t!==null&&fr(t,e,67108864),gh(e,67108864)}}function m0(e){if(e.tag===13||e.tag===31){var t=Er();t=Bt(t);var s=Hs(e,t);s!==null&&fr(s,e,t),gh(e,t)}}var nu=!0;function bv(e,t,s,l){var c=I.T;I.T=null;var h=R.p;try{R.p=2,xh(e,t,s,l)}finally{R.p=h,I.T=c}}function wv(e,t,s,l){var c=I.T;I.T=null;var h=R.p;try{R.p=8,xh(e,t,s,l)}finally{R.p=h,I.T=c}}function xh(e,t,s,l){if(nu){var c=vh(l);if(c===null)sh(e,t,l,iu,s),g0(e,l);else if(jv(c,e,t,s,l))l.stopPropagation();else if(g0(e,l),t&4&&-1<_v.indexOf(e)){for(;c!==null;){var h=Jr(c);if(h!==null)switch(h.tag){case 3:if(h=h.stateNode,h.current.memoizedState.isDehydrated){var v=ds(h.pendingLanes);if(v!==0){var j=h;for(j.pendingLanes|=2,j.entangledLanes|=2;v;){var O=1<<31-Ut(v);j.entanglements[1]|=O,v&=~O}Ts(h),(Xe&6)===0&&(Hc=Dt()+500,uo(0))}}break;case 31:case 13:j=Hs(h,2),j!==null&&fr(j,h,2),Vc(),gh(h,2)}if(h=vh(l),h===null&&sh(e,t,l,iu,s),h===c)break;c=h}c!==null&&l.stopPropagation()}else sh(e,t,l,null,s)}}function vh(e){return e=Ge(e),yh(e)}var iu=null;function yh(e){if(iu=null,e=hs(e),e!==null){var t=d(e);if(t===null)e=null;else{var s=t.tag;if(s===13){if(e=f(t),e!==null)return e;e=null}else if(s===31){if(e=m(t),e!==null)return e;e=null}else if(s===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return iu=e,null}function p0(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Po()){case Uu:return 2;case ol:return 8;case ca:case Mu:return 32;case Or:return 268435456;default:return 32}default:return 32}}var bh=!1,Ba=null,Pa=null,Ha=null,vo=new Map,yo=new Map,Ia=[],_v="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function g0(e,t){switch(e){case"focusin":case"focusout":Ba=null;break;case"dragenter":case"dragleave":Pa=null;break;case"mouseover":case"mouseout":Ha=null;break;case"pointerover":case"pointerout":vo.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":yo.delete(t.pointerId)}}function bo(e,t,s,l,c,h){return e===null||e.nativeEvent!==h?(e={blockedOn:t,domEventName:s,eventSystemFlags:l,nativeEvent:h,targetContainers:[c]},t!==null&&(t=Jr(t),t!==null&&f0(t)),e):(e.eventSystemFlags|=l,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function jv(e,t,s,l,c){switch(t){case"focusin":return Ba=bo(Ba,e,t,s,l,c),!0;case"dragenter":return Pa=bo(Pa,e,t,s,l,c),!0;case"mouseover":return Ha=bo(Ha,e,t,s,l,c),!0;case"pointerover":var h=c.pointerId;return vo.set(h,bo(vo.get(h)||null,e,t,s,l,c)),!0;case"gotpointercapture":return h=c.pointerId,yo.set(h,bo(yo.get(h)||null,e,t,s,l,c)),!0}return!1}function x0(e){var t=hs(e.target);if(t!==null){var s=d(t);if(s!==null){if(t=s.tag,t===13){if(t=f(s),t!==null){e.blockedOn=t,qu(e.priority,function(){m0(s)});return}}else if(t===31){if(t=m(s),t!==null){e.blockedOn=t,qu(e.priority,function(){m0(s)});return}}else if(t===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function lu(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var s=vh(e.nativeEvent);if(s===null){s=e.nativeEvent;var l=new s.constructor(s.type,s);Zn=l,s.target.dispatchEvent(l),Zn=null}else return t=Jr(s),t!==null&&f0(t),e.blockedOn=s,!1;t.shift()}return!0}function v0(e,t,s){lu(e)&&s.delete(t)}function Sv(){bh=!1,Ba!==null&&lu(Ba)&&(Ba=null),Pa!==null&&lu(Pa)&&(Pa=null),Ha!==null&&lu(Ha)&&(Ha=null),vo.forEach(v0),yo.forEach(v0)}function ou(e,t){e.blockedOn===t&&(e.blockedOn=null,bh||(bh=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Sv)))}var cu=null;function y0(e){cu!==e&&(cu=e,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){cu===e&&(cu=null);for(var t=0;t<e.length;t+=3){var s=e[t],l=e[t+1],c=e[t+2];if(typeof l!="function"){if(yh(l||s)===null)continue;break}var h=Jr(s);h!==null&&(e.splice(t,3),t-=3,vd(h,{pending:!0,data:c,method:s.method,action:l},l,c))}}))}function Vi(e){function t(O){return ou(O,e)}Ba!==null&&ou(Ba,e),Pa!==null&&ou(Pa,e),Ha!==null&&ou(Ha,e),vo.forEach(t),yo.forEach(t);for(var s=0;s<Ia.length;s++){var l=Ia[s];l.blockedOn===e&&(l.blockedOn=null)}for(;0<Ia.length&&(s=Ia[0],s.blockedOn===null);)x0(s),s.blockedOn===null&&Ia.shift();if(s=(e.ownerDocument||e).$$reactFormReplay,s!=null)for(l=0;l<s.length;l+=3){var c=s[l],h=s[l+1],v=c[It]||null;if(typeof h=="function")v||y0(s);else if(v){var j=null;if(h&&h.hasAttribute("formAction")){if(c=h,v=h[It]||null)j=v.formAction;else if(yh(c)!==null)continue}else j=v.action;typeof j=="function"?s[l+1]=j:(s.splice(l,3),l-=3),y0(s)}}}function b0(){function e(h){h.canIntercept&&h.info==="react-transition"&&h.intercept({handler:function(){return new Promise(function(v){return c=v})},focusReset:"manual",scroll:"manual"})}function t(){c!==null&&(c(),c=null),l||setTimeout(s,20)}function s(){if(!l&&!navigation.transition){var h=navigation.currentEntry;h&&h.url!=null&&navigation.navigate(h.url,{state:h.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,c=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(s,100),function(){l=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),c!==null&&(c(),c=null)}}}function wh(e){this._internalRoot=e}uu.prototype.render=wh.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(o(409));var s=t.current,l=Er();d0(s,l,e,t,null,null)},uu.prototype.unmount=wh.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;d0(e.current,2,null,e,null,null),Vc(),t[en]=null}};function uu(e){this._internalRoot=e}uu.prototype.unstable_scheduleHydration=function(e){if(e){var t=Lu();e={blockedOn:null,target:e,priority:t};for(var s=0;s<Ia.length&&t!==0&&t<Ia[s].priority;s++);Ia.splice(s,0,e),s===0&&x0(e)}};var w0=r.version;if(w0!=="19.2.3")throw Error(o(527,w0,"19.2.3"));R.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(o(188)):(e=Object.keys(e).join(","),Error(o(268,e)));return e=x(t),e=e!==null?w(e):null,e=e===null?null:e.stateNode,e};var Nv={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:I,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var du=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!du.isDisabled&&du.supportsFiber)try{zr=du.inject(Nv),Rt=du}catch{}}return _o.createRoot=function(e,t){if(!u(e))throw Error(o(299));var s=!1,l="",c=Cm,h=Tm,v=Am;return t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(l=t.identifierPrefix),t.onUncaughtError!==void 0&&(c=t.onUncaughtError),t.onCaughtError!==void 0&&(h=t.onCaughtError),t.onRecoverableError!==void 0&&(v=t.onRecoverableError)),t=c0(e,1,!1,null,null,s,l,null,c,h,v,b0),e[en]=t.current,rh(e),new wh(t)},_o.hydrateRoot=function(e,t,s){if(!u(e))throw Error(o(299));var l=!1,c="",h=Cm,v=Tm,j=Am,O=null;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onUncaughtError!==void 0&&(h=s.onUncaughtError),s.onCaughtError!==void 0&&(v=s.onCaughtError),s.onRecoverableError!==void 0&&(j=s.onRecoverableError),s.formState!==void 0&&(O=s.formState)),t=c0(e,1,!0,t,s??null,l,c,O,h,v,j,b0),t.context=u0(null),s=t.current,l=Er(),l=Bt(l),c=Ca(l),c.callback=null,Ta(s,c,l),s=l,t.current.lanes=s,Fa(t,s),Ts(t),e[en]=t.current,rh(e),new uu(t)},_o.version="19.2.3",_o}var R0;function Mv(){if(R0)return Sh.exports;R0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(r){console.error(r)}}return n(),Sh.exports=Uv(),Sh.exports}var Lv=Mv();function Cu(n,r){var a={};for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&r.indexOf(o)<0&&(a[o]=n[o]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,o=Object.getOwnPropertySymbols(n);u<o.length;u++)r.indexOf(o[u])<0&&Object.prototype.propertyIsEnumerable.call(n,o[u])&&(a[o[u]]=n[o[u]]);return a}function qv(n,r,a,o){function u(d){return d instanceof a?d:new a(function(f){f(d)})}return new(a||(a=Promise))(function(d,f){function m(w){try{x(o.next(w))}catch(N){f(N)}}function p(w){try{x(o.throw(w))}catch(N){f(N)}}function x(w){w.done?d(w.value):u(w.value).then(m,p)}x((o=o.apply(n,r||[])).next())})}const $v=n=>n?(...r)=>n(...r):(...r)=>fetch(...r);class mf extends Error{constructor(r,a="FunctionsError",o){super(r),this.name=a,this.context=o}}class Bv extends mf{constructor(r){super("Failed to send a request to the Edge Function","FunctionsFetchError",r)}}class O0 extends mf{constructor(r){super("Relay Error invoking the Edge Function","FunctionsRelayError",r)}}class z0 extends mf{constructor(r){super("Edge Function returned a non-2xx status code","FunctionsHttpError",r)}}var Wh;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(Wh||(Wh={}));class Pv{constructor(r,{headers:a={},customFetch:o,region:u=Wh.Any}={}){this.url=r,this.headers=a,this.region=u,this.fetch=$v(o)}setAuth(r){this.headers.Authorization=`Bearer ${r}`}invoke(r){return qv(this,arguments,void 0,function*(a,o={}){var u;let d,f;try{const{headers:m,method:p,body:x,signal:w,timeout:N}=o;let E={},{region:A}=o;A||(A=this.region);const $=new URL(`${this.url}/${a}`);A&&A!=="any"&&(E["x-region"]=A,$.searchParams.set("forceFunctionRegion",A));let D;x&&(m&&!Object.prototype.hasOwnProperty.call(m,"Content-Type")||!m)?typeof Blob<"u"&&x instanceof Blob||x instanceof ArrayBuffer?(E["Content-Type"]="application/octet-stream",D=x):typeof x=="string"?(E["Content-Type"]="text/plain",D=x):typeof FormData<"u"&&x instanceof FormData?D=x:(E["Content-Type"]="application/json",D=JSON.stringify(x)):D=x;let k=w;N&&(f=new AbortController,d=setTimeout(()=>f.abort(),N),w?(k=f.signal,w.addEventListener("abort",()=>f.abort())):k=f.signal);const H=yield this.fetch($.toString(),{method:p||"POST",headers:Object.assign(Object.assign(Object.assign({},E),this.headers),m),body:D,signal:k}).catch(ie=>{throw new Bv(ie)}),P=H.headers.get("x-relay-error");if(P&&P==="true")throw new O0(H);if(!H.ok)throw new z0(H);let q=((u=H.headers.get("Content-Type"))!==null&&u!==void 0?u:"text/plain").split(";")[0].trim(),K;return q==="application/json"?K=yield H.json():q==="application/octet-stream"||q==="application/pdf"?K=yield H.blob():q==="text/event-stream"?K=H:q==="multipart/form-data"?K=yield H.formData():K=yield H.text(),{data:K,error:null,response:H}}catch(m){return{data:null,error:m,response:m instanceof z0||m instanceof O0?m.context:void 0}}finally{d&&clearTimeout(d)}})}}var Hv=class extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}},Iv=class{constructor(n){var r,a;this.shouldThrowOnError=!1,this.method=n.method,this.url=n.url,this.headers=new Headers(n.headers),this.schema=n.schema,this.body=n.body,this.shouldThrowOnError=(r=n.shouldThrowOnError)!==null&&r!==void 0?r:!1,this.signal=n.signal,this.isMaybeSingle=(a=n.isMaybeSingle)!==null&&a!==void 0?a:!1,n.fetch?this.fetch=n.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(n,r){return this.headers=new Headers(this.headers),this.headers.set(n,r),this}then(n,r){var a=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const o=this.fetch;let u=o(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async d=>{let f=null,m=null,p=null,x=d.status,w=d.statusText;if(d.ok){var N,E;if(a.method!=="HEAD"){var A;const H=await d.text();H===""||(a.headers.get("Accept")==="text/csv"||a.headers.get("Accept")&&(!((A=a.headers.get("Accept"))===null||A===void 0)&&A.includes("application/vnd.pgrst.plan+text"))?m=H:m=JSON.parse(H))}const D=(N=a.headers.get("Prefer"))===null||N===void 0?void 0:N.match(/count=(exact|planned|estimated)/),k=(E=d.headers.get("content-range"))===null||E===void 0?void 0:E.split("/");D&&k&&k.length>1&&(p=parseInt(k[1])),a.isMaybeSingle&&a.method==="GET"&&Array.isArray(m)&&(m.length>1?(f={code:"PGRST116",details:`Results contain ${m.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},m=null,p=null,x=406,w="Not Acceptable"):m.length===1?m=m[0]:m=null)}else{var $;const D=await d.text();try{f=JSON.parse(D),Array.isArray(f)&&d.status===404&&(m=[],f=null,x=200,w="OK")}catch{d.status===404&&D===""?(x=204,w="No Content"):f={message:D}}if(f&&a.isMaybeSingle&&(!(f==null||($=f.details)===null||$===void 0)&&$.includes("0 rows"))&&(f=null,x=200,w="OK"),f&&a.shouldThrowOnError)throw new Hv(f)}return{error:f,data:m,count:p,status:x,statusText:w}});return this.shouldThrowOnError||(u=u.catch(d=>{var f;let m="";const p=d?.cause;if(p){var x,w,N,E;const $=(x=p?.message)!==null&&x!==void 0?x:"",D=(w=p?.code)!==null&&w!==void 0?w:"";m=`${(N=d?.name)!==null&&N!==void 0?N:"FetchError"}: ${d?.message}`,m+=`

Caused by: ${(E=p?.name)!==null&&E!==void 0?E:"Error"}: ${$}`,D&&(m+=` (${D})`),p?.stack&&(m+=`
${p.stack}`)}else{var A;m=(A=d?.stack)!==null&&A!==void 0?A:""}return{error:{message:`${(f=d?.name)!==null&&f!==void 0?f:"FetchError"}: ${d?.message}`,details:m,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),u.then(n,r)}returns(){return this}overrideTypes(){return this}},Vv=class extends Iv{select(n){let r=!1;const a=(n??"*").split("").map(o=>/\s/.test(o)&&!r?"":(o==='"'&&(r=!r),o)).join("");return this.url.searchParams.set("select",a),this.headers.append("Prefer","return=representation"),this}order(n,{ascending:r=!0,nullsFirst:a,foreignTable:o,referencedTable:u=o}={}){const d=u?`${u}.order`:"order",f=this.url.searchParams.get(d);return this.url.searchParams.set(d,`${f?`${f},`:""}${n}.${r?"asc":"desc"}${a===void 0?"":a?".nullsfirst":".nullslast"}`),this}limit(n,{foreignTable:r,referencedTable:a=r}={}){const o=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(o,`${n}`),this}range(n,r,{foreignTable:a,referencedTable:o=a}={}){const u=typeof o>"u"?"offset":`${o}.offset`,d=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(u,`${n}`),this.url.searchParams.set(d,`${r-n+1}`),this}abortSignal(n){return this.signal=n,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:n=!1,verbose:r=!1,settings:a=!1,buffers:o=!1,wal:u=!1,format:d="text"}={}){var f;const m=[n?"analyze":null,r?"verbose":null,a?"settings":null,o?"buffers":null,u?"wal":null].filter(Boolean).join("|"),p=(f=this.headers.get("Accept"))!==null&&f!==void 0?f:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${d}; for="${p}"; options=${m};`),d==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(n){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${n}`),this}};const D0=new RegExp("[,()]");var Qi=class extends Vv{eq(n,r){return this.url.searchParams.append(n,`eq.${r}`),this}neq(n,r){return this.url.searchParams.append(n,`neq.${r}`),this}gt(n,r){return this.url.searchParams.append(n,`gt.${r}`),this}gte(n,r){return this.url.searchParams.append(n,`gte.${r}`),this}lt(n,r){return this.url.searchParams.append(n,`lt.${r}`),this}lte(n,r){return this.url.searchParams.append(n,`lte.${r}`),this}like(n,r){return this.url.searchParams.append(n,`like.${r}`),this}likeAllOf(n,r){return this.url.searchParams.append(n,`like(all).{${r.join(",")}}`),this}likeAnyOf(n,r){return this.url.searchParams.append(n,`like(any).{${r.join(",")}}`),this}ilike(n,r){return this.url.searchParams.append(n,`ilike.${r}`),this}ilikeAllOf(n,r){return this.url.searchParams.append(n,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(n,r){return this.url.searchParams.append(n,`ilike(any).{${r.join(",")}}`),this}regexMatch(n,r){return this.url.searchParams.append(n,`match.${r}`),this}regexIMatch(n,r){return this.url.searchParams.append(n,`imatch.${r}`),this}is(n,r){return this.url.searchParams.append(n,`is.${r}`),this}isDistinct(n,r){return this.url.searchParams.append(n,`isdistinct.${r}`),this}in(n,r){const a=Array.from(new Set(r)).map(o=>typeof o=="string"&&D0.test(o)?`"${o}"`:`${o}`).join(",");return this.url.searchParams.append(n,`in.(${a})`),this}notIn(n,r){const a=Array.from(new Set(r)).map(o=>typeof o=="string"&&D0.test(o)?`"${o}"`:`${o}`).join(",");return this.url.searchParams.append(n,`not.in.(${a})`),this}contains(n,r){return typeof r=="string"?this.url.searchParams.append(n,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(n,`cs.{${r.join(",")}}`):this.url.searchParams.append(n,`cs.${JSON.stringify(r)}`),this}containedBy(n,r){return typeof r=="string"?this.url.searchParams.append(n,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(n,`cd.{${r.join(",")}}`):this.url.searchParams.append(n,`cd.${JSON.stringify(r)}`),this}rangeGt(n,r){return this.url.searchParams.append(n,`sr.${r}`),this}rangeGte(n,r){return this.url.searchParams.append(n,`nxl.${r}`),this}rangeLt(n,r){return this.url.searchParams.append(n,`sl.${r}`),this}rangeLte(n,r){return this.url.searchParams.append(n,`nxr.${r}`),this}rangeAdjacent(n,r){return this.url.searchParams.append(n,`adj.${r}`),this}overlaps(n,r){return typeof r=="string"?this.url.searchParams.append(n,`ov.${r}`):this.url.searchParams.append(n,`ov.{${r.join(",")}}`),this}textSearch(n,r,{config:a,type:o}={}){let u="";o==="plain"?u="pl":o==="phrase"?u="ph":o==="websearch"&&(u="w");const d=a===void 0?"":`(${a})`;return this.url.searchParams.append(n,`${u}fts${d}.${r}`),this}match(n){return Object.entries(n).forEach(([r,a])=>{this.url.searchParams.append(r,`eq.${a}`)}),this}not(n,r,a){return this.url.searchParams.append(n,`not.${r}.${a}`),this}or(n,{foreignTable:r,referencedTable:a=r}={}){const o=a?`${a}.or`:"or";return this.url.searchParams.append(o,`(${n})`),this}filter(n,r,a){return this.url.searchParams.append(n,`${r}.${a}`),this}},Gv=class{constructor(n,{headers:r={},schema:a,fetch:o}){this.url=n,this.headers=new Headers(r),this.schema=a,this.fetch=o}select(n,r){const{head:a=!1,count:o}=r??{},u=a?"HEAD":"GET";let d=!1;const f=(n??"*").split("").map(m=>/\s/.test(m)&&!d?"":(m==='"'&&(d=!d),m)).join("");return this.url.searchParams.set("select",f),o&&this.headers.append("Prefer",`count=${o}`),new Qi({method:u,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(n,{count:r,defaultToNull:a=!0}={}){var o;const u="POST";if(r&&this.headers.append("Prefer",`count=${r}`),a||this.headers.append("Prefer","missing=default"),Array.isArray(n)){const d=n.reduce((f,m)=>f.concat(Object.keys(m)),[]);if(d.length>0){const f=[...new Set(d)].map(m=>`"${m}"`);this.url.searchParams.set("columns",f.join(","))}}return new Qi({method:u,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}upsert(n,{onConflict:r,ignoreDuplicates:a=!1,count:o,defaultToNull:u=!0}={}){var d;const f="POST";if(this.headers.append("Prefer",`resolution=${a?"ignore":"merge"}-duplicates`),r!==void 0&&this.url.searchParams.set("on_conflict",r),o&&this.headers.append("Prefer",`count=${o}`),u||this.headers.append("Prefer","missing=default"),Array.isArray(n)){const m=n.reduce((p,x)=>p.concat(Object.keys(x)),[]);if(m.length>0){const p=[...new Set(m)].map(x=>`"${x}"`);this.url.searchParams.set("columns",p.join(","))}}return new Qi({method:f,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}update(n,{count:r}={}){var a;const o="PATCH";return r&&this.headers.append("Prefer",`count=${r}`),new Qi({method:o,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}delete({count:n}={}){var r;const a="DELETE";return n&&this.headers.append("Prefer",`count=${n}`),new Qi({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}},Yv=class Eg{constructor(r,{headers:a={},schema:o,fetch:u}={}){this.url=r,this.headers=new Headers(a),this.schemaName=o,this.fetch=u}from(r){if(!r||typeof r!="string"||r.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new Gv(new URL(`${this.url}/${r}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(r){return new Eg(this.url,{headers:this.headers,schema:r,fetch:this.fetch})}rpc(r,a={},{head:o=!1,get:u=!1,count:d}={}){var f;let m;const p=new URL(`${this.url}/rpc/${r}`);let x;o||u?(m=o?"HEAD":"GET",Object.entries(a).filter(([N,E])=>E!==void 0).map(([N,E])=>[N,Array.isArray(E)?`{${E.join(",")}}`:`${E}`]).forEach(([N,E])=>{p.searchParams.append(N,E)})):(m="POST",x=a);const w=new Headers(this.headers);return d&&w.set("Prefer",`count=${d}`),new Qi({method:m,url:p,headers:w,schema:this.schemaName,body:x,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}};class Kv{constructor(){}static detectEnvironment(){var r;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((r=navigator.userAgent)===null||r===void 0)&&r.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const a=process.versions;if(a&&a.node){const o=a.node,u=parseInt(o.replace(/^v/,"").split(".")[0]);return u>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${u} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${u} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const r=this.detectEnvironment();if(r.constructor)return r.constructor;let a=r.error||"WebSocket not supported in this environment.";throw r.workaround&&(a+=`

Suggested solution: ${r.workaround}`),new Error(a)}static createWebSocket(r,a){const o=this.getWebSocketConstructor();return new o(r,a)}static isWebSocketSupported(){try{const r=this.detectEnvironment();return r.type==="native"||r.type==="ws"}catch{return!1}}}const Wv="2.89.0",Xv=`realtime-js/${Wv}`,kg="1.0.0",Jv="2.0.0",U0=kg,Xh=1e4,Qv=1e3,Zv=100;var Ga;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(Ga||(Ga={}));var At;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(At||(At={}));var ls;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(ls||(ls={}));var Jh;(function(n){n.websocket="websocket"})(Jh||(Jh={}));var Rn;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(Rn||(Rn={}));class Fv{constructor(r){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=r??[]}encode(r,a){if(r.event===this.BROADCAST_EVENT&&!(r.payload instanceof ArrayBuffer)&&typeof r.payload.event=="string")return a(this._binaryEncodeUserBroadcastPush(r));let o=[r.join_ref,r.ref,r.topic,r.event,r.payload];return a(JSON.stringify(o))}_binaryEncodeUserBroadcastPush(r){var a;return this._isArrayBuffer((a=r.payload)===null||a===void 0?void 0:a.payload)?this._encodeBinaryUserBroadcastPush(r):this._encodeJsonUserBroadcastPush(r)}_encodeBinaryUserBroadcastPush(r){var a,o;const u=(o=(a=r.payload)===null||a===void 0?void 0:a.payload)!==null&&o!==void 0?o:new ArrayBuffer(0);return this._encodeUserBroadcastPush(r,this.BINARY_ENCODING,u)}_encodeJsonUserBroadcastPush(r){var a,o;const u=(o=(a=r.payload)===null||a===void 0?void 0:a.payload)!==null&&o!==void 0?o:{},f=new TextEncoder().encode(JSON.stringify(u)).buffer;return this._encodeUserBroadcastPush(r,this.JSON_ENCODING,f)}_encodeUserBroadcastPush(r,a,o){var u,d;const f=r.topic,m=(u=r.ref)!==null&&u!==void 0?u:"",p=(d=r.join_ref)!==null&&d!==void 0?d:"",x=r.payload.event,w=this.allowedMetadataKeys?this._pick(r.payload,this.allowedMetadataKeys):{},N=Object.keys(w).length===0?"":JSON.stringify(w);if(p.length>255)throw new Error(`joinRef length ${p.length} exceeds maximum of 255`);if(m.length>255)throw new Error(`ref length ${m.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`topic length ${f.length} exceeds maximum of 255`);if(x.length>255)throw new Error(`userEvent length ${x.length} exceeds maximum of 255`);if(N.length>255)throw new Error(`metadata length ${N.length} exceeds maximum of 255`);const E=this.USER_BROADCAST_PUSH_META_LENGTH+p.length+m.length+f.length+x.length+N.length,A=new ArrayBuffer(this.HEADER_LENGTH+E);let $=new DataView(A),D=0;$.setUint8(D++,this.KINDS.userBroadcastPush),$.setUint8(D++,p.length),$.setUint8(D++,m.length),$.setUint8(D++,f.length),$.setUint8(D++,x.length),$.setUint8(D++,N.length),$.setUint8(D++,a),Array.from(p,H=>$.setUint8(D++,H.charCodeAt(0))),Array.from(m,H=>$.setUint8(D++,H.charCodeAt(0))),Array.from(f,H=>$.setUint8(D++,H.charCodeAt(0))),Array.from(x,H=>$.setUint8(D++,H.charCodeAt(0))),Array.from(N,H=>$.setUint8(D++,H.charCodeAt(0)));var k=new Uint8Array(A.byteLength+o.byteLength);return k.set(new Uint8Array(A),0),k.set(new Uint8Array(o),A.byteLength),k.buffer}decode(r,a){if(this._isArrayBuffer(r)){let o=this._binaryDecode(r);return a(o)}if(typeof r=="string"){const o=JSON.parse(r),[u,d,f,m,p]=o;return a({join_ref:u,ref:d,topic:f,event:m,payload:p})}return a({})}_binaryDecode(r){const a=new DataView(r),o=a.getUint8(0),u=new TextDecoder;if(o===this.KINDS.userBroadcast)return this._decodeUserBroadcast(r,a,u)}_decodeUserBroadcast(r,a,o){const u=a.getUint8(1),d=a.getUint8(2),f=a.getUint8(3),m=a.getUint8(4);let p=this.HEADER_LENGTH+4;const x=o.decode(r.slice(p,p+u));p=p+u;const w=o.decode(r.slice(p,p+d));p=p+d;const N=o.decode(r.slice(p,p+f));p=p+f;const E=r.slice(p,r.byteLength),A=m===this.JSON_ENCODING?JSON.parse(o.decode(E)):E,$={type:this.BROADCAST_EVENT,event:w,payload:A};return f>0&&($.meta=JSON.parse(N)),{join_ref:null,ref:null,topic:x,event:this.BROADCAST_EVENT,payload:$}}_isArrayBuffer(r){var a;return r instanceof ArrayBuffer||((a=r?.constructor)===null||a===void 0?void 0:a.name)==="ArrayBuffer"}_pick(r,a){return!r||typeof r!="object"?{}:Object.fromEntries(Object.entries(r).filter(([o])=>a.includes(o)))}}class Cg{constructor(r,a){this.callback=r,this.timerCalc=a,this.timer=void 0,this.tries=0,this.callback=r,this.timerCalc=a}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ct;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(ct||(ct={}));const M0=(n,r,a={})=>{var o;const u=(o=a.skipTypes)!==null&&o!==void 0?o:[];return r?Object.keys(r).reduce((d,f)=>(d[f]=ey(f,n,r,u),d),{}):{}},ey=(n,r,a,o)=>{const u=r.find(m=>m.name===n),d=u?.type,f=a[n];return d&&!o.includes(d)?Tg(d,f):Qh(f)},Tg=(n,r)=>{if(n.charAt(0)==="_"){const a=n.slice(1,n.length);return ay(r,a)}switch(n){case ct.bool:return ty(r);case ct.float4:case ct.float8:case ct.int2:case ct.int4:case ct.int8:case ct.numeric:case ct.oid:return ry(r);case ct.json:case ct.jsonb:return sy(r);case ct.timestamp:return ny(r);case ct.abstime:case ct.date:case ct.daterange:case ct.int4range:case ct.int8range:case ct.money:case ct.reltime:case ct.text:case ct.time:case ct.timestamptz:case ct.timetz:case ct.tsrange:case ct.tstzrange:return Qh(r);default:return Qh(r)}},Qh=n=>n,ty=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},ry=n=>{if(typeof n=="string"){const r=parseFloat(n);if(!Number.isNaN(r))return r}return n},sy=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch{return n}return n},ay=(n,r)=>{if(typeof n!="string")return n;const a=n.length-1,o=n[a];if(n[0]==="{"&&o==="}"){let d;const f=n.slice(1,a);try{d=JSON.parse("["+f+"]")}catch{d=f?f.split(","):[]}return d.map(m=>Tg(r,m))}return n},ny=n=>typeof n=="string"?n.replace(" ","T"):n,Ag=n=>{const r=new URL(n);return r.protocol=r.protocol.replace(/^ws/i,"http"),r.pathname=r.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),r.pathname===""||r.pathname==="/"?r.pathname="/api/broadcast":r.pathname=r.pathname+"/api/broadcast",r.href};class Ch{constructor(r,a,o={},u=Xh){this.channel=r,this.event=a,this.payload=o,this.timeout=u,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(r){this.timeout=r,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(r){this.payload=Object.assign(Object.assign({},this.payload),r)}receive(r,a){var o;return this._hasReceived(r)&&a((o=this.receivedResp)===null||o===void 0?void 0:o.response),this.recHooks.push({status:r,callback:a}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const r=a=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=a,this._matchReceive(a)};this.channel._on(this.refEvent,{},r),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(r,a){this.refEvent&&this.channel._trigger(this.refEvent,{status:r,response:a})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:r,response:a}){this.recHooks.filter(o=>o.status===r).forEach(o=>o.callback(a))}_hasReceived(r){return this.receivedResp&&this.receivedResp.status===r}}var L0;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(L0||(L0={}));class Eo{constructor(r,a){this.channel=r,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const o=a?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(o.state,{},u=>{const{onJoin:d,onLeave:f,onSync:m}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Eo.syncState(this.state,u,d,f),this.pendingDiffs.forEach(p=>{this.state=Eo.syncDiff(this.state,p,d,f)}),this.pendingDiffs=[],m()}),this.channel._on(o.diff,{},u=>{const{onJoin:d,onLeave:f,onSync:m}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(u):(this.state=Eo.syncDiff(this.state,u,d,f),m())}),this.onJoin((u,d,f)=>{this.channel._trigger("presence",{event:"join",key:u,currentPresences:d,newPresences:f})}),this.onLeave((u,d,f)=>{this.channel._trigger("presence",{event:"leave",key:u,currentPresences:d,leftPresences:f})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(r,a,o,u){const d=this.cloneDeep(r),f=this.transformState(a),m={},p={};return this.map(d,(x,w)=>{f[x]||(p[x]=w)}),this.map(f,(x,w)=>{const N=d[x];if(N){const E=w.map(k=>k.presence_ref),A=N.map(k=>k.presence_ref),$=w.filter(k=>A.indexOf(k.presence_ref)<0),D=N.filter(k=>E.indexOf(k.presence_ref)<0);$.length>0&&(m[x]=$),D.length>0&&(p[x]=D)}else m[x]=w}),this.syncDiff(d,{joins:m,leaves:p},o,u)}static syncDiff(r,a,o,u){const{joins:d,leaves:f}={joins:this.transformState(a.joins),leaves:this.transformState(a.leaves)};return o||(o=()=>{}),u||(u=()=>{}),this.map(d,(m,p)=>{var x;const w=(x=r[m])!==null&&x!==void 0?x:[];if(r[m]=this.cloneDeep(p),w.length>0){const N=r[m].map(A=>A.presence_ref),E=w.filter(A=>N.indexOf(A.presence_ref)<0);r[m].unshift(...E)}o(m,w,p)}),this.map(f,(m,p)=>{let x=r[m];if(!x)return;const w=p.map(N=>N.presence_ref);x=x.filter(N=>w.indexOf(N.presence_ref)<0),r[m]=x,u(m,x,p),x.length===0&&delete r[m]}),r}static map(r,a){return Object.getOwnPropertyNames(r).map(o=>a(o,r[o]))}static transformState(r){return r=this.cloneDeep(r),Object.getOwnPropertyNames(r).reduce((a,o)=>{const u=r[o];return"metas"in u?a[o]=u.metas.map(d=>(d.presence_ref=d.phx_ref,delete d.phx_ref,delete d.phx_ref_prev,d)):a[o]=u,a},{})}static cloneDeep(r){return JSON.parse(JSON.stringify(r))}onJoin(r){this.caller.onJoin=r}onLeave(r){this.caller.onLeave=r}onSync(r){this.caller.onSync=r}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var q0;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(q0||(q0={}));var ko;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(ko||(ko={}));var ta;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(ta||(ta={}));class tl{constructor(r,a={config:{}},o){var u,d;if(this.topic=r,this.params=a,this.socket=o,this.bindings={},this.state=At.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=r.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},a.config),this.timeout=this.socket.timeout,this.joinPush=new Ch(this,ls.join,this.params,this.timeout),this.rejoinTimer=new Cg(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=At.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(f=>f.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=At.closed,this.socket._remove(this)}),this._onError(f=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,f),this.state=At.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=At.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",f=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,f),this.state=At.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ls.reply,{},(f,m)=>{this._trigger(this._replyEventName(m),f)}),this.presence=new Eo(this),this.broadcastEndpointURL=Ag(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((d=(u=this.params.config)===null||u===void 0?void 0:u.broadcast)===null||d===void 0)&&d.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(r,a=this.timeout){var o,u,d;if(this.socket.isConnected()||this.socket.connect(),this.state==At.closed){const{config:{broadcast:f,presence:m,private:p}}=this.params,x=(u=(o=this.bindings.postgres_changes)===null||o===void 0?void 0:o.map(A=>A.filter))!==null&&u!==void 0?u:[],w=!!this.bindings[ko.PRESENCE]&&this.bindings[ko.PRESENCE].length>0||((d=this.params.config.presence)===null||d===void 0?void 0:d.enabled)===!0,N={},E={broadcast:f,presence:Object.assign(Object.assign({},m),{enabled:w}),postgres_changes:x,private:p};this.socket.accessTokenValue&&(N.access_token=this.socket.accessTokenValue),this._onError(A=>r?.(ta.CHANNEL_ERROR,A)),this._onClose(()=>r?.(ta.CLOSED)),this.updateJoinPayload(Object.assign({config:E},N)),this.joinedOnce=!0,this._rejoin(a),this.joinPush.receive("ok",async({postgres_changes:A})=>{var $;if(this.socket._isManualToken()||this.socket.setAuth(),A===void 0){r?.(ta.SUBSCRIBED);return}else{const D=this.bindings.postgres_changes,k=($=D?.length)!==null&&$!==void 0?$:0,H=[];for(let P=0;P<k;P++){const q=D[P],{filter:{event:K,schema:ie,table:X,filter:F}}=q,fe=A&&A[P];if(fe&&fe.event===K&&tl.isFilterValueEqual(fe.schema,ie)&&tl.isFilterValueEqual(fe.table,X)&&tl.isFilterValueEqual(fe.filter,F))H.push(Object.assign(Object.assign({},q),{id:fe.id}));else{this.unsubscribe(),this.state=At.errored,r?.(ta.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=H,r&&r(ta.SUBSCRIBED);return}}).receive("error",A=>{this.state=At.errored,r?.(ta.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(A).join(", ")||"error")))}).receive("timeout",()=>{r?.(ta.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(r,a={}){return await this.send({type:"presence",event:"track",payload:r},a.timeout||this.timeout)}async untrack(r={}){return await this.send({type:"presence",event:"untrack"},r)}on(r,a,o){return this.state===At.joined&&r===ko.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(r,a,o)}async httpSend(r,a,o={}){var u;if(a==null)return Promise.reject("Payload is required for httpSend()");const d={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(d.Authorization=`Bearer ${this.socket.accessTokenValue}`);const f={method:"POST",headers:d,body:JSON.stringify({messages:[{topic:this.subTopic,event:r,payload:a,private:this.private}]})},m=await this._fetchWithTimeout(this.broadcastEndpointURL,f,(u=o.timeout)!==null&&u!==void 0?u:this.timeout);if(m.status===202)return{success:!0};let p=m.statusText;try{const x=await m.json();p=x.error||x.message||p}catch{}return Promise.reject(new Error(p))}async send(r,a={}){var o,u;if(!this._canPush()&&r.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:d,payload:f}=r,m={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(m.Authorization=`Bearer ${this.socket.accessTokenValue}`);const p={method:"POST",headers:m,body:JSON.stringify({messages:[{topic:this.subTopic,event:d,payload:f,private:this.private}]})};try{const x=await this._fetchWithTimeout(this.broadcastEndpointURL,p,(o=a.timeout)!==null&&o!==void 0?o:this.timeout);return await((u=x.body)===null||u===void 0?void 0:u.cancel()),x.ok?"ok":"error"}catch(x){return x.name==="AbortError"?"timed out":"error"}}else return new Promise(d=>{var f,m,p;const x=this._push(r.type,r,a.timeout||this.timeout);r.type==="broadcast"&&!(!((p=(m=(f=this.params)===null||f===void 0?void 0:f.config)===null||m===void 0?void 0:m.broadcast)===null||p===void 0)&&p.ack)&&d("ok"),x.receive("ok",()=>d("ok")),x.receive("error",()=>d("error")),x.receive("timeout",()=>d("timed out"))})}updateJoinPayload(r){this.joinPush.updatePayload(r)}unsubscribe(r=this.timeout){this.state=At.leaving;const a=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ls.close,"leave",this._joinRef())};this.joinPush.destroy();let o=null;return new Promise(u=>{o=new Ch(this,ls.leave,{},r),o.receive("ok",()=>{a(),u("ok")}).receive("timeout",()=>{a(),u("timed out")}).receive("error",()=>{u("error")}),o.send(),this._canPush()||o.trigger("ok",{})}).finally(()=>{o?.destroy()})}teardown(){this.pushBuffer.forEach(r=>r.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=At.closed,this.bindings={}}async _fetchWithTimeout(r,a,o){const u=new AbortController,d=setTimeout(()=>u.abort(),o),f=await this.socket.fetch(r,Object.assign(Object.assign({},a),{signal:u.signal}));return clearTimeout(d),f}_push(r,a,o=this.timeout){if(!this.joinedOnce)throw`tried to push '${r}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let u=new Ch(this,r,a,o);return this._canPush()?u.send():this._addToPushBuffer(u),u}_addToPushBuffer(r){if(r.startTimeout(),this.pushBuffer.push(r),this.pushBuffer.length>Zv){const a=this.pushBuffer.shift();a&&(a.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${a.event}`,a.payload))}}_onMessage(r,a,o){return a}_isMember(r){return this.topic===r}_joinRef(){return this.joinPush.ref}_trigger(r,a,o){var u,d;const f=r.toLocaleLowerCase(),{close:m,error:p,leave:x,join:w}=ls;if(o&&[m,p,x,w].indexOf(f)>=0&&o!==this._joinRef())return;let E=this._onMessage(f,a,o);if(a&&!E)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(f)?(u=this.bindings.postgres_changes)===null||u===void 0||u.filter(A=>{var $,D,k;return(($=A.filter)===null||$===void 0?void 0:$.event)==="*"||((k=(D=A.filter)===null||D===void 0?void 0:D.event)===null||k===void 0?void 0:k.toLocaleLowerCase())===f}).map(A=>A.callback(E,o)):(d=this.bindings[f])===null||d===void 0||d.filter(A=>{var $,D,k,H,P,q;if(["broadcast","presence","postgres_changes"].includes(f))if("id"in A){const K=A.id,ie=($=A.filter)===null||$===void 0?void 0:$.event;return K&&((D=a.ids)===null||D===void 0?void 0:D.includes(K))&&(ie==="*"||ie?.toLocaleLowerCase()===((k=a.data)===null||k===void 0?void 0:k.type.toLocaleLowerCase()))}else{const K=(P=(H=A?.filter)===null||H===void 0?void 0:H.event)===null||P===void 0?void 0:P.toLocaleLowerCase();return K==="*"||K===((q=a?.event)===null||q===void 0?void 0:q.toLocaleLowerCase())}else return A.type.toLocaleLowerCase()===f}).map(A=>{if(typeof E=="object"&&"ids"in E){const $=E.data,{schema:D,table:k,commit_timestamp:H,type:P,errors:q}=$;E=Object.assign(Object.assign({},{schema:D,table:k,commit_timestamp:H,eventType:P,new:{},old:{},errors:q}),this._getPayloadRecords($))}A.callback(E,o)})}_isClosed(){return this.state===At.closed}_isJoined(){return this.state===At.joined}_isJoining(){return this.state===At.joining}_isLeaving(){return this.state===At.leaving}_replyEventName(r){return`chan_reply_${r}`}_on(r,a,o){const u=r.toLocaleLowerCase(),d={type:u,filter:a,callback:o};return this.bindings[u]?this.bindings[u].push(d):this.bindings[u]=[d],this}_off(r,a){const o=r.toLocaleLowerCase();return this.bindings[o]&&(this.bindings[o]=this.bindings[o].filter(u=>{var d;return!(((d=u.type)===null||d===void 0?void 0:d.toLocaleLowerCase())===o&&tl.isEqual(u.filter,a))})),this}static isEqual(r,a){if(Object.keys(r).length!==Object.keys(a).length)return!1;for(const o in r)if(r[o]!==a[o])return!1;return!0}static isFilterValueEqual(r,a){return(r??void 0)===(a??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(r){this._on(ls.close,{},r)}_onError(r){this._on(ls.error,{},a=>r(a))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(r=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=At.joining,this.joinPush.resend(r))}_getPayloadRecords(r){const a={new:{},old:{}};return(r.type==="INSERT"||r.type==="UPDATE")&&(a.new=M0(r.columns,r.record)),(r.type==="UPDATE"||r.type==="DELETE")&&(a.old=M0(r.columns,r.old_record)),a}}const Th=()=>{},hu={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},iy=[1e3,2e3,5e3,1e4],ly=1e4,oy=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class cy{constructor(r,a){var o;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Xh,this.transport=null,this.heartbeatIntervalMs=hu.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Th,this.ref=0,this.reconnectTimer=null,this.vsn=U0,this.logger=Th,this.conn=null,this.sendBuffer=[],this.serializer=new Fv,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=u=>u?(...d)=>u(...d):(...d)=>fetch(...d),!(!((o=a?.params)===null||o===void 0)&&o.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=a.params.apikey,this.endPoint=`${r}/${Jh.websocket}`,this.httpEndpoint=Ag(r),this._initializeOptions(a),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(a?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Kv.createWebSocket(this.endpointURL())}catch(r){this._setConnectionState("disconnected");const a=r.message;throw a.includes("Node.js")?new Error(`${a}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${a}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(r,a){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const o=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(o),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(r?this.conn.close(r,a??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(r){const a=await r.unsubscribe();return this.channels.length===0&&this.disconnect(),a}async removeAllChannels(){const r=await Promise.all(this.channels.map(a=>a.unsubscribe()));return this.channels=[],this.disconnect(),r}log(r,a,o){this.logger(r,a,o)}connectionState(){switch(this.conn&&this.conn.readyState){case Ga.connecting:return Rn.Connecting;case Ga.open:return Rn.Open;case Ga.closing:return Rn.Closing;default:return Rn.Closed}}isConnected(){return this.connectionState()===Rn.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(r,a={config:{}}){const o=`realtime:${r}`,u=this.getChannels().find(d=>d.topic===o);if(u)return u;{const d=new tl(`realtime:${r}`,a,this);return this.channels.push(d),d}}push(r){const{topic:a,event:o,payload:u,ref:d}=r,f=()=>{this.encode(r,m=>{var p;(p=this.conn)===null||p===void 0||p.send(m)})};this.log("push",`${a} ${o} (${d})`,u),this.isConnected()?f():this.sendBuffer.push(f)}async setAuth(r=null){this._authPromise=this._performAuth(r);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var r;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(a){this.log("error","error in heartbeat callback",a)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(a){this.log("error","error in heartbeat callback",a)}this._wasManualDisconnect=!1,(r=this.conn)===null||r===void 0||r.close(Qv,"heartbeat timeout"),setTimeout(()=>{var a;this.isConnected()||(a=this.reconnectTimer)===null||a===void 0||a.scheduleTimeout()},hu.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(a){this.log("error","error in heartbeat callback",a)}this._setAuthSafely("heartbeat")}onHeartbeat(r){this.heartbeatCallback=r}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(r=>r()),this.sendBuffer=[])}_makeRef(){let r=this.ref+1;return r===this.ref?this.ref=0:this.ref=r,this.ref.toString()}_leaveOpenTopic(r){let a=this.channels.find(o=>o.topic===r&&(o._isJoined()||o._isJoining()));a&&(this.log("transport",`leaving duplicate topic "${r}"`),a.unsubscribe())}_remove(r){this.channels=this.channels.filter(a=>a.topic!==r.topic)}_onConnMessage(r){this.decode(r.data,a=>{if(a.topic==="phoenix"&&a.event==="phx_reply")try{this.heartbeatCallback(a.payload.status==="ok"?"ok":"error")}catch(x){this.log("error","error in heartbeat callback",x)}a.ref&&a.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:o,event:u,payload:d,ref:f}=a,m=f?`(${f})`:"",p=d.status||"";this.log("receive",`${p} ${o} ${u} ${m}`.trim(),d),this.channels.filter(x=>x._isMember(o)).forEach(x=>x._trigger(u,d,f)),this._triggerStateCallbacks("message",a)})}_clearTimer(r){var a;r==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):r==="reconnect"&&((a=this.reconnectTimer)===null||a===void 0||a.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=r=>this._onConnError(r),this.conn.onmessage=r=>this._onConnMessage(r),this.conn.onclose=r=>this._onConnClose(r),this.conn.readyState===Ga.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Ga.open||this.conn.readyState===Ga.connecting)try{this.conn.close()}catch(r){this.log("error","Error closing connection",r)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(r=>r.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(a=>{this.log("error","error waiting for auth on connect",a),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const r=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(r),this.workerRef.onerror=a=>{this.log("worker","worker error",a.message),this._terminateWorker()},this.workerRef.onmessage=a=>{a.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(r){var a;this._setConnectionState("disconnected"),this.log("transport","close",r),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(a=this.reconnectTimer)===null||a===void 0||a.scheduleTimeout(),this._triggerStateCallbacks("close",r)}_onConnError(r){this._setConnectionState("disconnected"),this.log("transport",`${r}`),this._triggerChanError(),this._triggerStateCallbacks("error",r)}_triggerChanError(){this.channels.forEach(r=>r._trigger(ls.error))}_appendParams(r,a){if(Object.keys(a).length===0)return r;const o=r.match(/\?/)?"&":"?",u=new URLSearchParams(a);return`${r}${o}${u}`}_workerObjectUrl(r){let a;if(r)a=r;else{const o=new Blob([oy],{type:"application/javascript"});a=URL.createObjectURL(o)}return a}_setConnectionState(r,a=!1){this._connectionState=r,r==="connecting"?this._wasManualDisconnect=!1:r==="disconnecting"&&(this._wasManualDisconnect=a)}async _performAuth(r=null){let a,o=!1;if(r)a=r,o=!0;else if(this.accessToken)try{a=await this.accessToken()}catch(u){this.log("error","Error fetching access token from callback",u),a=this.accessTokenValue}else a=this.accessTokenValue;o?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=a&&(this.accessTokenValue=a,this.channels.forEach(u=>{const d={access_token:a,version:Xv};a&&u.updateJoinPayload(d),u.joinedOnce&&u._isJoined()&&u._push(ls.access_token,{access_token:a})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(r="general"){this._isManualToken()||this.setAuth().catch(a=>{this.log("error",`Error setting auth in ${r}`,a)})}_triggerStateCallbacks(r,a){try{this.stateChangeCallbacks[r].forEach(o=>{try{o(a)}catch(u){this.log("error",`error in ${r} callback`,u)}})}catch(o){this.log("error",`error triggering ${r} callbacks`,o)}}_setupReconnectionTimer(){this.reconnectTimer=new Cg(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},hu.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(r){var a,o,u,d,f,m,p,x,w,N,E,A;switch(this.transport=(a=r?.transport)!==null&&a!==void 0?a:null,this.timeout=(o=r?.timeout)!==null&&o!==void 0?o:Xh,this.heartbeatIntervalMs=(u=r?.heartbeatIntervalMs)!==null&&u!==void 0?u:hu.HEARTBEAT_INTERVAL,this.worker=(d=r?.worker)!==null&&d!==void 0?d:!1,this.accessToken=(f=r?.accessToken)!==null&&f!==void 0?f:null,this.heartbeatCallback=(m=r?.heartbeatCallback)!==null&&m!==void 0?m:Th,this.vsn=(p=r?.vsn)!==null&&p!==void 0?p:U0,r?.params&&(this.params=r.params),r?.logger&&(this.logger=r.logger),(r?.logLevel||r?.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(x=r?.reconnectAfterMs)!==null&&x!==void 0?x:($=>iy[$-1]||ly),this.vsn){case kg:this.encode=(w=r?.encode)!==null&&w!==void 0?w:(($,D)=>D(JSON.stringify($))),this.decode=(N=r?.decode)!==null&&N!==void 0?N:(($,D)=>D(JSON.parse($)));break;case Jv:this.encode=(E=r?.encode)!==null&&E!==void 0?E:this.serializer.encode.bind(this.serializer),this.decode=(A=r?.decode)!==null&&A!==void 0?A:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=r?.workerUrl}}}var To=class extends Error{constructor(n,r){super(n),this.name="IcebergError",this.status=r.status,this.icebergType=r.icebergType,this.icebergCode=r.icebergCode,this.details=r.details,this.isCommitStateUnknown=r.icebergType==="CommitStateUnknownException"||[500,502,504].includes(r.status)&&r.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function uy(n,r,a){const o=new URL(r,n);if(a)for(const[u,d]of Object.entries(a))d!==void 0&&o.searchParams.set(u,d);return o.toString()}async function dy(n){return!n||n.type==="none"?{}:n.type==="bearer"?{Authorization:`Bearer ${n.token}`}:n.type==="header"?{[n.name]:n.value}:n.type==="custom"?await n.getHeaders():{}}function hy(n){const r=n.fetchImpl??globalThis.fetch;return{async request({method:a,path:o,query:u,body:d,headers:f}){const m=uy(n.baseUrl,o,u),p=await dy(n.auth),x=await r(m,{method:a,headers:{...d?{"Content-Type":"application/json"}:{},...p,...f},body:d?JSON.stringify(d):void 0}),w=await x.text(),N=(x.headers.get("content-type")||"").includes("application/json"),E=N&&w?JSON.parse(w):w;if(!x.ok){const A=N?E:void 0,$=A?.error;throw new To($?.message??`Request failed with status ${x.status}`,{status:x.status,icebergType:$?.type,icebergCode:$?.code,details:A})}return{status:x.status,headers:x.headers,data:E}}}}function fu(n){return n.join("")}var fy=class{constructor(n,r=""){this.client=n,this.prefix=r}async listNamespaces(n){const r=n?{parent:fu(n.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:r})).data.namespaces.map(o=>({namespace:o}))}async createNamespace(n,r){const a={namespace:n.namespace,properties:r?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:a})).data}async dropNamespace(n){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${fu(n.namespace)}`})}async loadNamespaceMetadata(n){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${fu(n.namespace)}`})).data.properties}}async namespaceExists(n){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${fu(n.namespace)}`}),!0}catch(r){if(r instanceof To&&r.status===404)return!1;throw r}}async createNamespaceIfNotExists(n,r){try{return await this.createNamespace(n,r)}catch(a){if(a instanceof To&&a.status===409)return;throw a}}};function Gi(n){return n.join("")}var my=class{constructor(n,r="",a){this.client=n,this.prefix=r,this.accessDelegation=a}async listTables(n){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Gi(n.namespace)}/tables`})).data.identifiers}async createTable(n,r){const a={};return this.accessDelegation&&(a["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Gi(n.namespace)}/tables`,body:r,headers:a})).data.metadata}async updateTable(n,r){const a=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Gi(n.namespace)}/tables/${n.name}`,body:r});return{"metadata-location":a.data["metadata-location"],metadata:a.data.metadata}}async dropTable(n,r){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Gi(n.namespace)}/tables/${n.name}`,query:{purgeRequested:String(r?.purge??!1)}})}async loadTable(n){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Gi(n.namespace)}/tables/${n.name}`,headers:r})).data.metadata}async tableExists(n){const r={};this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Gi(n.namespace)}/tables/${n.name}`,headers:r}),!0}catch(a){if(a instanceof To&&a.status===404)return!1;throw a}}async createTableIfNotExists(n,r){try{return await this.createTable(n,r)}catch(a){if(a instanceof To&&a.status===409)return await this.loadTable({namespace:n.namespace,name:r.name});throw a}}},py=class{constructor(n){let r="v1";n.catalogName&&(r+=`/${n.catalogName}`);const a=n.baseUrl.endsWith("/")?n.baseUrl:`${n.baseUrl}/`;this.client=hy({baseUrl:a,auth:n.auth,fetchImpl:n.fetch}),this.accessDelegation=n.accessDelegation?.join(","),this.namespaceOps=new fy(this.client,r),this.tableOps=new my(this.client,r,this.accessDelegation)}async listNamespaces(n){return this.namespaceOps.listNamespaces(n)}async createNamespace(n,r){return this.namespaceOps.createNamespace(n,r)}async dropNamespace(n){await this.namespaceOps.dropNamespace(n)}async loadNamespaceMetadata(n){return this.namespaceOps.loadNamespaceMetadata(n)}async listTables(n){return this.tableOps.listTables(n)}async createTable(n,r){return this.tableOps.createTable(n,r)}async updateTable(n,r){return this.tableOps.updateTable(n,r)}async dropTable(n,r){await this.tableOps.dropTable(n,r)}async loadTable(n){return this.tableOps.loadTable(n)}async namespaceExists(n){return this.namespaceOps.namespaceExists(n)}async tableExists(n){return this.tableOps.tableExists(n)}async createNamespaceIfNotExists(n,r){return this.namespaceOps.createNamespaceIfNotExists(n,r)}async createTableIfNotExists(n,r){return this.tableOps.createTableIfNotExists(n,r)}},Tu=class extends Error{constructor(n){super(n),this.__isStorageError=!0,this.name="StorageError"}};function gt(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}var gy=class extends Tu{constructor(n,r,a){super(n),this.name="StorageApiError",this.status=r,this.statusCode=a}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Zh=class extends Tu{constructor(n,r){super(n),this.name="StorageUnknownError",this.originalError=r}};const pf=n=>n?(...r)=>n(...r):(...r)=>fetch(...r),xy=()=>Response,Fh=n=>{if(Array.isArray(n))return n.map(a=>Fh(a));if(typeof n=="function"||n!==Object(n))return n;const r={};return Object.entries(n).forEach(([a,o])=>{const u=a.replace(/([-_][a-z])/gi,d=>d.toUpperCase().replace(/[-_]/g,""));r[u]=Fh(o)}),r},vy=n=>{if(typeof n!="object"||n===null)return!1;const r=Object.getPrototypeOf(n);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},yy=n=>!n||typeof n!="string"||n.length===0||n.length>100||n.trim()!==n||n.includes("/")||n.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(n);function Ao(n){"@babel/helpers - typeof";return Ao=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Ao(n)}function by(n,r){if(Ao(n)!="object"||!n)return n;var a=n[Symbol.toPrimitive];if(a!==void 0){var o=a.call(n,r);if(Ao(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(n)}function wy(n){var r=by(n,"string");return Ao(r)=="symbol"?r:r+""}function _y(n,r,a){return(r=wy(r))in n?Object.defineProperty(n,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[r]=a,n}function $0(n,r){var a=Object.keys(n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);r&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(n,u).enumerable})),a.push.apply(a,o)}return a}function Ae(n){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?$0(Object(a),!0).forEach(function(o){_y(n,o,a[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(a)):$0(Object(a)).forEach(function(o){Object.defineProperty(n,o,Object.getOwnPropertyDescriptor(a,o))})}return n}const Ah=n=>{var r;return n.msg||n.message||n.error_description||(typeof n.error=="string"?n.error:(r=n.error)===null||r===void 0?void 0:r.message)||JSON.stringify(n)},jy=async(n,r,a)=>{n instanceof await xy()&&!a?.noResolveJson?n.json().then(o=>{const u=n.status||500,d=o?.statusCode||u+"";r(new gy(Ah(o),u,d))}).catch(o=>{r(new Zh(Ah(o),o))}):r(new Zh(Ah(n),n))},Sy=(n,r,a,o)=>{const u={method:n,headers:r?.headers||{}};return n==="GET"||!o?u:(vy(o)?(u.headers=Ae({"Content-Type":"application/json"},r?.headers),u.body=JSON.stringify(o)):u.body=o,r?.duplex&&(u.duplex=r.duplex),Ae(Ae({},u),a))};async function Mo(n,r,a,o,u,d){return new Promise((f,m)=>{n(a,Sy(r,o,u,d)).then(p=>{if(!p.ok)throw p;return o?.noResolveJson?p:p.json()}).then(p=>f(p)).catch(p=>jy(p,m,o))})}async function Ro(n,r,a,o){return Mo(n,"GET",r,a,o)}async function is(n,r,a,o,u){return Mo(n,"POST",r,o,u,a)}async function ef(n,r,a,o,u){return Mo(n,"PUT",r,o,u,a)}async function Ny(n,r,a,o){return Mo(n,"HEAD",r,Ae(Ae({},a),{},{noResolveJson:!0}),o)}async function gf(n,r,a,o,u){return Mo(n,"DELETE",r,o,u,a)}var Ey=class{constructor(n,r){this.downloadFn=n,this.shouldThrowOnError=r}then(n,r){return this.execute().then(n,r)}async execute(){var n=this;try{return{data:(await n.downloadFn()).body,error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(gt(r))return{data:null,error:r};throw r}}};let Rg;Rg=Symbol.toStringTag;var ky=class{constructor(n,r){this.downloadFn=n,this.shouldThrowOnError=r,this[Rg]="BlobDownloadBuilder",this.promise=null}asStream(){return new Ey(this.downloadFn,this.shouldThrowOnError)}then(n,r){return this.getPromise().then(n,r)}catch(n){return this.getPromise().catch(n)}finally(n){return this.getPromise().finally(n)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var n=this;try{return{data:await(await n.downloadFn()).blob(),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(gt(r))return{data:null,error:r};throw r}}};const Cy={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},B0={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var Ty=class{constructor(n,r={},a,o){this.shouldThrowOnError=!1,this.url=n,this.headers=r,this.bucketId=a,this.fetch=pf(o)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(n,r,a,o){var u=this;try{let d;const f=Ae(Ae({},B0),o);let m=Ae(Ae({},u.headers),n==="POST"&&{"x-upsert":String(f.upsert)});const p=f.metadata;typeof Blob<"u"&&a instanceof Blob?(d=new FormData,d.append("cacheControl",f.cacheControl),p&&d.append("metadata",u.encodeMetadata(p)),d.append("",a)):typeof FormData<"u"&&a instanceof FormData?(d=a,d.has("cacheControl")||d.append("cacheControl",f.cacheControl),p&&!d.has("metadata")&&d.append("metadata",u.encodeMetadata(p))):(d=a,m["cache-control"]=`max-age=${f.cacheControl}`,m["content-type"]=f.contentType,p&&(m["x-metadata"]=u.toBase64(u.encodeMetadata(p))),(typeof ReadableStream<"u"&&d instanceof ReadableStream||d&&typeof d=="object"&&"pipe"in d&&typeof d.pipe=="function")&&!f.duplex&&(f.duplex="half")),o?.headers&&(m=Ae(Ae({},m),o.headers));const x=u._removeEmptyFolders(r),w=u._getFinalPath(x),N=await(n=="PUT"?ef:is)(u.fetch,`${u.url}/object/${w}`,d,Ae({headers:m},f?.duplex?{duplex:f.duplex}:{}));return{data:{path:x,id:N.Id,fullPath:N.Key},error:null}}catch(d){if(u.shouldThrowOnError)throw d;if(gt(d))return{data:null,error:d};throw d}}async upload(n,r,a){return this.uploadOrUpdate("POST",n,r,a)}async uploadToSignedUrl(n,r,a,o){var u=this;const d=u._removeEmptyFolders(n),f=u._getFinalPath(d),m=new URL(u.url+`/object/upload/sign/${f}`);m.searchParams.set("token",r);try{let p;const x=Ae({upsert:B0.upsert},o),w=Ae(Ae({},u.headers),{"x-upsert":String(x.upsert)});return typeof Blob<"u"&&a instanceof Blob?(p=new FormData,p.append("cacheControl",x.cacheControl),p.append("",a)):typeof FormData<"u"&&a instanceof FormData?(p=a,p.append("cacheControl",x.cacheControl)):(p=a,w["cache-control"]=`max-age=${x.cacheControl}`,w["content-type"]=x.contentType),{data:{path:d,fullPath:(await ef(u.fetch,m.toString(),p,{headers:w})).Key},error:null}}catch(p){if(u.shouldThrowOnError)throw p;if(gt(p))return{data:null,error:p};throw p}}async createSignedUploadUrl(n,r){var a=this;try{let o=a._getFinalPath(n);const u=Ae({},a.headers);r?.upsert&&(u["x-upsert"]="true");const d=await is(a.fetch,`${a.url}/object/upload/sign/${o}`,{},{headers:u}),f=new URL(a.url+d.url),m=f.searchParams.get("token");if(!m)throw new Tu("No token returned by API");return{data:{signedUrl:f.toString(),path:n,token:m},error:null}}catch(o){if(a.shouldThrowOnError)throw o;if(gt(o))return{data:null,error:o};throw o}}async update(n,r,a){return this.uploadOrUpdate("PUT",n,r,a)}async move(n,r,a){var o=this;try{return{data:await is(o.fetch,`${o.url}/object/move`,{bucketId:o.bucketId,sourceKey:n,destinationKey:r,destinationBucket:a?.destinationBucket},{headers:o.headers}),error:null}}catch(u){if(o.shouldThrowOnError)throw u;if(gt(u))return{data:null,error:u};throw u}}async copy(n,r,a){var o=this;try{return{data:{path:(await is(o.fetch,`${o.url}/object/copy`,{bucketId:o.bucketId,sourceKey:n,destinationKey:r,destinationBucket:a?.destinationBucket},{headers:o.headers})).Key},error:null}}catch(u){if(o.shouldThrowOnError)throw u;if(gt(u))return{data:null,error:u};throw u}}async createSignedUrl(n,r,a){var o=this;try{let u=o._getFinalPath(n),d=await is(o.fetch,`${o.url}/object/sign/${u}`,Ae({expiresIn:r},a?.transform?{transform:a.transform}:{}),{headers:o.headers});const f=a?.download?`&download=${a.download===!0?"":a.download}`:"";return d={signedUrl:encodeURI(`${o.url}${d.signedURL}${f}`)},{data:d,error:null}}catch(u){if(o.shouldThrowOnError)throw u;if(gt(u))return{data:null,error:u};throw u}}async createSignedUrls(n,r,a){var o=this;try{const u=await is(o.fetch,`${o.url}/object/sign/${o.bucketId}`,{expiresIn:r,paths:n},{headers:o.headers}),d=a?.download?`&download=${a.download===!0?"":a.download}`:"";return{data:u.map(f=>Ae(Ae({},f),{},{signedUrl:f.signedURL?encodeURI(`${o.url}${f.signedURL}${d}`):null})),error:null}}catch(u){if(o.shouldThrowOnError)throw u;if(gt(u))return{data:null,error:u};throw u}}download(n,r){const a=typeof r?.transform<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString(r?.transform||{}),u=o?`?${o}`:"",d=this._getFinalPath(n),f=()=>Ro(this.fetch,`${this.url}/${a}/${d}${u}`,{headers:this.headers,noResolveJson:!0});return new ky(f,this.shouldThrowOnError)}async info(n){var r=this;const a=r._getFinalPath(n);try{return{data:Fh(await Ro(r.fetch,`${r.url}/object/info/${a}`,{headers:r.headers})),error:null}}catch(o){if(r.shouldThrowOnError)throw o;if(gt(o))return{data:null,error:o};throw o}}async exists(n){var r=this;const a=r._getFinalPath(n);try{return await Ny(r.fetch,`${r.url}/object/${a}`,{headers:r.headers}),{data:!0,error:null}}catch(o){if(r.shouldThrowOnError)throw o;if(gt(o)&&o instanceof Zh){const u=o.originalError;if([400,404].includes(u?.status))return{data:!1,error:o}}throw o}}getPublicUrl(n,r){const a=this._getFinalPath(n),o=[],u=r?.download?`download=${r.download===!0?"":r.download}`:"";u!==""&&o.push(u);const d=typeof r?.transform<"u"?"render/image":"object",f=this.transformOptsToQueryString(r?.transform||{});f!==""&&o.push(f);let m=o.join("&");return m!==""&&(m=`?${m}`),{data:{publicUrl:encodeURI(`${this.url}/${d}/public/${a}${m}`)}}}async remove(n){var r=this;try{return{data:await gf(r.fetch,`${r.url}/object/${r.bucketId}`,{prefixes:n},{headers:r.headers}),error:null}}catch(a){if(r.shouldThrowOnError)throw a;if(gt(a))return{data:null,error:a};throw a}}async list(n,r,a){var o=this;try{const u=Ae(Ae(Ae({},Cy),r),{},{prefix:n||""});return{data:await is(o.fetch,`${o.url}/object/list/${o.bucketId}`,u,{headers:o.headers},a),error:null}}catch(u){if(o.shouldThrowOnError)throw u;if(gt(u))return{data:null,error:u};throw u}}async listV2(n,r){var a=this;try{const o=Ae({},n);return{data:await is(a.fetch,`${a.url}/object/list-v2/${a.bucketId}`,o,{headers:a.headers},r),error:null}}catch(o){if(a.shouldThrowOnError)throw o;if(gt(o))return{data:null,error:o};throw o}}encodeMetadata(n){return JSON.stringify(n)}toBase64(n){return typeof Buffer<"u"?Buffer.from(n).toString("base64"):btoa(n)}_getFinalPath(n){return`${this.bucketId}/${n.replace(/^\/+/,"")}`}_removeEmptyFolders(n){return n.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(n){const r=[];return n.width&&r.push(`width=${n.width}`),n.height&&r.push(`height=${n.height}`),n.resize&&r.push(`resize=${n.resize}`),n.format&&r.push(`format=${n.format}`),n.quality&&r.push(`quality=${n.quality}`),r.join("&")}};const Og="2.89.0",zg={"X-Client-Info":`storage-js/${Og}`};var Ay=class{constructor(n,r={},a,o){this.shouldThrowOnError=!1;const u=new URL(n);o?.useNewHostname&&/supabase\.(co|in|red)$/.test(u.hostname)&&!u.hostname.includes("storage.supabase.")&&(u.hostname=u.hostname.replace("supabase.","storage.supabase.")),this.url=u.href.replace(/\/$/,""),this.headers=Ae(Ae({},zg),r),this.fetch=pf(a)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(n){var r=this;try{const a=r.listBucketOptionsToQueryString(n);return{data:await Ro(r.fetch,`${r.url}/bucket${a}`,{headers:r.headers}),error:null}}catch(a){if(r.shouldThrowOnError)throw a;if(gt(a))return{data:null,error:a};throw a}}async getBucket(n){var r=this;try{return{data:await Ro(r.fetch,`${r.url}/bucket/${n}`,{headers:r.headers}),error:null}}catch(a){if(r.shouldThrowOnError)throw a;if(gt(a))return{data:null,error:a};throw a}}async createBucket(n,r={public:!1}){var a=this;try{return{data:await is(a.fetch,`${a.url}/bucket`,{id:n,name:n,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:a.headers}),error:null}}catch(o){if(a.shouldThrowOnError)throw o;if(gt(o))return{data:null,error:o};throw o}}async updateBucket(n,r){var a=this;try{return{data:await ef(a.fetch,`${a.url}/bucket/${n}`,{id:n,name:n,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:a.headers}),error:null}}catch(o){if(a.shouldThrowOnError)throw o;if(gt(o))return{data:null,error:o};throw o}}async emptyBucket(n){var r=this;try{return{data:await is(r.fetch,`${r.url}/bucket/${n}/empty`,{},{headers:r.headers}),error:null}}catch(a){if(r.shouldThrowOnError)throw a;if(gt(a))return{data:null,error:a};throw a}}async deleteBucket(n){var r=this;try{return{data:await gf(r.fetch,`${r.url}/bucket/${n}`,{},{headers:r.headers}),error:null}}catch(a){if(r.shouldThrowOnError)throw a;if(gt(a))return{data:null,error:a};throw a}}listBucketOptionsToQueryString(n){const r={};return n&&("limit"in n&&(r.limit=String(n.limit)),"offset"in n&&(r.offset=String(n.offset)),n.search&&(r.search=n.search),n.sortColumn&&(r.sortColumn=n.sortColumn),n.sortOrder&&(r.sortOrder=n.sortOrder)),Object.keys(r).length>0?"?"+new URLSearchParams(r).toString():""}},Ry=class{constructor(n,r={},a){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=Ae(Ae({},zg),r),this.fetch=pf(a)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(n){var r=this;try{return{data:await is(r.fetch,`${r.url}/bucket`,{name:n},{headers:r.headers}),error:null}}catch(a){if(r.shouldThrowOnError)throw a;if(gt(a))return{data:null,error:a};throw a}}async listBuckets(n){var r=this;try{const a=new URLSearchParams;n?.limit!==void 0&&a.set("limit",n.limit.toString()),n?.offset!==void 0&&a.set("offset",n.offset.toString()),n?.sortColumn&&a.set("sortColumn",n.sortColumn),n?.sortOrder&&a.set("sortOrder",n.sortOrder),n?.search&&a.set("search",n.search);const o=a.toString(),u=o?`${r.url}/bucket?${o}`:`${r.url}/bucket`;return{data:await Ro(r.fetch,u,{headers:r.headers}),error:null}}catch(a){if(r.shouldThrowOnError)throw a;if(gt(a))return{data:null,error:a};throw a}}async deleteBucket(n){var r=this;try{return{data:await gf(r.fetch,`${r.url}/bucket/${n}`,{},{headers:r.headers}),error:null}}catch(a){if(r.shouldThrowOnError)throw a;if(gt(a))return{data:null,error:a};throw a}}from(n){var r=this;if(!yy(n))throw new Tu("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const a=new py({baseUrl:this.url,catalogName:n,auth:{type:"custom",getHeaders:async()=>r.headers},fetch:this.fetch}),o=this.shouldThrowOnError;return new Proxy(a,{get(u,d){const f=u[d];return typeof f!="function"?f:async(...m)=>{try{return{data:await f.apply(u,m),error:null}}catch(p){if(o)throw p;return{data:null,error:p}}}}})}};const xf={"X-Client-Info":`storage-js/${Og}`,"Content-Type":"application/json"};var Dg=class extends Error{constructor(n){super(n),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function Tr(n){return typeof n=="object"&&n!==null&&"__isStorageVectorsError"in n}var Rh=class extends Dg{constructor(n,r,a){super(n),this.name="StorageVectorsApiError",this.status=r,this.statusCode=a}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Oy=class extends Dg{constructor(n,r){super(n),this.name="StorageVectorsUnknownError",this.originalError=r}};const vf=n=>n?(...r)=>n(...r):(...r)=>fetch(...r),zy=n=>{if(typeof n!="object"||n===null)return!1;const r=Object.getPrototypeOf(n);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},P0=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),Dy=async(n,r,a)=>{if(n&&typeof n=="object"&&"status"in n&&"ok"in n&&typeof n.status=="number"&&!a?.noResolveJson){const o=n.status||500,u=n;if(typeof u.json=="function")u.json().then(d=>{const f=d?.statusCode||d?.code||o+"";r(new Rh(P0(d),o,f))}).catch(()=>{const d=o+"";r(new Rh(u.statusText||`HTTP ${o} error`,o,d))});else{const d=o+"";r(new Rh(u.statusText||`HTTP ${o} error`,o,d))}}else r(new Oy(P0(n),n))},Uy=(n,r,a,o)=>{const u={method:n,headers:r?.headers||{}};return o?(zy(o)?(u.headers=Ae({"Content-Type":"application/json"},r?.headers),u.body=JSON.stringify(o)):u.body=o,Ae(Ae({},u),a)):u};async function My(n,r,a,o,u,d){return new Promise((f,m)=>{n(a,Uy(r,o,u,d)).then(p=>{if(!p.ok)throw p;if(o?.noResolveJson)return p;const x=p.headers.get("content-type");return!x||!x.includes("application/json")?{}:p.json()}).then(p=>f(p)).catch(p=>Dy(p,m,o))})}async function Ar(n,r,a,o,u){return My(n,"POST",r,o,u,a)}var Ly=class{constructor(n,r={},a){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=Ae(Ae({},xf),r),this.fetch=vf(a)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(n){var r=this;try{return{data:await Ar(r.fetch,`${r.url}/CreateIndex`,n,{headers:r.headers})||{},error:null}}catch(a){if(r.shouldThrowOnError)throw a;if(Tr(a))return{data:null,error:a};throw a}}async getIndex(n,r){var a=this;try{return{data:await Ar(a.fetch,`${a.url}/GetIndex`,{vectorBucketName:n,indexName:r},{headers:a.headers}),error:null}}catch(o){if(a.shouldThrowOnError)throw o;if(Tr(o))return{data:null,error:o};throw o}}async listIndexes(n){var r=this;try{return{data:await Ar(r.fetch,`${r.url}/ListIndexes`,n,{headers:r.headers}),error:null}}catch(a){if(r.shouldThrowOnError)throw a;if(Tr(a))return{data:null,error:a};throw a}}async deleteIndex(n,r){var a=this;try{return{data:await Ar(a.fetch,`${a.url}/DeleteIndex`,{vectorBucketName:n,indexName:r},{headers:a.headers})||{},error:null}}catch(o){if(a.shouldThrowOnError)throw o;if(Tr(o))return{data:null,error:o};throw o}}},qy=class{constructor(n,r={},a){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=Ae(Ae({},xf),r),this.fetch=vf(a)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(n){var r=this;try{if(n.vectors.length<1||n.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await Ar(r.fetch,`${r.url}/PutVectors`,n,{headers:r.headers})||{},error:null}}catch(a){if(r.shouldThrowOnError)throw a;if(Tr(a))return{data:null,error:a};throw a}}async getVectors(n){var r=this;try{return{data:await Ar(r.fetch,`${r.url}/GetVectors`,n,{headers:r.headers}),error:null}}catch(a){if(r.shouldThrowOnError)throw a;if(Tr(a))return{data:null,error:a};throw a}}async listVectors(n){var r=this;try{if(n.segmentCount!==void 0){if(n.segmentCount<1||n.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(n.segmentIndex!==void 0&&(n.segmentIndex<0||n.segmentIndex>=n.segmentCount))throw new Error(`segmentIndex must be between 0 and ${n.segmentCount-1}`)}return{data:await Ar(r.fetch,`${r.url}/ListVectors`,n,{headers:r.headers}),error:null}}catch(a){if(r.shouldThrowOnError)throw a;if(Tr(a))return{data:null,error:a};throw a}}async queryVectors(n){var r=this;try{return{data:await Ar(r.fetch,`${r.url}/QueryVectors`,n,{headers:r.headers}),error:null}}catch(a){if(r.shouldThrowOnError)throw a;if(Tr(a))return{data:null,error:a};throw a}}async deleteVectors(n){var r=this;try{if(n.keys.length<1||n.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await Ar(r.fetch,`${r.url}/DeleteVectors`,n,{headers:r.headers})||{},error:null}}catch(a){if(r.shouldThrowOnError)throw a;if(Tr(a))return{data:null,error:a};throw a}}},$y=class{constructor(n,r={},a){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=Ae(Ae({},xf),r),this.fetch=vf(a)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(n){var r=this;try{return{data:await Ar(r.fetch,`${r.url}/CreateVectorBucket`,{vectorBucketName:n},{headers:r.headers})||{},error:null}}catch(a){if(r.shouldThrowOnError)throw a;if(Tr(a))return{data:null,error:a};throw a}}async getBucket(n){var r=this;try{return{data:await Ar(r.fetch,`${r.url}/GetVectorBucket`,{vectorBucketName:n},{headers:r.headers}),error:null}}catch(a){if(r.shouldThrowOnError)throw a;if(Tr(a))return{data:null,error:a};throw a}}async listBuckets(n={}){var r=this;try{return{data:await Ar(r.fetch,`${r.url}/ListVectorBuckets`,n,{headers:r.headers}),error:null}}catch(a){if(r.shouldThrowOnError)throw a;if(Tr(a))return{data:null,error:a};throw a}}async deleteBucket(n){var r=this;try{return{data:await Ar(r.fetch,`${r.url}/DeleteVectorBucket`,{vectorBucketName:n},{headers:r.headers})||{},error:null}}catch(a){if(r.shouldThrowOnError)throw a;if(Tr(a))return{data:null,error:a};throw a}}},By=class extends $y{constructor(n,r={}){super(n,r.headers||{},r.fetch)}from(n){return new Py(this.url,this.headers,n,this.fetch)}async createBucket(n){var r=()=>super.createBucket,a=this;return r().call(a,n)}async getBucket(n){var r=()=>super.getBucket,a=this;return r().call(a,n)}async listBuckets(n={}){var r=()=>super.listBuckets,a=this;return r().call(a,n)}async deleteBucket(n){var r=()=>super.deleteBucket,a=this;return r().call(a,n)}},Py=class extends Ly{constructor(n,r,a,o){super(n,r,o),this.vectorBucketName=a}async createIndex(n){var r=()=>super.createIndex,a=this;return r().call(a,Ae(Ae({},n),{},{vectorBucketName:a.vectorBucketName}))}async listIndexes(n={}){var r=()=>super.listIndexes,a=this;return r().call(a,Ae(Ae({},n),{},{vectorBucketName:a.vectorBucketName}))}async getIndex(n){var r=()=>super.getIndex,a=this;return r().call(a,a.vectorBucketName,n)}async deleteIndex(n){var r=()=>super.deleteIndex,a=this;return r().call(a,a.vectorBucketName,n)}index(n){return new Hy(this.url,this.headers,this.vectorBucketName,n,this.fetch)}},Hy=class extends qy{constructor(n,r,a,o,u){super(n,r,u),this.vectorBucketName=a,this.indexName=o}async putVectors(n){var r=()=>super.putVectors,a=this;return r().call(a,Ae(Ae({},n),{},{vectorBucketName:a.vectorBucketName,indexName:a.indexName}))}async getVectors(n){var r=()=>super.getVectors,a=this;return r().call(a,Ae(Ae({},n),{},{vectorBucketName:a.vectorBucketName,indexName:a.indexName}))}async listVectors(n={}){var r=()=>super.listVectors,a=this;return r().call(a,Ae(Ae({},n),{},{vectorBucketName:a.vectorBucketName,indexName:a.indexName}))}async queryVectors(n){var r=()=>super.queryVectors,a=this;return r().call(a,Ae(Ae({},n),{},{vectorBucketName:a.vectorBucketName,indexName:a.indexName}))}async deleteVectors(n){var r=()=>super.deleteVectors,a=this;return r().call(a,Ae(Ae({},n),{},{vectorBucketName:a.vectorBucketName,indexName:a.indexName}))}},Iy=class extends Ay{constructor(n,r={},a,o){super(n,r,a,o)}from(n){return new Ty(this.url,this.headers,n,this.fetch)}get vectors(){return new By(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Ry(this.url+"/iceberg",this.headers,this.fetch)}};const Ug="2.89.0",Zi=30*1e3,tf=3,Oh=tf*Zi,Vy="http://localhost:9999",Gy="supabase.auth.token",Yy={"X-Client-Info":`gotrue-js/${Ug}`},rf="X-Supabase-Api-Version",Mg={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Ky=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Wy=600*1e3;class Oo extends Error{constructor(r,a,o){super(r),this.__isAuthError=!0,this.name="AuthError",this.status=a,this.code=o}}function Ne(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class Xy extends Oo{constructor(r,a,o){super(r,a,o),this.name="AuthApiError",this.status=a,this.code=o}}function Jy(n){return Ne(n)&&n.name==="AuthApiError"}class On extends Oo{constructor(r,a){super(r),this.name="AuthUnknownError",this.originalError=a}}class na extends Oo{constructor(r,a,o,u){super(r,o,u),this.name=a,this.status=o}}class kr extends na{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Qy(n){return Ne(n)&&n.name==="AuthSessionMissingError"}class Yi extends na{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class mu extends na{constructor(r){super(r,"AuthInvalidCredentialsError",400,void 0)}}class pu extends na{constructor(r,a=null){super(r,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=a}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Zy(n){return Ne(n)&&n.name==="AuthImplicitGrantRedirectError"}class H0 extends na{constructor(r,a=null){super(r,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=a}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Fy extends na{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class sf extends na{constructor(r,a){super(r,"AuthRetryableFetchError",a,void 0)}}function zh(n){return Ne(n)&&n.name==="AuthRetryableFetchError"}class I0 extends na{constructor(r,a,o){super(r,"AuthWeakPasswordError",a,"weak_password"),this.reasons=o}}class af extends na{constructor(r){super(r,"AuthInvalidJwtError",400,"invalid_jwt")}}const ju="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),V0=` 	
\r=`.split(""),eb=(()=>{const n=new Array(128);for(let r=0;r<n.length;r+=1)n[r]=-1;for(let r=0;r<V0.length;r+=1)n[V0[r].charCodeAt(0)]=-2;for(let r=0;r<ju.length;r+=1)n[ju[r].charCodeAt(0)]=r;return n})();function G0(n,r,a){if(n!==null)for(r.queue=r.queue<<8|n,r.queuedBits+=8;r.queuedBits>=6;){const o=r.queue>>r.queuedBits-6&63;a(ju[o]),r.queuedBits-=6}else if(r.queuedBits>0)for(r.queue=r.queue<<6-r.queuedBits,r.queuedBits=6;r.queuedBits>=6;){const o=r.queue>>r.queuedBits-6&63;a(ju[o]),r.queuedBits-=6}}function Lg(n,r,a){const o=eb[n];if(o>-1)for(r.queue=r.queue<<6|o,r.queuedBits+=6;r.queuedBits>=8;)a(r.queue>>r.queuedBits-8&255),r.queuedBits-=8;else{if(o===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function Y0(n){const r=[],a=f=>{r.push(String.fromCodePoint(f))},o={utf8seq:0,codepoint:0},u={queue:0,queuedBits:0},d=f=>{sb(f,o,a)};for(let f=0;f<n.length;f+=1)Lg(n.charCodeAt(f),u,d);return r.join("")}function tb(n,r){if(n<=127){r(n);return}else if(n<=2047){r(192|n>>6),r(128|n&63);return}else if(n<=65535){r(224|n>>12),r(128|n>>6&63),r(128|n&63);return}else if(n<=1114111){r(240|n>>18),r(128|n>>12&63),r(128|n>>6&63),r(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function rb(n,r){for(let a=0;a<n.length;a+=1){let o=n.charCodeAt(a);if(o>55295&&o<=56319){const u=(o-55296)*1024&65535;o=(n.charCodeAt(a+1)-56320&65535|u)+65536,a+=1}tb(o,r)}}function sb(n,r,a){if(r.utf8seq===0){if(n<=127){a(n);return}for(let o=1;o<6;o+=1)if((n>>7-o&1)===0){r.utf8seq=o;break}if(r.utf8seq===2)r.codepoint=n&31;else if(r.utf8seq===3)r.codepoint=n&15;else if(r.utf8seq===4)r.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");r.utf8seq-=1}else if(r.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");r.codepoint=r.codepoint<<6|n&63,r.utf8seq-=1,r.utf8seq===0&&a(r.codepoint)}}function sl(n){const r=[],a={queue:0,queuedBits:0},o=u=>{r.push(u)};for(let u=0;u<n.length;u+=1)Lg(n.charCodeAt(u),a,o);return new Uint8Array(r)}function ab(n){const r=[];return rb(n,a=>r.push(a)),new Uint8Array(r)}function zn(n){const r=[],a={queue:0,queuedBits:0},o=u=>{r.push(u)};return n.forEach(u=>G0(u,a,o)),G0(null,a,o),r.join("")}function nb(n){return Math.round(Date.now()/1e3)+n}function ib(){return Symbol("auth-callback")}const $t=()=>typeof window<"u"&&typeof document<"u",Cn={tested:!1,writable:!1},qg=()=>{if(!$t())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Cn.tested)return Cn.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),Cn.tested=!0,Cn.writable=!0}catch{Cn.tested=!0,Cn.writable=!1}return Cn.writable};function lb(n){const r={},a=new URL(n);if(a.hash&&a.hash[0]==="#")try{new URLSearchParams(a.hash.substring(1)).forEach((u,d)=>{r[d]=u})}catch{}return a.searchParams.forEach((o,u)=>{r[u]=o}),r}const $g=n=>n?(...r)=>n(...r):(...r)=>fetch(...r),ob=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",Fi=async(n,r,a)=>{await n.setItem(r,JSON.stringify(a))},Tn=async(n,r)=>{const a=await n.getItem(r);if(!a)return null;try{return JSON.parse(a)}catch{return a}},qt=async(n,r)=>{await n.removeItem(r)};class Au{constructor(){this.promise=new Au.promiseConstructor((r,a)=>{this.resolve=r,this.reject=a})}}Au.promiseConstructor=Promise;function Dh(n){const r=n.split(".");if(r.length!==3)throw new af("Invalid JWT structure");for(let o=0;o<r.length;o++)if(!Ky.test(r[o]))throw new af("JWT not in base64url format");return{header:JSON.parse(Y0(r[0])),payload:JSON.parse(Y0(r[1])),signature:sl(r[2]),raw:{header:r[0],payload:r[1]}}}async function cb(n){return await new Promise(r=>{setTimeout(()=>r(null),n)})}function ub(n,r){return new Promise((o,u)=>{(async()=>{for(let d=0;d<1/0;d++)try{const f=await n(d);if(!r(d,null,f)){o(f);return}}catch(f){if(!r(d,f)){u(f);return}}})()})}function db(n){return("0"+n.toString(16)).substr(-2)}function hb(){const r=new Uint32Array(56);if(typeof crypto>"u"){const a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",o=a.length;let u="";for(let d=0;d<56;d++)u+=a.charAt(Math.floor(Math.random()*o));return u}return crypto.getRandomValues(r),Array.from(r,db).join("")}async function fb(n){const a=new TextEncoder().encode(n),o=await crypto.subtle.digest("SHA-256",a),u=new Uint8Array(o);return Array.from(u).map(d=>String.fromCharCode(d)).join("")}async function mb(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const a=await fb(n);return btoa(a).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ki(n,r,a=!1){const o=hb();let u=o;a&&(u+="/PASSWORD_RECOVERY"),await Fi(n,`${r}-code-verifier`,u);const d=await mb(o);return[d,o===d?"plain":"s256"]}const pb=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function gb(n){const r=n.headers.get(rf);if(!r||!r.match(pb))return null;try{return new Date(`${r}T00:00:00.0Z`)}catch{return null}}function xb(n){if(!n)throw new Error("Missing exp claim");const r=Math.floor(Date.now()/1e3);if(n<=r)throw new Error("JWT has expired")}function vb(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const yb=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Wi(n){if(!yb.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Uh(){const n={};return new Proxy(n,{get:(r,a)=>{if(a==="__isUserNotAvailableProxy")return!0;if(typeof a=="symbol"){const o=a.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${a}" property of the session object is not supported. Please use getUser() instead.`)},set:(r,a)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${a}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(r,a)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${a}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function bb(n,r){return new Proxy(n,{get:(a,o,u)=>{if(o==="__isInsecureUserWarningProxy")return!0;if(typeof o=="symbol"){const d=o.toString();if(d==="Symbol(Symbol.toPrimitive)"||d==="Symbol(Symbol.toStringTag)"||d==="Symbol(util.inspect.custom)"||d==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(a,o,u)}return!r.value&&typeof o=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),r.value=!0),Reflect.get(a,o,u)}})}function K0(n){return JSON.parse(JSON.stringify(n))}const An=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),wb=[502,503,504];async function W0(n){var r;if(!ob(n))throw new sf(An(n),0);if(wb.includes(n.status))throw new sf(An(n),n.status);let a;try{a=await n.json()}catch(d){throw new On(An(d),d)}let o;const u=gb(n);if(u&&u.getTime()>=Mg["2024-01-01"].timestamp&&typeof a=="object"&&a&&typeof a.code=="string"?o=a.code:typeof a=="object"&&a&&typeof a.error_code=="string"&&(o=a.error_code),o){if(o==="weak_password")throw new I0(An(a),n.status,((r=a.weak_password)===null||r===void 0?void 0:r.reasons)||[]);if(o==="session_not_found")throw new kr}else if(typeof a=="object"&&a&&typeof a.weak_password=="object"&&a.weak_password&&Array.isArray(a.weak_password.reasons)&&a.weak_password.reasons.length&&a.weak_password.reasons.reduce((d,f)=>d&&typeof f=="string",!0))throw new I0(An(a),n.status,a.weak_password.reasons);throw new Xy(An(a),n.status||500,o)}const _b=(n,r,a,o)=>{const u={method:n,headers:r?.headers||{}};return n==="GET"?u:(u.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},r?.headers),u.body=JSON.stringify(o),Object.assign(Object.assign({},u),a))};async function Te(n,r,a,o){var u;const d=Object.assign({},o?.headers);d[rf]||(d[rf]=Mg["2024-01-01"].name),o?.jwt&&(d.Authorization=`Bearer ${o.jwt}`);const f=(u=o?.query)!==null&&u!==void 0?u:{};o?.redirectTo&&(f.redirect_to=o.redirectTo);const m=Object.keys(f).length?"?"+new URLSearchParams(f).toString():"",p=await jb(n,r,a+m,{headers:d,noResolveJson:o?.noResolveJson},{},o?.body);return o?.xform?o?.xform(p):{data:Object.assign({},p),error:null}}async function jb(n,r,a,o,u,d){const f=_b(r,o,u,d);let m;try{m=await n(a,Object.assign({},f))}catch(p){throw console.error(p),new sf(An(p),0)}if(m.ok||await W0(m),o?.noResolveJson)return m;try{return await m.json()}catch(p){await W0(p)}}function ns(n){var r;let a=null;Eb(n)&&(a=Object.assign({},n),n.expires_at||(a.expires_at=nb(n.expires_in)));const o=(r=n.user)!==null&&r!==void 0?r:n;return{data:{session:a,user:o},error:null}}function X0(n){const r=ns(n);return!r.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((a,o)=>a&&typeof o=="string",!0)&&(r.data.weak_password=n.weak_password),r}function Ya(n){var r;return{data:{user:(r=n.user)!==null&&r!==void 0?r:n},error:null}}function Sb(n){return{data:n,error:null}}function Nb(n){const{action_link:r,email_otp:a,hashed_token:o,redirect_to:u,verification_type:d}=n,f=Cu(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),m={action_link:r,email_otp:a,hashed_token:o,redirect_to:u,verification_type:d},p=Object.assign({},f);return{data:{properties:m,user:p},error:null}}function J0(n){return n}function Eb(n){return n.access_token&&n.refresh_token&&n.expires_in}const Mh=["global","local","others"];class kb{constructor({url:r="",headers:a={},fetch:o}){this.url=r,this.headers=a,this.fetch=$g(o),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(r,a=Mh[0]){if(Mh.indexOf(a)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Mh.join(", ")}`);try{return await Te(this.fetch,"POST",`${this.url}/logout?scope=${a}`,{headers:this.headers,jwt:r,noResolveJson:!0}),{data:null,error:null}}catch(o){if(Ne(o))return{data:null,error:o};throw o}}async inviteUserByEmail(r,a={}){try{return await Te(this.fetch,"POST",`${this.url}/invite`,{body:{email:r,data:a.data},headers:this.headers,redirectTo:a.redirectTo,xform:Ya})}catch(o){if(Ne(o))return{data:{user:null},error:o};throw o}}async generateLink(r){try{const{options:a}=r,o=Cu(r,["options"]),u=Object.assign(Object.assign({},o),a);return"newEmail"in o&&(u.new_email=o?.newEmail,delete u.newEmail),await Te(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:u,headers:this.headers,xform:Nb,redirectTo:a?.redirectTo})}catch(a){if(Ne(a))return{data:{properties:null,user:null},error:a};throw a}}async createUser(r){try{return await Te(this.fetch,"POST",`${this.url}/admin/users`,{body:r,headers:this.headers,xform:Ya})}catch(a){if(Ne(a))return{data:{user:null},error:a};throw a}}async listUsers(r){var a,o,u,d,f,m,p;try{const x={nextPage:null,lastPage:0,total:0},w=await Te(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(o=(a=r?.page)===null||a===void 0?void 0:a.toString())!==null&&o!==void 0?o:"",per_page:(d=(u=r?.perPage)===null||u===void 0?void 0:u.toString())!==null&&d!==void 0?d:""},xform:J0});if(w.error)throw w.error;const N=await w.json(),E=(f=w.headers.get("x-total-count"))!==null&&f!==void 0?f:0,A=(p=(m=w.headers.get("link"))===null||m===void 0?void 0:m.split(","))!==null&&p!==void 0?p:[];return A.length>0&&(A.forEach($=>{const D=parseInt($.split(";")[0].split("=")[1].substring(0,1)),k=JSON.parse($.split(";")[1].split("=")[1]);x[`${k}Page`]=D}),x.total=parseInt(E)),{data:Object.assign(Object.assign({},N),x),error:null}}catch(x){if(Ne(x))return{data:{users:[]},error:x};throw x}}async getUserById(r){Wi(r);try{return await Te(this.fetch,"GET",`${this.url}/admin/users/${r}`,{headers:this.headers,xform:Ya})}catch(a){if(Ne(a))return{data:{user:null},error:a};throw a}}async updateUserById(r,a){Wi(r);try{return await Te(this.fetch,"PUT",`${this.url}/admin/users/${r}`,{body:a,headers:this.headers,xform:Ya})}catch(o){if(Ne(o))return{data:{user:null},error:o};throw o}}async deleteUser(r,a=!1){Wi(r);try{return await Te(this.fetch,"DELETE",`${this.url}/admin/users/${r}`,{headers:this.headers,body:{should_soft_delete:a},xform:Ya})}catch(o){if(Ne(o))return{data:{user:null},error:o};throw o}}async _listFactors(r){Wi(r.userId);try{const{data:a,error:o}=await Te(this.fetch,"GET",`${this.url}/admin/users/${r.userId}/factors`,{headers:this.headers,xform:u=>({data:{factors:u},error:null})});return{data:a,error:o}}catch(a){if(Ne(a))return{data:null,error:a};throw a}}async _deleteFactor(r){Wi(r.userId),Wi(r.id);try{return{data:await Te(this.fetch,"DELETE",`${this.url}/admin/users/${r.userId}/factors/${r.id}`,{headers:this.headers}),error:null}}catch(a){if(Ne(a))return{data:null,error:a};throw a}}async _listOAuthClients(r){var a,o,u,d,f,m,p;try{const x={nextPage:null,lastPage:0,total:0},w=await Te(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(o=(a=r?.page)===null||a===void 0?void 0:a.toString())!==null&&o!==void 0?o:"",per_page:(d=(u=r?.perPage)===null||u===void 0?void 0:u.toString())!==null&&d!==void 0?d:""},xform:J0});if(w.error)throw w.error;const N=await w.json(),E=(f=w.headers.get("x-total-count"))!==null&&f!==void 0?f:0,A=(p=(m=w.headers.get("link"))===null||m===void 0?void 0:m.split(","))!==null&&p!==void 0?p:[];return A.length>0&&(A.forEach($=>{const D=parseInt($.split(";")[0].split("=")[1].substring(0,1)),k=JSON.parse($.split(";")[1].split("=")[1]);x[`${k}Page`]=D}),x.total=parseInt(E)),{data:Object.assign(Object.assign({},N),x),error:null}}catch(x){if(Ne(x))return{data:{clients:[]},error:x};throw x}}async _createOAuthClient(r){try{return await Te(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:r,headers:this.headers,xform:a=>({data:a,error:null})})}catch(a){if(Ne(a))return{data:null,error:a};throw a}}async _getOAuthClient(r){try{return await Te(this.fetch,"GET",`${this.url}/admin/oauth/clients/${r}`,{headers:this.headers,xform:a=>({data:a,error:null})})}catch(a){if(Ne(a))return{data:null,error:a};throw a}}async _updateOAuthClient(r,a){try{return await Te(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${r}`,{body:a,headers:this.headers,xform:o=>({data:o,error:null})})}catch(o){if(Ne(o))return{data:null,error:o};throw o}}async _deleteOAuthClient(r){try{return await Te(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${r}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(a){if(Ne(a))return{data:null,error:a};throw a}}async _regenerateOAuthClientSecret(r){try{return await Te(this.fetch,"POST",`${this.url}/admin/oauth/clients/${r}/regenerate_secret`,{headers:this.headers,xform:a=>({data:a,error:null})})}catch(a){if(Ne(a))return{data:null,error:a};throw a}}}function Q0(n={}){return{getItem:r=>n[r]||null,setItem:(r,a)=>{n[r]=a},removeItem:r=>{delete n[r]}}}const Xi={debug:!!(globalThis&&qg()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Bg extends Error{constructor(r){super(r),this.isAcquireTimeout=!0}}class Cb extends Bg{}async function Tb(n,r,a){Xi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,r);const o=new globalThis.AbortController;return r>0&&setTimeout(()=>{o.abort(),Xi.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},r),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,r===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:o.signal},async u=>{if(u){Xi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,u.name);try{return await a()}finally{Xi.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,u.name)}}else{if(r===0)throw Xi.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new Cb(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(Xi.debug)try{const d=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(d,null,"  "))}catch(d){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",d)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await a()}}))}function Ab(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Pg(n){if(!/^0x[a-fA-F0-9]{40}$/.test(n))throw new Error(`@supabase/auth-js: Address "${n}" is invalid.`);return n.toLowerCase()}function Rb(n){return parseInt(n,16)}function Ob(n){const r=new TextEncoder().encode(n);return"0x"+Array.from(r,o=>o.toString(16).padStart(2,"0")).join("")}function zb(n){var r;const{chainId:a,domain:o,expirationTime:u,issuedAt:d=new Date,nonce:f,notBefore:m,requestId:p,resources:x,scheme:w,uri:N,version:E}=n;{if(!Number.isInteger(a))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${a}`);if(!o)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(f&&f.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${f}`);if(!N)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(E!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${E}`);if(!((r=n.statement)===null||r===void 0)&&r.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${n.statement}`)}const A=Pg(n.address),$=w?`${w}://${o}`:o,D=n.statement?`${n.statement}
`:"",k=`${$} wants you to sign in with your Ethereum account:
${A}

${D}`;let H=`URI: ${N}
Version: ${E}
Chain ID: ${a}${f?`
Nonce: ${f}`:""}
Issued At: ${d.toISOString()}`;if(u&&(H+=`
Expiration Time: ${u.toISOString()}`),m&&(H+=`
Not Before: ${m.toISOString()}`),p&&(H+=`
Request ID: ${p}`),x){let P=`
Resources:`;for(const q of x){if(!q||typeof q!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${q}`);P+=`
- ${q}`}H+=P}return`${k}
${H}`}class Et extends Error{constructor({message:r,code:a,cause:o,name:u}){var d;super(r,{cause:o}),this.__isWebAuthnError=!0,this.name=(d=u??(o instanceof Error?o.name:void 0))!==null&&d!==void 0?d:"Unknown Error",this.code=a}}class Su extends Et{constructor(r,a){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:a,message:r}),this.name="WebAuthnUnknownError",this.originalError=a}}function Db({error:n,options:r}){var a,o,u;const{publicKey:d}=r;if(!d)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(r.signal instanceof AbortSignal)return new Et({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else if(n.name==="ConstraintError"){if(((a=d.authenticatorSelection)===null||a===void 0?void 0:a.requireResidentKey)===!0)return new Et({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:n});if(r.mediation==="conditional"&&((o=d.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new Et({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:n});if(((u=d.authenticatorSelection)===null||u===void 0?void 0:u.userVerification)==="required")return new Et({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:n})}else{if(n.name==="InvalidStateError")return new Et({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:n});if(n.name==="NotAllowedError")return new Et({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="NotSupportedError")return d.pubKeyCredParams.filter(m=>m.type==="public-key").length===0?new Et({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:n}):new Et({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:n});if(n.name==="SecurityError"){const f=window.location.hostname;if(Hg(f)){if(d.rp.id!==f)return new Et({message:`The RP ID "${d.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new Et({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="TypeError"){if(d.user.id.byteLength<1||d.user.id.byteLength>64)return new Et({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:n})}else if(n.name==="UnknownError")return new Et({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new Et({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}function Ub({error:n,options:r}){const{publicKey:a}=r;if(!a)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(r.signal instanceof AbortSignal)return new Et({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else{if(n.name==="NotAllowedError")return new Et({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="SecurityError"){const o=window.location.hostname;if(Hg(o)){if(a.rpId!==o)return new Et({message:`The RP ID "${a.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new Et({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="UnknownError")return new Et({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new Et({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}class Mb{createNewAbortSignal(){if(this.controller){const a=new Error("Cancelling existing WebAuthn API call for new one");a.name="AbortError",this.controller.abort(a)}const r=new AbortController;return this.controller=r,r.signal}cancelCeremony(){if(this.controller){const r=new Error("Manually cancelling existing WebAuthn API call");r.name="AbortError",this.controller.abort(r),this.controller=void 0}}}const Lb=new Mb;function qb(n){if(!n)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(n);const{challenge:r,user:a,excludeCredentials:o}=n,u=Cu(n,["challenge","user","excludeCredentials"]),d=sl(r).buffer,f=Object.assign(Object.assign({},a),{id:sl(a.id).buffer}),m=Object.assign(Object.assign({},u),{challenge:d,user:f});if(o&&o.length>0){m.excludeCredentials=new Array(o.length);for(let p=0;p<o.length;p++){const x=o[p];m.excludeCredentials[p]=Object.assign(Object.assign({},x),{id:sl(x.id).buffer,type:x.type||"public-key",transports:x.transports})}}return m}function $b(n){if(!n)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(n);const{challenge:r,allowCredentials:a}=n,o=Cu(n,["challenge","allowCredentials"]),u=sl(r).buffer,d=Object.assign(Object.assign({},o),{challenge:u});if(a&&a.length>0){d.allowCredentials=new Array(a.length);for(let f=0;f<a.length;f++){const m=a[f];d.allowCredentials[f]=Object.assign(Object.assign({},m),{id:sl(m.id).buffer,type:m.type||"public-key",transports:m.transports})}}return d}function Bb(n){var r;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const a=n;return{id:n.id,rawId:n.id,response:{attestationObject:zn(new Uint8Array(n.response.attestationObject)),clientDataJSON:zn(new Uint8Array(n.response.clientDataJSON))},type:"public-key",clientExtensionResults:n.getClientExtensionResults(),authenticatorAttachment:(r=a.authenticatorAttachment)!==null&&r!==void 0?r:void 0}}function Pb(n){var r;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const a=n,o=n.getClientExtensionResults(),u=n.response;return{id:n.id,rawId:n.id,response:{authenticatorData:zn(new Uint8Array(u.authenticatorData)),clientDataJSON:zn(new Uint8Array(u.clientDataJSON)),signature:zn(new Uint8Array(u.signature)),userHandle:u.userHandle?zn(new Uint8Array(u.userHandle)):void 0},type:"public-key",clientExtensionResults:o,authenticatorAttachment:(r=a.authenticatorAttachment)!==null&&r!==void 0?r:void 0}}function Hg(n){return n==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(n)}function Z0(){var n,r;return!!($t()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((n=navigator?.credentials)===null||n===void 0?void 0:n.create)=="function"&&typeof((r=navigator?.credentials)===null||r===void 0?void 0:r.get)=="function")}async function Hb(n){try{const r=await navigator.credentials.create(n);return r?r instanceof PublicKeyCredential?{data:r,error:null}:{data:null,error:new Su("Browser returned unexpected credential type",r)}:{data:null,error:new Su("Empty credential response",r)}}catch(r){return{data:null,error:Db({error:r,options:n})}}}async function Ib(n){try{const r=await navigator.credentials.get(n);return r?r instanceof PublicKeyCredential?{data:r,error:null}:{data:null,error:new Su("Browser returned unexpected credential type",r)}:{data:null,error:new Su("Empty credential response",r)}}catch(r){return{data:null,error:Ub({error:r,options:n})}}}const Vb={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Gb={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Nu(...n){const r=u=>u!==null&&typeof u=="object"&&!Array.isArray(u),a=u=>u instanceof ArrayBuffer||ArrayBuffer.isView(u),o={};for(const u of n)if(u)for(const d in u){const f=u[d];if(f!==void 0)if(Array.isArray(f))o[d]=f;else if(a(f))o[d]=f;else if(r(f)){const m=o[d];r(m)?o[d]=Nu(m,f):o[d]=Nu(f)}else o[d]=f}return o}function Yb(n,r){return Nu(Vb,n,r||{})}function Kb(n,r){return Nu(Gb,n,r||{})}class Wb{constructor(r){this.client=r,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(r){return this.client.mfa.enroll(Object.assign(Object.assign({},r),{factorType:"webauthn"}))}async _challenge({factorId:r,webauthn:a,friendlyName:o,signal:u},d){try{const{data:f,error:m}=await this.client.mfa.challenge({factorId:r,webauthn:a});if(!f)return{data:null,error:m};const p=u??Lb.createNewAbortSignal();if(f.webauthn.type==="create"){const{user:x}=f.webauthn.credential_options.publicKey;x.name||(x.name=`${x.id}:${o}`),x.displayName||(x.displayName=x.name)}switch(f.webauthn.type){case"create":{const x=Yb(f.webauthn.credential_options.publicKey,d?.create),{data:w,error:N}=await Hb({publicKey:x,signal:p});return w?{data:{factorId:r,challengeId:f.id,webauthn:{type:f.webauthn.type,credential_response:w}},error:null}:{data:null,error:N}}case"request":{const x=Kb(f.webauthn.credential_options.publicKey,d?.request),{data:w,error:N}=await Ib(Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:x,signal:p}));return w?{data:{factorId:r,challengeId:f.id,webauthn:{type:f.webauthn.type,credential_response:w}},error:null}:{data:null,error:N}}}}catch(f){return Ne(f)?{data:null,error:f}:{data:null,error:new On("Unexpected error in challenge",f)}}}async _verify({challengeId:r,factorId:a,webauthn:o}){return this.client.mfa.verify({factorId:a,challengeId:r,webauthn:o})}async _authenticate({factorId:r,webauthn:{rpId:a=typeof window<"u"?window.location.hostname:void 0,rpOrigins:o=typeof window<"u"?[window.location.origin]:void 0,signal:u}={}},d){if(!a)return{data:null,error:new Oo("rpId is required for WebAuthn authentication")};try{if(!Z0())return{data:null,error:new On("Browser does not support WebAuthn",null)};const{data:f,error:m}=await this.challenge({factorId:r,webauthn:{rpId:a,rpOrigins:o},signal:u},{request:d});if(!f)return{data:null,error:m};const{webauthn:p}=f;return this._verify({factorId:r,challengeId:f.challengeId,webauthn:{type:p.type,rpId:a,rpOrigins:o,credential_response:p.credential_response}})}catch(f){return Ne(f)?{data:null,error:f}:{data:null,error:new On("Unexpected error in authenticate",f)}}}async _register({friendlyName:r,webauthn:{rpId:a=typeof window<"u"?window.location.hostname:void 0,rpOrigins:o=typeof window<"u"?[window.location.origin]:void 0,signal:u}={}},d){if(!a)return{data:null,error:new Oo("rpId is required for WebAuthn registration")};try{if(!Z0())return{data:null,error:new On("Browser does not support WebAuthn",null)};const{data:f,error:m}=await this._enroll({friendlyName:r});if(!f)return await this.client.mfa.listFactors().then(w=>{var N;return(N=w.data)===null||N===void 0?void 0:N.all.find(E=>E.factor_type==="webauthn"&&E.friendly_name===r&&E.status!=="unverified")}).then(w=>w?this.client.mfa.unenroll({factorId:w?.id}):void 0),{data:null,error:m};const{data:p,error:x}=await this._challenge({factorId:f.id,friendlyName:f.friendly_name,webauthn:{rpId:a,rpOrigins:o},signal:u},{create:d});return p?this._verify({factorId:f.id,challengeId:p.challengeId,webauthn:{rpId:a,rpOrigins:o,type:p.webauthn.type,credential_response:p.webauthn.credential_response}}):{data:null,error:x}}catch(f){return Ne(f)?{data:null,error:f}:{data:null,error:new On("Unexpected error in register",f)}}}}Ab();const Xb={url:Vy,storageKey:Gy,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Yy,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function F0(n,r,a){return await a()}const Ji={};class zo{get jwks(){var r,a;return(a=(r=Ji[this.storageKey])===null||r===void 0?void 0:r.jwks)!==null&&a!==void 0?a:{keys:[]}}set jwks(r){Ji[this.storageKey]=Object.assign(Object.assign({},Ji[this.storageKey]),{jwks:r})}get jwks_cached_at(){var r,a;return(a=(r=Ji[this.storageKey])===null||r===void 0?void 0:r.cachedAt)!==null&&a!==void 0?a:Number.MIN_SAFE_INTEGER}set jwks_cached_at(r){Ji[this.storageKey]=Object.assign(Object.assign({},Ji[this.storageKey]),{cachedAt:r})}constructor(r){var a,o,u;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const d=Object.assign(Object.assign({},Xb),r);if(this.storageKey=d.storageKey,this.instanceID=(a=zo.nextInstanceID[this.storageKey])!==null&&a!==void 0?a:0,zo.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!d.debug,typeof d.debug=="function"&&(this.logger=d.debug),this.instanceID>0&&$t()){const f=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(f),this.logDebugMessages&&console.trace(f)}if(this.persistSession=d.persistSession,this.autoRefreshToken=d.autoRefreshToken,this.admin=new kb({url:d.url,headers:d.headers,fetch:d.fetch}),this.url=d.url,this.headers=d.headers,this.fetch=$g(d.fetch),this.lock=d.lock||F0,this.detectSessionInUrl=d.detectSessionInUrl,this.flowType=d.flowType,this.hasCustomAuthorizationHeader=d.hasCustomAuthorizationHeader,this.throwOnError=d.throwOnError,d.lock?this.lock=d.lock:this.persistSession&&$t()&&(!((o=globalThis?.navigator)===null||o===void 0)&&o.locks)?this.lock=Tb:this.lock=F0,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Wb(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(d.storage?this.storage=d.storage:qg()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Q0(this.memoryStorage)),d.userStorage&&(this.userStorage=d.userStorage)):(this.memoryStorage={},this.storage=Q0(this.memoryStorage)),$t()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(f){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",f)}(u=this.broadcastChannel)===null||u===void 0||u.addEventListener("message",async f=>{this._debug("received broadcast notification from other tab or client",f),await this._notifyAllSubscribers(f.data.event,f.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(r){if(this.throwOnError&&r&&r.error)throw r.error;return r}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Ug}) ${new Date().toISOString()}`}_debug(...r){return this.logDebugMessages&&this.logger(this._logPrefix(),...r),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var r;try{let a={},o="none";if($t()&&(a=lb(window.location.href),this._isImplicitGrantCallback(a)?o="implicit":await this._isPKCECallback(a)&&(o="pkce")),$t()&&this.detectSessionInUrl&&o!=="none"){const{data:u,error:d}=await this._getSessionFromURL(a,o);if(d){if(this._debug("#_initialize()","error detecting session from URL",d),Zy(d)){const p=(r=d.details)===null||r===void 0?void 0:r.code;if(p==="identity_already_exists"||p==="identity_not_found"||p==="single_identity_not_deletable")return{error:d}}return await this._removeSession(),{error:d}}const{session:f,redirectType:m}=u;return this._debug("#_initialize()","detected session in URL",f,"redirect type",m),await this._saveSession(f),setTimeout(async()=>{m==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",f):await this._notifyAllSubscribers("SIGNED_IN",f)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(a){return Ne(a)?this._returnResult({error:a}):this._returnResult({error:new On("Unexpected error during initialization",a)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(r){var a,o,u;try{const d=await Te(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(o=(a=r?.options)===null||a===void 0?void 0:a.data)!==null&&o!==void 0?o:{},gotrue_meta_security:{captcha_token:(u=r?.options)===null||u===void 0?void 0:u.captchaToken}},xform:ns}),{data:f,error:m}=d;if(m||!f)return this._returnResult({data:{user:null,session:null},error:m});const p=f.session,x=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",p)),this._returnResult({data:{user:x,session:p},error:null})}catch(d){if(Ne(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}}async signUp(r){var a,o,u;try{let d;if("email"in r){const{email:w,password:N,options:E}=r;let A=null,$=null;this.flowType==="pkce"&&([A,$]=await Ki(this.storage,this.storageKey)),d=await Te(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:E?.emailRedirectTo,body:{email:w,password:N,data:(a=E?.data)!==null&&a!==void 0?a:{},gotrue_meta_security:{captcha_token:E?.captchaToken},code_challenge:A,code_challenge_method:$},xform:ns})}else if("phone"in r){const{phone:w,password:N,options:E}=r;d=await Te(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:w,password:N,data:(o=E?.data)!==null&&o!==void 0?o:{},channel:(u=E?.channel)!==null&&u!==void 0?u:"sms",gotrue_meta_security:{captcha_token:E?.captchaToken}},xform:ns})}else throw new mu("You must provide either an email or phone number and a password");const{data:f,error:m}=d;if(m||!f)return await qt(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:m});const p=f.session,x=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",p)),this._returnResult({data:{user:x,session:p},error:null})}catch(d){if(await qt(this.storage,`${this.storageKey}-code-verifier`),Ne(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}}async signInWithPassword(r){try{let a;if("email"in r){const{email:d,password:f,options:m}=r;a=await Te(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:d,password:f,gotrue_meta_security:{captcha_token:m?.captchaToken}},xform:X0})}else if("phone"in r){const{phone:d,password:f,options:m}=r;a=await Te(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:d,password:f,gotrue_meta_security:{captcha_token:m?.captchaToken}},xform:X0})}else throw new mu("You must provide either an email or phone number and a password");const{data:o,error:u}=a;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!o||!o.session||!o.user){const d=new Yi;return this._returnResult({data:{user:null,session:null},error:d})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign({user:o.user,session:o.session},o.weak_password?{weakPassword:o.weak_password}:null),error:u})}catch(a){if(Ne(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithOAuth(r){var a,o,u,d;return await this._handleProviderSignIn(r.provider,{redirectTo:(a=r.options)===null||a===void 0?void 0:a.redirectTo,scopes:(o=r.options)===null||o===void 0?void 0:o.scopes,queryParams:(u=r.options)===null||u===void 0?void 0:u.queryParams,skipBrowserRedirect:(d=r.options)===null||d===void 0?void 0:d.skipBrowserRedirect})}async exchangeCodeForSession(r){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(r))}async signInWithWeb3(r){const{chain:a}=r;switch(a){case"ethereum":return await this.signInWithEthereum(r);case"solana":return await this.signInWithSolana(r);default:throw new Error(`@supabase/auth-js: Unsupported chain "${a}"`)}}async signInWithEthereum(r){var a,o,u,d,f,m,p,x,w,N,E;let A,$;if("message"in r)A=r.message,$=r.signature;else{const{chain:D,wallet:k,statement:H,options:P}=r;let q;if($t())if(typeof k=="object")q=k;else{const ve=window;if("ethereum"in ve&&typeof ve.ethereum=="object"&&"request"in ve.ethereum&&typeof ve.ethereum.request=="function")q=ve.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof k!="object"||!P?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");q=k}const K=new URL((a=P?.url)!==null&&a!==void 0?a:window.location.href),ie=await q.request({method:"eth_requestAccounts"}).then(ve=>ve).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!ie||ie.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const X=Pg(ie[0]);let F=(o=P?.signInWithEthereum)===null||o===void 0?void 0:o.chainId;if(!F){const ve=await q.request({method:"eth_chainId"});F=Rb(ve)}const fe={domain:K.host,address:X,statement:H,uri:K.href,version:"1",chainId:F,nonce:(u=P?.signInWithEthereum)===null||u===void 0?void 0:u.nonce,issuedAt:(f=(d=P?.signInWithEthereum)===null||d===void 0?void 0:d.issuedAt)!==null&&f!==void 0?f:new Date,expirationTime:(m=P?.signInWithEthereum)===null||m===void 0?void 0:m.expirationTime,notBefore:(p=P?.signInWithEthereum)===null||p===void 0?void 0:p.notBefore,requestId:(x=P?.signInWithEthereum)===null||x===void 0?void 0:x.requestId,resources:(w=P?.signInWithEthereum)===null||w===void 0?void 0:w.resources};A=zb(fe),$=await q.request({method:"personal_sign",params:[Ob(A),X]})}try{const{data:D,error:k}=await Te(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:A,signature:$},!((N=r.options)===null||N===void 0)&&N.captchaToken?{gotrue_meta_security:{captcha_token:(E=r.options)===null||E===void 0?void 0:E.captchaToken}}:null),xform:ns});if(k)throw k;if(!D||!D.session||!D.user){const H=new Yi;return this._returnResult({data:{user:null,session:null},error:H})}return D.session&&(await this._saveSession(D.session),await this._notifyAllSubscribers("SIGNED_IN",D.session)),this._returnResult({data:Object.assign({},D),error:k})}catch(D){if(Ne(D))return this._returnResult({data:{user:null,session:null},error:D});throw D}}async signInWithSolana(r){var a,o,u,d,f,m,p,x,w,N,E,A;let $,D;if("message"in r)$=r.message,D=r.signature;else{const{chain:k,wallet:H,statement:P,options:q}=r;let K;if($t())if(typeof H=="object")K=H;else{const X=window;if("solana"in X&&typeof X.solana=="object"&&("signIn"in X.solana&&typeof X.solana.signIn=="function"||"signMessage"in X.solana&&typeof X.solana.signMessage=="function"))K=X.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof H!="object"||!q?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");K=H}const ie=new URL((a=q?.url)!==null&&a!==void 0?a:window.location.href);if("signIn"in K&&K.signIn){const X=await K.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},q?.signInWithSolana),{version:"1",domain:ie.host,uri:ie.href}),P?{statement:P}:null));let F;if(Array.isArray(X)&&X[0]&&typeof X[0]=="object")F=X[0];else if(X&&typeof X=="object"&&"signedMessage"in X&&"signature"in X)F=X;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in F&&"signature"in F&&(typeof F.signedMessage=="string"||F.signedMessage instanceof Uint8Array)&&F.signature instanceof Uint8Array)$=typeof F.signedMessage=="string"?F.signedMessage:new TextDecoder().decode(F.signedMessage),D=F.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in K)||typeof K.signMessage!="function"||!("publicKey"in K)||typeof K!="object"||!K.publicKey||!("toBase58"in K.publicKey)||typeof K.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");$=[`${ie.host} wants you to sign in with your Solana account:`,K.publicKey.toBase58(),...P?["",P,""]:[""],"Version: 1",`URI: ${ie.href}`,`Issued At: ${(u=(o=q?.signInWithSolana)===null||o===void 0?void 0:o.issuedAt)!==null&&u!==void 0?u:new Date().toISOString()}`,...!((d=q?.signInWithSolana)===null||d===void 0)&&d.notBefore?[`Not Before: ${q.signInWithSolana.notBefore}`]:[],...!((f=q?.signInWithSolana)===null||f===void 0)&&f.expirationTime?[`Expiration Time: ${q.signInWithSolana.expirationTime}`]:[],...!((m=q?.signInWithSolana)===null||m===void 0)&&m.chainId?[`Chain ID: ${q.signInWithSolana.chainId}`]:[],...!((p=q?.signInWithSolana)===null||p===void 0)&&p.nonce?[`Nonce: ${q.signInWithSolana.nonce}`]:[],...!((x=q?.signInWithSolana)===null||x===void 0)&&x.requestId?[`Request ID: ${q.signInWithSolana.requestId}`]:[],...!((N=(w=q?.signInWithSolana)===null||w===void 0?void 0:w.resources)===null||N===void 0)&&N.length?["Resources",...q.signInWithSolana.resources.map(F=>`- ${F}`)]:[]].join(`
`);const X=await K.signMessage(new TextEncoder().encode($),"utf8");if(!X||!(X instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");D=X}}try{const{data:k,error:H}=await Te(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:$,signature:zn(D)},!((E=r.options)===null||E===void 0)&&E.captchaToken?{gotrue_meta_security:{captcha_token:(A=r.options)===null||A===void 0?void 0:A.captchaToken}}:null),xform:ns});if(H)throw H;if(!k||!k.session||!k.user){const P=new Yi;return this._returnResult({data:{user:null,session:null},error:P})}return k.session&&(await this._saveSession(k.session),await this._notifyAllSubscribers("SIGNED_IN",k.session)),this._returnResult({data:Object.assign({},k),error:H})}catch(k){if(Ne(k))return this._returnResult({data:{user:null,session:null},error:k});throw k}}async _exchangeCodeForSession(r){const a=await Tn(this.storage,`${this.storageKey}-code-verifier`),[o,u]=(a??"").split("/");try{if(!o&&this.flowType==="pkce")throw new Fy;const{data:d,error:f}=await Te(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:r,code_verifier:o},xform:ns});if(await qt(this.storage,`${this.storageKey}-code-verifier`),f)throw f;if(!d||!d.session||!d.user){const m=new Yi;return this._returnResult({data:{user:null,session:null,redirectType:null},error:m})}return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),this._returnResult({data:Object.assign(Object.assign({},d),{redirectType:u??null}),error:f})}catch(d){if(await qt(this.storage,`${this.storageKey}-code-verifier`),Ne(d))return this._returnResult({data:{user:null,session:null,redirectType:null},error:d});throw d}}async signInWithIdToken(r){try{const{options:a,provider:o,token:u,access_token:d,nonce:f}=r,m=await Te(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:o,id_token:u,access_token:d,nonce:f,gotrue_meta_security:{captcha_token:a?.captchaToken}},xform:ns}),{data:p,error:x}=m;if(x)return this._returnResult({data:{user:null,session:null},error:x});if(!p||!p.session||!p.user){const w=new Yi;return this._returnResult({data:{user:null,session:null},error:w})}return p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",p.session)),this._returnResult({data:p,error:x})}catch(a){if(Ne(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithOtp(r){var a,o,u,d,f;try{if("email"in r){const{email:m,options:p}=r;let x=null,w=null;this.flowType==="pkce"&&([x,w]=await Ki(this.storage,this.storageKey));const{error:N}=await Te(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:m,data:(a=p?.data)!==null&&a!==void 0?a:{},create_user:(o=p?.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:p?.captchaToken},code_challenge:x,code_challenge_method:w},redirectTo:p?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:N})}if("phone"in r){const{phone:m,options:p}=r,{data:x,error:w}=await Te(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:m,data:(u=p?.data)!==null&&u!==void 0?u:{},create_user:(d=p?.shouldCreateUser)!==null&&d!==void 0?d:!0,gotrue_meta_security:{captcha_token:p?.captchaToken},channel:(f=p?.channel)!==null&&f!==void 0?f:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:x?.message_id},error:w})}throw new mu("You must provide either an email or phone number.")}catch(m){if(await qt(this.storage,`${this.storageKey}-code-verifier`),Ne(m))return this._returnResult({data:{user:null,session:null},error:m});throw m}}async verifyOtp(r){var a,o;try{let u,d;"options"in r&&(u=(a=r.options)===null||a===void 0?void 0:a.redirectTo,d=(o=r.options)===null||o===void 0?void 0:o.captchaToken);const{data:f,error:m}=await Te(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},r),{gotrue_meta_security:{captcha_token:d}}),redirectTo:u,xform:ns});if(m)throw m;if(!f)throw new Error("An error occurred on token verification.");const p=f.session,x=f.user;return p?.access_token&&(await this._saveSession(p),await this._notifyAllSubscribers(r.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",p)),this._returnResult({data:{user:x,session:p},error:null})}catch(u){if(Ne(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async signInWithSSO(r){var a,o,u,d,f;try{let m=null,p=null;this.flowType==="pkce"&&([m,p]=await Ki(this.storage,this.storageKey));const x=await Te(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in r?{provider_id:r.providerId}:null),"domain"in r?{domain:r.domain}:null),{redirect_to:(o=(a=r.options)===null||a===void 0?void 0:a.redirectTo)!==null&&o!==void 0?o:void 0}),!((u=r?.options)===null||u===void 0)&&u.captchaToken?{gotrue_meta_security:{captcha_token:r.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:m,code_challenge_method:p}),headers:this.headers,xform:Sb});return!((d=x.data)===null||d===void 0)&&d.url&&$t()&&!(!((f=r.options)===null||f===void 0)&&f.skipBrowserRedirect)&&window.location.assign(x.data.url),this._returnResult(x)}catch(m){if(await qt(this.storage,`${this.storageKey}-code-verifier`),Ne(m))return this._returnResult({data:null,error:m});throw m}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async r=>{const{data:{session:a},error:o}=r;if(o)throw o;if(!a)throw new kr;const{error:u}=await Te(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:a.access_token});return this._returnResult({data:{user:null,session:null},error:u})})}catch(r){if(Ne(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async resend(r){try{const a=`${this.url}/resend`;if("email"in r){const{email:o,type:u,options:d}=r,{error:f}=await Te(this.fetch,"POST",a,{headers:this.headers,body:{email:o,type:u,gotrue_meta_security:{captcha_token:d?.captchaToken}},redirectTo:d?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:f})}else if("phone"in r){const{phone:o,type:u,options:d}=r,{data:f,error:m}=await Te(this.fetch,"POST",a,{headers:this.headers,body:{phone:o,type:u,gotrue_meta_security:{captcha_token:d?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:f?.message_id},error:m})}throw new mu("You must provide either an email or phone number and a type")}catch(a){if(Ne(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async a=>a))}async _acquireLock(r,a){this._debug("#_acquireLock","begin",r);try{if(this.lockAcquired){const o=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),u=(async()=>(await o,await a()))();return this.pendingInLock.push((async()=>{try{await u}catch{}})()),u}return await this.lock(`lock:${this.storageKey}`,r,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const o=a();for(this.pendingInLock.push((async()=>{try{await o}catch{}})()),await o;this.pendingInLock.length;){const u=[...this.pendingInLock];await Promise.all(u),this.pendingInLock.splice(0,u.length)}return await o}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(r){this._debug("#_useSession","begin");try{const a=await this.__loadSession();return await r(a)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let r=null;const a=await Tn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",a),a!==null&&(this._isValidSession(a)?r=a:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!r)return{data:{session:null},error:null};const o=r.expires_at?r.expires_at*1e3-Date.now()<Oh:!1;if(this._debug("#__loadSession()",`session has${o?"":" not"} expired`,"expires_at",r.expires_at),!o){if(this.userStorage){const f=await Tn(this.userStorage,this.storageKey+"-user");f?.user?r.user=f.user:r.user=Uh()}if(this.storage.isServer&&r.user&&!r.user.__isUserNotAvailableProxy){const f={value:this.suppressGetSessionWarning};r.user=bb(r.user,f),f.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:r},error:null}}const{data:u,error:d}=await this._callRefreshToken(r.refresh_token);return d?this._returnResult({data:{session:null},error:d}):this._returnResult({data:{session:u},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(r){if(r)return await this._getUser(r);await this.initializePromise;const a=await this._acquireLock(-1,async()=>await this._getUser());return a.data.user&&(this.suppressGetSessionWarning=!0),a}async _getUser(r){try{return r?await Te(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:r,xform:Ya}):await this._useSession(async a=>{var o,u,d;const{data:f,error:m}=a;if(m)throw m;return!(!((o=f.session)===null||o===void 0)&&o.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new kr}:await Te(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(d=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0,xform:Ya})})}catch(a){if(Ne(a))return Qy(a)&&(await this._removeSession(),await qt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:a});throw a}}async updateUser(r,a={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(r,a))}async _updateUser(r,a={}){try{return await this._useSession(async o=>{const{data:u,error:d}=o;if(d)throw d;if(!u.session)throw new kr;const f=u.session;let m=null,p=null;this.flowType==="pkce"&&r.email!=null&&([m,p]=await Ki(this.storage,this.storageKey));const{data:x,error:w}=await Te(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:a?.emailRedirectTo,body:Object.assign(Object.assign({},r),{code_challenge:m,code_challenge_method:p}),jwt:f.access_token,xform:Ya});if(w)throw w;return f.user=x.user,await this._saveSession(f),await this._notifyAllSubscribers("USER_UPDATED",f),this._returnResult({data:{user:f.user},error:null})})}catch(o){if(await qt(this.storage,`${this.storageKey}-code-verifier`),Ne(o))return this._returnResult({data:{user:null},error:o});throw o}}async setSession(r){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(r))}async _setSession(r){try{if(!r.access_token||!r.refresh_token)throw new kr;const a=Date.now()/1e3;let o=a,u=!0,d=null;const{payload:f}=Dh(r.access_token);if(f.exp&&(o=f.exp,u=o<=a),u){const{data:m,error:p}=await this._callRefreshToken(r.refresh_token);if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!m)return{data:{user:null,session:null},error:null};d=m}else{const{data:m,error:p}=await this._getUser(r.access_token);if(p)throw p;d={access_token:r.access_token,refresh_token:r.refresh_token,user:m.user,token_type:"bearer",expires_in:o-a,expires_at:o},await this._saveSession(d),await this._notifyAllSubscribers("SIGNED_IN",d)}return this._returnResult({data:{user:d.user,session:d},error:null})}catch(a){if(Ne(a))return this._returnResult({data:{session:null,user:null},error:a});throw a}}async refreshSession(r){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(r))}async _refreshSession(r){try{return await this._useSession(async a=>{var o;if(!r){const{data:f,error:m}=a;if(m)throw m;r=(o=f.session)!==null&&o!==void 0?o:void 0}if(!r?.refresh_token)throw new kr;const{data:u,error:d}=await this._callRefreshToken(r.refresh_token);return d?this._returnResult({data:{user:null,session:null},error:d}):u?this._returnResult({data:{user:u.user,session:u},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(a){if(Ne(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async _getSessionFromURL(r,a){try{if(!$t())throw new pu("No browser detected.");if(r.error||r.error_description||r.error_code)throw new pu(r.error_description||"Error in URL with unspecified error_description",{error:r.error||"unspecified_error",code:r.error_code||"unspecified_code"});switch(a){case"implicit":if(this.flowType==="pkce")throw new H0("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new pu("Not a valid implicit grant flow url.");break;default:}if(a==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!r.code)throw new H0("No code detected.");const{data:P,error:q}=await this._exchangeCodeForSession(r.code);if(q)throw q;const K=new URL(window.location.href);return K.searchParams.delete("code"),window.history.replaceState(window.history.state,"",K.toString()),{data:{session:P.session,redirectType:null},error:null}}const{provider_token:o,provider_refresh_token:u,access_token:d,refresh_token:f,expires_in:m,expires_at:p,token_type:x}=r;if(!d||!m||!f||!x)throw new pu("No session defined in URL");const w=Math.round(Date.now()/1e3),N=parseInt(m);let E=w+N;p&&(E=parseInt(p));const A=E-w;A*1e3<=Zi&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${A}s, should have been closer to ${N}s`);const $=E-N;w-$>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",$,E,w):w-$<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",$,E,w);const{data:D,error:k}=await this._getUser(d);if(k)throw k;const H={provider_token:o,provider_refresh_token:u,access_token:d,expires_in:N,expires_at:E,refresh_token:f,token_type:x,user:D.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:H,redirectType:r.type},error:null})}catch(o){if(Ne(o))return this._returnResult({data:{session:null,redirectType:null},error:o});throw o}}_isImplicitGrantCallback(r){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),r):!!(r.access_token||r.error_description)}async _isPKCECallback(r){const a=await Tn(this.storage,`${this.storageKey}-code-verifier`);return!!(r.code&&a)}async signOut(r={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(r))}async _signOut({scope:r}={scope:"global"}){return await this._useSession(async a=>{var o;const{data:u,error:d}=a;if(d)return this._returnResult({error:d});const f=(o=u.session)===null||o===void 0?void 0:o.access_token;if(f){const{error:m}=await this.admin.signOut(f,r);if(m&&!(Jy(m)&&(m.status===404||m.status===401||m.status===403)))return this._returnResult({error:m})}return r!=="others"&&(await this._removeSession(),await qt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(r){const a=ib(),o={id:a,callback:r,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",a),this.stateChangeEmitters.delete(a)}};return this._debug("#onAuthStateChange()","registered callback with id",a),this.stateChangeEmitters.set(a,o),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(a)})))(),{data:{subscription:o}}}async _emitInitialSession(r){return await this._useSession(async a=>{var o,u;try{const{data:{session:d},error:f}=a;if(f)throw f;await((o=this.stateChangeEmitters.get(r))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",d)),this._debug("INITIAL_SESSION","callback id",r,"session",d)}catch(d){await((u=this.stateChangeEmitters.get(r))===null||u===void 0?void 0:u.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",r,"error",d),console.error(d)}})}async resetPasswordForEmail(r,a={}){let o=null,u=null;this.flowType==="pkce"&&([o,u]=await Ki(this.storage,this.storageKey,!0));try{return await Te(this.fetch,"POST",`${this.url}/recover`,{body:{email:r,code_challenge:o,code_challenge_method:u,gotrue_meta_security:{captcha_token:a.captchaToken}},headers:this.headers,redirectTo:a.redirectTo})}catch(d){if(await qt(this.storage,`${this.storageKey}-code-verifier`),Ne(d))return this._returnResult({data:null,error:d});throw d}}async getUserIdentities(){var r;try{const{data:a,error:o}=await this.getUser();if(o)throw o;return this._returnResult({data:{identities:(r=a.user.identities)!==null&&r!==void 0?r:[]},error:null})}catch(a){if(Ne(a))return this._returnResult({data:null,error:a});throw a}}async linkIdentity(r){return"token"in r?this.linkIdentityIdToken(r):this.linkIdentityOAuth(r)}async linkIdentityOAuth(r){var a;try{const{data:o,error:u}=await this._useSession(async d=>{var f,m,p,x,w;const{data:N,error:E}=d;if(E)throw E;const A=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,r.provider,{redirectTo:(f=r.options)===null||f===void 0?void 0:f.redirectTo,scopes:(m=r.options)===null||m===void 0?void 0:m.scopes,queryParams:(p=r.options)===null||p===void 0?void 0:p.queryParams,skipBrowserRedirect:!0});return await Te(this.fetch,"GET",A,{headers:this.headers,jwt:(w=(x=N.session)===null||x===void 0?void 0:x.access_token)!==null&&w!==void 0?w:void 0})});if(u)throw u;return $t()&&!(!((a=r.options)===null||a===void 0)&&a.skipBrowserRedirect)&&window.location.assign(o?.url),this._returnResult({data:{provider:r.provider,url:o?.url},error:null})}catch(o){if(Ne(o))return this._returnResult({data:{provider:r.provider,url:null},error:o});throw o}}async linkIdentityIdToken(r){return await this._useSession(async a=>{var o;try{const{error:u,data:{session:d}}=a;if(u)throw u;const{options:f,provider:m,token:p,access_token:x,nonce:w}=r,N=await Te(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(o=d?.access_token)!==null&&o!==void 0?o:void 0,body:{provider:m,id_token:p,access_token:x,nonce:w,link_identity:!0,gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:ns}),{data:E,error:A}=N;return A?this._returnResult({data:{user:null,session:null},error:A}):!E||!E.session||!E.user?this._returnResult({data:{user:null,session:null},error:new Yi}):(E.session&&(await this._saveSession(E.session),await this._notifyAllSubscribers("USER_UPDATED",E.session)),this._returnResult({data:E,error:A}))}catch(u){if(await qt(this.storage,`${this.storageKey}-code-verifier`),Ne(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}})}async unlinkIdentity(r){try{return await this._useSession(async a=>{var o,u;const{data:d,error:f}=a;if(f)throw f;return await Te(this.fetch,"DELETE",`${this.url}/user/identities/${r.identity_id}`,{headers:this.headers,jwt:(u=(o=d.session)===null||o===void 0?void 0:o.access_token)!==null&&u!==void 0?u:void 0})})}catch(a){if(Ne(a))return this._returnResult({data:null,error:a});throw a}}async _refreshAccessToken(r){const a=`#_refreshAccessToken(${r.substring(0,5)}...)`;this._debug(a,"begin");try{const o=Date.now();return await ub(async u=>(u>0&&await cb(200*Math.pow(2,u-1)),this._debug(a,"refreshing attempt",u),await Te(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:r},headers:this.headers,xform:ns})),(u,d)=>{const f=200*Math.pow(2,u);return d&&zh(d)&&Date.now()+f-o<Zi})}catch(o){if(this._debug(a,"error",o),Ne(o))return this._returnResult({data:{session:null,user:null},error:o});throw o}finally{this._debug(a,"end")}}_isValidSession(r){return typeof r=="object"&&r!==null&&"access_token"in r&&"refresh_token"in r&&"expires_at"in r}async _handleProviderSignIn(r,a){const o=await this._getUrlForProvider(`${this.url}/authorize`,r,{redirectTo:a.redirectTo,scopes:a.scopes,queryParams:a.queryParams});return this._debug("#_handleProviderSignIn()","provider",r,"options",a,"url",o),$t()&&!a.skipBrowserRedirect&&window.location.assign(o),{data:{provider:r,url:o},error:null}}async _recoverAndRefresh(){var r,a;const o="#_recoverAndRefresh()";this._debug(o,"begin");try{const u=await Tn(this.storage,this.storageKey);if(u&&this.userStorage){let f=await Tn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!f&&(f={user:u.user},await Fi(this.userStorage,this.storageKey+"-user",f)),u.user=(r=f?.user)!==null&&r!==void 0?r:Uh()}else if(u&&!u.user&&!u.user){const f=await Tn(this.storage,this.storageKey+"-user");f&&f?.user?(u.user=f.user,await qt(this.storage,this.storageKey+"-user"),await Fi(this.storage,this.storageKey,u)):u.user=Uh()}if(this._debug(o,"session from storage",u),!this._isValidSession(u)){this._debug(o,"session is not valid"),u!==null&&await this._removeSession();return}const d=((a=u.expires_at)!==null&&a!==void 0?a:1/0)*1e3-Date.now()<Oh;if(this._debug(o,`session has${d?"":" not"} expired with margin of ${Oh}s`),d){if(this.autoRefreshToken&&u.refresh_token){const{error:f}=await this._callRefreshToken(u.refresh_token);f&&(console.error(f),zh(f)||(this._debug(o,"refresh failed with a non-retryable error, removing the session",f),await this._removeSession()))}}else if(u.user&&u.user.__isUserNotAvailableProxy===!0)try{const{data:f,error:m}=await this._getUser(u.access_token);!m&&f?.user?(u.user=f.user,await this._saveSession(u),await this._notifyAllSubscribers("SIGNED_IN",u)):this._debug(o,"could not get user data, skipping SIGNED_IN notification")}catch(f){console.error("Error getting user data:",f),this._debug(o,"error getting user data, skipping SIGNED_IN notification",f)}else await this._notifyAllSubscribers("SIGNED_IN",u)}catch(u){this._debug(o,"error",u),console.error(u);return}finally{this._debug(o,"end")}}async _callRefreshToken(r){var a,o;if(!r)throw new kr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const u=`#_callRefreshToken(${r.substring(0,5)}...)`;this._debug(u,"begin");try{this.refreshingDeferred=new Au;const{data:d,error:f}=await this._refreshAccessToken(r);if(f)throw f;if(!d.session)throw new kr;await this._saveSession(d.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",d.session);const m={data:d.session,error:null};return this.refreshingDeferred.resolve(m),m}catch(d){if(this._debug(u,"error",d),Ne(d)){const f={data:null,error:d};return zh(d)||await this._removeSession(),(a=this.refreshingDeferred)===null||a===void 0||a.resolve(f),f}throw(o=this.refreshingDeferred)===null||o===void 0||o.reject(d),d}finally{this.refreshingDeferred=null,this._debug(u,"end")}}async _notifyAllSubscribers(r,a,o=!0){const u=`#_notifyAllSubscribers(${r})`;this._debug(u,"begin",a,`broadcast = ${o}`);try{this.broadcastChannel&&o&&this.broadcastChannel.postMessage({event:r,session:a});const d=[],f=Array.from(this.stateChangeEmitters.values()).map(async m=>{try{await m.callback(r,a)}catch(p){d.push(p)}});if(await Promise.all(f),d.length>0){for(let m=0;m<d.length;m+=1)console.error(d[m]);throw d[0]}}finally{this._debug(u,"end")}}async _saveSession(r){this._debug("#_saveSession()",r),this.suppressGetSessionWarning=!0,await qt(this.storage,`${this.storageKey}-code-verifier`);const a=Object.assign({},r),o=a.user&&a.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!o&&a.user&&await Fi(this.userStorage,this.storageKey+"-user",{user:a.user});const u=Object.assign({},a);delete u.user;const d=K0(u);await Fi(this.storage,this.storageKey,d)}else{const u=K0(a);await Fi(this.storage,this.storageKey,u)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await qt(this.storage,this.storageKey),await qt(this.storage,this.storageKey+"-code-verifier"),await qt(this.storage,this.storageKey+"-user"),this.userStorage&&await qt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const r=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{r&&$t()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",r)}catch(a){console.error("removing visibilitychange callback failed",a)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const r=setInterval(()=>this._autoRefreshTokenTick(),Zi);this.autoRefreshTicker=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const r=this.autoRefreshTicker;this.autoRefreshTicker=null,r&&clearInterval(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const r=Date.now();try{return await this._useSession(async a=>{const{data:{session:o}}=a;if(!o||!o.refresh_token||!o.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const u=Math.floor((o.expires_at*1e3-r)/Zi);this._debug("#_autoRefreshTokenTick()",`access token expires in ${u} ticks, a tick lasts ${Zi}ms, refresh threshold is ${tf} ticks`),u<=tf&&await this._callRefreshToken(o.refresh_token)})}catch(a){console.error("Auto refresh tick failed with error. This is likely a transient error.",a)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(r){if(r.isAcquireTimeout||r instanceof Bg)this._debug("auto refresh token tick lock not available");else throw r}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!$t()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(r){console.error("_handleVisibilityChange",r)}}async _onVisibilityChanged(r){const a=`#_onVisibilityChanged(${r})`;this._debug(a,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),r||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(a,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(r,a,o){const u=[`provider=${encodeURIComponent(a)}`];if(o?.redirectTo&&u.push(`redirect_to=${encodeURIComponent(o.redirectTo)}`),o?.scopes&&u.push(`scopes=${encodeURIComponent(o.scopes)}`),this.flowType==="pkce"){const[d,f]=await Ki(this.storage,this.storageKey),m=new URLSearchParams({code_challenge:`${encodeURIComponent(d)}`,code_challenge_method:`${encodeURIComponent(f)}`});u.push(m.toString())}if(o?.queryParams){const d=new URLSearchParams(o.queryParams);u.push(d.toString())}return o?.skipBrowserRedirect&&u.push(`skip_http_redirect=${o.skipBrowserRedirect}`),`${r}?${u.join("&")}`}async _unenroll(r){try{return await this._useSession(async a=>{var o;const{data:u,error:d}=a;return d?this._returnResult({data:null,error:d}):await Te(this.fetch,"DELETE",`${this.url}/factors/${r.factorId}`,{headers:this.headers,jwt:(o=u?.session)===null||o===void 0?void 0:o.access_token})})}catch(a){if(Ne(a))return this._returnResult({data:null,error:a});throw a}}async _enroll(r){try{return await this._useSession(async a=>{var o,u;const{data:d,error:f}=a;if(f)return this._returnResult({data:null,error:f});const m=Object.assign({friendly_name:r.friendlyName,factor_type:r.factorType},r.factorType==="phone"?{phone:r.phone}:r.factorType==="totp"?{issuer:r.issuer}:{}),{data:p,error:x}=await Te(this.fetch,"POST",`${this.url}/factors`,{body:m,headers:this.headers,jwt:(o=d?.session)===null||o===void 0?void 0:o.access_token});return x?this._returnResult({data:null,error:x}):(r.factorType==="totp"&&p.type==="totp"&&(!((u=p?.totp)===null||u===void 0)&&u.qr_code)&&(p.totp.qr_code=`data:image/svg+xml;utf-8,${p.totp.qr_code}`),this._returnResult({data:p,error:null}))})}catch(a){if(Ne(a))return this._returnResult({data:null,error:a});throw a}}async _verify(r){return this._acquireLock(-1,async()=>{try{return await this._useSession(async a=>{var o;const{data:u,error:d}=a;if(d)return this._returnResult({data:null,error:d});const f=Object.assign({challenge_id:r.challengeId},"webauthn"in r?{webauthn:Object.assign(Object.assign({},r.webauthn),{credential_response:r.webauthn.type==="create"?Bb(r.webauthn.credential_response):Pb(r.webauthn.credential_response)})}:{code:r.code}),{data:m,error:p}=await Te(this.fetch,"POST",`${this.url}/factors/${r.factorId}/verify`,{body:f,headers:this.headers,jwt:(o=u?.session)===null||o===void 0?void 0:o.access_token});return p?this._returnResult({data:null,error:p}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+m.expires_in},m)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",m),this._returnResult({data:m,error:p}))})}catch(a){if(Ne(a))return this._returnResult({data:null,error:a});throw a}})}async _challenge(r){return this._acquireLock(-1,async()=>{try{return await this._useSession(async a=>{var o;const{data:u,error:d}=a;if(d)return this._returnResult({data:null,error:d});const f=await Te(this.fetch,"POST",`${this.url}/factors/${r.factorId}/challenge`,{body:r,headers:this.headers,jwt:(o=u?.session)===null||o===void 0?void 0:o.access_token});if(f.error)return f;const{data:m}=f;if(m.type!=="webauthn")return{data:m,error:null};switch(m.webauthn.type){case"create":return{data:Object.assign(Object.assign({},m),{webauthn:Object.assign(Object.assign({},m.webauthn),{credential_options:Object.assign(Object.assign({},m.webauthn.credential_options),{publicKey:qb(m.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},m),{webauthn:Object.assign(Object.assign({},m.webauthn),{credential_options:Object.assign(Object.assign({},m.webauthn.credential_options),{publicKey:$b(m.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(a){if(Ne(a))return this._returnResult({data:null,error:a});throw a}})}async _challengeAndVerify(r){const{data:a,error:o}=await this._challenge({factorId:r.factorId});return o?this._returnResult({data:null,error:o}):await this._verify({factorId:r.factorId,challengeId:a.id,code:r.code})}async _listFactors(){var r;const{data:{user:a},error:o}=await this.getUser();if(o)return{data:null,error:o};const u={all:[],phone:[],totp:[],webauthn:[]};for(const d of(r=a?.factors)!==null&&r!==void 0?r:[])u.all.push(d),d.status==="verified"&&u[d.factor_type].push(d);return{data:u,error:null}}async _getAuthenticatorAssuranceLevel(){var r,a;const{data:{session:o},error:u}=await this.getSession();if(u)return this._returnResult({data:null,error:u});if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:d}=Dh(o.access_token);let f=null;d.aal&&(f=d.aal);let m=f;((a=(r=o.user.factors)===null||r===void 0?void 0:r.filter(w=>w.status==="verified"))!==null&&a!==void 0?a:[]).length>0&&(m="aal2");const x=d.amr||[];return{data:{currentLevel:f,nextLevel:m,currentAuthenticationMethods:x},error:null}}async _getAuthorizationDetails(r){try{return await this._useSession(async a=>{const{data:{session:o},error:u}=a;return u?this._returnResult({data:null,error:u}):o?await Te(this.fetch,"GET",`${this.url}/oauth/authorizations/${r}`,{headers:this.headers,jwt:o.access_token,xform:d=>({data:d,error:null})}):this._returnResult({data:null,error:new kr})})}catch(a){if(Ne(a))return this._returnResult({data:null,error:a});throw a}}async _approveAuthorization(r,a){try{return await this._useSession(async o=>{const{data:{session:u},error:d}=o;if(d)return this._returnResult({data:null,error:d});if(!u)return this._returnResult({data:null,error:new kr});const f=await Te(this.fetch,"POST",`${this.url}/oauth/authorizations/${r}/consent`,{headers:this.headers,jwt:u.access_token,body:{action:"approve"},xform:m=>({data:m,error:null})});return f.data&&f.data.redirect_url&&$t()&&!a?.skipBrowserRedirect&&window.location.assign(f.data.redirect_url),f})}catch(o){if(Ne(o))return this._returnResult({data:null,error:o});throw o}}async _denyAuthorization(r,a){try{return await this._useSession(async o=>{const{data:{session:u},error:d}=o;if(d)return this._returnResult({data:null,error:d});if(!u)return this._returnResult({data:null,error:new kr});const f=await Te(this.fetch,"POST",`${this.url}/oauth/authorizations/${r}/consent`,{headers:this.headers,jwt:u.access_token,body:{action:"deny"},xform:m=>({data:m,error:null})});return f.data&&f.data.redirect_url&&$t()&&!a?.skipBrowserRedirect&&window.location.assign(f.data.redirect_url),f})}catch(o){if(Ne(o))return this._returnResult({data:null,error:o});throw o}}async _listOAuthGrants(){try{return await this._useSession(async r=>{const{data:{session:a},error:o}=r;return o?this._returnResult({data:null,error:o}):a?await Te(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:a.access_token,xform:u=>({data:u,error:null})}):this._returnResult({data:null,error:new kr})})}catch(r){if(Ne(r))return this._returnResult({data:null,error:r});throw r}}async _revokeOAuthGrant(r){try{return await this._useSession(async a=>{const{data:{session:o},error:u}=a;return u?this._returnResult({data:null,error:u}):o?(await Te(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:o.access_token,query:{client_id:r.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new kr})})}catch(a){if(Ne(a))return this._returnResult({data:null,error:a});throw a}}async fetchJwk(r,a={keys:[]}){let o=a.keys.find(m=>m.kid===r);if(o)return o;const u=Date.now();if(o=this.jwks.keys.find(m=>m.kid===r),o&&this.jwks_cached_at+Wy>u)return o;const{data:d,error:f}=await Te(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(f)throw f;return!d.keys||d.keys.length===0||(this.jwks=d,this.jwks_cached_at=u,o=d.keys.find(m=>m.kid===r),!o)?null:o}async getClaims(r,a={}){try{let o=r;if(!o){const{data:A,error:$}=await this.getSession();if($||!A.session)return this._returnResult({data:null,error:$});o=A.session.access_token}const{header:u,payload:d,signature:f,raw:{header:m,payload:p}}=Dh(o);a?.allowExpired||xb(d.exp);const x=!u.alg||u.alg.startsWith("HS")||!u.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(u.kid,a?.keys?{keys:a.keys}:a?.jwks);if(!x){const{error:A}=await this.getUser(o);if(A)throw A;return{data:{claims:d,header:u,signature:f},error:null}}const w=vb(u.alg),N=await crypto.subtle.importKey("jwk",x,w,!0,["verify"]);if(!await crypto.subtle.verify(w,N,f,ab(`${m}.${p}`)))throw new af("Invalid JWT signature");return{data:{claims:d,header:u,signature:f},error:null}}catch(o){if(Ne(o))return this._returnResult({data:null,error:o});throw o}}}zo.nextInstanceID={};const Jb=zo,Qb="2.89.0";let No="";typeof Deno<"u"?No="deno":typeof document<"u"?No="web":typeof navigator<"u"&&navigator.product==="ReactNative"?No="react-native":No="node";const Zb={"X-Client-Info":`supabase-js-${No}/${Qb}`},Fb={headers:Zb},ew={schema:"public"},tw={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},rw={};function Do(n){"@babel/helpers - typeof";return Do=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Do(n)}function sw(n,r){if(Do(n)!="object"||!n)return n;var a=n[Symbol.toPrimitive];if(a!==void 0){var o=a.call(n,r);if(Do(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(n)}function aw(n){var r=sw(n,"string");return Do(r)=="symbol"?r:r+""}function nw(n,r,a){return(r=aw(r))in n?Object.defineProperty(n,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[r]=a,n}function eg(n,r){var a=Object.keys(n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);r&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(n,u).enumerable})),a.push.apply(a,o)}return a}function bt(n){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?eg(Object(a),!0).forEach(function(o){nw(n,o,a[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(a)):eg(Object(a)).forEach(function(o){Object.defineProperty(n,o,Object.getOwnPropertyDescriptor(a,o))})}return n}const iw=n=>n?(...r)=>n(...r):(...r)=>fetch(...r),lw=()=>Headers,ow=(n,r,a)=>{const o=iw(a),u=lw();return async(d,f)=>{var m;const p=(m=await r())!==null&&m!==void 0?m:n;let x=new u(f?.headers);return x.has("apikey")||x.set("apikey",n),x.has("Authorization")||x.set("Authorization",`Bearer ${p}`),o(d,bt(bt({},f),{},{headers:x}))}};function cw(n){return n.endsWith("/")?n:n+"/"}function uw(n,r){var a,o;const{db:u,auth:d,realtime:f,global:m}=n,{db:p,auth:x,realtime:w,global:N}=r,E={db:bt(bt({},p),u),auth:bt(bt({},x),d),realtime:bt(bt({},w),f),storage:{},global:bt(bt(bt({},N),m),{},{headers:bt(bt({},(a=N?.headers)!==null&&a!==void 0?a:{}),(o=m?.headers)!==null&&o!==void 0?o:{})}),accessToken:async()=>""};return n.accessToken?E.accessToken=n.accessToken:delete E.accessToken,E}function dw(n){const r=n?.trim();if(!r)throw new Error("supabaseUrl is required.");if(!r.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(cw(r))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var hw=class extends Jb{constructor(n){super(n)}},fw=class{constructor(n,r,a){var o,u;this.supabaseUrl=n,this.supabaseKey=r;const d=dw(n);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",d),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",d),this.storageUrl=new URL("storage/v1",d),this.functionsUrl=new URL("functions/v1",d);const f=`sb-${d.hostname.split(".")[0]}-auth-token`,m={db:ew,realtime:rw,auth:bt(bt({},tw),{},{storageKey:f}),global:Fb},p=uw(a??{},m);if(this.storageKey=(o=p.auth.storageKey)!==null&&o!==void 0?o:"",this.headers=(u=p.global.headers)!==null&&u!==void 0?u:{},p.accessToken)this.accessToken=p.accessToken,this.auth=new Proxy({},{get:(w,N)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(N)} is not possible`)}});else{var x;this.auth=this._initSupabaseAuthClient((x=p.auth)!==null&&x!==void 0?x:{},this.headers,p.global.fetch)}this.fetch=ow(r,this._getAccessToken.bind(this),p.global.fetch),this.realtime=this._initRealtimeClient(bt({headers:this.headers,accessToken:this._getAccessToken.bind(this)},p.realtime)),this.accessToken&&this.accessToken().then(w=>this.realtime.setAuth(w)).catch(w=>console.warn("Failed to set initial Realtime auth token:",w)),this.rest=new Yv(new URL("rest/v1",d).href,{headers:this.headers,schema:p.db.schema,fetch:this.fetch}),this.storage=new Iy(this.storageUrl.href,this.headers,this.fetch,a?.storage),p.accessToken||this._listenForAuthEvents()}get functions(){return new Pv(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(n){return this.rest.from(n)}schema(n){return this.rest.schema(n)}rpc(n,r={},a={head:!1,get:!1,count:void 0}){return this.rest.rpc(n,r,a)}channel(n,r={config:{}}){return this.realtime.channel(n,r)}getChannels(){return this.realtime.getChannels()}removeChannel(n){return this.realtime.removeChannel(n)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var n=this,r,a;if(n.accessToken)return await n.accessToken();const{data:o}=await n.auth.getSession();return(r=(a=o.session)===null||a===void 0?void 0:a.access_token)!==null&&r!==void 0?r:n.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:n,persistSession:r,detectSessionInUrl:a,storage:o,userStorage:u,storageKey:d,flowType:f,lock:m,debug:p,throwOnError:x},w,N){const E={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new hw({url:this.authUrl.href,headers:bt(bt({},E),w),storageKey:d,autoRefreshToken:n,persistSession:r,detectSessionInUrl:a,storage:o,userStorage:u,flowType:f,lock:m,debug:p,throwOnError:x,fetch:N,hasCustomAuthorizationHeader:Object.keys(this.headers).some(A=>A.toLowerCase()==="authorization")})}_initRealtimeClient(n){return new cy(this.realtimeUrl.href,bt(bt({},n),{},{params:bt(bt({},{apikey:this.supabaseKey}),n?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r?.access_token)})}_handleTokenChanged(n,r,a){(n==="TOKEN_REFRESHED"||n==="SIGNED_IN")&&this.changedAccessToken!==a?(this.changedAccessToken=a,this.realtime.setAuth(a)):n==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const mw=(n,r,a)=>new fw(n,r,a);function pw(){if(typeof window<"u"||typeof process>"u")return!1;const n=process.version;if(n==null)return!1;const r=n.match(/^v(\d+)\./);return r?parseInt(r[1],10)<=18:!1}pw()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const gw="https://jwkhdclmdbxoswwbxddh.supabase.co",xw="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imp3a2hkY2xtZGJ4b3N3d2J4ZGRoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njc0NjUzMzcsImV4cCI6MjA4MzA0MTMzN30.zvvcHLhJFLUNy-2I8I1e8R6KThyLHg3m5rUUN-tSz4o",U=mw(gw,xw);const vw=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),yw=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(r,a,o)=>o?o.toUpperCase():a.toLowerCase()),tg=n=>{const r=yw(n);return r.charAt(0).toUpperCase()+r.slice(1)},Ig=(...n)=>n.filter((r,a,o)=>!!r&&r.trim()!==""&&o.indexOf(r)===a).join(" ").trim(),bw=n=>{for(const r in n)if(r.startsWith("aria-")||r==="role"||r==="title")return!0};var ww={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const _w=S.forwardRef(({color:n="currentColor",size:r=24,strokeWidth:a=2,absoluteStrokeWidth:o,className:u="",children:d,iconNode:f,...m},p)=>S.createElement("svg",{ref:p,...ww,width:r,height:r,stroke:n,strokeWidth:o?Number(a)*24/Number(r):a,className:Ig("lucide",u),...!d&&!bw(m)&&{"aria-hidden":"true"},...m},[...f.map(([x,w])=>S.createElement(x,w)),...Array.isArray(d)?d:[d]]));const Ee=(n,r)=>{const a=S.forwardRef(({className:o,...u},d)=>S.createElement(_w,{ref:d,iconNode:r,className:Ig(`lucide-${vw(tg(n))}`,`lucide-${n}`,o),...u}));return a.displayName=tg(n),a};const jw=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Sw=Ee("activity",jw);const Nw=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Vr=Ee("arrow-left",Nw);const Ew=[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],gu=Ee("badge-check",Ew);const kw=[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Vg=Ee("ban",kw);const Cw=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],Tw=Ee("briefcase",Cw);const Aw=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],yf=Ee("calendar",Aw);const Rw=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],Ow=Ee("camera",Rw);const zw=[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]],Dw=Ee("check-check",zw);const Uw=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Ir=Ee("check",Uw);const Mw=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Lw=Ee("chevron-left",Mw);const qw=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],$w=Ee("chevron-right",qw);const Bw=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],xu=Ee("circle-alert",Bw);const Pw=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Dn=Ee("circle-check-big",Pw);const Hw=[["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z",key:"kmsa83"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Iw=Ee("circle-play",Hw);const Vw=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],rg=Ee("circle-question-mark",Vw);const Gw=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Yw=Ee("circle-x",Gw);const Kw=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],sg=Ee("clock",Kw);const Ww=[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Xw=Ee("compass",Ww);const Jw=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Qw=Ee("copy",Jw);const Zw=[["path",{d:"M20 20v-7a4 4 0 0 0-4-4H4",key:"1nkjon"}],["path",{d:"M9 14 4 9l5-5",key:"102s5s"}]],Lh=Ee("corner-up-left",Zw);const Fw=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Ka=Ee("eye-off",Fw);const e_=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],mr=Ee("eye",e_);const t_=[["path",{d:"M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528",key:"1jaruq"}]],r_=Ee("flag",t_);const s_=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]],nf=Ee("flame",s_);const a_=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],Un=Ee("heart",a_);const n_=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],i_=Ee("image",n_);const l_=[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]],o_=Ee("key-round",l_);const c_=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],u_=Ee("key",c_);const d_=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],h_=Ee("loader-circle",d_);const f_=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]],m_=Ee("lock-open",f_);const p_=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Qt=Ee("lock",p_);const g_=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],x_=Ee("log-in",g_);const v_=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Gg=Ee("log-out",v_);const y_=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Wa=Ee("mail",y_);const b_=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],ra=Ee("map-pin",b_);const w_=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],Eu=Ee("message-circle",w_);const __=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],j_=Ee("mic",__);const S_=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],Co=Ee("phone",S_);const N_=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],E_=Ee("plus",N_);const k_=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],C_=Ee("save",k_);const T_=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],bf=Ee("search",T_);const A_=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],R_=Ee("settings",A_);const O_=[["path",{d:"M12 2v13",key:"1km8f5"}],["path",{d:"m16 6-4-4-4 4",key:"13yo43"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}]],qh=Ee("share",O_);const z_=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],lf=Ee("shield",z_);const D_=[["path",{d:"M10 5H3",key:"1qgfaw"}],["path",{d:"M12 19H3",key:"yhmn1j"}],["path",{d:"M14 3v4",key:"1sua03"}],["path",{d:"M16 17v4",key:"1q0r14"}],["path",{d:"M21 12h-9",key:"1o4lsq"}],["path",{d:"M21 19h-5",key:"1rlt1p"}],["path",{d:"M21 5h-7",key:"1oszz2"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M8 12H3",key:"a7s4jb"}]],U_=Ee("sliders-horizontal",D_);const M_=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],L_=Ee("sparkles",M_);const q_=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],ag=Ee("square-pen",q_);const $_=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],B_=Ee("star",$_);const P_=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],wf=Ee("trash-2",P_);const H_=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],ng=Ee("trending-up",H_);const I_=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],As=Ee("triangle-alert",I_);const V_=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],G_=Ee("user-plus",V_);const Y_=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Ln=Ee("user",Y_);const K_=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],of=Ee("users",K_);const W_=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],X_=Ee("video",W_);const J_=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Cr=Ee("x",J_);const Q_=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],rl=Ee("zap",Q_),Gr="/assets/logo-VjDhRRJ9.png",Z_=({story:n,stories:r=[],onClose:a,currentUserId:o,matchedUserId:u})=>{const d=r.length>0?r:n?[n]:[],[f,m]=S.useState(0),p=d[f];if(!p)return null;const[x,w]=S.useState(0),[N,E]=S.useState(0),[A,$]=S.useState(!1),[D,k]=S.useState([]),H=()=>{f<d.length-1?(m(q=>q+1),w(0)):a()},P=()=>{f>0?(m(q=>q-1),w(0)):a()};return S.useEffect(()=>{if(!o||!p)return;const q=p.user_id;if(o===q){(async()=>{try{const{count:F}=await U.from("story_views").select("*",{count:"exact",head:!0}).eq("story_id",p.id);E(F||0)}catch(F){console.error("Error fetching viewers:",F)}})();return}(async()=>{try{const{error:X}=await U.from("story_views").insert({story_id:p.id,viewer_id:o,story_owner_id:q});if(X&&X.code!=="23505"){if(X.code==="42501"){console.log("Story view not tracked - user not matched or RLS blocked");return}console.error("Story view tracking error:",X)}const{count:F}=await U.from("story_views").select("*",{count:"exact",head:!0}).eq("story_id",p.id);E(F||0)}catch(X){console.error("Error tracking story view:",X)}})()},[p,o,u]),S.useEffect(()=>{w(0);const K=p.media_type==="video"||p.media_url.includes("video")||p.media_url.match(/\.(mp4|mov|webm|avi)(\?|$)/i)?15e3:1e4,ie=50,X=100/(K/ie),F=setInterval(()=>{w(fe=>fe>=100?(clearInterval(F),f<d.length-1?(m(ve=>ve+1),w(0)):a(),100):fe+X)},ie);return()=>clearInterval(F)},[p,f,d.length,a]),i.jsxs("div",{className:"fixed inset-0 z-[100] bg-black/95 backdrop-blur-md flex items-center justify-center p-4",children:[i.jsx("div",{className:"absolute top-0 left-0 right-0 flex gap-1 p-2 z-20",children:d.map((q,K)=>i.jsx("div",{className:"h-1 flex-1 bg-gray-600 rounded-full overflow-hidden",children:i.jsx("div",{className:`h-full transition-all duration-[50ms] ease-linear ${K<f?"bg-white":K===f?"bg-rose-500":"bg-gray-600"}`,style:{width:K===f?`${x}%`:K<f?"100%":"0%"}})},q.id||K))}),i.jsxs("div",{className:"relative w-full max-w-md bg-black rounded-xl overflow-hidden shadow-2xl flex flex-col",children:[i.jsx("button",{onClick:a,className:"absolute top-4 right-4 z-20 text-white hover:text-gray-300 transition bg-black/20 rounded-full p-2",children:i.jsx(Cr,{size:24})}),o===p.user_id&&i.jsxs("div",{className:"absolute bottom-4 left-4 z-20 bg-black/60 text-white px-3 py-2 rounded-full flex items-center gap-2 text-sm cursor-pointer hover:bg-black/80 transition",onClick:async q=>{q.stopPropagation();try{console.log("Fetching viewers for story ID:",p.id,"Type:",typeof p.id);const{data:K,error:ie}=await U.from("story_views").select("viewer_id, viewed_at").eq("story_id",p.id).order("viewed_at",{ascending:!1});if(ie){console.error("Error fetching story views:",ie),k([]),$(!0);return}if(!K||K.length===0){k([]),$(!0);return}const X=K.map(Se=>Se.viewer_id),{data:F,error:fe}=await U.from("profiles").select("id, full_name, avatar_url").in("id",X);if(fe){console.error("Error fetching profiles:",fe),k([]),$(!0);return}const ve=K.map(Se=>{const Re=F?.find(Oe=>Oe.id===Se.viewer_id);return{viewer_id:Se.viewer_id,viewed_at:Se.viewed_at,profiles:Re?{full_name:Re.full_name,avatar_url:Re.avatar_url}:null}});console.log("Viewers with profiles:",ve),k(ve),$(!0)}catch(K){console.error("Error fetching viewers:",K),k([]),$(!0)}},children:[i.jsx(mr,{size:16}),i.jsxs("span",{children:[N," ",N===1?"viewer":"viewers"]})]}),A&&i.jsx("div",{className:"absolute inset-0 z-[110] bg-black/95 flex items-center justify-center p-4",onClick:q=>{q.target===q.currentTarget&&$(!1)},children:i.jsxs("div",{className:"bg-gray-900 rounded-xl w-full max-w-md max-h-[80vh] overflow-hidden flex flex-col",onClick:q=>q.stopPropagation(),children:[i.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-700",children:[i.jsx("h3",{className:"text-white font-bold text-lg",children:"Story Viewers"}),i.jsx("button",{onClick:()=>$(!1),className:"text-gray-400 hover:text-white transition",children:i.jsx(Cr,{size:24})})]}),i.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:D.length>0?i.jsx("div",{className:"space-y-3",children:D.map((q,K)=>i.jsxs("div",{className:"flex items-center gap-3 text-white",children:[i.jsx("img",{src:q.profiles?.avatar_url||`https://api.dicebear.com/7.x/avataaars/svg?seed=${q.profiles?.full_name||"User"}`,alt:q.profiles?.full_name||"Anonymous",className:"w-10 h-10 rounded-full bg-gray-700"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"font-medium",children:q.profiles?.full_name||"Anonymous"}),i.jsx("p",{className:"text-xs text-gray-400",children:new Date(q.viewed_at).toLocaleString()})]})]},q.viewer_id||K))}):i.jsxs("div",{className:"text-center text-gray-400 py-8",children:[i.jsx(mr,{size:48,className:"mx-auto mb-3 opacity-50"}),i.jsx("p",{children:"No viewers yet"})]})})]})}),i.jsxs("div",{className:"flex-grow flex items-center justify-center bg-gray-900 relative",children:[i.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1/3 cursor-pointer z-10",onClick:P}),i.jsx("div",{className:"absolute right-0 top-0 bottom-0 w-1/3 cursor-pointer z-10",onClick:H}),p.media_type==="video"||p.media_url.includes("video")||p.media_url.match(/\.(mp4|mov|webm|avi)(\?|$)/i)?i.jsx("video",{src:p.media_url,className:"w-full h-full object-contain",autoPlay:!0,playsInline:!0,muted:!1,onEnded:H},p.id):i.jsx("img",{src:p.media_url,alt:"Story",className:"w-full h-full object-contain"},p.id)]})]})]})};var cf=function(n,r){return cf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,o){a.__proto__=o}||function(a,o){for(var u in o)Object.prototype.hasOwnProperty.call(o,u)&&(a[u]=o[u])},cf(n,r)};function F_(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");cf(n,r);function a(){this.constructor=n}n.prototype=r===null?Object.create(r):(a.prototype=r.prototype,new a)}var zt=function(){return zt=Object.assign||function(r){for(var a,o=1,u=arguments.length;o<u;o++){a=arguments[o];for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&(r[d]=a[d])}return r},zt.apply(this,arguments)};var $h={exports:{}},De={};var ig;function e1(){if(ig)return De;ig=1;var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),f=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),E=Symbol.iterator;function A(y){return y===null||typeof y!="object"?null:(y=E&&y[E]||y["@@iterator"],typeof y=="function"?y:null)}var $={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},D=Object.assign,k={};function H(y,T,J){this.props=y,this.context=T,this.refs=k,this.updater=J||$}H.prototype.isReactComponent={},H.prototype.setState=function(y,T){if(typeof y!="object"&&typeof y!="function"&&y!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,y,T,"setState")},H.prototype.forceUpdate=function(y){this.updater.enqueueForceUpdate(this,y,"forceUpdate")};function P(){}P.prototype=H.prototype;function q(y,T,J){this.props=y,this.context=T,this.refs=k,this.updater=J||$}var K=q.prototype=new P;K.constructor=q,D(K,H.prototype),K.isPureReactComponent=!0;var ie=Array.isArray;function X(){}var F={H:null,A:null,T:null,S:null},fe=Object.prototype.hasOwnProperty;function ve(y,T,J){var te=J.ref;return{$$typeof:n,type:y,key:T,ref:te!==void 0?te:null,props:J}}function Se(y,T){return ve(y.type,T,y.props)}function Re(y){return typeof y=="object"&&y!==null&&y.$$typeof===n}function Oe(y){var T={"=":"=0",":":"=2"};return"$"+y.replace(/[=:]/g,function(J){return T[J]})}var ut=/\/+/g;function lt(y,T){return typeof y=="object"&&y!==null&&y.key!=null?Oe(""+y.key):T.toString(36)}function at(y){switch(y.status){case"fulfilled":return y.value;case"rejected":throw y.reason;default:switch(typeof y.status=="string"?y.then(X,X):(y.status="pending",y.then(function(T){y.status==="pending"&&(y.status="fulfilled",y.value=T)},function(T){y.status==="pending"&&(y.status="rejected",y.reason=T)})),y.status){case"fulfilled":return y.value;case"rejected":throw y.reason}}throw y}function I(y,T,J,te,ue){var pe=typeof y;(pe==="undefined"||pe==="boolean")&&(y=null);var de=!1;if(y===null)de=!0;else switch(pe){case"bigint":case"string":case"number":de=!0;break;case"object":switch(y.$$typeof){case n:case r:de=!0;break;case w:return de=y._init,I(de(y._payload),T,J,te,ue)}}if(de)return ue=ue(y),de=te===""?"."+lt(y,0):te,ie(ue)?(J="",de!=null&&(J=de.replace(ut,"$&/")+"/"),I(ue,T,J,"",function(Zt){return Zt})):ue!=null&&(Re(ue)&&(ue=Se(ue,J+(ue.key==null||y&&y.key===ue.key?"":(""+ue.key).replace(ut,"$&/")+"/")+de)),T.push(ue)),1;de=0;var He=te===""?".":te+":";if(ie(y))for(var Ue=0;Ue<y.length;Ue++)te=y[Ue],pe=He+lt(te,Ue),de+=I(te,T,J,pe,ue);else if(Ue=A(y),typeof Ue=="function")for(y=Ue.call(y),Ue=0;!(te=y.next()).done;)te=te.value,pe=He+lt(te,Ue++),de+=I(te,T,J,pe,ue);else if(pe==="object"){if(typeof y.then=="function")return I(at(y),T,J,te,ue);throw T=String(y),Error("Objects are not valid as a React child (found: "+(T==="[object Object]"?"object with keys {"+Object.keys(y).join(", ")+"}":T)+"). If you meant to render a collection of children, use an array instead.")}return de}function R(y,T,J){if(y==null)return y;var te=[],ue=0;return I(y,te,"","",function(pe){return T.call(J,pe,ue++)}),te}function le(y){if(y._status===-1){var T=y._result;T=T(),T.then(function(J){(y._status===0||y._status===-1)&&(y._status=1,y._result=J)},function(J){(y._status===0||y._status===-1)&&(y._status=2,y._result=J)}),y._status===-1&&(y._status=0,y._result=T)}if(y._status===1)return y._result.default;throw y._result}var _e=typeof reportError=="function"?reportError:function(y){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var T=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof y=="object"&&y!==null&&typeof y.message=="string"?String(y.message):String(y),error:y});if(!window.dispatchEvent(T))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",y);return}console.error(y)},me={map:R,forEach:function(y,T,J){R(y,function(){T.apply(this,arguments)},J)},count:function(y){var T=0;return R(y,function(){T++}),T},toArray:function(y){return R(y,function(T){return T})||[]},only:function(y){if(!Re(y))throw Error("React.Children.only expected to receive a single React element child.");return y}};return De.Activity=N,De.Children=me,De.Component=H,De.Fragment=a,De.Profiler=u,De.PureComponent=q,De.StrictMode=o,De.Suspense=p,De.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=F,De.__COMPILER_RUNTIME={__proto__:null,c:function(y){return F.H.useMemoCache(y)}},De.cache=function(y){return function(){return y.apply(null,arguments)}},De.cacheSignal=function(){return null},De.cloneElement=function(y,T,J){if(y==null)throw Error("The argument must be a React element, but you passed "+y+".");var te=D({},y.props),ue=y.key;if(T!=null)for(pe in T.key!==void 0&&(ue=""+T.key),T)!fe.call(T,pe)||pe==="key"||pe==="__self"||pe==="__source"||pe==="ref"&&T.ref===void 0||(te[pe]=T[pe]);var pe=arguments.length-2;if(pe===1)te.children=J;else if(1<pe){for(var de=Array(pe),He=0;He<pe;He++)de[He]=arguments[He+2];te.children=de}return ve(y.type,ue,te)},De.createContext=function(y){return y={$$typeof:f,_currentValue:y,_currentValue2:y,_threadCount:0,Provider:null,Consumer:null},y.Provider=y,y.Consumer={$$typeof:d,_context:y},y},De.createElement=function(y,T,J){var te,ue={},pe=null;if(T!=null)for(te in T.key!==void 0&&(pe=""+T.key),T)fe.call(T,te)&&te!=="key"&&te!=="__self"&&te!=="__source"&&(ue[te]=T[te]);var de=arguments.length-2;if(de===1)ue.children=J;else if(1<de){for(var He=Array(de),Ue=0;Ue<de;Ue++)He[Ue]=arguments[Ue+2];ue.children=He}if(y&&y.defaultProps)for(te in de=y.defaultProps,de)ue[te]===void 0&&(ue[te]=de[te]);return ve(y,pe,ue)},De.createRef=function(){return{current:null}},De.forwardRef=function(y){return{$$typeof:m,render:y}},De.isValidElement=Re,De.lazy=function(y){return{$$typeof:w,_payload:{_status:-1,_result:y},_init:le}},De.memo=function(y,T){return{$$typeof:x,type:y,compare:T===void 0?null:T}},De.startTransition=function(y){var T=F.T,J={};F.T=J;try{var te=y(),ue=F.S;ue!==null&&ue(J,te),typeof te=="object"&&te!==null&&typeof te.then=="function"&&te.then(X,_e)}catch(pe){_e(pe)}finally{T!==null&&J.types!==null&&(T.types=J.types),F.T=T}},De.unstable_useCacheRefresh=function(){return F.H.useCacheRefresh()},De.use=function(y){return F.H.use(y)},De.useActionState=function(y,T,J){return F.H.useActionState(y,T,J)},De.useCallback=function(y,T){return F.H.useCallback(y,T)},De.useContext=function(y){return F.H.useContext(y)},De.useDebugValue=function(){},De.useDeferredValue=function(y,T){return F.H.useDeferredValue(y,T)},De.useEffect=function(y,T){return F.H.useEffect(y,T)},De.useEffectEvent=function(y){return F.H.useEffectEvent(y)},De.useId=function(){return F.H.useId()},De.useImperativeHandle=function(y,T,J){return F.H.useImperativeHandle(y,T,J)},De.useInsertionEffect=function(y,T){return F.H.useInsertionEffect(y,T)},De.useLayoutEffect=function(y,T){return F.H.useLayoutEffect(y,T)},De.useMemo=function(y,T){return F.H.useMemo(y,T)},De.useOptimistic=function(y,T){return F.H.useOptimistic(y,T)},De.useReducer=function(y,T,J){return F.H.useReducer(y,T,J)},De.useRef=function(y){return F.H.useRef(y)},De.useState=function(y){return F.H.useState(y)},De.useSyncExternalStore=function(y,T,J){return F.H.useSyncExternalStore(y,T,J)},De.useTransition=function(){return F.H.useTransition()},De.version="19.2.3",De}var lg;function t1(){return lg||(lg=1,$h.exports=e1()),$h.exports}var ea=t1(),Bh,og;function r1(){if(og)return Bh;og=1;var n=!1,r,a,o,u,d,f,m,p,x,w,N,E,A,$,D;function k(){if(!n){n=!0;var P=navigator.userAgent,q=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(P),K=/(Mac OS X)|(Windows)|(Linux)/.exec(P);if(E=/\b(iPhone|iP[ao]d)/.exec(P),A=/\b(iP[ao]d)/.exec(P),w=/Android/i.exec(P),$=/FBAN\/\w+;/i.exec(P),D=/Mobile/i.exec(P),N=!!/Win64/.exec(P),q){r=q[1]?parseFloat(q[1]):q[5]?parseFloat(q[5]):NaN,r&&document&&document.documentMode&&(r=document.documentMode);var ie=/(?:Trident\/(\d+.\d+))/.exec(P);f=ie?parseFloat(ie[1])+4:r,a=q[2]?parseFloat(q[2]):NaN,o=q[3]?parseFloat(q[3]):NaN,u=q[4]?parseFloat(q[4]):NaN,u?(q=/(?:Chrome\/(\d+\.\d+))/.exec(P),d=q&&q[1]?parseFloat(q[1]):NaN):d=NaN}else r=a=o=d=u=NaN;if(K){if(K[1]){var X=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(P);m=X?parseFloat(X[1].replace("_",".")):!0}else m=!1;p=!!K[2],x=!!K[3]}else m=p=x=!1}}var H={ie:function(){return k()||r},ieCompatibilityMode:function(){return k()||f>r},ie64:function(){return H.ie()&&N},firefox:function(){return k()||a},opera:function(){return k()||o},webkit:function(){return k()||u},safari:function(){return H.webkit()},chrome:function(){return k()||d},windows:function(){return k()||p},osx:function(){return k()||m},linux:function(){return k()||x},iphone:function(){return k()||E},mobile:function(){return k()||E||A||w||D},nativeApp:function(){return k()||$},android:function(){return k()||w},ipad:function(){return k()||A}};return Bh=H,Bh}var Ph,cg;function s1(){if(cg)return Ph;cg=1;var n=!!(typeof window<"u"&&window.document&&window.document.createElement),r={canUseDOM:n,canUseWorkers:typeof Worker<"u",canUseEventListeners:n&&!!(window.addEventListener||window.attachEvent),canUseViewport:n&&!!window.screen,isInWorker:!n};return Ph=r,Ph}var Hh,ug;function a1(){if(ug)return Hh;ug=1;var n=s1(),r;n.canUseDOM&&(r=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);function a(o,u){if(!n.canUseDOM||u&&!("addEventListener"in document))return!1;var d="on"+o,f=d in document;if(!f){var m=document.createElement("div");m.setAttribute(d,"return;"),f=typeof m[d]=="function"}return!f&&r&&o==="wheel"&&(f=document.implementation.hasFeature("Events.wheel","3.0")),f}return Hh=a,Hh}var Ih,dg;function n1(){if(dg)return Ih;dg=1;var n=r1(),r=a1(),a=10,o=40,u=800;function d(f){var m=0,p=0,x=0,w=0;return"detail"in f&&(p=f.detail),"wheelDelta"in f&&(p=-f.wheelDelta/120),"wheelDeltaY"in f&&(p=-f.wheelDeltaY/120),"wheelDeltaX"in f&&(m=-f.wheelDeltaX/120),"axis"in f&&f.axis===f.HORIZONTAL_AXIS&&(m=p,p=0),x=m*a,w=p*a,"deltaY"in f&&(w=f.deltaY),"deltaX"in f&&(x=f.deltaX),(x||w)&&f.deltaMode&&(f.deltaMode==1?(x*=o,w*=o):(x*=u,w*=u)),x&&!m&&(m=x<1?-1:1),w&&!p&&(p=w<1?-1:1),{spinX:m,spinY:p,pixelX:x,pixelY:w}}return d.getEventType=function(){return n.firefox()?"DOMMouseScroll":r("wheel")?"wheel":"mousewheel"},Ih=d,Ih}var Vh,hg;function i1(){return hg||(hg=1,Vh=n1()),Vh}var l1=i1();const o1=kv(l1);function c1(n,r,a,o,u,d){d===void 0&&(d=0);var f=al(n,r,d),m=f.width,p=f.height,x=Math.min(m,a),w=Math.min(p,o);return x>w*u?{width:w*u,height:w}:{width:x,height:x/u}}function u1(n){return n.width>n.height?n.width/n.naturalWidth:n.height/n.naturalHeight}function jo(n,r,a,o,u){u===void 0&&(u=0);var d=al(r.width,r.height,u),f=d.width,m=d.height;return{x:fg(n.x,f,a.width,o),y:fg(n.y,m,a.height,o)}}function fg(n,r,a,o){var u=r*o/2-a/2;return Ru(n,-u,u)}function mg(n,r){return Math.sqrt(Math.pow(n.y-r.y,2)+Math.pow(n.x-r.x,2))}function pg(n,r){return Math.atan2(r.y-n.y,r.x-n.x)*180/Math.PI}function d1(n,r,a,o,u,d,f){d===void 0&&(d=0),f===void 0&&(f=!0);var m=f?h1:f1,p=al(r.width,r.height,d),x=al(r.naturalWidth,r.naturalHeight,d),w={x:m(100,((p.width-a.width/u)/2-n.x/u)/p.width*100),y:m(100,((p.height-a.height/u)/2-n.y/u)/p.height*100),width:m(100,a.width/p.width*100/u),height:m(100,a.height/p.height*100/u)},N=Math.round(m(x.width,w.width*x.width/100)),E=Math.round(m(x.height,w.height*x.height/100)),A=x.width>=x.height*o,$=A?{width:Math.round(E*o),height:E}:{width:N,height:Math.round(N/o)},D=zt(zt({},$),{x:Math.round(m(x.width-$.width,w.x*x.width/100)),y:Math.round(m(x.height-$.height,w.y*x.height/100))});return{croppedAreaPercentages:w,croppedAreaPixels:D}}function h1(n,r){return Math.min(n,Math.max(0,r))}function f1(n,r){return r}function m1(n,r,a,o,u,d){var f=al(r.width,r.height,a),m=Ru(o.width/f.width*(100/n.width),u,d),p={x:m*f.width/2-o.width/2-f.width*m*(n.x/100),y:m*f.height/2-o.height/2-f.height*m*(n.y/100)};return{crop:p,zoom:m}}function p1(n,r,a){var o=u1(r);return a.height>a.width?a.height/(n.height*o):a.width/(n.width*o)}function g1(n,r,a,o,u,d){a===void 0&&(a=0);var f=al(r.naturalWidth,r.naturalHeight,a),m=Ru(p1(n,r,o),u,d),p=o.height>o.width?o.height/n.height:o.width/n.width,x={x:((f.width-n.width)/2-n.x)*p,y:((f.height-n.height)/2-n.y)*p};return{crop:x,zoom:m}}function gg(n,r){return{x:(r.x+n.x)/2,y:(r.y+n.y)/2}}function x1(n){return n*Math.PI/180}function al(n,r,a){var o=x1(a);return{width:Math.abs(Math.cos(o)*n)+Math.abs(Math.sin(o)*r),height:Math.abs(Math.sin(o)*n)+Math.abs(Math.cos(o)*r)}}function Ru(n,r,a){return Math.min(Math.max(n,r),a)}function vu(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.filter(function(a){return typeof a=="string"&&a.length>0}).join(" ").trim()}var v1=`.reactEasyCrop_Container {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: hidden;
  user-select: none;
  touch-action: none;
  cursor: move;
  display: flex;
  justify-content: center;
  align-items: center;
}

.reactEasyCrop_Image,
.reactEasyCrop_Video {
  will-change: transform; /* this improves performances and prevent painting issues on iOS Chrome */
}

.reactEasyCrop_Contain {
  max-width: 100%;
  max-height: 100%;
  margin: auto;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
}
.reactEasyCrop_Cover_Horizontal {
  width: 100%;
  height: auto;
}
.reactEasyCrop_Cover_Vertical {
  width: auto;
  height: 100%;
}

.reactEasyCrop_CropArea {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  border: 1px solid rgba(255, 255, 255, 0.5);
  box-sizing: border-box;
  box-shadow: 0 0 0 9999em;
  color: rgba(0, 0, 0, 0.5);
  overflow: hidden;
}

.reactEasyCrop_CropAreaRound {
  border-radius: 50%;
}

.reactEasyCrop_CropAreaGrid::before {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 0;
  bottom: 0;
  left: 33.33%;
  right: 33.33%;
  border-top: 0;
  border-bottom: 0;
}

.reactEasyCrop_CropAreaGrid::after {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 33.33%;
  bottom: 33.33%;
  left: 0;
  right: 0;
  border-left: 0;
  border-right: 0;
}
`,y1=1,b1=3,w1=1,_1=(function(n){F_(r,n);function r(){var a=n!==null&&n.apply(this,arguments)||this;return a.cropperRef=ea.createRef(),a.imageRef=ea.createRef(),a.videoRef=ea.createRef(),a.containerPosition={x:0,y:0},a.containerRef=null,a.styleRef=null,a.containerRect=null,a.mediaSize={width:0,height:0,naturalWidth:0,naturalHeight:0},a.dragStartPosition={x:0,y:0},a.dragStartCrop={x:0,y:0},a.gestureZoomStart=0,a.gestureRotationStart=0,a.isTouching=!1,a.lastPinchDistance=0,a.lastPinchRotation=0,a.rafDragTimeout=null,a.rafPinchTimeout=null,a.wheelTimer=null,a.currentDoc=typeof document<"u"?document:null,a.currentWindow=typeof window<"u"?window:null,a.resizeObserver=null,a.previousCropSize=null,a.isInitialized=!1,a.state={cropSize:null,hasWheelJustStarted:!1,mediaObjectFit:void 0},a.initResizeObserver=function(){if(!(typeof window.ResizeObserver>"u"||!a.containerRef)){var o=!0;a.resizeObserver=new window.ResizeObserver(function(u){if(o){o=!1;return}a.computeSizes()}),a.resizeObserver.observe(a.containerRef)}},a.preventZoomSafari=function(o){return o.preventDefault()},a.cleanEvents=function(){a.currentDoc&&(a.currentDoc.removeEventListener("mousemove",a.onMouseMove),a.currentDoc.removeEventListener("mouseup",a.onDragStopped),a.currentDoc.removeEventListener("touchmove",a.onTouchMove),a.currentDoc.removeEventListener("touchend",a.onDragStopped),a.currentDoc.removeEventListener("gesturechange",a.onGestureChange),a.currentDoc.removeEventListener("gestureend",a.onGestureEnd),a.currentDoc.removeEventListener("scroll",a.onScroll))},a.clearScrollEvent=function(){a.containerRef&&a.containerRef.removeEventListener("wheel",a.onWheel),a.wheelTimer&&clearTimeout(a.wheelTimer)},a.onMediaLoad=function(){var o=a.computeSizes();o&&(a.previousCropSize=o,a.emitCropData(),a.setInitialCrop(o),a.isInitialized=!0),a.props.onMediaLoaded&&a.props.onMediaLoaded(a.mediaSize)},a.setInitialCrop=function(o){if(a.props.initialCroppedAreaPercentages){var u=m1(a.props.initialCroppedAreaPercentages,a.mediaSize,a.props.rotation,o,a.props.minZoom,a.props.maxZoom),d=u.crop,f=u.zoom;a.props.onCropChange(d),a.props.onZoomChange&&a.props.onZoomChange(f)}else if(a.props.initialCroppedAreaPixels){var m=g1(a.props.initialCroppedAreaPixels,a.mediaSize,a.props.rotation,o,a.props.minZoom,a.props.maxZoom),d=m.crop,f=m.zoom;a.props.onCropChange(d),a.props.onZoomChange&&a.props.onZoomChange(f)}},a.computeSizes=function(){var o,u,d,f,m,p,x=a.imageRef.current||a.videoRef.current;if(x&&a.containerRef){a.containerRect=a.containerRef.getBoundingClientRect(),a.saveContainerPosition();var w=a.containerRect.width/a.containerRect.height,N=((o=a.imageRef.current)===null||o===void 0?void 0:o.naturalWidth)||((u=a.videoRef.current)===null||u===void 0?void 0:u.videoWidth)||0,E=((d=a.imageRef.current)===null||d===void 0?void 0:d.naturalHeight)||((f=a.videoRef.current)===null||f===void 0?void 0:f.videoHeight)||0,A=x.offsetWidth<N||x.offsetHeight<E,$=N/E,D=void 0;if(A)switch(a.state.mediaObjectFit){default:case"contain":D=w>$?{width:a.containerRect.height*$,height:a.containerRect.height}:{width:a.containerRect.width,height:a.containerRect.width/$};break;case"horizontal-cover":D={width:a.containerRect.width,height:a.containerRect.width/$};break;case"vertical-cover":D={width:a.containerRect.height*$,height:a.containerRect.height};break}else D={width:x.offsetWidth,height:x.offsetHeight};a.mediaSize=zt(zt({},D),{naturalWidth:N,naturalHeight:E}),a.props.setMediaSize&&a.props.setMediaSize(a.mediaSize);var k=a.props.cropSize?a.props.cropSize:c1(a.mediaSize.width,a.mediaSize.height,a.containerRect.width,a.containerRect.height,a.props.aspect,a.props.rotation);return(((m=a.state.cropSize)===null||m===void 0?void 0:m.height)!==k.height||((p=a.state.cropSize)===null||p===void 0?void 0:p.width)!==k.width)&&a.props.onCropSizeChange&&a.props.onCropSizeChange(k),a.setState({cropSize:k},a.recomputeCropPosition),a.props.setCropSize&&a.props.setCropSize(k),k}},a.saveContainerPosition=function(){if(a.containerRef){var o=a.containerRef.getBoundingClientRect();a.containerPosition={x:o.left,y:o.top}}},a.onMouseDown=function(o){a.currentDoc&&(o.preventDefault(),a.currentDoc.addEventListener("mousemove",a.onMouseMove),a.currentDoc.addEventListener("mouseup",a.onDragStopped),a.saveContainerPosition(),a.onDragStart(r.getMousePoint(o)))},a.onMouseMove=function(o){return a.onDrag(r.getMousePoint(o))},a.onScroll=function(o){a.currentDoc&&(o.preventDefault(),a.saveContainerPosition())},a.onTouchStart=function(o){a.currentDoc&&(a.isTouching=!0,!(a.props.onTouchRequest&&!a.props.onTouchRequest(o))&&(a.currentDoc.addEventListener("touchmove",a.onTouchMove,{passive:!1}),a.currentDoc.addEventListener("touchend",a.onDragStopped),a.saveContainerPosition(),o.touches.length===2?a.onPinchStart(o):o.touches.length===1&&a.onDragStart(r.getTouchPoint(o.touches[0]))))},a.onTouchMove=function(o){o.preventDefault(),o.touches.length===2?a.onPinchMove(o):o.touches.length===1&&a.onDrag(r.getTouchPoint(o.touches[0]))},a.onGestureStart=function(o){a.currentDoc&&(o.preventDefault(),a.currentDoc.addEventListener("gesturechange",a.onGestureChange),a.currentDoc.addEventListener("gestureend",a.onGestureEnd),a.gestureZoomStart=a.props.zoom,a.gestureRotationStart=a.props.rotation)},a.onGestureChange=function(o){if(o.preventDefault(),!a.isTouching){var u=r.getMousePoint(o),d=a.gestureZoomStart-1+o.scale;if(a.setNewZoom(d,u,{shouldUpdatePosition:!0}),a.props.onRotationChange){var f=a.gestureRotationStart+o.rotation;a.props.onRotationChange(f)}}},a.onGestureEnd=function(o){a.cleanEvents()},a.onDragStart=function(o){var u,d,f=o.x,m=o.y;a.dragStartPosition={x:f,y:m},a.dragStartCrop=zt({},a.props.crop),(d=(u=a.props).onInteractionStart)===null||d===void 0||d.call(u)},a.onDrag=function(o){var u=o.x,d=o.y;a.currentWindow&&(a.rafDragTimeout&&a.currentWindow.cancelAnimationFrame(a.rafDragTimeout),a.rafDragTimeout=a.currentWindow.requestAnimationFrame(function(){if(a.state.cropSize&&!(u===void 0||d===void 0)){var f=u-a.dragStartPosition.x,m=d-a.dragStartPosition.y,p={x:a.dragStartCrop.x+f,y:a.dragStartCrop.y+m},x=a.props.restrictPosition?jo(p,a.mediaSize,a.state.cropSize,a.props.zoom,a.props.rotation):p;a.props.onCropChange(x)}}))},a.onDragStopped=function(){var o,u;a.isTouching=!1,a.cleanEvents(),a.emitCropData(),(u=(o=a.props).onInteractionEnd)===null||u===void 0||u.call(o)},a.onWheel=function(o){if(a.currentWindow&&!(a.props.onWheelRequest&&!a.props.onWheelRequest(o))){o.preventDefault();var u=r.getMousePoint(o),d=o1(o).pixelY,f=a.props.zoom-d*a.props.zoomSpeed/200;a.setNewZoom(f,u,{shouldUpdatePosition:!0}),a.state.hasWheelJustStarted||a.setState({hasWheelJustStarted:!0},function(){var m,p;return(p=(m=a.props).onInteractionStart)===null||p===void 0?void 0:p.call(m)}),a.wheelTimer&&clearTimeout(a.wheelTimer),a.wheelTimer=a.currentWindow.setTimeout(function(){return a.setState({hasWheelJustStarted:!1},function(){var m,p;return(p=(m=a.props).onInteractionEnd)===null||p===void 0?void 0:p.call(m)})},250)}},a.getPointOnContainer=function(o,u){var d=o.x,f=o.y;if(!a.containerRect)throw new Error("The Cropper is not mounted");return{x:a.containerRect.width/2-(d-u.x),y:a.containerRect.height/2-(f-u.y)}},a.getPointOnMedia=function(o){var u=o.x,d=o.y,f=a.props,m=f.crop,p=f.zoom;return{x:(u+m.x)/p,y:(d+m.y)/p}},a.setNewZoom=function(o,u,d){var f=d===void 0?{}:d,m=f.shouldUpdatePosition,p=m===void 0?!0:m;if(!(!a.state.cropSize||!a.props.onZoomChange)){var x=Ru(o,a.props.minZoom,a.props.maxZoom);if(p){var w=a.getPointOnContainer(u,a.containerPosition),N=a.getPointOnMedia(w),E={x:N.x*x-w.x,y:N.y*x-w.y},A=a.props.restrictPosition?jo(E,a.mediaSize,a.state.cropSize,x,a.props.rotation):E;a.props.onCropChange(A)}a.props.onZoomChange(x)}},a.getCropData=function(){if(!a.state.cropSize)return null;var o=a.props.restrictPosition?jo(a.props.crop,a.mediaSize,a.state.cropSize,a.props.zoom,a.props.rotation):a.props.crop;return d1(o,a.mediaSize,a.state.cropSize,a.getAspect(),a.props.zoom,a.props.rotation,a.props.restrictPosition)},a.emitCropData=function(){var o=a.getCropData();if(o){var u=o.croppedAreaPercentages,d=o.croppedAreaPixels;a.props.onCropComplete&&a.props.onCropComplete(u,d),a.props.onCropAreaChange&&a.props.onCropAreaChange(u,d)}},a.emitCropAreaChange=function(){var o=a.getCropData();if(o){var u=o.croppedAreaPercentages,d=o.croppedAreaPixels;a.props.onCropAreaChange&&a.props.onCropAreaChange(u,d)}},a.recomputeCropPosition=function(){var o,u;if(a.state.cropSize){var d=a.props.crop;if(a.isInitialized&&(!((o=a.previousCropSize)===null||o===void 0)&&o.width)&&(!((u=a.previousCropSize)===null||u===void 0)&&u.height)){var f=Math.abs(a.previousCropSize.width-a.state.cropSize.width)>1e-6||Math.abs(a.previousCropSize.height-a.state.cropSize.height)>1e-6;if(f){var m=a.state.cropSize.width/a.previousCropSize.width,p=a.state.cropSize.height/a.previousCropSize.height;d={x:a.props.crop.x*m,y:a.props.crop.y*p}}}var x=a.props.restrictPosition?jo(d,a.mediaSize,a.state.cropSize,a.props.zoom,a.props.rotation):d;a.previousCropSize=a.state.cropSize,a.props.onCropChange(x),a.emitCropData()}},a.onKeyDown=function(o){var u,d,f=a.props,m=f.crop,p=f.onCropChange,x=f.keyboardStep,w=f.zoom,N=f.rotation,E=x;if(a.state.cropSize){o.shiftKey&&(E*=.2);var A=zt({},m);switch(o.key){case"ArrowUp":A.y-=E,o.preventDefault();break;case"ArrowDown":A.y+=E,o.preventDefault();break;case"ArrowLeft":A.x-=E,o.preventDefault();break;case"ArrowRight":A.x+=E,o.preventDefault();break;default:return}a.props.restrictPosition&&(A=jo(A,a.mediaSize,a.state.cropSize,w,N)),o.repeat||(d=(u=a.props).onInteractionStart)===null||d===void 0||d.call(u),p(A)}},a.onKeyUp=function(o){var u,d;switch(o.key){case"ArrowUp":case"ArrowDown":case"ArrowLeft":case"ArrowRight":o.preventDefault();break;default:return}a.emitCropData(),(d=(u=a.props).onInteractionEnd)===null||d===void 0||d.call(u)},a}return r.prototype.componentDidMount=function(){!this.currentDoc||!this.currentWindow||(this.containerRef&&(this.containerRef.ownerDocument&&(this.currentDoc=this.containerRef.ownerDocument),this.currentDoc.defaultView&&(this.currentWindow=this.currentDoc.defaultView),this.initResizeObserver(),typeof window.ResizeObserver>"u"&&this.currentWindow.addEventListener("resize",this.computeSizes),this.props.zoomWithScroll&&this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}),this.containerRef.addEventListener("gesturestart",this.onGestureStart)),this.currentDoc.addEventListener("scroll",this.onScroll),this.props.disableAutomaticStylesInjection||(this.styleRef=this.currentDoc.createElement("style"),this.styleRef.setAttribute("type","text/css"),this.props.nonce&&this.styleRef.setAttribute("nonce",this.props.nonce),this.styleRef.innerHTML=v1,this.currentDoc.head.appendChild(this.styleRef)),this.imageRef.current&&this.imageRef.current.complete&&this.onMediaLoad(),this.props.setImageRef&&this.props.setImageRef(this.imageRef),this.props.setVideoRef&&this.props.setVideoRef(this.videoRef),this.props.setCropperRef&&this.props.setCropperRef(this.cropperRef))},r.prototype.componentWillUnmount=function(){var a,o;!this.currentDoc||!this.currentWindow||(typeof window.ResizeObserver>"u"&&this.currentWindow.removeEventListener("resize",this.computeSizes),(a=this.resizeObserver)===null||a===void 0||a.disconnect(),this.containerRef&&this.containerRef.removeEventListener("gesturestart",this.preventZoomSafari),this.styleRef&&((o=this.styleRef.parentNode)===null||o===void 0||o.removeChild(this.styleRef)),this.cleanEvents(),this.props.zoomWithScroll&&this.clearScrollEvent())},r.prototype.componentDidUpdate=function(a){var o,u,d,f,m,p,x,w,N;a.rotation!==this.props.rotation?(this.computeSizes(),this.recomputeCropPosition()):a.aspect!==this.props.aspect?this.computeSizes():a.objectFit!==this.props.objectFit?this.computeSizes():a.zoom!==this.props.zoom?this.recomputeCropPosition():((o=a.cropSize)===null||o===void 0?void 0:o.height)!==((u=this.props.cropSize)===null||u===void 0?void 0:u.height)||((d=a.cropSize)===null||d===void 0?void 0:d.width)!==((f=this.props.cropSize)===null||f===void 0?void 0:f.width)?this.computeSizes():(((m=a.crop)===null||m===void 0?void 0:m.x)!==((p=this.props.crop)===null||p===void 0?void 0:p.x)||((x=a.crop)===null||x===void 0?void 0:x.y)!==((w=this.props.crop)===null||w===void 0?void 0:w.y))&&this.emitCropAreaChange(),a.zoomWithScroll!==this.props.zoomWithScroll&&this.containerRef&&(this.props.zoomWithScroll?this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}):this.clearScrollEvent()),a.video!==this.props.video&&((N=this.videoRef.current)===null||N===void 0||N.load());var E=this.getObjectFit();E!==this.state.mediaObjectFit&&this.setState({mediaObjectFit:E},this.computeSizes)},r.prototype.getAspect=function(){var a=this.props,o=a.cropSize,u=a.aspect;return o?o.width/o.height:u},r.prototype.getObjectFit=function(){var a,o,u,d;if(this.props.objectFit==="cover"){var f=this.imageRef.current||this.videoRef.current;if(f&&this.containerRef){this.containerRect=this.containerRef.getBoundingClientRect();var m=this.containerRect.width/this.containerRect.height,p=((a=this.imageRef.current)===null||a===void 0?void 0:a.naturalWidth)||((o=this.videoRef.current)===null||o===void 0?void 0:o.videoWidth)||0,x=((u=this.imageRef.current)===null||u===void 0?void 0:u.naturalHeight)||((d=this.videoRef.current)===null||d===void 0?void 0:d.videoHeight)||0,w=p/x;return w<m?"horizontal-cover":"vertical-cover"}return"horizontal-cover"}return this.props.objectFit},r.prototype.onPinchStart=function(a){var o=r.getTouchPoint(a.touches[0]),u=r.getTouchPoint(a.touches[1]);this.lastPinchDistance=mg(o,u),this.lastPinchRotation=pg(o,u),this.onDragStart(gg(o,u))},r.prototype.onPinchMove=function(a){var o=this;if(!(!this.currentDoc||!this.currentWindow)){var u=r.getTouchPoint(a.touches[0]),d=r.getTouchPoint(a.touches[1]),f=gg(u,d);this.onDrag(f),this.rafPinchTimeout&&this.currentWindow.cancelAnimationFrame(this.rafPinchTimeout),this.rafPinchTimeout=this.currentWindow.requestAnimationFrame(function(){var m=mg(u,d),p=o.props.zoom*(m/o.lastPinchDistance);o.setNewZoom(p,f,{shouldUpdatePosition:!1}),o.lastPinchDistance=m;var x=pg(u,d),w=o.props.rotation+(x-o.lastPinchRotation);o.props.onRotationChange&&o.props.onRotationChange(w),o.lastPinchRotation=x})}},r.prototype.render=function(){var a=this,o,u=this.props,d=u.image,f=u.video,m=u.mediaProps,p=u.cropperProps,x=u.transform,w=u.crop,N=w.x,E=w.y,A=u.rotation,$=u.zoom,D=u.cropShape,k=u.showGrid,H=u.roundCropAreaPixels,P=u.style,q=P.containerStyle,K=P.cropAreaStyle,ie=P.mediaStyle,X=u.classes,F=X.containerClassName,fe=X.cropAreaClassName,ve=X.mediaClassName,Se=(o=this.state.mediaObjectFit)!==null&&o!==void 0?o:this.getObjectFit();return ea.createElement("div",{onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,ref:function(Oe){return a.containerRef=Oe},"data-testid":"container",style:q,className:vu("reactEasyCrop_Container",F)},d?ea.createElement("img",zt({alt:"",className:vu("reactEasyCrop_Image",Se==="contain"&&"reactEasyCrop_Contain",Se==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",Se==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",ve)},m,{src:d,ref:this.imageRef,style:zt(zt({},ie),{transform:x||"translate(".concat(N,"px, ").concat(E,"px) rotate(").concat(A,"deg) scale(").concat($,")")}),onLoad:this.onMediaLoad})):f&&ea.createElement("video",zt({autoPlay:!0,playsInline:!0,loop:!0,muted:!0,className:vu("reactEasyCrop_Video",Se==="contain"&&"reactEasyCrop_Contain",Se==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",Se==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",ve)},m,{ref:this.videoRef,onLoadedMetadata:this.onMediaLoad,style:zt(zt({},ie),{transform:x||"translate(".concat(N,"px, ").concat(E,"px) rotate(").concat(A,"deg) scale(").concat($,")")}),controls:!1}),(Array.isArray(f)?f:[{src:f}]).map(function(Re){return ea.createElement("source",zt({key:Re.src},Re))})),this.state.cropSize&&ea.createElement("div",zt({ref:this.cropperRef,style:zt(zt({},K),{width:H?Math.round(this.state.cropSize.width):this.state.cropSize.width,height:H?Math.round(this.state.cropSize.height):this.state.cropSize.height}),tabIndex:0,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,"data-testid":"cropper",className:vu("reactEasyCrop_CropArea",D==="round"&&"reactEasyCrop_CropAreaRound",k&&"reactEasyCrop_CropAreaGrid",fe)},p)))},r.defaultProps={zoom:1,rotation:0,aspect:4/3,maxZoom:b1,minZoom:y1,cropShape:"rect",objectFit:"contain",showGrid:!0,style:{},classes:{},mediaProps:{},cropperProps:{},zoomSpeed:1,restrictPosition:!0,zoomWithScroll:!0,keyboardStep:w1},r.getMousePoint=function(a){return{x:Number(a.clientX),y:Number(a.clientY)}},r.getTouchPoint=function(a){return{x:Number(a.clientX),y:Number(a.clientY)}},r})(ea.Component);const j1=({imageSrc:n,onClose:r,onCropComplete:a})=>{const[o,u]=S.useState({x:0,y:0}),[d,f]=S.useState(1),[m,p]=S.useState(null),x=S.useCallback(k=>{u(k)},[]),w=S.useCallback(k=>{f(k)},[]),N=S.useCallback((k,H)=>{p(H)},[]),E=k=>new Promise((H,P)=>{const q=new Image;q.addEventListener("load",()=>H(q)),q.addEventListener("error",K=>P(K)),q.src=k}),A=async(k,H)=>{const P=await E(k),q=document.createElement("canvas"),K=q.getContext("2d");if(!K)throw new Error("No 2d context");return q.width=H.width,q.height=H.height,K.drawImage(P,H.x,H.y,H.width,H.height,0,0,H.width,H.height),new Promise((ie,X)=>{q.toBlob(F=>{if(!F){X(new Error("Canvas is empty"));return}const fe=new File([F],"cropped-image.jpg",{type:"image/jpeg"});ie(fe)},"image/jpeg",.95)})},$=async()=>{if(!m){r();return}try{const k=await A(n,m);a(k),r()}catch(k){console.error("Error cropping image:",k),r()}},D=async()=>{try{const H=await(await fetch(n)).blob(),P=new File([H],"original-image.jpg",{type:H.type||"image/jpeg"});a(P),r()}catch(k){console.error("Error loading original image:",k),r()}};return i.jsx("div",{className:"fixed inset-0 z-[200] bg-black/95 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-gray-900 rounded-xl w-full max-w-2xl max-h-[90vh] overflow-hidden flex flex-col",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-700",children:[i.jsx("h3",{className:"text-white font-bold text-lg",children:"Crop Image"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:D,className:"text-gray-400 hover:text-white transition px-3 py-1.5 rounded-lg text-sm",children:"Skip"}),i.jsxs("button",{onClick:$,className:"bg-rose-600 hover:bg-rose-700 text-white px-4 py-1.5 rounded-lg text-sm font-medium flex items-center gap-2 transition",children:[i.jsx(Ir,{size:16}),"Save"]}),i.jsx("button",{onClick:r,className:"text-gray-400 hover:text-white transition p-1",children:i.jsx(Cr,{size:24})})]})]}),i.jsx("div",{className:"flex-1 relative bg-gray-800",style:{minHeight:"400px",width:"100%"},children:n&&i.jsx(_1,{image:n,crop:o,zoom:d,aspect:1,onCropChange:x,onZoomChange:w,onCropComplete:N,cropShape:"rect",showGrid:!1})}),i.jsx("div",{className:"p-4 border-t border-gray-700",children:i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-white text-sm mb-2 block",children:"Zoom"}),i.jsx("input",{type:"range",min:1,max:3,step:.1,value:d,onChange:k=>f(parseFloat(k.target.value)),className:"w-full"})]}),i.jsx("p",{className:"text-gray-400 text-xs",children:"Adjust the image position and zoom, then click Save. You can skip cropping if you prefer the original image."})]})})]})})},nl="/assets/loginimg-C66kprq0.jpg";var xg="popstate";function S1(n={}){function r(o,u){let{pathname:d,search:f,hash:m}=o.location;return uf("",{pathname:d,search:f,hash:m},u.state&&u.state.usr||null,u.state&&u.state.key||"default")}function a(o,u){return typeof u=="string"?u:Uo(u)}return E1(r,a,null,n)}function xt(n,r){if(n===!1||n===null||typeof n>"u")throw new Error(r)}function os(n,r){if(!n){typeof console<"u"&&console.warn(r);try{throw new Error(r)}catch{}}}function N1(){return Math.random().toString(36).substring(2,10)}function vg(n,r){return{usr:n.state,key:n.key,idx:r}}function uf(n,r,a=null,o){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof r=="string"?il(r):r,state:a,key:r&&r.key||o||N1()}}function Uo({pathname:n="/",search:r="",hash:a=""}){return r&&r!=="?"&&(n+=r.charAt(0)==="?"?r:"?"+r),a&&a!=="#"&&(n+=a.charAt(0)==="#"?a:"#"+a),n}function il(n){let r={};if(n){let a=n.indexOf("#");a>=0&&(r.hash=n.substring(a),n=n.substring(0,a));let o=n.indexOf("?");o>=0&&(r.search=n.substring(o),n=n.substring(0,o)),n&&(r.pathname=n)}return r}function E1(n,r,a,o={}){let{window:u=document.defaultView,v5Compat:d=!1}=o,f=u.history,m="POP",p=null,x=w();x==null&&(x=0,f.replaceState({...f.state,idx:x},""));function w(){return(f.state||{idx:null}).idx}function N(){m="POP";let k=w(),H=k==null?null:k-x;x=k,p&&p({action:m,location:D.location,delta:H})}function E(k,H){m="PUSH";let P=uf(D.location,k,H);x=w()+1;let q=vg(P,x),K=D.createHref(P);try{f.pushState(q,"",K)}catch(ie){if(ie instanceof DOMException&&ie.name==="DataCloneError")throw ie;u.location.assign(K)}d&&p&&p({action:m,location:D.location,delta:1})}function A(k,H){m="REPLACE";let P=uf(D.location,k,H);x=w();let q=vg(P,x),K=D.createHref(P);f.replaceState(q,"",K),d&&p&&p({action:m,location:D.location,delta:0})}function $(k){return k1(k)}let D={get action(){return m},get location(){return n(u,f)},listen(k){if(p)throw new Error("A history only accepts one active listener");return u.addEventListener(xg,N),p=k,()=>{u.removeEventListener(xg,N),p=null}},createHref(k){return r(u,k)},createURL:$,encodeLocation(k){let H=$(k);return{pathname:H.pathname,search:H.search,hash:H.hash}},push:E,replace:A,go(k){return f.go(k)}};return D}function k1(n,r=!1){let a="http://localhost";typeof window<"u"&&(a=window.location.origin!=="null"?window.location.origin:window.location.href),xt(a,"No window.location.(origin|href) available to create URL");let o=typeof n=="string"?n:Uo(n);return o=o.replace(/ $/,"%20"),!r&&o.startsWith("//")&&(o=a+o),new URL(o,a)}function Yg(n,r,a="/"){return C1(n,r,a,!1)}function C1(n,r,a,o){let u=typeof r=="string"?il(r):r,d=aa(u.pathname||"/",a);if(d==null)return null;let f=Kg(n);T1(f);let m=null;for(let p=0;m==null&&p<f.length;++p){let x=B1(d);m=q1(f[p],x,o)}return m}function Kg(n,r=[],a=[],o="",u=!1){let d=(f,m,p=u,x)=>{let w={relativePath:x===void 0?f.path||"":x,caseSensitive:f.caseSensitive===!0,childrenIndex:m,route:f};if(w.relativePath.startsWith("/")){if(!w.relativePath.startsWith(o)&&p)return;xt(w.relativePath.startsWith(o),`Absolute route path "${w.relativePath}" nested under path "${o}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),w.relativePath=w.relativePath.slice(o.length)}let N=sa([o,w.relativePath]),E=a.concat(w);f.children&&f.children.length>0&&(xt(f.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${N}".`),Kg(f.children,r,E,N,p)),!(f.path==null&&!f.index)&&r.push({path:N,score:M1(N,f.index),routesMeta:E})};return n.forEach((f,m)=>{if(f.path===""||!f.path?.includes("?"))d(f,m);else for(let p of Wg(f.path))d(f,m,!0,p)}),r}function Wg(n){let r=n.split("/");if(r.length===0)return[];let[a,...o]=r,u=a.endsWith("?"),d=a.replace(/\?$/,"");if(o.length===0)return u?[d,""]:[d];let f=Wg(o.join("/")),m=[];return m.push(...f.map(p=>p===""?d:[d,p].join("/"))),u&&m.push(...f),m.map(p=>n.startsWith("/")&&p===""?"/":p)}function T1(n){n.sort((r,a)=>r.score!==a.score?a.score-r.score:L1(r.routesMeta.map(o=>o.childrenIndex),a.routesMeta.map(o=>o.childrenIndex)))}var A1=/^:[\w-]+$/,R1=3,O1=2,z1=1,D1=10,U1=-2,yg=n=>n==="*";function M1(n,r){let a=n.split("/"),o=a.length;return a.some(yg)&&(o+=U1),r&&(o+=O1),a.filter(u=>!yg(u)).reduce((u,d)=>u+(A1.test(d)?R1:d===""?z1:D1),o)}function L1(n,r){return n.length===r.length&&n.slice(0,-1).every((o,u)=>o===r[u])?n[n.length-1]-r[r.length-1]:0}function q1(n,r,a=!1){let{routesMeta:o}=n,u={},d="/",f=[];for(let m=0;m<o.length;++m){let p=o[m],x=m===o.length-1,w=d==="/"?r:r.slice(d.length)||"/",N=ku({path:p.relativePath,caseSensitive:p.caseSensitive,end:x},w),E=p.route;if(!N&&x&&a&&!o[o.length-1].route.index&&(N=ku({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},w)),!N)return null;Object.assign(u,N.params),f.push({params:u,pathname:sa([d,N.pathname]),pathnameBase:V1(sa([d,N.pathnameBase])),route:E}),N.pathnameBase!=="/"&&(d=sa([d,N.pathnameBase]))}return f}function ku(n,r){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[a,o]=$1(n.path,n.caseSensitive,n.end),u=r.match(a);if(!u)return null;let d=u[0],f=d.replace(/(.)\/+$/,"$1"),m=u.slice(1);return{params:o.reduce((x,{paramName:w,isOptional:N},E)=>{if(w==="*"){let $=m[E]||"";f=d.slice(0,d.length-$.length).replace(/(.)\/+$/,"$1")}const A=m[E];return N&&!A?x[w]=void 0:x[w]=(A||"").replace(/%2F/g,"/"),x},{}),pathname:d,pathnameBase:f,pattern:n}}function $1(n,r=!1,a=!0){os(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let o=[],u="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,m,p)=>(o.push({paramName:m,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(o.push({paramName:"*"}),u+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):a?u+="\\/*$":n!==""&&n!=="/"&&(u+="(?:(?=\\/|$))"),[new RegExp(u,r?void 0:"i"),o]}function B1(n){try{return n.split("/").map(r=>decodeURIComponent(r).replace(/\//g,"%2F")).join("/")}catch(r){return os(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${r}).`),n}}function aa(n,r){if(r==="/")return n;if(!n.toLowerCase().startsWith(r.toLowerCase()))return null;let a=r.endsWith("/")?r.length-1:r.length,o=n.charAt(a);return o&&o!=="/"?null:n.slice(a)||"/"}var Xg=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,P1=n=>Xg.test(n);function H1(n,r="/"){let{pathname:a,search:o="",hash:u=""}=typeof n=="string"?il(n):n,d;if(a)if(P1(a))d=a;else{if(a.includes("//")){let f=a;a=a.replace(/\/\/+/g,"/"),os(!1,`Pathnames cannot have embedded double slashes - normalizing ${f} -> ${a}`)}a.startsWith("/")?d=bg(a.substring(1),"/"):d=bg(a,r)}else d=r;return{pathname:d,search:G1(o),hash:Y1(u)}}function bg(n,r){let a=r.replace(/\/+$/,"").split("/");return n.split("/").forEach(u=>{u===".."?a.length>1&&a.pop():u!=="."&&a.push(u)}),a.length>1?a.join("/"):"/"}function Gh(n,r,a,o){return`Cannot include a '${n}' character in a manually specified \`to.${r}\` field [${JSON.stringify(o)}].  Please separate it out to the \`to.${a}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function I1(n){return n.filter((r,a)=>a===0||r.route.path&&r.route.path.length>0)}function Jg(n){let r=I1(n);return r.map((a,o)=>o===r.length-1?a.pathname:a.pathnameBase)}function Qg(n,r,a,o=!1){let u;typeof n=="string"?u=il(n):(u={...n},xt(!u.pathname||!u.pathname.includes("?"),Gh("?","pathname","search",u)),xt(!u.pathname||!u.pathname.includes("#"),Gh("#","pathname","hash",u)),xt(!u.search||!u.search.includes("#"),Gh("#","search","hash",u)));let d=n===""||u.pathname==="",f=d?"/":u.pathname,m;if(f==null)m=a;else{let N=r.length-1;if(!o&&f.startsWith("..")){let E=f.split("/");for(;E[0]==="..";)E.shift(),N-=1;u.pathname=E.join("/")}m=N>=0?r[N]:"/"}let p=H1(u,m),x=f&&f!=="/"&&f.endsWith("/"),w=(d||f===".")&&a.endsWith("/");return!p.pathname.endsWith("/")&&(x||w)&&(p.pathname+="/"),p}var sa=n=>n.join("/").replace(/\/\/+/g,"/"),V1=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),G1=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,Y1=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,K1=class{constructor(n,r,a,o=!1){this.status=n,this.statusText=r||"",this.internal=o,a instanceof Error?(this.data=a.toString(),this.error=a):this.data=a}};function W1(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function X1(n){return n.map(r=>r.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var Zg=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Fg(n,r){let a=n;if(typeof a!="string"||!Xg.test(a))return{absoluteURL:void 0,isExternal:!1,to:a};let o=a,u=!1;if(Zg)try{let d=new URL(window.location.href),f=a.startsWith("//")?new URL(d.protocol+a):new URL(a),m=aa(f.pathname,r);f.origin===d.origin&&m!=null?a=m+f.search+f.hash:u=!0}catch{os(!1,`<Link to="${a}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:o,isExternal:u,to:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var ex=["POST","PUT","PATCH","DELETE"];new Set(ex);var J1=["GET",...ex];new Set(J1);var ll=S.createContext(null);ll.displayName="DataRouter";var Ou=S.createContext(null);Ou.displayName="DataRouterState";var Q1=S.createContext(!1),tx=S.createContext({isTransitioning:!1});tx.displayName="ViewTransition";var Z1=S.createContext(new Map);Z1.displayName="Fetchers";var F1=S.createContext(null);F1.displayName="Await";var Yr=S.createContext(null);Yr.displayName="Navigation";var Lo=S.createContext(null);Lo.displayName="Location";var ia=S.createContext({outlet:null,matches:[],isDataRoute:!1});ia.displayName="Route";var _f=S.createContext(null);_f.displayName="RouteError";var rx="REACT_ROUTER_ERROR",ej="REDIRECT",tj="ROUTE_ERROR_RESPONSE";function rj(n){if(n.startsWith(`${rx}:${ej}:{`))try{let r=JSON.parse(n.slice(28));if(typeof r=="object"&&r&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.location=="string"&&typeof r.reloadDocument=="boolean"&&typeof r.replace=="boolean")return r}catch{}}function sj(n){if(n.startsWith(`${rx}:${tj}:{`))try{let r=JSON.parse(n.slice(40));if(typeof r=="object"&&r&&typeof r.status=="number"&&typeof r.statusText=="string")return new K1(r.status,r.statusText,r.data)}catch{}}function aj(n,{relative:r}={}){xt(qo(),"useHref() may be used only in the context of a <Router> component.");let{basename:a,navigator:o}=S.useContext(Yr),{hash:u,pathname:d,search:f}=$o(n,{relative:r}),m=d;return a!=="/"&&(m=d==="/"?a:sa([a,d])),o.createHref({pathname:m,search:f,hash:u})}function qo(){return S.useContext(Lo)!=null}function qn(){return xt(qo(),"useLocation() may be used only in the context of a <Router> component."),S.useContext(Lo).location}var sx="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function ax(n){S.useContext(Yr).static||S.useLayoutEffect(n)}function nj(){let{isDataRoute:n}=S.useContext(ia);return n?vj():ij()}function ij(){xt(qo(),"useNavigate() may be used only in the context of a <Router> component.");let n=S.useContext(ll),{basename:r,navigator:a}=S.useContext(Yr),{matches:o}=S.useContext(ia),{pathname:u}=qn(),d=JSON.stringify(Jg(o)),f=S.useRef(!1);return ax(()=>{f.current=!0}),S.useCallback((p,x={})=>{if(os(f.current,sx),!f.current)return;if(typeof p=="number"){a.go(p);return}let w=Qg(p,JSON.parse(d),u,x.relative==="path");n==null&&r!=="/"&&(w.pathname=w.pathname==="/"?r:sa([r,w.pathname])),(x.replace?a.replace:a.push)(w,x.state,x)},[r,a,d,u,n])}S.createContext(null);function $o(n,{relative:r}={}){let{matches:a}=S.useContext(ia),{pathname:o}=qn(),u=JSON.stringify(Jg(a));return S.useMemo(()=>Qg(n,JSON.parse(u),o,r==="path"),[n,u,o,r])}function lj(n,r){return nx(n,r)}function nx(n,r,a,o,u){xt(qo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:d}=S.useContext(Yr),{matches:f}=S.useContext(ia),m=f[f.length-1],p=m?m.params:{},x=m?m.pathname:"/",w=m?m.pathnameBase:"/",N=m&&m.route;{let P=N&&N.path||"";lx(x,!N||P.endsWith("*")||P.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${x}" (under <Route path="${P}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${P}"> to <Route path="${P==="/"?"*":`${P}/*`}">.`)}let E=qn(),A;if(r){let P=typeof r=="string"?il(r):r;xt(w==="/"||P.pathname?.startsWith(w),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${w}" but pathname "${P.pathname}" was given in the \`location\` prop.`),A=P}else A=E;let $=A.pathname||"/",D=$;if(w!=="/"){let P=w.replace(/^\//,"").split("/");D="/"+$.replace(/^\//,"").split("/").slice(P.length).join("/")}let k=Yg(n,{pathname:D});os(N||k!=null,`No routes matched location "${A.pathname}${A.search}${A.hash}" `),os(k==null||k[k.length-1].route.element!==void 0||k[k.length-1].route.Component!==void 0||k[k.length-1].route.lazy!==void 0,`Matched leaf route at location "${A.pathname}${A.search}${A.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let H=hj(k&&k.map(P=>Object.assign({},P,{params:Object.assign({},p,P.params),pathname:sa([w,d.encodeLocation?d.encodeLocation(P.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:P.pathname]),pathnameBase:P.pathnameBase==="/"?w:sa([w,d.encodeLocation?d.encodeLocation(P.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:P.pathnameBase])})),f,a,o,u);return r&&H?S.createElement(Lo.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...A},navigationType:"POP"}},H):H}function oj(){let n=xj(),r=W1(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),a=n instanceof Error?n.stack:null,o="rgba(200,200,200, 0.5)",u={padding:"0.5rem",backgroundColor:o},d={padding:"2px 4px",backgroundColor:o},f=null;return console.error("Error handled by React Router default ErrorBoundary:",n),f=S.createElement(S.Fragment,null,S.createElement("p",null," Hey developer "),S.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",S.createElement("code",{style:d},"ErrorBoundary")," or"," ",S.createElement("code",{style:d},"errorElement")," prop on your route.")),S.createElement(S.Fragment,null,S.createElement("h2",null,"Unexpected Application Error!"),S.createElement("h3",{style:{fontStyle:"italic"}},r),a?S.createElement("pre",{style:u},a):null,f)}var cj=S.createElement(oj,null),ix=class extends S.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,r){return r.location!==n.location||r.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:r.error,location:r.location,revalidation:n.revalidation||r.revalidation}}componentDidCatch(n,r){this.props.onError?this.props.onError(n,r):console.error("React Router caught the following error during render",n)}render(){let n=this.state.error;if(this.context&&typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){const a=sj(n.digest);a&&(n=a)}let r=n!==void 0?S.createElement(ia.Provider,{value:this.props.routeContext},S.createElement(_f.Provider,{value:n,children:this.props.component})):this.props.children;return this.context?S.createElement(uj,{error:n},r):r}};ix.contextType=Q1;var Yh=new WeakMap;function uj({children:n,error:r}){let{basename:a}=S.useContext(Yr);if(typeof r=="object"&&r&&"digest"in r&&typeof r.digest=="string"){let o=rj(r.digest);if(o){let u=Yh.get(r);if(u)throw u;let d=Fg(o.location,a);if(Zg&&!Yh.get(r))if(d.isExternal||o.reloadDocument)window.location.href=d.absoluteURL||d.to;else{const f=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(d.to,{replace:o.replace}));throw Yh.set(r,f),f}return S.createElement("meta",{httpEquiv:"refresh",content:`0;url=${d.absoluteURL||d.to}`})}}return n}function dj({routeContext:n,match:r,children:a}){let o=S.useContext(ll);return o&&o.static&&o.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=r.route.id),S.createElement(ia.Provider,{value:n},a)}function hj(n,r=[],a=null,o=null,u=null){if(n==null){if(!a)return null;if(a.errors)n=a.matches;else if(r.length===0&&!a.initialized&&a.matches.length>0)n=a.matches;else return null}let d=n,f=a?.errors;if(f!=null){let w=d.findIndex(N=>N.route.id&&f?.[N.route.id]!==void 0);xt(w>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(f).join(",")}`),d=d.slice(0,Math.min(d.length,w+1))}let m=!1,p=-1;if(a)for(let w=0;w<d.length;w++){let N=d[w];if((N.route.HydrateFallback||N.route.hydrateFallbackElement)&&(p=w),N.route.id){let{loaderData:E,errors:A}=a,$=N.route.loader&&!E.hasOwnProperty(N.route.id)&&(!A||A[N.route.id]===void 0);if(N.route.lazy||$){m=!0,p>=0?d=d.slice(0,p+1):d=[d[0]];break}}}let x=a&&o?(w,N)=>{o(w,{location:a.location,params:a.matches?.[0]?.params??{},unstable_pattern:X1(a.matches),errorInfo:N})}:void 0;return d.reduceRight((w,N,E)=>{let A,$=!1,D=null,k=null;a&&(A=f&&N.route.id?f[N.route.id]:void 0,D=N.route.errorElement||cj,m&&(p<0&&E===0?(lx("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),$=!0,k=null):p===E&&($=!0,k=N.route.hydrateFallbackElement||null)));let H=r.concat(d.slice(0,E+1)),P=()=>{let q;return A?q=D:$?q=k:N.route.Component?q=S.createElement(N.route.Component,null):N.route.element?q=N.route.element:q=w,S.createElement(dj,{match:N,routeContext:{outlet:w,matches:H,isDataRoute:a!=null},children:q})};return a&&(N.route.ErrorBoundary||N.route.errorElement||E===0)?S.createElement(ix,{location:a.location,revalidation:a.revalidation,component:D,error:A,children:P(),routeContext:{outlet:null,matches:H,isDataRoute:!0},onError:x}):P()},null)}function jf(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function fj(n){let r=S.useContext(ll);return xt(r,jf(n)),r}function mj(n){let r=S.useContext(Ou);return xt(r,jf(n)),r}function pj(n){let r=S.useContext(ia);return xt(r,jf(n)),r}function Sf(n){let r=pj(n),a=r.matches[r.matches.length-1];return xt(a.route.id,`${n} can only be used on routes that contain a unique "id"`),a.route.id}function gj(){return Sf("useRouteId")}function xj(){let n=S.useContext(_f),r=mj("useRouteError"),a=Sf("useRouteError");return n!==void 0?n:r.errors?.[a]}function vj(){let{router:n}=fj("useNavigate"),r=Sf("useNavigate"),a=S.useRef(!1);return ax(()=>{a.current=!0}),S.useCallback(async(u,d={})=>{os(a.current,sx),a.current&&(typeof u=="number"?await n.navigate(u):await n.navigate(u,{fromRouteId:r,...d}))},[n,r])}var wg={};function lx(n,r,a){!r&&!wg[n]&&(wg[n]=!0,os(!1,a))}S.memo(yj);function yj({routes:n,future:r,state:a,onError:o}){return nx(n,void 0,a,o,r)}function el(n){xt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function bj({basename:n="/",children:r=null,location:a,navigationType:o="POP",navigator:u,static:d=!1,unstable_useTransitions:f}){xt(!qo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let m=n.replace(/^\/*/,"/"),p=S.useMemo(()=>({basename:m,navigator:u,static:d,unstable_useTransitions:f,future:{}}),[m,u,d,f]);typeof a=="string"&&(a=il(a));let{pathname:x="/",search:w="",hash:N="",state:E=null,key:A="default"}=a,$=S.useMemo(()=>{let D=aa(x,m);return D==null?null:{location:{pathname:D,search:w,hash:N,state:E,key:A},navigationType:o}},[m,x,w,N,E,A,o]);return os($!=null,`<Router basename="${m}"> is not able to match the URL "${x}${w}${N}" because it does not start with the basename, so the <Router> won't render anything.`),$==null?null:S.createElement(Yr.Provider,{value:p},S.createElement(Lo.Provider,{children:r,value:$}))}function wj({children:n,location:r}){return lj(df(n),r)}function df(n,r=[]){let a=[];return S.Children.forEach(n,(o,u)=>{if(!S.isValidElement(o))return;let d=[...r,u];if(o.type===S.Fragment){a.push.apply(a,df(o.props.children,d));return}xt(o.type===el,`[${typeof o.type=="string"?o.type:o.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),xt(!o.props.index||!o.props.children,"An index route cannot have child routes.");let f={id:o.props.id||d.join("-"),caseSensitive:o.props.caseSensitive,element:o.props.element,Component:o.props.Component,index:o.props.index,path:o.props.path,middleware:o.props.middleware,loader:o.props.loader,action:o.props.action,hydrateFallbackElement:o.props.hydrateFallbackElement,HydrateFallback:o.props.HydrateFallback,errorElement:o.props.errorElement,ErrorBoundary:o.props.ErrorBoundary,hasErrorBoundary:o.props.hasErrorBoundary===!0||o.props.ErrorBoundary!=null||o.props.errorElement!=null,shouldRevalidate:o.props.shouldRevalidate,handle:o.props.handle,lazy:o.props.lazy};o.props.children&&(f.children=df(o.props.children,d)),a.push(f)}),a}var wu="get",_u="application/x-www-form-urlencoded";function zu(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function _j(n){return zu(n)&&n.tagName.toLowerCase()==="button"}function jj(n){return zu(n)&&n.tagName.toLowerCase()==="form"}function Sj(n){return zu(n)&&n.tagName.toLowerCase()==="input"}function Nj(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function Ej(n,r){return n.button===0&&(!r||r==="_self")&&!Nj(n)}var yu=null;function kj(){if(yu===null)try{new FormData(document.createElement("form"),0),yu=!1}catch{yu=!0}return yu}var Cj=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Kh(n){return n!=null&&!Cj.has(n)?(os(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${_u}"`),null):n}function Tj(n,r){let a,o,u,d,f;if(jj(n)){let m=n.getAttribute("action");o=m?aa(m,r):null,a=n.getAttribute("method")||wu,u=Kh(n.getAttribute("enctype"))||_u,d=new FormData(n)}else if(_j(n)||Sj(n)&&(n.type==="submit"||n.type==="image")){let m=n.form;if(m==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=n.getAttribute("formaction")||m.getAttribute("action");if(o=p?aa(p,r):null,a=n.getAttribute("formmethod")||m.getAttribute("method")||wu,u=Kh(n.getAttribute("formenctype"))||Kh(m.getAttribute("enctype"))||_u,d=new FormData(m,n),!kj()){let{name:x,type:w,value:N}=n;if(w==="image"){let E=x?`${x}.`:"";d.append(`${E}x`,"0"),d.append(`${E}y`,"0")}else x&&d.append(x,N)}}else{if(zu(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');a=wu,o=null,u=_u,f=n}return d&&u==="text/plain"&&(f=d,d=void 0),{action:o,method:a.toLowerCase(),encType:u,formData:d,body:f}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Nf(n,r){if(n===!1||n===null||typeof n>"u")throw new Error(r)}function Aj(n,r,a,o){let u=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return a?u.pathname.endsWith("/")?u.pathname=`${u.pathname}_.${o}`:u.pathname=`${u.pathname}.${o}`:u.pathname==="/"?u.pathname=`_root.${o}`:r&&aa(u.pathname,r)==="/"?u.pathname=`${r.replace(/\/$/,"")}/_root.${o}`:u.pathname=`${u.pathname.replace(/\/$/,"")}.${o}`,u}async function Rj(n,r){if(n.id in r)return r[n.id];try{let a=await import(n.module);return r[n.id]=a,a}catch(a){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(a),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Oj(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function zj(n,r,a){let o=await Promise.all(n.map(async u=>{let d=r.routes[u.route.id];if(d){let f=await Rj(d,a);return f.links?f.links():[]}return[]}));return Lj(o.flat(1).filter(Oj).filter(u=>u.rel==="stylesheet"||u.rel==="preload").map(u=>u.rel==="stylesheet"?{...u,rel:"prefetch",as:"style"}:{...u,rel:"prefetch"}))}function _g(n,r,a,o,u,d){let f=(p,x)=>a[x]?p.route.id!==a[x].route.id:!0,m=(p,x)=>a[x].pathname!==p.pathname||a[x].route.path?.endsWith("*")&&a[x].params["*"]!==p.params["*"];return d==="assets"?r.filter((p,x)=>f(p,x)||m(p,x)):d==="data"?r.filter((p,x)=>{let w=o.routes[p.route.id];if(!w||!w.hasLoader)return!1;if(f(p,x)||m(p,x))return!0;if(p.route.shouldRevalidate){let N=p.route.shouldRevalidate({currentUrl:new URL(u.pathname+u.search+u.hash,window.origin),currentParams:a[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof N=="boolean")return N}return!0}):[]}function Dj(n,r,{includeHydrateFallback:a}={}){return Uj(n.map(o=>{let u=r.routes[o.route.id];if(!u)return[];let d=[u.module];return u.clientActionModule&&(d=d.concat(u.clientActionModule)),u.clientLoaderModule&&(d=d.concat(u.clientLoaderModule)),a&&u.hydrateFallbackModule&&(d=d.concat(u.hydrateFallbackModule)),u.imports&&(d=d.concat(u.imports)),d}).flat(1))}function Uj(n){return[...new Set(n)]}function Mj(n){let r={},a=Object.keys(n).sort();for(let o of a)r[o]=n[o];return r}function Lj(n,r){let a=new Set;return new Set(r),n.reduce((o,u)=>{let d=JSON.stringify(Mj(u));return a.has(d)||(a.add(d),o.push({key:d,link:u})),o},[])}function ox(){let n=S.useContext(ll);return Nf(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function qj(){let n=S.useContext(Ou);return Nf(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Ef=S.createContext(void 0);Ef.displayName="FrameworkContext";function cx(){let n=S.useContext(Ef);return Nf(n,"You must render this element inside a <HydratedRouter> element"),n}function $j(n,r){let a=S.useContext(Ef),[o,u]=S.useState(!1),[d,f]=S.useState(!1),{onFocus:m,onBlur:p,onMouseEnter:x,onMouseLeave:w,onTouchStart:N}=r,E=S.useRef(null);S.useEffect(()=>{if(n==="render"&&f(!0),n==="viewport"){let D=H=>{H.forEach(P=>{f(P.isIntersecting)})},k=new IntersectionObserver(D,{threshold:.5});return E.current&&k.observe(E.current),()=>{k.disconnect()}}},[n]),S.useEffect(()=>{if(o){let D=setTimeout(()=>{f(!0)},100);return()=>{clearTimeout(D)}}},[o]);let A=()=>{u(!0)},$=()=>{u(!1),f(!1)};return a?n!=="intent"?[d,E,{}]:[d,E,{onFocus:So(m,A),onBlur:So(p,$),onMouseEnter:So(x,A),onMouseLeave:So(w,$),onTouchStart:So(N,A)}]:[!1,E,{}]}function So(n,r){return a=>{n&&n(a),a.defaultPrevented||r(a)}}function Bj({page:n,...r}){let{router:a}=ox(),o=S.useMemo(()=>Yg(a.routes,n,a.basename),[a.routes,n,a.basename]);return o?S.createElement(Hj,{page:n,matches:o,...r}):null}function Pj(n){let{manifest:r,routeModules:a}=cx(),[o,u]=S.useState([]);return S.useEffect(()=>{let d=!1;return zj(n,r,a).then(f=>{d||u(f)}),()=>{d=!0}},[n,r,a]),o}function Hj({page:n,matches:r,...a}){let o=qn(),{future:u,manifest:d,routeModules:f}=cx(),{basename:m}=ox(),{loaderData:p,matches:x}=qj(),w=S.useMemo(()=>_g(n,r,x,d,o,"data"),[n,r,x,d,o]),N=S.useMemo(()=>_g(n,r,x,d,o,"assets"),[n,r,x,d,o]),E=S.useMemo(()=>{if(n===o.pathname+o.search+o.hash)return[];let D=new Set,k=!1;if(r.forEach(P=>{let q=d.routes[P.route.id];!q||!q.hasLoader||(!w.some(K=>K.route.id===P.route.id)&&P.route.id in p&&f[P.route.id]?.shouldRevalidate||q.hasClientLoader?k=!0:D.add(P.route.id))}),D.size===0)return[];let H=Aj(n,m,u.unstable_trailingSlashAwareDataRequests,"data");return k&&D.size>0&&H.searchParams.set("_routes",r.filter(P=>D.has(P.route.id)).map(P=>P.route.id).join(",")),[H.pathname+H.search]},[m,u.unstable_trailingSlashAwareDataRequests,p,o,d,w,r,n,f]),A=S.useMemo(()=>Dj(N,d),[N,d]),$=Pj(N);return S.createElement(S.Fragment,null,E.map(D=>S.createElement("link",{key:D,rel:"prefetch",as:"fetch",href:D,...a})),A.map(D=>S.createElement("link",{key:D,rel:"modulepreload",href:D,...a})),$.map(({key:D,link:k})=>S.createElement("link",{key:D,nonce:a.nonce,...k})))}function Ij(...n){return r=>{n.forEach(a=>{typeof a=="function"?a(r):a!=null&&(a.current=r)})}}var Vj=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Vj&&(window.__reactRouterVersion="7.12.0")}catch{}function Gj({basename:n,children:r,unstable_useTransitions:a,window:o}){let u=S.useRef();u.current==null&&(u.current=S1({window:o,v5Compat:!0}));let d=u.current,[f,m]=S.useState({action:d.action,location:d.location}),p=S.useCallback(x=>{a===!1?m(x):S.startTransition(()=>m(x))},[a]);return S.useLayoutEffect(()=>d.listen(p),[d,p]),S.createElement(bj,{basename:n,children:r,location:f.location,navigationType:f.action,navigator:d,unstable_useTransitions:a})}var ux=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Mn=S.forwardRef(function({onClick:r,discover:a="render",prefetch:o="none",relative:u,reloadDocument:d,replace:f,state:m,target:p,to:x,preventScrollReset:w,viewTransition:N,unstable_defaultShouldRevalidate:E,...A},$){let{basename:D,unstable_useTransitions:k}=S.useContext(Yr),H=typeof x=="string"&&ux.test(x),P=Fg(x,D);x=P.to;let q=aj(x,{relative:u}),[K,ie,X]=$j(o,A),F=Xj(x,{replace:f,state:m,target:p,preventScrollReset:w,relative:u,viewTransition:N,unstable_defaultShouldRevalidate:E,unstable_useTransitions:k});function fe(Se){r&&r(Se),Se.defaultPrevented||F(Se)}let ve=S.createElement("a",{...A,...X,href:P.absoluteURL||q,onClick:P.isExternal||d?r:fe,ref:Ij($,ie),target:p,"data-discover":!H&&a==="render"?"true":void 0});return K&&!H?S.createElement(S.Fragment,null,ve,S.createElement(Bj,{page:q})):ve});Mn.displayName="Link";var Yj=S.forwardRef(function({"aria-current":r="page",caseSensitive:a=!1,className:o="",end:u=!1,style:d,to:f,viewTransition:m,children:p,...x},w){let N=$o(f,{relative:x.relative}),E=qn(),A=S.useContext(Ou),{navigator:$,basename:D}=S.useContext(Yr),k=A!=null&&e2(N)&&m===!0,H=$.encodeLocation?$.encodeLocation(N).pathname:N.pathname,P=E.pathname,q=A&&A.navigation&&A.navigation.location?A.navigation.location.pathname:null;a||(P=P.toLowerCase(),q=q?q.toLowerCase():null,H=H.toLowerCase()),q&&D&&(q=aa(q,D)||q);const K=H!=="/"&&H.endsWith("/")?H.length-1:H.length;let ie=P===H||!u&&P.startsWith(H)&&P.charAt(K)==="/",X=q!=null&&(q===H||!u&&q.startsWith(H)&&q.charAt(H.length)==="/"),F={isActive:ie,isPending:X,isTransitioning:k},fe=ie?r:void 0,ve;typeof o=="function"?ve=o(F):ve=[o,ie?"active":null,X?"pending":null,k?"transitioning":null].filter(Boolean).join(" ");let Se=typeof d=="function"?d(F):d;return S.createElement(Mn,{...x,"aria-current":fe,className:ve,ref:w,style:Se,to:f,viewTransition:m},typeof p=="function"?p(F):p)});Yj.displayName="NavLink";var Kj=S.forwardRef(({discover:n="render",fetcherKey:r,navigate:a,reloadDocument:o,replace:u,state:d,method:f=wu,action:m,onSubmit:p,relative:x,preventScrollReset:w,viewTransition:N,unstable_defaultShouldRevalidate:E,...A},$)=>{let{unstable_useTransitions:D}=S.useContext(Yr),k=Zj(),H=Fj(m,{relative:x}),P=f.toLowerCase()==="get"?"get":"post",q=typeof m=="string"&&ux.test(m),K=ie=>{if(p&&p(ie),ie.defaultPrevented)return;ie.preventDefault();let X=ie.nativeEvent.submitter,F=X?.getAttribute("formmethod")||f,fe=()=>k(X||ie.currentTarget,{fetcherKey:r,method:F,navigate:a,replace:u,state:d,relative:x,preventScrollReset:w,viewTransition:N,unstable_defaultShouldRevalidate:E});D&&a!==!1?S.startTransition(()=>fe()):fe()};return S.createElement("form",{ref:$,method:P,action:H,onSubmit:o?p:K,...A,"data-discover":!q&&n==="render"?"true":void 0})});Kj.displayName="Form";function Wj(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function dx(n){let r=S.useContext(ll);return xt(r,Wj(n)),r}function Xj(n,{target:r,replace:a,state:o,preventScrollReset:u,relative:d,viewTransition:f,unstable_defaultShouldRevalidate:m,unstable_useTransitions:p}={}){let x=nj(),w=qn(),N=$o(n,{relative:d});return S.useCallback(E=>{if(Ej(E,r)){E.preventDefault();let A=a!==void 0?a:Uo(w)===Uo(N),$=()=>x(n,{replace:A,state:o,preventScrollReset:u,relative:d,viewTransition:f,unstable_defaultShouldRevalidate:m});p?S.startTransition(()=>$()):$()}},[w,x,N,a,o,r,n,u,d,f,m,p])}var Jj=0,Qj=()=>`__${String(++Jj)}__`;function Zj(){let{router:n}=dx("useSubmit"),{basename:r}=S.useContext(Yr),a=gj(),o=n.fetch,u=n.navigate;return S.useCallback(async(d,f={})=>{let{action:m,method:p,encType:x,formData:w,body:N}=Tj(d,r);if(f.navigate===!1){let E=f.fetcherKey||Qj();await o(E,a,f.action||m,{unstable_defaultShouldRevalidate:f.unstable_defaultShouldRevalidate,preventScrollReset:f.preventScrollReset,formData:w,body:N,formMethod:f.method||p,formEncType:f.encType||x,flushSync:f.flushSync})}else await u(f.action||m,{unstable_defaultShouldRevalidate:f.unstable_defaultShouldRevalidate,preventScrollReset:f.preventScrollReset,formData:w,body:N,formMethod:f.method||p,formEncType:f.encType||x,replace:f.replace,state:f.state,fromRouteId:a,flushSync:f.flushSync,viewTransition:f.viewTransition})},[o,u,r,a])}function Fj(n,{relative:r}={}){let{basename:a}=S.useContext(Yr),o=S.useContext(ia);xt(o,"useFormAction must be used inside a RouteContext");let[u]=o.matches.slice(-1),d={...$o(n||".",{relative:r})},f=qn();if(n==null){d.search=f.search;let m=new URLSearchParams(d.search),p=m.getAll("index");if(p.some(w=>w==="")){m.delete("index"),p.filter(N=>N).forEach(N=>m.append("index",N));let w=m.toString();d.search=w?`?${w}`:""}}return(!n||n===".")&&u.route.index&&(d.search=d.search?d.search.replace(/^\?/,"?index&"):"?index"),a!=="/"&&(d.pathname=d.pathname==="/"?a:sa([a,d.pathname])),Uo(d)}function e2(n,{relative:r}={}){let a=S.useContext(tx);xt(a!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:o}=dx("useViewTransitionState"),u=$o(n,{relative:r});if(!a.isTransitioning)return!1;let d=aa(a.currentLocation.pathname,o)||a.currentLocation.pathname,f=aa(a.nextLocation.pathname,o)||a.nextLocation.pathname;return ku(u.pathname,f)!=null||ku(u.pathname,d)!=null}const t2=({profile:n,stats:r,setView:a,onLogout:o,onFilterClick:u,theme:d,toggleTheme:f})=>i.jsxs("header",{className:"fixed-header bg-gray-900 border-gray-800",children:[i.jsxs("div",{className:"flex items-center gap-1.5",style:{marginRight:"auto"},children:[i.jsx("button",{onClick:u,className:"p-1.5 transition rounded-lg text-gray-400 hover:text-rose-300","aria-label":"Open Filters",children:i.jsx(U_,{size:18,strokeWidth:2})}),i.jsx("button",{onClick:()=>a("search"),className:"p-1.5 transition rounded-lg text-gray-400 hover:text-rose-300","aria-label":"Global Search",children:i.jsx(bf,{size:18,strokeWidth:2})}),i.jsx("button",{onClick:()=>a("stories"),className:"p-1.5 transition rounded-lg text-rose-500 hover:text-rose-400","aria-label":"View Stories",children:i.jsx(Iw,{size:20,strokeWidth:2.5,className:"drop-shadow-lg"})})]}),i.jsx("div",{className:"header-logo flex-shrink-0 absolute left-1/2 transform -translate-x-1/2",children:i.jsx("img",{src:Gr,alt:"SacredHearts Logo",className:"h-16 w-auto object-contain drop-shadow-md"})}),i.jsxs("div",{className:"flex items-center gap-1.5",style:{marginLeft:"auto"},children:[i.jsx("button",{onClick:()=>a("visitors"),className:"p-1 transition rounded-lg text-gray-400 hover:text-rose-300","aria-label":"View Profile Visitors",children:i.jsx(mr,{size:18,strokeWidth:2})}),i.jsx("button",{onClick:()=>a("profile"),className:"relative transition hover:opacity-80 rounded-full","aria-label":"View Profile",children:n?.avatar_url?i.jsx("img",{src:n.avatar_url,alt:"Profile",className:"w-8 h-8 rounded-full object-cover border-2 shadow-sm border-gray-700"}):i.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center shadow-sm bg-gray-700 border border-gray-600",children:i.jsx(Ln,{size:16,className:"text-gray-400"})})}),i.jsx("button",{onClick:o,className:"p-1 transition rounded-lg text-gray-400 hover:text-gray-200","aria-label":"Logout",children:i.jsx(Gg,{size:18,strokeWidth:2.5})})]})]}),r2=({currentView:n,setView:r,unreadMessageCount:a=0})=>{const o=[{id:"discovery",icon:Xw,label:"Discover"},{id:"interests",icon:Un,label:"Interests"},{id:"matches",icon:of,label:"Matches"},{id:"crushes",icon:nf,label:"Crushes"},{id:"profile",icon:Ln,label:"Profile"}];return i.jsx("footer",{className:"fixed-footer",children:o.map(u=>i.jsxs("div",{className:`nav-item ${n===u.id?"active":""}`,onClick:()=>r(u.id),style:{position:"relative"},children:[i.jsx(u.icon,{size:22}),i.jsx("span",{children:u.label}),u.id==="matches"&&a>0&&i.jsx("span",{className:"absolute top-0 right-0 bg-rose-600 text-white text-xs font-bold rounded-full min-w-[18px] h-[18px] flex items-center justify-center px-1.5 transform translate-x-1 -translate-y-1",style:{fontSize:"10px",lineHeight:"1"},children:a>99?"99+":a})]},u.id))})},s2=n=>{if(!n)return"";const r=n.split("-");if(r.length!==3)return"";const a=parseInt(r[0],10),o=parseInt(r[1],10)-1,u=parseInt(r[2],10),d=new Date,f=new Date(a,o,u);let m=d.getFullYear()-f.getFullYear();const p=d.getMonth()-f.getMonth();return(p<0||p===0&&d.getDate()<f.getDate())&&m--,m},a2=({candidate:n,onPass:r,onConnect:a,onViewProfile:o,onLike:u,onSuperLike:d,loading:f,isLiked:m,isSuperLiked:p,isVerified:x,lastPassed:w,handleUndo:N})=>{if(!n)return null;const E=x||n?.is_verified===!0,A=!!w,$=k=>{const H=k.target.getBoundingClientRect(),P=H.left+H.width/2,q=H.top+H.height/2,K=["","","","","","","",""];for(let ie=0;ie<5;ie++){const X=document.createElement("div"),F=K[Math.floor(Math.random()*K.length)];X.innerHTML=F;const fe=Math.random()*25+30,ve=Math.PI*2*ie/5,Se=40+Math.random()*30,Re=Math.cos(ve)*Se,Oe=Math.sin(ve)*Se;X.style.position="fixed",X.style.left=`${P-fe/2}px`,X.style.top=`${q-fe/2}px`,X.style.width=`${fe}px`,X.style.height=`${fe}px`,X.style.fontSize=`${fe}px`,X.style.pointerEvents="none",X.style.zIndex="9999",X.style.transition="all 1.2s cubic-bezier(0.34, 1.56, 0.64, 1)",X.style.opacity="1",X.style.filter="drop-shadow(0 0 8px rgba(251, 113, 133, 0.8))",document.body.appendChild(X),requestAnimationFrame(()=>{X.style.transform=`translate(${Re*1.5}px, ${Oe*1.5-100}px) scale(0.3) rotate(${Math.random()*360}deg)`,X.style.opacity="0"}),setTimeout(()=>X.remove(),1200)}for(let ie=0;ie<10;ie++){const X=document.createElement("div"),F=K[Math.floor(Math.random()*K.length)];X.innerHTML=F;const fe=Math.random()*15+20,ve=Math.random()*Math.PI*2,Se=30+Math.random()*50,Re=Math.cos(ve)*Se,Oe=Math.sin(ve)*Se;X.style.position="fixed",X.style.left=`${P-fe/2}px`,X.style.top=`${q-fe/2}px`,X.style.width=`${fe}px`,X.style.height=`${fe}px`,X.style.fontSize=`${fe}px`,X.style.pointerEvents="none",X.style.zIndex="9999",X.style.transition=`all ${.8+Math.random()*.4}s cubic-bezier(0.25, 0.46, 0.45, 0.94)`,X.style.opacity="1",X.style.filter="drop-shadow(0 0 6px rgba(251, 113, 133, 0.6))",document.body.appendChild(X),requestAnimationFrame(()=>{X.style.transform=`translate(${Re*2}px, ${Oe*2-120}px) scale(0.2) rotate(${Math.random()*720}deg)`,X.style.opacity="0"}),setTimeout(()=>X.remove(),1200)}for(let ie=0;ie<15;ie++){const X=document.createElement("div");X.innerHTML="";const F=Math.random()*10+12,fe=Math.random()*Math.PI*2,ve=20+Math.random()*40,Se=Math.cos(fe)*ve,Re=Math.sin(fe)*ve;X.style.position="fixed",X.style.left=`${P-F/2}px`,X.style.top=`${q-F/2}px`,X.style.width=`${F}px`,X.style.height=`${F}px`,X.style.fontSize=`${F}px`,X.style.pointerEvents="none",X.style.zIndex="9998",X.style.transition=`all ${.6+Math.random()*.3}s ease-out`,X.style.opacity="0.8",document.body.appendChild(X),requestAnimationFrame(()=>{X.style.transform=`translate(${Se*1.8}px, ${Re*1.8-80}px) scale(0)`,X.style.opacity="0"}),setTimeout(()=>X.remove(),900)}},D=k=>{u(n.id),m||$(k)};return i.jsxs("div",{className:"discover-card-static",children:[i.jsxs("div",{className:"card-image-container relative w-full h-full rounded-2xl overflow-hidden bg-gray-200",children:[i.jsx("img",{src:n.avatar_url||`https://api.dicebear.com/7.x/avataaars/svg?seed=${n.full_name}&backgroundColor=b6e3f4`,alt:n.full_name,className:"card-image w-full h-full object-cover"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent pointer-events-none"}),i.jsx("button",{onClick:D,disabled:f,className:`
            absolute bottom-4 left-4
            transition-all duration-200 active:scale-90 z-20
          `,title:"Like",children:i.jsx(Un,{size:32,className:`
              drop-shadow-md
              ${m?"text-rose-600":"text-rose-500"}
            `,fill:m?"currentColor":"none"})}),i.jsx("button",{onClick:()=>o(n),className:`
            absolute bottom-4 right-4
            px-5 py-2 rounded-full 
            flex items-center gap-2 
            backdrop-blur-md bg-white/15 border border-white/30 
            text-white font-medium text-sm shadow-lg
            hover:bg-white/25 active:scale-95 transition-all duration-200 z-20
          `,title:"View Full Profile",children:"View Profile"})]}),i.jsxs("div",{className:"card-details mt-4",children:[i.jsxs("div",{className:"card-name-row",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("h2",{className:"card-name",children:n.full_name}),E&&i.jsx("div",{className:"bg-blue-500 rounded-full w-4 h-4 flex items-center justify-center",title:"Verified Account",children:i.jsx(Ir,{size:8,className:"text-white",strokeWidth:3})})]}),i.jsx("span",{className:"card-age",children:n.date_of_birth?s2(n.date_of_birth):""})]}),i.jsxs("div",{className:"card-info-row",children:[i.jsx(ra,{size:14}),n.city,n.distance&&i.jsxs("span",{className:"text-xs font-normal text-green-500 dark:text-green-400 ml-1",children:["(",n.distance<1?"< 1 km away":`${n.distance.toFixed(1)} km away`,")"]})]}),i.jsxs("div",{className:"card-meta",children:[i.jsxs("div",{className:"card-meta-item",children:[i.jsx("span",{className:"card-meta-label",children:"Faith"}),i.jsx("span",{className:"font-medium text-gray-200 dark:text-gray-200",children:n.religion})]}),i.jsxs("div",{className:"card-meta-item",children:[i.jsx("span",{className:"card-meta-label",children:"Intent"}),i.jsx("span",{className:"font-medium text-gray-200 dark:text-gray-200",children:n.intent})]})]}),n.bio&&i.jsxs("p",{className:"text-sm text-gray-400 dark:text-gray-400 italic mb-4 line-clamp-2",children:['"',n.bio,'"']}),i.jsxs("div",{className:"card-actions grid grid-cols-[0.6fr_2.4fr] gap-2",children:[i.jsx("button",{onClick:()=>A?N():r(),disabled:f,className:`
              w-full
              py-2.5
              px-2
              rounded-xl
              font-bold
              text-xs
              transition
              active:scale-95
              flex
              items-center
              justify-center
              gap-1
              border-2
              /* --- STYLING - More Visible Gray --- */
              ${A?"bg-green-900/30 text-green-400 border-green-700/50 hover:bg-green-900/40":"bg-gray-700/40 text-gray-300 border-gray-500/60 hover:bg-gray-700/60 hover:border-gray-400/80"}
            `,children:A?i.jsx("span",{className:"text-xs",children:"Undo"}):i.jsxs(i.Fragment,{children:[i.jsx(Cr,{size:14}),i.jsx("span",{className:"text-xs",children:"Pass"})]})}),i.jsxs("div",{className:"flex gap-2",children:[d&&i.jsx("button",{onClick:k=>{k.preventDefault(),k.stopPropagation(),d(n.id)},disabled:f,className:`
                  flex-shrink-0
                  w-11
                  font-bold
                  py-2.5
                  rounded-xl
                  shadow-lg
                  active:scale-95
                  transition
                  flex
                  items-center
                  justify-center
                  ${p?"bg-yellow-500 text-white hover:bg-yellow-600":"bg-yellow-500/20 text-yellow-400 border border-yellow-500/50 hover:bg-yellow-500/30"}
                `,title:"Super Like",children:i.jsx(B_,{size:16,fill:p?"currentColor":"none"})}),i.jsxs("button",{onClick:a,disabled:f,className:`
                flex-1
                min-w-0
                bg-rose-600
                text-white
                font-bold
                py-3
                px-5
                rounded-xl
                shadow-lg
                hover:bg-rose-700
                active:scale-95
                transition
                flex
                items-center
                justify-center
                gap-2
                text-base
                font-semibold
              `,children:[i.jsx(Un,{size:20,fill:"white",className:"flex-shrink-0"}),i.jsx("span",{className:"whitespace-nowrap",children:"Connect"})]})]})]})]})]})},Du="/assets/Image-CfcPXaHU.jpg",n2=({onLoginClick:n,onSignupClick:r})=>i.jsxs("div",{style:{fontFamily:"Montserrat, sans-serif"},className:"relative min-h-screen w-full overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 -z-10 h-full w-full",children:i.jsx("div",{className:"w-full h-full bg-cover bg-center bg-no-repeat",style:{backgroundImage:`url(${Du})`},children:i.jsx("div",{className:"w-full h-full bg-black/20"})})}),i.jsxs("div",{className:"relative z-10 w-full min-h-screen flex flex-col items-center justify-between py-10 px-6",children:[i.jsxs("div",{className:"flex flex-col items-center mt-4 w-full text-center",children:[i.jsxs("div",{className:"relative mb-6",children:[i.jsx("div",{className:"absolute -inset-2 bg-white/10 rounded-3xl -z-10"}),i.jsx("img",{src:Gr,alt:"SacredHearts Logo",className:"relative h-32 sm:h-40 w-auto object-contain drop-shadow-2xl"})]}),i.jsxs("h1",{className:"font-extrabold text-white text-3xl sm:text-5xl leading-tight tracking-wide uppercase mb-3 drop-shadow-lg",style:{WebkitTextStroke:"0.5px white",textShadow:"0px 4px 8px rgba(0,0,0,0.9), 0px 0px 4px rgba(0,0,0,0.9)"},children:["Faith Centered",i.jsx("br",{}),i.jsx("span",{className:"text-rose-300",children:"Love Focused"})]})]}),i.jsxs("div",{className:"flex flex-col items-center gap-4 sm:gap-6 mb-20 w-full max-w-md",children:[i.jsxs("button",{onClick:n,className:"group w-full bg-white/10 backdrop-blur-md border border-white/30 text-white font-bold py-4 sm:py-5 text-lg sm:text-xl rounded-3xl shadow-xl hover:bg-white/20 hover:border-white/50 hover:scale-105 active:scale-[0.98] transition-all duration-300 flex items-center justify-center gap-3",style:{textShadow:"0px 2px 6px rgba(0,0,0,0.5)"},children:[i.jsx(x_,{size:24,className:"text-white"}),i.jsx("span",{className:"group-hover:text-white transition-colors",children:"Log In"})]}),i.jsxs("button",{onClick:r,className:"group w-full bg-rose-600 text-white font-bold py-4 sm:py-5 text-lg sm:text-xl rounded-3xl shadow-rose-500/40 shadow-xl hover:bg-rose-700 hover:shadow-rose-500/60 hover:scale-105 active:scale-[0.98] transition-all duration-300 flex items-center justify-center gap-3",style:{textShadow:"0px 2px 6px rgba(0,0,0,0.3)"},children:[i.jsx(G_,{size:24,className:"text-white"}),i.jsx("span",{className:"group-hover:text-white transition-colors",children:"Create Account"})]}),i.jsx("div",{className:"bg-white/5 backdrop-blur-sm border border-white/10 p-4 rounded-xl mt-2",children:i.jsxs("div",{className:"flex items-start gap-3 text-white/90",children:[i.jsx(L_,{size:20,className:"text-rose-300 mt-1 shrink-0"}),i.jsx("p",{className:"text-xs sm:text-sm font-light leading-relaxed text-left",children:"Welcome to a sacred space. We help you find genuine hearts, build real connections, and discover love with purpose."})]})}),i.jsxs("p",{className:"font-medium text-[10px] sm:text-xs text-gray-300 tracking-wide text-center mt-4",style:{textShadow:"0px 1px 3px rgba(0,0,0,0.9)"},children:["By continuing you agree to"," ",i.jsx(Mn,{to:"/terms",className:"text-white/90 hover:text-rose-200 hover:underline transition-colors cursor-pointer",children:"Terms of Service"}),","," ",i.jsx(Mn,{to:"/privacy",className:"text-white/90 hover:text-rose-200 hover:underline transition-colors cursor-pointer",children:"Privacy Policy"})," ","and"," ",i.jsx(Mn,{to:"/guidelines",className:"text-white/90 hover:text-rose-200 hover:underline transition-colors cursor-pointer",children:"Community Guidelines"}),"."]}),i.jsx("p",{className:"font-medium text-[10px] sm:text-xs text-gray-300 tracking-wide text-center mt-10 drop-shadow-sm",style:{textShadow:"0px 1px 3px rgba(0,0,0,0.9)"},children:" 2026 SacredHearts. All rights reserved."})]})]})]}),hx="/assets/signupimg-gNzLtEaI.jpg",i2=({mode:n,onSubmit:r,onBack:a,onForgotClick:o,loading:u})=>{const[d,f]=S.useState(n),[m,p]=S.useState(!1),[x,w]=S.useState(!1),[N,E]=S.useState("email"),[A,$]=S.useState(""),[D,k]=S.useState(""),[H,P]=S.useState(""),[q,K]=S.useState(""),[ie,X]=S.useState(""),[F,fe]=S.useState(""),[ve,Se]=S.useState(""),[Re,Oe]=S.useState(""),[ut,lt]=S.useState(""),at=I=>{I.preventDefault(),r(d==="login"?{type:"login",emailOrPhone:loginEmailOrPhone,password:D,rememberMe:x}:{type:"signup",method:N,signupName:H,signupGender:q,signupDOB:ie,signupCity:F,signupEmail:ve,signupPhone:Re,password:ut})};return i.jsxs("div",{style:{fontFamily:"Montserrat, sans-serif"},className:"relative min-h-screen w-full overflow-hidden flex items-center justify-center",children:[i.jsxs("div",{className:"absolute inset-0 -z-10 h-full w-full transition-all duration-700 ease-in-out",children:[i.jsx("img",{src:d==="login"?nl:hx,className:"w-full h-full object-cover",alt:"SacredHearts Background"}),i.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-ms"})]}),i.jsxs("div",{className:"relative z-10 w-full max-w-md mx-4 bg-white/10 backdrop-blur-xl border border-white/20 rounded-3xl shadow-2xl p-6 sm:p-8",children:[i.jsxs("button",{onClick:a,className:"absolute -top-12 left-0 text-white hover:text-rose-200 transition flex items-center gap-2","aria-label":"Back to Welcome",children:[i.jsx(Vr,{size:20})," Back"]}),i.jsx("div",{className:"flex flex-col items-center mb-6",children:i.jsx("img",{src:Gr,alt:"SacredHearts Logo",className:"h-16 w-auto object-contain drop-shadow-2xl mb-2"})}),d==="login"?i.jsxs("h2",{className:"text-xl sm:text-2xl font-extrabold text-white text-center mb-8 leading-tight drop-shadow-md",children:["Connecting Hearts ",i.jsx("br",{}),i.jsx("span",{className:"text-rose-300",children:"Under Grace"})]}):i.jsx("p",{className:"text-sm sm:text-base text-white/90 text-center font-light italic mb-6 leading-relaxed drop-shadow-md",children:'"A sacred space to meet genuine hearts, build real connections, and find love with purpose."'}),i.jsxs("div",{className:"flex bg-white/10 border border-white/10 p-1 rounded-xl mb-6 backdrop-blur-sm",children:[i.jsx("button",{onClick:()=>f("login"),className:`flex-1 py-2.5 text-xs sm:text-sm font-bold rounded-lg transition-all duration-300 ${d==="login"?"bg-rose-600/90 text-white shadow-lg":"text-white/70 hover:text-white hover:bg-white/5"}`,children:"Login"}),i.jsx("button",{onClick:()=>f("signup"),className:`flex-1 py-2.5 text-xs sm:text-sm font-bold rounded-lg transition-all duration-300 ${d==="signup"?"bg-rose-600/90 text-white shadow-lg":"text-white/70 hover:text-white hover:bg-white/5"}`,children:"Sign Up"})]}),i.jsxs("form",{onSubmit:at,className:"space-y-4",children:[d==="login"&&i.jsxs("div",{className:"space-y-4 animate-fade-in-up",children:[i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute left-3 top-3.5 text-white/60",children:i.jsx(Wa,{size:18,strokeWidth:1.5})}),i.jsx("input",{type:"text",placeholder:"Email or username",required:!0,autoComplete:"username",className:"w-full p-3 pl-10 border border-white/20 bg-white/10 text-white placeholder-white/50 rounded-xl focus:ring-2 focus:ring-rose-500 focus:bg-white/20 outline-none transition",value:A,onChange:I=>$(I.target.value)})]}),i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute left-3 top-3.5 text-white/60",children:i.jsx(Qt,{size:18,strokeWidth:1.5})}),i.jsx("input",{type:m?"text":"password",placeholder:"Password",required:!0,className:"w-full p-3 pl-10 pr-10 border border-white/20 bg-white/10 text-white placeholder-white/50 rounded-xl focus:ring-2 focus:ring-rose-500 focus:bg-white/20 outline-none transition",value:D,onChange:I=>k(I.target.value)}),i.jsx("button",{type:"button",onClick:()=>p(!m),className:"absolute right-3 top-3.5 text-white/60 hover:text-white",children:m?i.jsx(Ka,{size:18}):i.jsx(mr,{size:18})})]}),i.jsxs("div",{className:"flex justify-between items-center text-xs sm:text-sm text-white/90",children:[i.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:x,onChange:I=>w(I.target.checked),className:"accent-rose-600 w-4 h-4 rounded border-gray-300"}),"Remember me"]}),i.jsx("button",{type:"button",onClick:o,className:"text-rose-200 hover:text-white font-bold transition",children:"Forgot Password?"})]}),i.jsx("button",{type:"submit",disabled:u,className:"w-full bg-rose-600 text-white font-bold py-3.5 rounded-xl shadow-lg hover:bg-rose-700 active:scale-[0.98] transition-all duration-300 ease-in-out mt-2 hover:shadow-xl hover:scale-[1.02]",children:u?"Logging in...":"Log In"})]}),d==="signup"&&i.jsxs("div",{className:"space-y-3 animate-fade-in-up",children:[i.jsxs("div",{className:"flex bg-white/10 border border-white/10 p-1 rounded-lg mb-4 backdrop-blur-sm",children:[i.jsx("button",{type:"button",onClick:()=>E("email"),className:`flex-1 py-1.5 text-xs font-bold rounded-md transition ${N==="email"?"bg-rose-600/90 text-white shadow-sm":"text-white/70 hover:text-white"}`,children:"Email"}),i.jsx("button",{type:"button",onClick:()=>E("phone"),className:`flex-1 py-1.5 text-xs font-bold rounded-md transition ${N==="phone"?"bg-rose-600/90 text-white shadow-sm":"text-white/70 hover:text-white"}`,children:"Phone (SMS)"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute left-2.5 top-3 text-white/60",children:i.jsx(Ln,{size:16,strokeWidth:1.5})}),i.jsx("input",{type:"text",placeholder:"Full Name",required:!0,className:"w-full p-2.5 pl-9 border border-white/20 bg-white/10 text-white placeholder-white/50 rounded-xl text-sm focus:ring-2 focus:ring-rose-500 focus:bg-white/20 outline-none transition",value:H,onChange:I=>P(I.target.value)})]}),i.jsxs("select",{required:!0,className:"w-full p-2.5 border border-white/20 bg-white/10 text-white rounded-xl text-sm focus:ring-2 focus:ring-rose-500 focus:bg-white/20 outline-none transition [&>option]:text-gray-800",value:q,onChange:I=>K(I.target.value),children:[i.jsx("option",{value:"",className:"text-gray-800",children:"Gender"}),i.jsx("option",{value:"male",children:"Man"}),i.jsx("option",{value:"female",children:"Woman"})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute left-2.5 top-3 text-white/60",children:i.jsx(yf,{size:16,strokeWidth:1.5})}),i.jsx("span",{className:"text-[10px] text-white/60 absolute -top-2 left-2 px-1 bg-black/20 backdrop-blur-sm rounded",children:"Date of Birth"}),i.jsx("input",{type:"text",required:!0,placeholder:"YYYY-MM-DD (e.g., 1990-12-25)",className:"w-full p-2.5 pl-9 border border-white/20 bg-white/10 text-white rounded-xl text-sm focus:ring-2 focus:ring-rose-500 focus:bg-white/20 outline-none transition placeholder-white/40",value:ie,onChange:I=>{let R=I.target.value;R=R.replace(/[^\d-]/g,""),R.length>10&&(R=R.slice(0,10)),R.length>4&&R[4]!=="-"&&(R=R.slice(0,4)+"-"+R.slice(4)),R.length>7&&R[7]!=="-"&&(R=R.slice(0,7)+"-"+R.slice(7)),X(R)},onBlur:I=>{const R=I.target.value.trim();if(R&&!/^\d{4}-\d{2}-\d{2}$/.test(R)){const le=R.replace(/\D/g,"");if(le.length===8){const _e=`${le.slice(0,4)}-${le.slice(4,6)}-${le.slice(6,8)}`;X(_e)}}}})]}),i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute left-2.5 top-3 text-white/60",children:i.jsx(ra,{size:16,strokeWidth:1.5})}),i.jsxs("select",{required:!0,className:"w-full p-2.5 pl-9 border border-white/20 bg-white/10 text-white rounded-xl text-sm focus:ring-2 focus:ring-rose-500 focus:bg-white/20 outline-none transition [&>option]:text-gray-800",value:F,onChange:I=>fe(I.target.value),children:[i.jsx("option",{value:"",className:"text-gray-800",children:"City"}),i.jsx("option",{value:"Accra",children:"Accra"}),i.jsx("option",{value:"Kumasi",children:"Kumasi"}),i.jsx("option",{value:"Tema",children:"Tema"}),i.jsx("option",{value:"Tamale",children:"Tamale"}),i.jsx("option",{value:"Cape Coast",children:"Cape Coast"}),i.jsx("option",{value:"Takoradi",children:"Takoradi"}),i.jsx("option",{value:"Sunyani",children:"Sunyani"}),i.jsx("option",{value:"Ho",children:"Ho"}),i.jsx("option",{value:"Wa",children:"Wa"}),i.jsx("option",{value:"Techiman",children:"Techiman"}),i.jsx("option",{value:"Goaso",children:"Goaso"}),i.jsx("option",{value:"Nalerigu",children:"Nalerigu"}),i.jsx("option",{value:"Sefwi Wiaso",children:"Sefwi Wiaso"}),i.jsx("option",{value:"Damango",children:"Damango"}),i.jsx("option",{value:"Dambai",children:"Dambai"}),i.jsx("option",{value:"Bolgatanga",children:"Bolgatanga"})]})]})]}),N==="email"?i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute left-2.5 top-3 text-white/60",children:i.jsx(Wa,{size:16,strokeWidth:1.5})}),i.jsx("input",{type:"email",placeholder:"Email Address",required:!0,className:"w-full p-2.5 pl-9 border border-white/20 bg-white/10 text-white placeholder-white/50 rounded-xl text-sm focus:ring-2 focus:ring-rose-500 focus:bg-white/20 outline-none transition",value:ve,onChange:I=>Se(I.target.value)})]}):i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute left-2.5 top-3 text-white/60",children:i.jsx(Co,{size:16,strokeWidth:1.5})}),i.jsx("input",{type:"tel",placeholder:"Phone Number (+233...)",required:!0,className:"w-full p-2.5 pl-9 border border-white/20 bg-white/10 text-white placeholder-white/50 rounded-xl text-sm focus:ring-2 focus:ring-rose-500 focus:bg-white/20 outline-none transition",value:Re,onChange:I=>Oe(I.target.value)}),i.jsx("p",{className:"text-[10px] text-white/50 mt-1 ml-1",children:"* A verification code will be sent to this number."})]}),i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute left-2.5 top-3 text-white/60",children:i.jsx(Qt,{size:16,strokeWidth:1.5})}),i.jsx("input",{type:m?"text":"password",placeholder:"Create Password",required:!0,className:"w-full p-2.5 pl-9 pr-9 border border-white/20 bg-white/10 text-white placeholder-white/50 rounded-xl text-sm focus:ring-2 focus:ring-rose-500 focus:bg-white/20 outline-none transition",value:ut,onChange:I=>lt(I.target.value)}),i.jsx("button",{type:"button",onClick:()=>p(!m),className:"absolute right-3 top-3 text-white/60 hover:text-white",children:m?i.jsx(Ka,{size:16}):i.jsx(mr,{size:16})})]}),i.jsx("button",{type:"submit",disabled:u,className:"w-full bg-rose-600 text-white font-bold py-3.5 rounded-xl shadow-lg hover:bg-rose-700 active:scale-[0.98] transition-all duration-300 ease-in-out mt-2 hover:shadow-xl hover:scale-[1.02]",children:u?"Processing...":"Create Account"})]})]}),i.jsxs("p",{className:"text-[10px] text-white/40 text-center mt-6 leading-tight",children:["By continuing, you agree to our ",i.jsx("br",{}),i.jsx(Mn,{to:"/terms",className:"text-white/60",children:"Terms of Service"})," & ",i.jsx(Mn,{to:"/privacy",className:"text-white/60",children:"Privacy Policy"}),"."]})]})]})},l2=({isOpen:n,onClose:r,onConfirm:a,title:o,message:u,type:d})=>{if(!n)return null;const f=async()=>{a&&await a(),r()};return i.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:i.jsxs("div",{className:"bg-gray-800 border border-gray-700 w-full max-w-sm rounded-2xl shadow-2xl p-6 animate-fade-in-up",children:[i.jsx("h2",{className:"text-xl font-bold text-white mb-2 text-center",children:o}),i.jsx("p",{className:"text-gray-300 text-sm mb-6 text-center",children:u}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:r,className:"flex-1 py-3 rounded-xl border border-gray-600 text-gray-300 font-bold hover:bg-gray-700 transition",children:"Cancel"}),i.jsx("button",{onClick:f,className:`flex-1 py-3 rounded-xl text-white font-bold shadow-lg transition ${d==="danger"?"bg-red-600 hover:bg-red-700":"bg-rose-600 hover:bg-rose-700"}`,children:"Confirm"})]})]})})},o2=({isOpen:n,onClose:r,onSubmit:a,title:o,placeholder:u,showCategorySelect:d,categories:f,selectedCategory:m,onCategoryChange:p})=>{const[x,w]=S.useState("");if(!n)return null;const N=()=>{if(d&&!m){alert("Please select a category.");return}a(x),w(""),r()};return i.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:i.jsxs("div",{className:"bg-white dark:bg-gray-800 w-full max-w-sm rounded-2xl shadow-2xl p-6 animate-fade-in-up",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4 text-center",children:o}),d&&f&&i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Category"}),i.jsxs("select",{value:m||"",onChange:E=>p&&p(E.target.value),className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-xl text-sm focus:ring-2 focus:ring-rose-500 outline-none bg-white dark:bg-gray-800 text-gray-900 dark:text-white [&>option]:bg-gray-800 [&>option]:text-white",children:[i.jsx("option",{value:"",children:"Select a category..."}),f.map(E=>i.jsx("option",{value:E,children:E},E))]})]}),i.jsx("textarea",{autoFocus:!0,className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-xl text-sm focus:ring-2 focus:ring-rose-500 outline-none resize-none bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500",rows:"4",placeholder:u,value:x,onChange:E=>w(E.target.value)}),i.jsxs("div",{className:"flex gap-3 mt-4",children:[i.jsx("button",{onClick:r,className:"flex-1 py-3 rounded-xl border border-gray-200 dark:border-gray-600 text-gray-600 dark:text-gray-300 font-bold hover:bg-gray-50 dark:hover:bg-gray-700 transition",children:"Cancel"}),i.jsx("button",{onClick:N,className:"flex-1 bg-rose-600 text-white font-bold py-3 rounded-xl shadow-lg hover:bg-rose-700 transition",children:"Submit"})]})]})})},c2=({like:n,type:r,onViewProfile:a})=>{const[o,u]=S.useState(null),d=r==="incoming"?n.liker_id:n.liked_id;return S.useEffect(()=>{(async()=>{if(!d)return;const{data:m}=await U.from("profiles").select("*").eq("id",d).single();u(m)})()},[d]),o?i.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-50 flex items-center gap-4",children:[i.jsx("img",{src:o.avatar_url||`https://api.dicebear.com/7.x/avataaars/svg?seed=${o.full_name}`,className:"w-14 h-14 rounded-full bg-gray-100 object-cover"}),i.jsxs("div",{className:"flex-grow min-w-0",children:[i.jsx("h3",{className:"font-bold text-gray-900 truncate",children:o.full_name}),i.jsx("p",{className:"text-xs text-rose-600 truncate",children:o.city})]}),i.jsx("div",{className:"flex flex-col items-center justify-center gap-1",children:i.jsx("span",{className:`text-[10px] font-bold px-3 py-1 rounded-full uppercase tracking-wide ${r==="incoming"?"bg-rose-50 text-rose-500":"bg-gray-100 text-gray-400"}`,children:r==="incoming"?"Crushed":"Crushing"})})]}):i.jsx("div",{className:"bg-gray-100 h-16 rounded-xl animate-pulse"})},u2=({myCrushes:n,incomingCrushes:r,onViewProfile:a})=>{const[o,u]=S.useState("incoming"),d=m=>{u(m)},f=o==="incoming"?r:n;return i.jsxs("div",{className:"w-full max-w-md mx-auto px-4 pt-6",children:[i.jsxs("h2",{className:"text-2xl font-bold text-gray-800 mb-4 text-center flex items-center justify-center gap-2",children:[i.jsx(nf,{className:"text-rose-500"})," Crushes"]}),i.jsxs("div",{className:"flex bg-white/10 backdrop-blur-md border border-white/20 p-1 rounded-lg mb-6",children:[i.jsx("button",{onClick:()=>d("incoming"),className:`flex-1 py-2 text-xs font-bold rounded-lg transition ${o==="incoming"?"bg-rose-600/90 text-white shadow-sm":"text-white/70 hover:text-white"}`,children:"Crushing on You"}),i.jsx("button",{onClick:()=>d("outgoing"),className:`flex-1 py-2 text-xs font-bold rounded-lg transition ${o==="outgoing"?"bg-rose-600/90 text-white shadow-sm":"text-white/70 hover:text-white"}`,children:"Your Crushes"})]}),i.jsx("div",{className:"space-y-3 pb-20",children:f.length===0?i.jsx("div",{className:"text-center text-gray-400 mt-10 bg-white p-6 rounded-xl border border-dashed border-gray-200",children:i.jsxs("div",{className:"flex flex-col items-center justify-center",children:[i.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center mb-2 opacity-50",children:i.jsx(nf,{size:20,className:"text-gray-400"})}),i.jsx("p",{className:"text-sm",children:o==="incoming"?"No one is crushing on you yet.":"You haven't crushed on anyone."})]})}):f.map((m,p)=>i.jsx(c2,{like:m,type:o,onViewProfile:a},m.id||`crush-${o}-${p}`))})]})},d2=()=>i.jsxs("div",{style:{fontFamily:"Montserrat, sans-serif"},className:"relative min-h-screen w-full overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 -z-10 h-full w-full",children:i.jsx("div",{className:"w-full h-full bg-cover bg-center bg-no-repeat",style:{backgroundImage:`url(${Du})`},children:i.jsx("div",{className:"w-full h-full bg-black/15"})})}),i.jsxs("div",{className:"relative z-10 w-full min-h-screen flex flex-col items-center py-6 px-4 sm:px-6",children:[i.jsxs("div",{className:"w-full max-w-3xl flex items-center justify-between mb-8 mt-4",children:[i.jsxs("a",{href:"/",className:"group flex items-center gap-2 text-white/90 hover:text-white transition-colors",children:[i.jsx("div",{className:"bg-white/10 backdrop-blur-md border border-white/30 rounded-full p-2 group-hover:bg-white/20 transition-all",children:i.jsx(Vr,{size:20,className:"text-white"})}),i.jsx("span",{className:"font-semibold text-sm tracking-wide drop-shadow-md",children:"Home"})]}),i.jsx("img",{src:Gr,alt:"SacredHearts Logo",className:"h-16 w-auto object-contain drop-shadow-2xl filter brightness-110"})]}),i.jsxs("div",{className:"w-full max-w-3xl bg-white/95 backdrop-blur-md rounded-3xl shadow-2xl p-6 sm:p-10 text-gray-800",children:[i.jsxs("div",{className:"border-b border-gray-200 pb-6 mb-6 text-center",children:[i.jsx("h1",{className:"text-3xl sm:text-4xl font-extrabold text-rose-600 uppercase tracking-wider mb-2",children:"Terms of Service"}),i.jsx("p",{className:"text-sm sm:text-base text-gray-500 font-medium",children:"SacredHearts Dating App"}),i.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"Last Updated: 1st January 2026"})]}),i.jsx("p",{className:"mb-8 text-gray-600 leading-relaxed",children:"Welcome to Sacredheart. By accessing or using our app, you agree to be bound by these Terms of Service. If you do not agree, please do not use the app."}),i.jsxs("section",{className:"mb-8",children:[i.jsx("h2",{className:"text-xl font-bold text-rose-500 mb-4 flex items-center gap-2",children:"1. Eligibility"}),i.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700 ml-2",children:[i.jsx("li",{children:"You must be 18 years or older to use Sacredhearts."}),i.jsx("li",{children:"By using the app, you confirm that all information you provide is truthful and accurate."}),i.jsx("li",{children:"Sacredheart is intended for individuals seeking meaningful, respectful connections."})]})]}),i.jsxs("section",{className:"mb-8",children:[i.jsx("h2",{className:"text-xl font-bold text-rose-500 mb-4",children:"2. User Accounts"}),i.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700 ml-2",children:[i.jsx("li",{children:"You are responsible for maintaining the confidentiality of your account."}),i.jsx("li",{children:"You agree not to impersonate another person or create multiple deceptive accounts."}),i.jsx("li",{children:"We reserve the right to suspend or terminate accounts that violate our policies."})]})]}),i.jsxs("section",{className:"mb-8",children:[i.jsx("h2",{className:"text-xl font-bold text-rose-500 mb-4",children:"3. User Conduct"}),i.jsx("p",{className:"font-semibold mb-2 text-gray-800",children:"You agree to:"}),i.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700 ml-2 mb-4",children:[i.jsx("li",{children:"Treat others with respect, dignity, and honesty."}),i.jsx("li",{children:"Use the app for lawful and appropriate purposes only."})]}),i.jsx("p",{className:"font-semibold mb-2 text-gray-800",children:"You agree NOT to:"}),i.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700 ml-2",children:[i.jsx("li",{children:"Harass, threaten, exploit, or abuse other users."}),i.jsx("li",{children:"Share explicit, offensive, or hateful content."}),i.jsx("li",{children:"Engage in scams, fraud, or solicitation."}),i.jsx("li",{children:"Misuse the platform in any way that harms others."})]})]}),i.jsxs("section",{className:"mb-8",children:[i.jsx("h2",{className:"text-xl font-bold text-rose-500 mb-4",children:"4. Matches & Connections"}),i.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700 ml-2",children:[i.jsx("li",{children:"Sacredheart does not guarantee matches, relationships, or outcomes."}),i.jsx("li",{children:"All interactions are voluntary and at your own discretion."}),i.jsx("li",{children:"You are responsible for your interactions both online and offline."})]})]}),i.jsxs("section",{className:"mb-8",children:[i.jsx("h2",{className:"text-xl font-bold text-rose-500 mb-4",children:"5. Safety Disclaimer"}),i.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700 ml-2",children:[i.jsx("li",{children:"Sacredheart does not conduct criminal background checks."}),i.jsx("li",{children:"Always use caution when meeting someone in person."}),i.jsx("li",{children:"We encourage meeting in public places and informing someone you trust."})]})]}),i.jsxs("section",{className:"mb-8",children:[i.jsx("h2",{className:"text-xl font-bold text-rose-500 mb-4",children:"6. Termination"}),i.jsx("p",{className:"text-gray-700",children:"We reserve the right to suspend or terminate your access at any time if you violate these Terms or our Community Guidelines."})]}),i.jsxs("section",{className:"mb-8",children:[i.jsx("h2",{className:"text-xl font-bold text-rose-500 mb-4",children:"7. Changes to Terms"}),i.jsx("p",{className:"text-gray-700",children:"We may update these Terms from time to time. Continued use of the app means you accept the updated Terms."})]}),i.jsxs("section",{className:"mb-8",children:[i.jsx("h2",{className:"text-xl font-bold text-rose-500 mb-4",children:"8. Contact"}),i.jsx("p",{className:"text-gray-700 mb-2",children:"For questions or concerns, contact us at:"}),i.jsxs("div",{className:"flex items-center gap-2 text-rose-600 font-semibold",children:[i.jsx(Wa,{size:16}),i.jsx("a",{href:"mailto:support@sacredhearts.app",children:"support@sacredhearts.app"})]})]})]}),i.jsx("p",{className:"text-gray-300 text-xs mt-6 text-center drop-shadow-sm",children:" 2026 SacredHearts. All rights reserved."})]})]}),h2=()=>i.jsxs("div",{style:{fontFamily:"Montserrat, sans-serif"},className:"relative min-h-screen w-full overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 -z-10 h-full w-full",children:i.jsx("div",{className:"w-full h-full bg-cover bg-center bg-no-repeat transition-transform duration-1000 ease-in-out",style:{backgroundImage:`url(${Du})`},children:i.jsx("div",{className:"w-full h-full bg-black/20"})})}),i.jsxs("div",{className:"relative z-10 w-full min-h-screen flex flex-col items-center py-6 px-4 sm:px-6",children:[i.jsxs("div",{className:"w-full max-w-3xl flex items-center justify-between mb-8 mt-4",children:[i.jsxs("a",{href:"/",className:"group flex items-center gap-2 text-white/90 hover:text-white transition-colors",children:[i.jsx("div",{className:"bg-white/10 backdrop-blur-md border border-white/30 rounded-full p-2 group-hover:bg-white/20 transition-all",children:i.jsx(Vr,{size:20,className:"text-white"})}),i.jsx("span",{className:"font-semibold text-sm tracking-wide drop-shadow-md",children:"Home"})]}),i.jsx("img",{src:Gr,alt:"SacredHearts Logo",className:"h-16 w-auto object-contain drop-shadow-2xl filter brightness-110"})]}),i.jsxs("div",{className:"w-full max-w-3xl bg-white/95 backdrop-blur-md rounded-3xl shadow-2xl p-6 sm:p-10 text-gray-800",children:[i.jsxs("div",{className:"border-b border-gray-200 pb-6 mb-6 text-center",children:[i.jsx("h1",{className:"text-3xl sm:text-4xl font-extrabold text-rose-600 uppercase tracking-wider mb-2",children:"Privacy Policy"}),i.jsx("p",{className:"text-sm sm:text-base text-gray-500 font-medium",children:"SacredHearts Dating App"}),i.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"Last Updated: 1st January 2026"})]}),i.jsx("p",{className:"mb-8 text-gray-600 leading-relaxed text-center",children:"Your privacy matters to us. This policy explains how we collect, use, and protect your information."}),i.jsxs("section",{className:"mb-8",children:[i.jsx("h2",{className:"text-xl font-bold text-rose-500 mb-4 flex items-center gap-2",children:"1. Information We Collect"}),i.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700 ml-4 text-sm",children:[i.jsx("li",{children:"We may collect:"}),i.jsx("li",{className:"font-medium",children:"Name, email, date of birth"}),i.jsx("li",{className:"font-medium",children:"Profile information (photos, bio, preferences)"}),i.jsx("li",{className:"font-medium",children:"Messages and interactions within the app"}),i.jsx("li",{className:"font-medium",children:"Technical data (device type, IP address)"})]})]}),i.jsxs("section",{className:"mb-8",children:[i.jsx("h2",{className:"text-xl font-bold text-rose-500 mb-4",children:"2. How We Use Your Information"}),i.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700 ml-4 text-sm",children:[i.jsx("li",{children:"Create and manage your account"}),i.jsx("li",{children:"Match you with compatible users"}),i.jsx("li",{children:"Improve app performance and safety"}),i.jsx("li",{children:"Communicate important updates"})]})]}),i.jsxs("section",{className:"mb-8",children:[i.jsx("h2",{className:"text-xl font-bold text-rose-500 mb-4",children:"3. Data Sharing"}),i.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700 ml-4 text-sm",children:[i.jsxs("li",{children:[i.jsx("strong",{children:"We do not sell"})," your personal data."]}),i.jsx("li",{children:"Your profile information is visible only to other users within the app."}),i.jsx("li",{children:"We may share data if required by law or to protect user safety."})]})]}),i.jsxs("section",{className:"mb-8",children:[i.jsx("h2",{className:"text-xl font-bold text-rose-500 mb-4",children:"4. Data Security"}),i.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700 ml-4 text-sm",children:[i.jsx("li",{children:i.jsx("strong",{children:"We use industry-standard security measures."})}),i.jsx("li",{children:"However, no system is 100% secure. Use the app responsibly."})]})]}),i.jsxs("section",{className:"mb-8",children:[i.jsx("h2",{className:"text-xl font-bold text-rose-500 mb-4",children:"5. Your Choices"}),i.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700 ml-4 text-sm",children:[i.jsx("li",{children:"Edit or delete your profile information"}),i.jsx("li",{children:"Request account deletion at any time"})]})]}),i.jsxs("section",{className:"mb-8",children:[i.jsx("h2",{className:"text-xl font-bold text-rose-500 mb-4",children:"6. Childrens Privacy"}),i.jsx("ul",{className:"list-disc list-inside space-y-2 text-gray-700 ml-4 text-sm",children:i.jsx("li",{children:"Sacredheart is not intended for users under 18."})})]}),i.jsxs("section",{className:"mb-8",children:[i.jsx("h2",{className:"text-xl font-bold text-rose-500 mb-4",children:"7. Updates to This Policy"}),i.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700 ml-4 text-sm",children:[i.jsx("li",{children:"We may update this Privacy Policy periodically."}),i.jsx("li",{children:"Continued use means acceptance."})]})]})]}),i.jsx("div",{className:"text-center mt-6",children:i.jsx("p",{className:"text-[10px] sm:text-xs text-gray-300 tracking-wide drop-shadow-sm",children:" 2026 SacredHearts. All rights reserved."})})]})]}),f2=()=>i.jsxs("div",{style:{fontFamily:"Montserrat, sans-serif"},className:"relative min-h-screen w-full overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 -z-10 h-full w-full",children:i.jsx("img",{src:Du,className:"w-full h-full object-cover",alt:"SacredHearts Background"})}),i.jsxs("div",{className:"relative z-10 w-full min-h-screen flex flex-col items-center py-6 px-4 sm:px-6",children:[i.jsxs("div",{className:"w-full max-w-3xl flex items-center justify-between mb-8 mt-4",children:[i.jsxs("a",{href:"/",className:"group flex items-center gap-2 text-white/90 hover:text-white transition-colors",children:[i.jsx("div",{className:"bg-white/10 backdrop-blur-md border border-white/30 rounded-full p-2 group-hover:bg-white/20 transition-all",children:i.jsx(Vr,{size:20,className:"text-white"})}),i.jsx("span",{className:"font-semibold text-sm tracking-wide drop-shadow-md",children:"Home"})]}),i.jsx("img",{src:Gr,alt:"SacredHearts Logo",className:"h-16 w-auto object-contain drop-shadow-2xl filter brightness-110"})]}),i.jsxs("div",{className:"w-full max-w-3xl bg-white/95 backdrop-blur-md rounded-3xl shadow-2xl p-6 sm:p-10 text-gray-800",children:[i.jsxs("div",{className:"border-b border-gray-200 pb-6 mb-6 text-center",children:[i.jsx("h1",{className:"text-3xl sm:text-4xl font-extrabold text-rose-600 uppercase tracking-wider mb-2 flex items-center justify-center gap-2",children:"Community Guidelines"}),i.jsx("p",{className:"text-sm sm:text-base text-gray-500 font-medium",children:"SacredHearts Dating App"}),i.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"Last Updated: 1st January 2026"})]}),i.jsx("div",{className:"text-center mb-8 px-4 sm:px-8",children:i.jsx("p",{className:"text-gray-600 leading-relaxed",children:"Sacredheart is a faith-centered, love-focused community. These guidelines help keep it safe and respectful for everyone."})}),i.jsxs("section",{className:"mb-8",children:[i.jsxs("h2",{className:"text-xl font-bold text-rose-500 mb-4 flex items-center gap-2",children:[i.jsx("span",{className:"bg-rose-100 text-rose-700 px-2 py-1 rounded-full text-xs font-bold",children:"1"})," Be Respectful"]}),i.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700 ml-4 text-sm",children:[i.jsx("li",{children:"Treat all users with kindness and dignity."}),i.jsx("li",{children:"Differences in beliefs, culture, and background must be respected."})]})]}),i.jsxs("section",{className:"mb-8",children:[i.jsxs("h2",{className:"text-xl font-bold text-rose-500 mb-4 flex items-center gap-2",children:[i.jsx("span",{className:"bg-rose-100 text-rose-700 px-2 py-1 rounded-full text-xs font-bold",children:"2"})," Be Honest"]}),i.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700 ml-4 text-sm",children:[i.jsx("li",{children:"Use real photos."}),i.jsx("li",{children:"Provide truthful information."}),i.jsx("li",{children:"No impersonation or misleading behavior."})]})]}),i.jsxs("section",{className:"mb-8",children:[i.jsxs("h2",{className:"text-xl font-bold text-rose-500 mb-4 flex items-center gap-2",children:[i.jsx("span",{className:"bg-rose-100 text-rose-700 px-2 py-1 rounded-full text-xs font-bold",children:"3"})," No Harassment or Abuse"]}),i.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700 ml-4 text-sm",children:[i.jsx("li",{children:"We do not tolerate:"}),i.jsx("li",{children:"Hate speech"}),i.jsx("li",{children:"Sexual harassment"}),i.jsx("li",{children:"Threats or intimidation"}),i.jsx("li",{children:"Bullying or shaming"})]})]}),i.jsxs("section",{className:"mb-8",children:[i.jsxs("h2",{className:"text-xl font-bold text-rose-500 mb-4 flex items-center gap-2",children:[i.jsx("span",{className:"bg-rose-100 text-rose-700 px-2 py-1 rounded-full text-xs font-bold",children:"4"})," Appropriate Content Only"]}),i.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700 ml-4 text-sm",children:[i.jsx("li",{children:"No explicit or pornographic content."}),i.jsx("li",{children:"No violent or disturbing material."}),i.jsx("li",{children:"No promotion of illegal activities."})]})]}),i.jsxs("section",{className:"mb-8",children:[i.jsxs("h2",{className:"text-xl font-bold text-rose-500 mb-4 flex items-center gap-2",children:[i.jsx("span",{className:"bg-rose-100 text-rose-700 px-2 py-1 rounded-full text-xs font-bold",children:"5"})," Faith & Values"]}),i.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700 ml-4 text-sm",children:[i.jsx("li",{children:"Sacredheart welcomes people seeking meaningful connections grounded in values."}),i.jsx("li",{children:"Disrespect toward faith or personal beliefs is not allowed."})]})]}),i.jsxs("section",{className:"mb-8",children:[i.jsxs("h2",{className:"text-xl font-bold text-rose-500 mb-4 flex items-center gap-2",children:[i.jsx("span",{className:"bg-rose-100 text-rose-700 px-2 py-1 rounded-full text-xs font-bold",children:"6"})," Reporting & Enforcement"]}),i.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700 ml-4 text-sm",children:[i.jsx("li",{children:"Users may report violations."}),i.jsx("li",{children:"We review reports seriously and take appropriate action."}),i.jsx("li",{children:"Violations may result in warnings, suspension, or permanent removal."})]})]}),i.jsx("div",{className:"text-center mt-6",children:i.jsx("p",{className:"text-[10px] sm:text-xs text-gray-300 tracking-wide drop-shadow-sm",children:" 2026 SacredHearts. All rights reserved."})})]})]})]}),m2=({onVerify:n,phone:r,onBack:a,loading:o})=>{const[u,d]=S.useState(""),[f,m]=S.useState(!1),p=x=>{x.preventDefault(),m(!0),n(u)};return i.jsxs("div",{style:{fontFamily:"Montserrat, sans-serif"},className:"relative min-h-screen w-full overflow-hidden flex items-center justify-center",children:[i.jsxs("div",{className:"absolute inset-0 -z-10 h-full w-full",children:[i.jsx("img",{src:nl,className:"w-full h-full object-cover",alt:"Background"}),i.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm"})]}),i.jsxs("div",{className:"relative z-10 w-full max-w-md mx-4 bg-white/10 backdrop-blur-xl border border-white/20 rounded-3xl shadow-2xl p-8 text-center",children:[i.jsxs("button",{onClick:a,className:"absolute -top-12 left-0 text-white hover:text-rose-200 transition flex items-center gap-2",children:[i.jsx(Vr,{size:20})," Back"]}),i.jsxs("div",{className:"mb-8",children:[i.jsx("img",{src:Gr,alt:"SacredHearts",className:"h-16 w-auto object-contain drop-shadow-2xl mb-4 mx-auto"}),i.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Verify Number"}),i.jsxs("p",{className:"text-sm text-white/80 leading-relaxed",children:["We sent a 6-digit code to ",i.jsx("br",{}),i.jsx("span",{className:"font-bold text-rose-300",children:r})]})]}),i.jsxs("form",{onSubmit:p,className:"space-y-6",children:[i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute left-4 top-3.5 text-white/50",children:i.jsx(u_,{size:24,strokeWidth:1.5})}),i.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",maxLength:"6",placeholder:"000000",required:!0,className:"w-full p-4 pl-14 pr-4 border border-white/20 bg-white/10 text-white placeholder-white/30 rounded-2xl text-2xl font-bold tracking-widest focus:ring-2 focus:ring-rose-500 focus:bg-white/20 outline-none transition text-center",value:u,onChange:x=>d(x.target.value.replace(/\D/g,""))})]}),i.jsx("button",{type:"submit",disabled:o||f||u.length!==6,className:"w-full bg-rose-600 text-white font-bold py-4 rounded-xl shadow-lg hover:bg-rose-700 active:scale-[0.98] transition-all duration-200",children:o||f?"Verifying...":"Verify & Continue"}),i.jsxs("p",{className:"text-xs text-white/60",children:["Didn't receive code?"," ",i.jsx("span",{className:"text-rose-300 font-bold cursor-pointer hover:text-rose-200 underline",children:"Resend"})]})]}),i.jsxs("div",{className:"mt-8 flex items-start gap-2 bg-white/5 p-3 rounded-lg",children:[i.jsx(Dn,{size:16,className:"text-rose-300 mt-0.5 shrink-0"}),i.jsx("p",{className:"text-[10px] text-white/60 text-left leading-tight",children:"Please ensure you are entering the correct code sent via SMS. It expires in 5 minutes."})]})]})]})},jg=({onResetRequest:n,onBack:r,loading:a})=>{const[o,u]=S.useState(""),[d,f]=S.useState(!1),m=p=>{p.preventDefault(),o&&(f(!0),n(o))};return i.jsxs("div",{style:{fontFamily:"Montserrat, sans-serif"},className:"relative min-h-screen w-full overflow-hidden flex items-center justify-center",children:[i.jsxs("div",{className:"absolute inset-0 -z-10 h-full w-full",children:[i.jsx("img",{src:nl,className:"w-full h-full object-cover",alt:"Background"}),i.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm"})]}),i.jsxs("div",{className:"relative z-10 w-full max-w-md mx-4 bg-white/10 backdrop-blur-xl border border-white/20 rounded-3xl shadow-2xl p-6 sm:p-8",children:[i.jsxs("button",{onClick:r,className:"absolute -top-12 left-0 text-white hover:text-rose-200 transition flex items-center gap-2",children:[i.jsx(Vr,{size:20})," Back"]}),i.jsxs("div",{className:"flex flex-col items-center mb-6",children:[i.jsx("img",{src:Gr,alt:"SacredHearts Logo",className:"h-16 w-auto object-contain drop-shadow-2xl mb-4"}),i.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-white text-center leading-tight",children:d?"Check Your Email":"Forgot Password?"})]}),d?i.jsxs("div",{className:"text-center space-y-4",children:[i.jsx("div",{className:"w-20 h-20 bg-green-500/20 rounded-full flex items-center justify-center mx-auto border-2 border-green-500/40",children:i.jsx(Dn,{size:42,className:"text-green-400 drop-shadow-lg"})}),i.jsxs("p",{className:"text-sm text-white/90 leading-relaxed",children:["If an account exists for ",i.jsx("span",{className:"font-bold text-rose-300",children:o}),",",i.jsx("br",{}),"you will receive a reset link shortly."]}),i.jsx("button",{onClick:r,className:"w-full bg-white text-rose-600 font-bold py-3.5 rounded-xl shadow-lg hover:bg-gray-100 active:scale-[0.98] transition-all duration-200",children:"Back to Login"})]}):i.jsxs("form",{onSubmit:m,className:"space-y-4",children:[i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute left-3 top-3.5 text-white/60",children:i.jsx(Wa,{size:18,strokeWidth:1.5})}),i.jsx("input",{type:"email",placeholder:"Enter your Email",required:!0,className:"w-full p-3 pl-10 border border-white/20 bg-white/10 text-white placeholder-white/50 rounded-xl focus:ring-2 focus:ring-rose-500 focus:bg-white/20 outline-none transition",value:o,onChange:p=>u(p.target.value)})]}),i.jsxs("button",{type:"submit",disabled:a,className:"w-full bg-rose-600 text-white font-bold py-3.5 rounded-xl shadow-lg hover:bg-rose-700 active:scale-[0.98] transition-all duration-200 flex items-center justify-center gap-2",children:[i.jsx(o_,{size:18})," ",a?"Sending...":"Send Reset Link"]})]})]})]})},p2=({onUpdatePassword:n,onBack:r,loading:a})=>{const[o,u]=S.useState(""),[d,f]=S.useState(""),[m,p]=S.useState(!1),[x,w]=S.useState(!1),N=E=>{E.preventDefault(),!(!o||!d)&&o===d&&n(o)};return i.jsxs("div",{style:{fontFamily:"Montserrat, sans-serif"},className:"relative min-h-screen w-full overflow-hidden flex items-center justify-center",children:[i.jsxs("div",{className:"absolute inset-0 -z-10 h-full w-full",children:[i.jsx("img",{src:nl,className:"w-full h-full object-cover",alt:"Background"}),i.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm"})]}),i.jsxs("div",{className:"relative z-10 w-full max-w-md mx-4 bg-white/10 backdrop-blur-xl border border-white/20 rounded-3xl shadow-2xl p-6 sm:p-8",children:[i.jsxs("button",{onClick:r,className:"absolute -top-12 left-0 text-white hover:text-rose-200 transition flex items-center gap-2",children:[i.jsx(Vr,{size:20})," Back"]}),i.jsxs("div",{className:"flex flex-col items-center mb-6",children:[i.jsx("img",{src:Gr,alt:"SacredHearts Logo",className:"h-16 w-auto object-contain drop-shadow-2xl mb-4"}),i.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-white text-center leading-tight",children:"Set New Password"}),i.jsx("p",{className:"text-sm text-white/70 text-center mt-2",children:"Enter your new password below"})]}),i.jsxs("form",{onSubmit:N,className:"space-y-4",children:[i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute left-3 top-3.5 text-white/60",children:i.jsx(Qt,{size:18,strokeWidth:1.5})}),i.jsx("input",{type:m?"text":"password",placeholder:"New Password",required:!0,className:"w-full p-3 pl-10 pr-10 border border-white/20 bg-white/10 text-white placeholder-white/50 rounded-xl focus:ring-2 focus:ring-rose-500 focus:bg-white/20 outline-none transition",value:o,onChange:E=>u(E.target.value)}),i.jsx("button",{type:"button",onClick:()=>p(!m),className:"absolute right-3 top-3.5 text-white/60 hover:text-white transition",children:m?i.jsx(Ka,{size:18}):i.jsx(mr,{size:18})})]}),i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute left-3 top-3.5 text-white/60",children:i.jsx(Qt,{size:18,strokeWidth:1.5})}),i.jsx("input",{type:x?"text":"password",placeholder:"Confirm Password",required:!0,className:"w-full p-3 pl-10 pr-10 border border-white/20 bg-white/10 text-white placeholder-white/50 rounded-xl focus:ring-2 focus:ring-rose-500 focus:bg-white/20 outline-none transition",value:d,onChange:E=>f(E.target.value)}),i.jsx("button",{type:"button",onClick:()=>w(!x),className:"absolute right-3 top-3.5 text-white/60 hover:text-white transition",children:x?i.jsx(Ka,{size:18}):i.jsx(mr,{size:18})})]}),i.jsxs("button",{type:"submit",disabled:a||o!==d,className:"w-full bg-rose-600 text-white font-bold py-3.5 rounded-xl shadow-lg hover:bg-rose-700 active:scale-[0.98] transition-all duration-200 flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[i.jsx(Qt,{size:18})," ",a?"Updating...":"Update Password"]}),o&&d&&o!==d&&i.jsx("p",{className:"text-xs text-red-300 text-center",children:"Passwords do not match"})]})]})]})},hf=3,fx=30,g2=/^[a-zA-Z0-9_]+$/;function Sg(n){return n.trim().toLowerCase().replace(/\s+/g,"")}function Ng(n){return!n||n.length<hf||n.length>fx?!1:g2.test(n)}const x2=({fullName:n,onSubmit:r,loading:a})=>{const[o,u]=S.useState(""),[d,f]=S.useState(null),m=S.useRef(null),p=S.useCallback(async E=>{const A=Sg(E);if(!A){f(null);return}if(!Ng(A)){f("invalid");return}f("checking");try{const{data:$,error:D}=await U.from("profiles").select("id").eq("username",A).maybeSingle();if(D){f(null);return}f($?"taken":"available")}catch{f(null)}},[]);S.useEffect(()=>{if(m.current&&clearTimeout(m.current),!o.trim()){f(null);return}return m.current=setTimeout(()=>p(o),400),()=>{m.current&&clearTimeout(m.current)}},[o,p]);const x=E=>{const A=E.target.value;A.length>fx||u(A)},w=E=>{E.preventDefault();const A=Sg(o);A&&Ng(A)&&d==="available"&&r(A)},N=d==="available"&&!a;return i.jsxs("div",{style:{fontFamily:"Montserrat, sans-serif"},className:"relative min-h-screen w-full overflow-hidden flex items-center justify-center",children:[i.jsxs("div",{className:"absolute inset-0 -z-10 h-full w-full",children:[i.jsx("img",{src:hx,className:"w-full h-full object-cover",alt:""}),i.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm"})]}),i.jsxs("div",{className:"relative z-10 w-full max-w-md mx-4 bg-white/10 backdrop-blur-xl border border-white/20 rounded-3xl shadow-2xl p-6 sm:p-8",children:[i.jsxs("div",{className:"flex flex-col items-center mb-6",children:[i.jsx("img",{src:Gr,alt:"SacredHearts",className:"h-14 w-auto object-contain drop-shadow-2xl mb-4"}),i.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-white text-center mb-2",children:"Choose your username"}),n&&i.jsxs("p",{className:"text-white/80 text-center",children:["Hi, ",i.jsx("span",{className:"font-semibold text-rose-200",children:n}),"! Pick a unique username to sign in with."]}),i.jsx("p",{className:"text-xs text-white/60 mt-2 text-center",children:"330 characters, letters, numbers, and underscores only."})]}),i.jsxs("form",{onSubmit:w,className:"space-y-4",children:[i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute left-3 top-3.5 text-white/60",children:i.jsx(Ln,{size:18,strokeWidth:1.5})}),i.jsx("input",{type:"text",placeholder:"e.g. john_doe_42",autoComplete:"username",className:"w-full p-3 pl-10 pr-12 border border-white/20 bg-white/10 text-white placeholder-white/50 rounded-xl focus:ring-2 focus:ring-rose-500 focus:bg-white/20 outline-none transition",value:o,onChange:x,disabled:a}),i.jsxs("div",{className:"absolute right-3 top-3.5 flex items-center justify-center w-6",children:[d==="checking"&&i.jsx(h_,{size:20,className:"text-white/60 animate-spin"}),d==="available"&&i.jsx(Ir,{size:22,className:"text-emerald-400",strokeWidth:2.5}),d==="taken"&&i.jsx(xu,{size:20,className:"text-rose-400"}),d==="invalid"&&o.length>=hf&&i.jsx(xu,{size:20,className:"text-amber-400"})]})]}),d==="taken"&&i.jsxs("p",{className:"text-sm text-rose-300 font-medium flex items-center gap-2",children:[i.jsx(xu,{size:16}),"Username taken. Try another."]}),d==="invalid"&&o.length>=hf&&i.jsxs("p",{className:"text-sm text-amber-300 font-medium flex items-center gap-2",children:[i.jsx(xu,{size:16}),"Use 330 letters, numbers, and underscores only."]}),d==="available"&&i.jsxs("p",{className:"text-sm text-emerald-300 font-medium flex items-center gap-2",children:[i.jsx(Ir,{size:16}),"Username available."]}),i.jsx("button",{type:"submit",disabled:!N,className:"w-full bg-rose-600 text-white font-bold py-3.5 rounded-xl shadow-lg hover:bg-rose-700 active:scale-[0.98] transition-all disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-rose-600",children:a?"Saving...":"Continue"})]})]})]})},v2=({onLogin:n,loading:r})=>{const[a,o]=S.useState(""),[u,d]=S.useState(""),[f,m]=S.useState(!1),[p,x]=S.useState(""),w=async N=>{if(N.preventDefault(),x(""),!a||!u){x("Please enter both email and password");return}n(a,u)};return i.jsxs("div",{style:{fontFamily:"Montserrat, sans-serif"},className:"relative min-h-screen w-full overflow-hidden flex items-center justify-center",children:[i.jsxs("div",{className:"absolute inset-0 -z-10 h-full w-full",children:[i.jsx("img",{src:nl,className:"w-full h-full object-cover",alt:"Background"}),i.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm"})]}),i.jsxs("div",{className:"relative z-10 w-full max-w-md mx-4 bg-white/10 backdrop-blur-xl border border-white/20 rounded-3xl shadow-2xl p-8",children:[i.jsxs("div",{className:"flex flex-col items-center mb-8",children:[i.jsx("div",{className:"mb-4 p-3 bg-rose-600/20 rounded-full",children:i.jsx(lf,{size:32,className:"text-rose-400"})}),i.jsx("img",{src:Gr,alt:"SacredHearts Logo",className:"h-12 w-auto object-contain drop-shadow-2xl mb-2"}),i.jsx("h2",{className:"text-2xl font-bold text-white text-center",children:"Admin Portal"}),i.jsx("p",{className:"text-sm text-white/70 text-center mt-2",children:"Secure Administrator Access"})]}),p&&i.jsx("div",{className:"mb-4 p-3 bg-red-500/20 border border-red-500/50 rounded-xl text-red-200 text-sm text-center",children:p}),i.jsxs("form",{onSubmit:w,className:"space-y-4",children:[i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute left-3 top-3.5 text-white/60",children:i.jsx(Wa,{size:18,strokeWidth:1.5})}),i.jsx("input",{type:"email",placeholder:"Admin Email",required:!0,className:"w-full p-3 pl-10 border border-white/20 bg-white/10 text-white placeholder-white/50 rounded-xl focus:ring-2 focus:ring-rose-500 focus:bg-white/20 outline-none transition",value:a,onChange:N=>{o(N.target.value),x("")}})]}),i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute left-3 top-3.5 text-white/60",children:i.jsx(Qt,{size:18,strokeWidth:1.5})}),i.jsx("input",{type:f?"text":"password",placeholder:"Password",required:!0,className:"w-full p-3 pl-10 pr-10 border border-white/20 bg-white/10 text-white placeholder-white/50 rounded-xl focus:ring-2 focus:ring-rose-500 focus:bg-white/20 outline-none transition",value:u,onChange:N=>{d(N.target.value),x("")}}),i.jsx("button",{type:"button",onClick:()=>m(!f),className:"absolute right-3 top-3.5 text-white/60 hover:text-white transition",children:f?i.jsx(Ka,{size:18}):i.jsx(mr,{size:18})})]}),i.jsxs("button",{type:"submit",disabled:r,className:"w-full bg-rose-600 text-white font-bold py-3.5 rounded-xl shadow-lg hover:bg-rose-700 active:scale-[0.98] transition-all duration-200 flex items-center justify-center gap-2 disabled:opacity-50",children:[i.jsx(lf,{size:18})," ",r?"Authenticating...":"Login to Admin Panel"]})]}),i.jsx("p",{className:"text-xs text-white/40 text-center mt-6",children:" Authorized Personnel Only"})]})]})},y2=({adminUser:n,onLogout:r})=>{const[a,o]=S.useState(null),[u,d]=S.useState(!0),[f,m]=S.useState("overview");S.useEffect(()=>{p();const w=setInterval(p,3e4);return()=>clearInterval(w)},[]);const p=async()=>{try{const{data:w}=await U.from("deleted_accounts").select("user_id"),N=new Set((w||[]).map(R=>R.user_id)),{data:E}=await U.from("profiles").select("id").eq("is_deactivated",!0),A=new Set((E||[]).map(R=>R.id)),[{data:$,count:D},{data:k},{data:H},{data:P},{data:q},{count:K},{count:ie},{count:X},{count:F},{count:fe},{count:ve},{count:Se},{count:Re}]=await Promise.all([U.from("profiles").select("id",{count:"exact"}),U.from("profiles").select("id").gte("updated_at",new Date().toISOString().split("T")[0]),U.from("profiles").select("id").gte("updated_at",new Date(Date.now()-10080*60*1e3).toISOString()),U.from("profiles").select("id").eq("is_banned",!0),U.from("profiles").select("id").eq("is_frozen",!0),U.from("login_attempts").select("*",{count:"exact",head:!0}).eq("is_locked",!0),U.from("deleted_accounts").select("*",{count:"exact",head:!0}),U.from("profiles").select("*",{count:"exact",head:!0}).eq("is_deactivated",!0),U.from("reports").select("*",{count:"exact",head:!0}).eq("status","pending"),U.from("premium_requests").select("*",{count:"exact",head:!0}).eq("status","pending"),U.from("premium_requests").select("*",{count:"exact",head:!0}).eq("status","pending").eq("request_type","profile_boost"),U.from("matches").select("*",{count:"exact",head:!0}),U.from("messages").select("*",{count:"exact",head:!0})]),Oe=($||[]).filter(R=>!N.has(R.id)&&!A.has(R.id)).length,ut=(k||[]).filter(R=>!N.has(R.id)&&!A.has(R.id)).length,lt=(H||[]).filter(R=>!N.has(R.id)&&!A.has(R.id)).length,at=(P||[]).filter(R=>!N.has(R.id)&&!A.has(R.id)).length,I=(q||[]).filter(R=>!N.has(R.id)&&!A.has(R.id)).length;o({totalUsers:Oe||0,newUsersToday:ut||0,newUsersWeek:lt||0,bannedUsers:at||0,frozenUsers:I||0,lockedUsers:K||0,deletedUsers:ie||0,deactivatedUsers:X||0,pendingReports:F||0,pendingPremium:fe||0,profileBoostRequests:ve||0,totalMatches:Se||0,totalMessages:Re||0})}catch(w){console.error("Error fetching stats:",w)}finally{d(!1)}},x=({icon:w,title:N,value:E,subtitle:A,color:$="rose"})=>i.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-6 hover:bg-white/10 transition",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("div",{className:`p-3 bg-${$}-600/20 rounded-xl`,children:i.jsx(w,{size:24,className:`text-${$}-400`})}),E!==null&&i.jsx("span",{className:"text-3xl font-bold text-white",children:E.toLocaleString()})]}),i.jsx("h3",{className:"text-white/80 font-medium mb-1",children:N}),A&&i.jsx("p",{className:"text-xs text-white/50",children:A})]});return u?i.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:i.jsx("div",{className:"text-white",children:"Loading dashboard..."})}):i.jsxs("div",{className:"min-h-screen bg-gray-900 text-white",children:[i.jsx("div",{className:"bg-gray-800 border-b border-gray-700 px-6 py-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-2",children:[i.jsx(lf,{size:28,className:"text-rose-400"}),"Admin Dashboard"]}),i.jsxs("p",{className:"text-sm text-gray-400 mt-1",children:["Welcome back, ",n?.full_name||n?.email]})]}),i.jsx("button",{onClick:r,className:"px-4 py-2 bg-red-600 hover:bg-red-700 rounded-lg transition",children:"Logout"})]})}),i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 mb-6",children:[i.jsx(x,{icon:of,title:"Total Users",value:a?.totalUsers,subtitle:"All registered users",color:"blue"}),i.jsx(x,{icon:ng,title:"New Users Today",value:a?.newUsersToday,subtitle:"Registered today",color:"green"}),i.jsx(x,{icon:ng,title:"New This Week",value:a?.newUsersWeek,subtitle:"Last 7 days",color:"green"}),i.jsx(x,{icon:As,title:"Pending Reports",value:a?.pendingReports,subtitle:"Requires attention",color:"red"}),i.jsx(x,{icon:rl,title:"Premium Requests",value:a?.pendingPremium,subtitle:"Awaiting approval",color:"yellow"}),i.jsx(x,{icon:Vg,title:"Banned Users",value:a?.bannedUsers,subtitle:"Currently banned",color:"red"}),i.jsx(x,{icon:sg,title:"Frozen Users",value:a?.frozenUsers,subtitle:"Temporarily frozen",color:"orange"}),i.jsx(x,{icon:Qt,title:"Locked Accounts",value:a?.lockedUsers,subtitle:"Need to be unlocked",color:"purple"}),i.jsx(x,{icon:wf,title:"Deleted Accounts",value:a?.deletedUsers,subtitle:"Permanently locked",color:"red"}),i.jsx(x,{icon:As,title:"Deactivated Accounts",value:a?.deactivatedUsers,subtitle:"Temporarily inactive",color:"orange"}),i.jsx(x,{icon:rl,title:"Profile Boost Requests",value:a?.profileBoostRequests,subtitle:"Awaiting approval",color:"yellow"}),i.jsx(x,{icon:Eu,title:"Total Messages",value:a?.totalMessages,subtitle:"All time messages",color:"blue"})]}),i.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-6 mb-6",children:[i.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[i.jsx(rl,{size:20,className:"text-yellow-400"}),"Quick Actions"]}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[i.jsxs("button",{onClick:()=>m("users"),className:"p-4 bg-blue-600/20 hover:bg-blue-600/30 border border-blue-500/50 rounded-xl transition text-left",children:[i.jsx(of,{size:20,className:"text-blue-400 mb-2"}),i.jsx("div",{className:"text-sm font-medium",children:"Manage Users"})]}),i.jsxs("button",{onClick:()=>m("reports"),className:"p-4 bg-red-600/20 hover:bg-red-600/30 border border-red-500/50 rounded-xl transition text-left",children:[i.jsx(As,{size:20,className:"text-red-400 mb-2"}),i.jsx("div",{className:"text-sm font-medium",children:"View Reports"})]}),i.jsxs("button",{onClick:()=>m("premium"),className:"p-4 bg-yellow-600/20 hover:bg-yellow-600/30 border border-yellow-500/50 rounded-xl transition text-left",children:[i.jsx(rl,{size:20,className:"text-yellow-400 mb-2"}),i.jsx("div",{className:"text-sm font-medium",children:"Premium Requests"})]}),i.jsxs("button",{onClick:()=>m("logs"),className:"p-4 bg-gray-600/20 hover:bg-gray-600/30 border border-gray-500/50 rounded-xl transition text-left",children:[i.jsx(sg,{size:20,className:"text-gray-400 mb-2"}),i.jsx("div",{className:"text-sm font-medium",children:"Activity Logs"})]})]})]}),i.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-6",children:[i.jsx("h2",{className:"text-xl font-bold mb-4",children:"Recent Activity"}),i.jsx("p",{className:"text-gray-400 text-sm",children:"Activity logs will appear here..."})]})]})]})},b2=({adminUser:n,onAction:r})=>{const[a,o]=S.useState([]),[u,d]=S.useState(!0),[f,m]=S.useState(""),[p,x]=S.useState("all"),[w,N]=S.useState(null),[E,A]=S.useState(!1),[$,D]=S.useState(!1),[k,H]=S.useState(null),[P,q]=S.useState(!1),[K,ie]=S.useState(null),[X,F]=S.useState(""),[fe,ve]=S.useState(null),Se=(R,le="success")=>{ve({message:R,type:le}),setTimeout(()=>ve(null),3e3)};S.useEffect(()=>{Re()},[p]);const Re=async()=>{d(!0);try{let R=null;if(p==="deleted"){let _e=null;try{const{data:me,error:y}=await U.rpc("get_all_deleted_accounts_for_admin");!y&&me&&(_e=me)}catch(me){console.warn("Function not available, trying direct query:",me)}if(!_e){const{data:me,error:y}=await U.from("deleted_accounts").select("*").order("deleted_at",{ascending:!1}).limit(500);if(y)throw console.error("Error fetching deleted accounts:",y),Se("Error loading deleted accounts: "+y.message,"error"),y;_e=me}R=(_e||[]).map(me=>({id:me.user_id,full_name:me.full_name||"Unknown",email:me.email||"N/A",phone:me.phone||"N/A",is_deleted:!0,deletion_reason:me.deletion_reason,deleted_at:me.deleted_at,can_rejoin:me.can_rejoin}))}else if(p==="inactive"){let _e=U.from("profiles").select("*").or("is_banned.eq.true,is_frozen.eq.true,is_deactivated.eq.true").order("updated_at",{ascending:!1}).limit(500);const{data:me,error:y}=await _e;if(y)throw console.error("Error fetching inactive accounts:",y),Se("Error loading inactive accounts: "+y.message,"error"),y;const{data:T}=await U.from("login_attempts").select("email, is_locked, locked_until").eq("is_locked",!0),J=new Map;(T||[]).forEach(pe=>{J.set(pe.email,{is_locked:!0,locked_until:pe.locked_until})}),R=(me||[]).map(pe=>{const de=pe.email?J.get(pe.email):null;return{...pe,email:"N/A",is_locked:de?.is_locked||!1,locked_until:de?.locked_until||null}});const te=Array.from(J.keys()),ue=(me||[]).filter(pe=>te.includes(pe.email))}else if(p==="deactivated"){const{data:_e,error:me}=await U.from("profiles").select("*").eq("is_deactivated",!0).order("deactivated_at",{ascending:!1}).limit(500);if(me)throw console.error("Error fetching deactivated accounts:",me),Se("Error loading deactivated accounts: "+me.message,"error"),me;R=(_e||[]).map(y=>({...y,email:"N/A",is_deactivated:!0,deactivation_reason:y.deactivation_reason,deactivated_at:y.deactivated_at}))}else{let _e=U.from("profiles").select("*").order("updated_at",{ascending:!1}).limit(500);const{data:me}=await U.from("deleted_accounts").select("user_id"),y=new Set((me||[]).map(de=>de.user_id));p==="banned"?_e=_e.eq("is_banned",!0):p==="frozen"?_e=_e.eq("is_frozen",!0):p==="active"&&(_e=_e.eq("is_banned",!1).eq("is_frozen",!1).eq("is_deactivated",!1));const{data:T,error:J}=await _e;if(J)throw console.error("Error fetching users:",J),Se("Error loading users: "+J.message,"error"),J;const{data:te}=await U.from("login_attempts").select("email, is_locked, locked_until").eq("is_locked",!0),ue=new Set((te||[]).map(de=>de.email)),pe=new Map((te||[]).map(de=>[de.email,{is_locked:!0,locked_until:de.locked_until}]));R=(T||[]).filter(de=>{if(y.has(de.id))return!1;if(p==="active")return!(de.is_banned||de.is_frozen||de.is_deactivated||de.email&&ue.has(de.email));if(p==="banned")return de.is_banned===!0;if(p==="frozen")return de.is_frozen===!0;if(p==="locked")return de.email&&ue.has(de.email);if(p==="inactive"){const He=de.email&&ue.has(de.email);return de.is_banned||de.is_frozen||de.is_deactivated||He}else if(p==="all")return!0;return!1}).map(de=>{const He=de.email?pe.get(de.email):null,Ue=He?.is_locked||!1,Zt=He?.locked_until||null;return{...de,email:de.email||"N/A",is_locked:Ue,locked_until:Zt}})}R||(console.warn("No users data fetched, defaulting to empty array"),R=[]);let le=R;console.log("Fetched users:",le?.length||0,"users"),o(le)}catch(R){console.error("Error fetching users:",R),Se("Error: "+R.message,"error")}finally{d(!1)}},Oe=async(R,le)=>{ie(R),N(a.find(_e=>_e.id===le)),A(!0)},ut=async()=>{if(!w||!X.trim()&&K!=="unlock"&&K!=="verify"&&K!=="unverify"&&K!=="reactivate"){Se("Please provide a reason for this action","error");return}try{let R={};if(K==="ban")R={is_banned:!0,ban_reason:X,banned_at:new Date().toISOString(),banned_by:n.id};else if(K==="unban")R={is_banned:!1,ban_reason:null,banned_at:null};else if(K==="freeze"){const me=new Date;me.setDate(me.getDate()+7),R={is_frozen:!0,frozen_until:me.toISOString()}}else if(K==="unfreeze")R={is_frozen:!1,frozen_until:null};else if(K==="reactivate")R={is_deactivated:!1,deactivated_at:null,deactivation_reason:null,show_in_discovery:!0};else if(K==="verify")R={is_verified:!0};else if(K==="unverify")R={is_verified:!1};else if(K==="unlock")try{try{const{data:y,error:T}=await U.rpc("unlock_user_account",{user_uuid:w.id});if(T)console.warn("Unlock function not available, trying fallback:",T);else{await lt("user_unlock",w.id,{reason:X||"Admin unlock"}),Se("Account unlocked successfully","success"),Re(),A(!1),F("");return}}catch(y){console.warn("Unlock function error:",y)}let me=w?.email||k?.email;if(!me||me==="N/A")try{const{data:y}=await U.rpc("get_user_profile_for_admin",{user_uuid:w.id});y&&y.length>0&&y[0].email&&y[0].email!=="N/A"&&(me=y[0].email)}catch(y){console.warn("Could not get email from function:",y)}if(me&&me!=="N/A"){const{error:y}=await U.from("login_attempts").delete().eq("email",me).eq("is_locked",!0);if(y){console.warn("Delete failed, trying update:",y);const{error:T}=await U.from("login_attempts").update({is_locked:!1,locked_until:null,attempt_count:0,updated_at:new Date().toISOString()}).eq("email",me).eq("is_locked",!0);if(T)throw T}await lt("user_unlock",w.id,{reason:X||"Admin unlock"}),Se("Account unlocked successfully","success")}else throw Se("Could not find user email. Please ensure the SQL function is installed.","error"),new Error("User email not found");Re(),A(!1),F("");return}catch(me){throw console.error("Unlock error:",me),Se(`Failed to unlock account: ${me.message}`,"error"),me}else if(K==="delete")try{const{data:me}=await U.from("profiles").select("id").eq("id",w.id).single();if(me){try{await U.from("matches").delete().or(`user_a_id.eq.${w.id},user_b_id.eq.${w.id}`),await U.from("likes").delete().or(`liker_id.eq.${w.id},liked_id.eq.${w.id}`),await U.from("messages").delete().or(`sender_id.eq.${w.id},recipient_id.eq.${w.id}`),await U.from("reports").delete().or(`reporter_id.eq.${w.id},reported_user_id.eq.${w.id}`),await U.from("stories").delete().eq("user_id",w.id),await U.from("story_views").delete().eq("viewer_id",w.id),await U.from("profile_visitors").delete().or(`viewer_id.eq.${w.id},profile_id.eq.${w.id}`),await U.from("discovery_exclusions").delete().or(`user_id.eq.${w.id},excluded_user_id.eq.${w.id}`),await U.from("premium_requests").delete().eq("user_id",w.id),w.email&&await U.from("login_attempts").delete().eq("email",w.email)}catch(J){console.warn("Some cleanup operations failed:",J.message)}const{error:T}=await U.from("profiles").delete().eq("id",w.id);T&&console.warn("Profile deletion warning (may already be deleted):",T.message)}else console.log("Profile does not exist, proceeding with auth cleanup only");let y=!1;try{const{data:T,error:J}=await U.rpc("delete_user_completely",{user_id_param:w.id});!J&&T&&T.success!==!1?y=!0:J&&console.warn("Function error (may not exist or need manual SQL):",J.message)}catch(T){console.warn("RPC function failed (expected):",T.message)}if(await lt("user_delete",w.id,{reason:X}),y)Se("User deleted successfully from both profile and authentication.","success");else{const T=`-- Run this SQL in Supabase SQL Editor
DO $$
DECLARE
  user_uuid UUID := '${w.id}'::uuid;
BEGIN
  DELETE FROM likes WHERE liker_id = user_uuid OR liked_id = user_uuid;
  DELETE FROM matches WHERE user_a_id = user_uuid OR user_b_id = user_uuid;
  DELETE FROM messages WHERE sender_id = user_uuid OR recipient_id = user_uuid;
  DELETE FROM reports WHERE reporter_id = user_uuid OR reported_user_id = user_uuid;
  DELETE FROM stories WHERE user_id = user_uuid;
  DELETE FROM story_views WHERE viewer_id = user_uuid;
  DELETE FROM profile_visitors WHERE viewer_id = user_uuid OR profile_id = user_uuid;
  DELETE FROM discovery_exclusions WHERE user_id = user_uuid OR excluded_user_id = user_uuid;
  DELETE FROM premium_requests WHERE user_id = user_uuid;
  DELETE FROM profiles WHERE id = user_uuid;
  DELETE FROM auth.users WHERE id = user_uuid;
  RAISE NOTICE 'User deleted successfully';
END $$;`;Se("User profile and related data deleted. Run SQL in Supabase to complete deletion from Authentication.","warning")}Re(),A(!1);return}catch(me){throw console.error("Delete error:",me),new Error(`Failed to delete user: ${me.message}`)}const{error:le}=await U.from("profiles").update(R).eq("id",w.id);if(le)throw le;await lt(`user_${K}`,w.id,{reason:X});const _e=K==="unban"||K==="unfreeze"||K==="unverify"?`${K.replace("un","")}ned`:`${K}d`;Se(`User ${_e} successfully`,"success"),Re(),A(!1),F("")}catch(R){console.error("Error performing action:",R),Se("Error: "+R.message,"error")}},lt=async(R,le,_e)=>{try{await U.from("admin_logs").insert({admin_id:n.id,admin_email:n.email,action_type:R,target_type:"user",target_id:le,action_details:_e})}catch(me){console.error("Error logging action:",me)}},at=async R=>{q(!0),D(!0);try{let le=null;try{const{data:T,error:J}=await U.rpc("get_user_profile_for_admin",{user_uuid:R});!J&&T&&T.length>0&&(le=T[0])}catch(T){console.warn("Admin function not available, using direct query:",T)}if(!le){const{data:T}=await U.from("deleted_accounts").select("*").eq("user_id",R).single();if(T)le={id:T.user_id,full_name:T.full_name||"Unknown",email:T.email||"N/A",phone:T.phone||"N/A",is_deleted:!0,deletion_reason:T.deletion_reason,deleted_at:T.deleted_at,can_rejoin:T.can_rejoin};else{const{data:te,error:ue}=await U.from("profiles").select("*").eq("id",R).single();if(ue)throw ue;le=te}const{data:J}=await U.from("login_attempts").select("is_locked, locked_until").eq("is_locked",!0).limit(1);le.is_locked=J?.[0]?.is_locked||!1,le.locked_until=J?.[0]?.locked_until||null,le.email||(le.email="N/A")}if(!le.email||le.email==="N/A"){const T=w?.email;T&&T!=="N/A"?le.email=T:le.email="N/A"}le.phone||(le.phone="N/A"),w?.is_locked!==void 0&&(le.is_locked=w.is_locked,le.locked_until=w.locked_until);const[_e,me,y]=await Promise.all([U.from("matches").select("*",{count:"exact",head:!0}).or(`user_a_id.eq.${R},user_b_id.eq.${R}`),U.from("messages").select("*",{count:"exact",head:!0}).or(`sender_id.eq.${R},recipient_id.eq.${R}`),U.from("reports").select("*",{count:"exact",head:!0}).or(`reporter_id.eq.${R},reported_user_id.eq.${R}`)]);H({...le,stats:{matches:_e.count||0,messages:me.count||0,reports:y.count||0}})}catch(le){console.error("Error fetching user details:",le),Se("Error loading user details: "+le.message,"error")}finally{q(!1)}},I=a.filter(R=>{if(f){const le=f.toLowerCase();return R.full_name?.toLowerCase().includes(le)||R.username?.toLowerCase().includes(le)||R.email!=="N/A"&&R.email?.toLowerCase().includes(le)||R.city?.toLowerCase().includes(le)}return!0});return i.jsxs("div",{className:"p-6",children:[fe&&i.jsx("div",{className:`fixed top-4 right-4 z-50 px-6 py-3 rounded-lg shadow-lg text-white font-medium animate-fade-in-up ${fe.type==="success"?"bg-green-600":fe.type==="warning"?"bg-yellow-600":"bg-red-600"}`,children:fe.message}),i.jsxs("div",{className:"mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold mb-4",children:"User Management"}),i.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-4",children:[i.jsxs("div",{className:"flex-1 relative",children:[i.jsx(bf,{className:"absolute left-3 top-3.5 text-gray-400",size:18}),i.jsx("input",{type:"text",placeholder:"Search by name, username, email, or city...",value:f,onChange:R=>m(R.target.value),className:"w-full pl-10 pr-4 py-2 bg-white/5 border border-white/10 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-rose-500"})]}),i.jsxs("select",{value:p,onChange:R=>x(R.target.value),className:"px-4 py-2 bg-gray-800 border border-white/10 rounded-lg text-white focus:outline-none focus:border-rose-500 [&>option]:bg-gray-800 [&>option]:text-white",children:[i.jsx("option",{value:"all",children:"All Users"}),i.jsx("option",{value:"active",children:"Active"}),i.jsx("option",{value:"inactive",children:"Inactive"}),i.jsx("option",{value:"deactivated",children:"Deactivated"}),i.jsx("option",{value:"banned",children:"Banned Accounts"}),i.jsx("option",{value:"frozen",children:"Frozen Accounts"}),i.jsx("option",{value:"locked",children:"Locked Accounts"}),i.jsx("option",{value:"deleted",children:"Deleted Accounts"})]})]})]}),u?i.jsx("div",{className:"text-center py-12 text-gray-400",children:"Loading users..."}):i.jsx("div",{className:"bg-white/5 border border-white/10 rounded-xl overflow-hidden",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-white/5",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"User"}),i.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Email"}),i.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"City"}),i.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Status"}),(p==="deleted"||p==="deactivated")&&i.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:p==="deleted"?"Deletion Reason":"Deactivation Reason"}),i.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:p==="deleted"?"Deleted":p==="deactivated"?"Deactivated":"Joined"}),i.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Actions"})]})}),i.jsx("tbody",{className:"divide-y divide-white/10",children:I.map(R=>i.jsxs("tr",{className:"hover:bg-white/5 cursor-pointer",onClick:()=>at(R.id),children:[i.jsx("td",{className:"px-4 py-3",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("img",{src:R.avatar_url||`https://api.dicebear.com/7.x/avataaars/svg?seed=${R.full_name}`,alt:R.full_name,className:"w-10 h-10 rounded-full"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-white",children:R.full_name}),i.jsx("div",{className:"text-xs text-gray-400",children:R.gender})]})]})}),i.jsx("td",{className:"px-4 py-3 text-gray-300 text-sm font-mono",children:R.username||""}),i.jsx("td",{className:"px-4 py-3 text-gray-300 text-sm",children:R.email||"N/A"}),i.jsx("td",{className:"px-4 py-3 text-gray-300 text-sm",children:R.city||"N/A"}),i.jsx("td",{className:"px-4 py-3",children:i.jsx("div",{className:"flex flex-col gap-1",children:R.is_deleted?i.jsx("span",{className:"px-2 py-1 bg-red-500/20 text-red-400 rounded-full text-xs",children:"Deleted"}):R.is_banned||R.is_frozen||R.is_locked||R.is_deactivated?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"px-2 py-1 bg-orange-500/20 text-orange-400 rounded-full text-xs",children:"Inactive"}),R.is_banned&&i.jsx("span",{className:"px-2 py-1 bg-red-500/20 text-red-400 rounded-full text-xs",children:"Banned"}),R.is_frozen&&i.jsx("span",{className:"px-2 py-1 bg-orange-500/20 text-orange-400 rounded-full text-xs",children:"Frozen"}),R.is_locked&&i.jsxs("span",{className:"px-2 py-1 bg-purple-500/20 text-purple-400 rounded-full text-xs flex items-center gap-1",children:[i.jsx(Qt,{size:10})," Locked"]}),R.is_deactivated&&i.jsx("span",{className:"px-2 py-1 bg-orange-500/20 text-orange-400 rounded-full text-xs",children:"Deactivated"})]}):i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"px-2 py-1 bg-green-500/20 text-green-400 rounded-full text-xs",children:"Active"}),R.is_verified&&i.jsxs("span",{className:"px-2 py-1 bg-blue-500/20 text-blue-400 rounded-full text-xs flex items-center gap-1",children:[i.jsx(gu,{size:10})," Verified"]})]})})}),(p==="deleted"||p==="deactivated")&&i.jsx("td",{className:"px-4 py-3 text-gray-300 text-sm max-w-xs",children:i.jsx("div",{className:"truncate",title:p==="deleted"?R.deletion_reason||"No reason provided":R.deactivation_reason||"No reason provided",children:p==="deleted"?R.deletion_reason||"No reason provided":R.deactivation_reason||"No reason provided"})}),i.jsx("td",{className:"px-4 py-3 text-gray-300 text-sm",children:R.is_deleted?R.deleted_at?new Date(R.deleted_at).toLocaleDateString():"N/A":R.is_deactivated?R.deactivated_at?new Date(R.deactivated_at).toLocaleDateString():"N/A":R.updated_at?new Date(R.updated_at).toLocaleDateString():"N/A"}),i.jsx("td",{className:"px-4 py-3",children:i.jsx("div",{className:"flex items-center gap-2",onClick:le=>le.stopPropagation(),children:!R.is_deleted&&i.jsx(i.Fragment,{children:R.is_deactivated?i.jsx("button",{onClick:()=>Oe("reactivate",R.id),className:"p-2 rounded-lg bg-green-600/20 text-green-400 hover:bg-green-600/30 transition",title:"Reactivate Account",children:i.jsx(Dn,{size:16})}):i.jsxs(i.Fragment,{children:[R.is_locked&&i.jsx("button",{onClick:()=>Oe("unlock",R.id),className:"p-2 rounded-lg bg-purple-600/20 text-purple-400 hover:bg-purple-600/30 transition",title:"Unlock Account",children:i.jsx(m_,{size:16})}),i.jsx("button",{onClick:()=>Oe(R.is_verified?"unverify":"verify",R.id),className:`p-2 rounded-lg transition ${R.is_verified?"bg-blue-600/20 text-blue-400 hover:bg-blue-600/30":"bg-gray-600/20 text-gray-400 hover:bg-gray-600/30"}`,title:R.is_verified?"Unverify Account":"Verify Account",children:i.jsx(gu,{size:16})}),i.jsx("button",{onClick:()=>Oe(R.is_banned?"unban":"ban",R.id),className:`p-2 rounded-lg transition ${R.is_banned?"bg-green-600/20 text-green-400 hover:bg-green-600/30":"bg-red-600/20 text-red-400 hover:bg-red-600/30"}`,title:R.is_banned?"Unban User":"Ban User",children:i.jsx(Vg,{size:16})}),i.jsx("button",{onClick:()=>Oe(R.is_frozen?"unfreeze":"freeze",R.id),className:`p-2 rounded-lg transition ${R.is_frozen?"bg-green-600/20 text-green-400 hover:bg-green-600/30":"bg-orange-600/20 text-orange-400 hover:bg-orange-600/30"}`,title:R.is_frozen?"Unfreeze User":"Freeze User",children:i.jsx(Qt,{size:16})}),i.jsx("button",{onClick:()=>Oe("delete",R.id),className:"p-2 rounded-lg bg-red-600/20 text-red-400 hover:bg-red-600/30 transition",title:"Delete User",children:i.jsx(wf,{size:16})})]})})})})]},R.id))})]})})}),E&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-gray-800 rounded-2xl p-6 max-w-md w-full border border-gray-700",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("h3",{className:"text-xl font-bold text-white",children:[K==="ban"&&"Ban User",K==="unban"&&"Unban User",K==="freeze"&&"Freeze User",K==="unfreeze"&&"Unfreeze User",K==="verify"&&"Verify Account",K==="unverify"&&"Unverify Account",K==="unlock"&&"Unlock Account",K==="delete"&&"Delete User"]}),i.jsx("button",{onClick:()=>A(!1),className:"text-gray-400 hover:text-white",children:i.jsx(Cr,{size:20})})]}),w&&i.jsxs("div",{className:"mb-4 p-3 bg-white/5 rounded-lg",children:[i.jsx("div",{className:"font-medium text-white",children:w.full_name}),i.jsx("div",{className:"text-sm text-gray-400",children:w.email})]}),i.jsxs("div",{className:"mb-4",children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Reason for ",K]}),i.jsx("textarea",{value:X,onChange:R=>F(R.target.value),placeholder:"Enter reason for this action...",rows:4,className:"w-full p-3 bg-white/5 border border-white/10 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-rose-500"})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:()=>A(!1),className:"flex-1 px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg transition",children:"Cancel"}),i.jsx("button",{onClick:ut,className:`flex-1 px-4 py-2 rounded-lg transition ${K==="delete"?"bg-red-600 hover:bg-red-700":"bg-rose-600 hover:bg-rose-700"}`,children:"Confirm"})]})]})}),$&&i.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4 overflow-y-auto",children:i.jsxs("div",{className:"bg-gray-800 rounded-2xl p-6 max-w-4xl w-full border border-gray-700 max-h-[90vh] overflow-y-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h3",{className:"text-2xl font-bold text-white",children:"User Details"}),i.jsx("button",{onClick:()=>{D(!1),H(null)},className:"text-gray-400 hover:text-white",children:i.jsx(Cr,{size:24})})]}),P?i.jsx("div",{className:"text-center py-12 text-gray-400",children:"Loading user details..."}):k?i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-start gap-6 pb-6 border-b border-white/10",children:[i.jsx("img",{src:k.avatar_url||`https://api.dicebear.com/7.x/avataaars/svg?seed=${k.full_name}`,alt:k.full_name,className:"w-24 h-24 rounded-full border-2 border-white/20"}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("h4",{className:"text-xl font-bold text-white",children:k.full_name}),k.is_verified&&i.jsx(gu,{size:20,className:"text-blue-400",title:"Verified"}),k.is_locked&&i.jsx(Qt,{size:20,className:"text-purple-400",title:"Account Locked"})]}),i.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-gray-300",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Ln,{size:14}),k.gender==="male"?"Male":"Female"]}),k.date_of_birth&&i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(yf,{size:14}),new Date(k.date_of_birth).toLocaleDateString()]}),k.city&&i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(ra,{size:14}),k.city]})]}),i.jsxs("div",{className:"flex gap-2 mt-3",children:[k.is_deactivated&&i.jsx("span",{className:"px-2 py-1 bg-orange-500/20 text-orange-400 rounded-full text-xs",children:"Inactive"}),k.is_banned&&i.jsx("span",{className:"px-2 py-1 bg-red-500/20 text-red-400 rounded-full text-xs",children:"Banned"}),k.is_frozen&&i.jsx("span",{className:"px-2 py-1 bg-orange-500/20 text-orange-400 rounded-full text-xs",children:"Frozen"}),k.is_locked&&i.jsxs("span",{className:"px-2 py-1 bg-purple-500/20 text-purple-400 rounded-full text-xs flex items-center gap-1",children:[i.jsx(Qt,{size:10})," Locked"]}),k.is_verified&&i.jsxs("span",{className:"px-2 py-1 bg-blue-500/20 text-blue-400 rounded-full text-xs flex items-center gap-1",children:[i.jsx(gu,{size:10})," Verified"]}),!k.is_banned&&!k.is_frozen&&!k.is_deactivated&&i.jsx("span",{className:"px-2 py-1 bg-green-500/20 text-green-400 rounded-full text-xs",children:"Active"})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{className:"bg-white/5 p-4 rounded-xl border border-white/10",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(Wa,{size:18,className:"text-rose-400"}),i.jsx("h5",{className:"font-bold text-white",children:"Email"})]}),i.jsx("p",{className:"text-gray-300 text-sm",children:k.email})]}),k.username&&i.jsxs("div",{className:"bg-white/5 p-4 rounded-xl border border-white/10",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(Ln,{size:18,className:"text-rose-400"}),i.jsx("h5",{className:"font-bold text-white",children:"Username"})]}),i.jsx("p",{className:"text-gray-300 text-sm font-mono",children:k.username})]}),i.jsxs("div",{className:"bg-white/5 p-4 rounded-xl border border-white/10",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(Co,{size:18,className:"text-rose-400"}),i.jsx("h5",{className:"font-bold text-white",children:"Phone"})]}),i.jsx("p",{className:"text-gray-300 text-sm",children:k.phone||"Not set"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[k.religion&&i.jsxs("div",{className:"bg-white/5 p-4 rounded-xl border border-white/10",children:[i.jsx("h5",{className:"font-bold text-white mb-2",children:"Religion"}),i.jsx("p",{className:"text-gray-300 text-sm",children:k.religion})]}),k.denomination&&i.jsxs("div",{className:"bg-white/5 p-4 rounded-xl border border-white/10",children:[i.jsx("h5",{className:"font-bold text-white mb-2",children:"Denomination"}),i.jsx("p",{className:"text-gray-300 text-sm",children:k.denomination})]}),k.intent&&i.jsxs("div",{className:"bg-white/5 p-4 rounded-xl border border-white/10",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(Un,{size:18,className:"text-rose-400"}),i.jsx("h5",{className:"font-bold text-white",children:"Intent"})]}),i.jsx("p",{className:"text-gray-300 text-sm",children:k.intent})]}),k.occupation&&i.jsxs("div",{className:"bg-white/5 p-4 rounded-xl border border-white/10",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(Tw,{size:18,className:"text-rose-400"}),i.jsx("h5",{className:"font-bold text-white",children:"Occupation"})]}),i.jsx("p",{className:"text-gray-300 text-sm",children:k.occupation})]}),k.height&&i.jsxs("div",{className:"bg-white/5 p-4 rounded-xl border border-white/10",children:[i.jsx("h5",{className:"font-bold text-white mb-2",children:"Height"}),i.jsxs("p",{className:"text-gray-300 text-sm",children:[k.height," cm"]})]}),k.weight&&i.jsxs("div",{className:"bg-white/5 p-4 rounded-xl border border-white/10",children:[i.jsx("h5",{className:"font-bold text-white mb-2",children:"Weight"}),i.jsxs("p",{className:"text-gray-300 text-sm",children:[k.weight," kg"]})]})]}),k.bio&&i.jsxs("div",{className:"bg-white/5 p-4 rounded-xl border border-white/10",children:[i.jsx("h5",{className:"font-bold text-white mb-2",children:"Bio"}),i.jsx("p",{className:"text-gray-300 text-sm whitespace-pre-wrap",children:k.bio})]}),k.hobbies&&i.jsxs("div",{className:"bg-white/5 p-4 rounded-xl border border-white/10",children:[i.jsx("h5",{className:"font-bold text-white mb-2",children:"Hobbies"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:k.hobbies.split(",").map((R,le)=>i.jsx("span",{className:"px-3 py-1 bg-rose-600/20 text-rose-300 rounded-full text-xs",children:R.trim()},le))})]}),(k.avatar_url_2||k.avatar_url_3)&&i.jsxs("div",{className:"bg-white/5 p-4 rounded-xl border border-white/10",children:[i.jsx("h5",{className:"font-bold text-white mb-3",children:"Additional Photos"}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[k.avatar_url_2&&i.jsx("img",{src:k.avatar_url_2,alt:"Profile photo 2",className:"w-full h-48 object-cover rounded-lg"}),k.avatar_url_3&&i.jsx("img",{src:k.avatar_url_3,alt:"Profile photo 3",className:"w-full h-48 object-cover rounded-lg"})]})]}),i.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[i.jsxs("div",{className:"bg-white/5 p-4 rounded-xl border border-white/10 text-center",children:[i.jsx(Eu,{size:24,className:"text-rose-400 mx-auto mb-2"}),i.jsx("div",{className:"text-2xl font-bold text-white",children:k.stats?.matches||0}),i.jsx("div",{className:"text-xs text-gray-400",children:"Matches"})]}),i.jsxs("div",{className:"bg-white/5 p-4 rounded-xl border border-white/10 text-center",children:[i.jsx(Eu,{size:24,className:"text-blue-400 mx-auto mb-2"}),i.jsx("div",{className:"text-2xl font-bold text-white",children:k.stats?.messages||0}),i.jsx("div",{className:"text-xs text-gray-400",children:"Messages"})]}),i.jsxs("div",{className:"bg-white/5 p-4 rounded-xl border border-white/10 text-center",children:[i.jsx(As,{size:24,className:"text-orange-400 mx-auto mb-2"}),i.jsx("div",{className:"text-2xl font-bold text-white",children:k.stats?.reports||0}),i.jsx("div",{className:"text-xs text-gray-400",children:"Reports"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"bg-white/5 p-4 rounded-xl border border-white/10",children:[i.jsx("h5",{className:"font-bold text-white mb-2",children:"Account Information"}),i.jsxs("div",{className:"space-y-2 text-sm",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-400",children:"User ID:"}),i.jsx("span",{className:"text-gray-300 font-mono text-xs",children:k.id})]}),k.updated_at&&i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-400",children:"Last Updated:"}),i.jsx("span",{className:"text-gray-300",children:new Date(k.updated_at).toLocaleString()})]}),k.banned_at&&i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-400",children:"Banned At:"}),i.jsx("span",{className:"text-red-300",children:new Date(k.banned_at).toLocaleString()})]}),k.ban_reason&&i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-400",children:"Ban Reason:"}),i.jsx("span",{className:"text-red-300",children:k.ban_reason})]}),k.frozen_until&&i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-400",children:"Frozen Until:"}),i.jsx("span",{className:"text-orange-300",children:new Date(k.frozen_until).toLocaleString()})]}),k.is_deactivated&&k.deactivated_at&&i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-400",children:"Deactivated At:"}),i.jsx("span",{className:"text-orange-300",children:new Date(k.deactivated_at).toLocaleString()})]}),k.is_deactivated&&k.deactivation_reason&&i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-400",children:"Deactivation Reason:"}),i.jsx("span",{className:"text-orange-300 text-sm",children:k.deactivation_reason})]})]})]}),i.jsxs("div",{className:"bg-white/5 p-4 rounded-xl border border-white/10",children:[i.jsx("h5",{className:"font-bold text-white mb-2",children:"Settings"}),i.jsxs("div",{className:"space-y-2 text-sm",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-400",children:"Show in Discovery:"}),i.jsx("span",{className:k.show_in_discovery?"text-green-400":"text-gray-400",children:k.show_in_discovery?"Yes":"No"})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-400",children:"Show Online Status:"}),i.jsx("span",{className:k.show_online_status?"text-green-400":"text-gray-400",children:k.show_online_status?"Yes":"No"})]}),k.looking_for&&i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-400",children:"Looking For:"}),i.jsx("span",{className:"text-gray-300 capitalize",children:k.looking_for})]}),k.boost_active&&i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-400",children:"Profile Boost:"}),i.jsx("span",{className:"text-yellow-400",children:"Active"})]})]})]})]}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3 pt-4 border-t border-white/10",children:[k.is_deactivated?i.jsx("button",{onClick:()=>{D(!1),Oe("reactivate",k.id)},className:"px-4 py-2 bg-green-600/20 text-green-400 hover:bg-green-600/30 rounded-lg transition border border-green-600/30",children:"Reactivate Account"}):i.jsx(i.Fragment,{children:k.is_locked&&i.jsx("button",{onClick:()=>{D(!1),Oe("unlock",k.id)},className:"px-4 py-2 bg-purple-600/20 text-purple-400 hover:bg-purple-600/30 rounded-lg transition border border-purple-600/30",children:"Unlock Account"})}),i.jsx("button",{onClick:()=>{D(!1),Oe(k.is_verified?"unverify":"verify",k.id)},className:`px-4 py-2 rounded-lg transition ${k.is_verified?"bg-gray-600/20 text-gray-400 hover:bg-gray-600/30 border border-gray-600/30":"bg-blue-600/20 text-blue-400 hover:bg-blue-600/30 border border-blue-600/30"}`,children:k.is_verified?"Unverify":"Verify Account"}),i.jsx("button",{onClick:()=>{D(!1),Oe(k.is_banned?"unban":"ban",k.id)},className:`px-4 py-2 rounded-lg transition ${k.is_banned?"bg-green-600/20 text-green-400 hover:bg-green-600/30 border border-green-600/30":"bg-red-600/20 text-red-400 hover:bg-red-600/30 border border-red-600/30"}`,children:k.is_banned?"Unban User":"Ban User"}),i.jsx("button",{onClick:()=>{D(!1),Oe(k.is_frozen?"unfreeze":"freeze",k.id)},className:`px-4 py-2 rounded-lg transition ${k.is_frozen?"bg-green-600/20 text-green-400 hover:bg-green-600/30 border border-green-600/30":"bg-orange-600/20 text-orange-400 hover:bg-orange-600/30 border border-orange-600/30"}`,children:k.is_frozen?"Unfreeze User":"Freeze User"}),i.jsx("button",{onClick:()=>{D(!1),Oe("delete",k.id)},className:"px-4 py-2 bg-red-600/20 text-red-400 hover:bg-red-600/30 rounded-lg transition border border-red-600/30",children:"Delete User"})]})]}):i.jsx("div",{className:"text-center py-12 text-gray-400",children:"No user details available"})]})})]})},w2=({adminUser:n})=>{const[r,a]=S.useState([]),[o,u]=S.useState(!0),[d,f]=S.useState("pending"),[m,p]=S.useState(null),[x,w]=S.useState(!1);S.useEffect(()=>{N()},[d]);const N=async()=>{u(!0);try{let D=U.from("reports").select("*").order("created_at",{ascending:!1});d!=="all"&&(D=D.eq("status",d));const{data:k,error:H}=await D;if(H)throw H;if(k&&k.length>0){const P=[...new Set(k.map(ie=>ie.reporter_id).filter(Boolean))],q=[...new Set(k.map(ie=>ie.reported_user_id).filter(Boolean))],K=[...new Set([...P,...q])];if(K.length>0){const{data:ie,error:X}=await U.from("profiles").select("id, full_name, avatar_url").in("id",K);if(X)console.warn("Error fetching profiles:",X);else{const F={};ie&&ie.forEach(ve=>{F[ve.id]=ve});const fe=k.map(ve=>({...ve,reporter:F[ve.reporter_id]||null,reported_user:F[ve.reported_user_id]||null}));a(fe);return}}}a(k||[])}catch(D){console.error("Error fetching reports:",D),alert("Error loading reports: "+D.message)}finally{u(!1)}},E=async(D,k,H)=>{try{const{error:P}=await U.from("reports").update({status:k,admin_notes:H,reviewed_by:n.id,reviewed_at:new Date().toISOString()}).eq("id",D);if(P)throw P;await U.from("admin_logs").insert({admin_id:n.id,admin_email:n.email,action_type:"report_resolve",target_type:"report",target_id:D,action_details:{status:k,notes:H}}),alert("Report updated successfully"),N(),w(!1)}catch(P){console.error("Error resolving report:",P),alert("Error: "+P.message)}},A=D=>{switch(D){case"pending":return"bg-yellow-500/20 text-yellow-400";case"reviewed":return"bg-blue-500/20 text-blue-400";case"resolved":return"bg-green-500/20 text-green-400";case"dismissed":return"bg-gray-500/20 text-gray-400";default:return"bg-gray-500/20 text-gray-400"}},$=D=>{switch(D){case"harassment":return"text-red-400";case"spam":return"text-orange-400";case"fake_profile":return"text-yellow-400";case"inappropriate_content":return"text-pink-400";default:return"text-gray-400"}};return i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Reports Management"}),i.jsxs("select",{value:d,onChange:D=>f(D.target.value),className:"px-4 py-2 bg-gray-800 border border-white/10 rounded-lg text-white focus:outline-none focus:border-rose-500 [&>option]:bg-gray-800 [&>option]:text-white",children:[i.jsx("option",{value:"all",children:"All Reports"}),i.jsx("option",{value:"pending",children:"Pending"}),i.jsx("option",{value:"reviewed",children:"Reviewed"}),i.jsx("option",{value:"resolved",children:"Resolved"}),i.jsx("option",{value:"dismissed",children:"Dismissed"})]})]}),o?i.jsx("div",{className:"text-center py-12 text-gray-400",children:"Loading reports..."}):i.jsx("div",{className:"space-y-4",children:r.map(D=>i.jsx("div",{className:"bg-white/5 border border-white/10 rounded-xl p-4 hover:bg-white/10 transition cursor-pointer",onClick:()=>{p(D),w(!0)},children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx(As,{size:20,className:"text-red-400"}),i.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${A(D.status)}`,children:D.status}),i.jsx("span",{className:`text-sm font-medium ${$(D.report_type)}`,children:D.report_type})]}),i.jsxs("div",{className:"text-sm text-gray-300 mb-2",children:[i.jsx("span",{className:"text-gray-400",children:"Reported by:"})," ",D.reporter?.full_name||"Unknown",i.jsx("span",{className:"mx-2",children:""}),i.jsx("span",{className:"text-gray-400",children:"Reported user:"})," ",D.reported_user?.full_name||"Unknown"]}),D.description&&i.jsx("p",{className:"text-sm text-gray-400 line-clamp-2",children:D.description}),i.jsx("div",{className:"text-xs text-gray-500 mt-2",children:new Date(D.created_at).toLocaleString()})]}),i.jsx(mr,{size:20,className:"text-gray-400"})]})},D.id))}),x&&m&&i.jsx(_2,{report:m,onClose:()=>w(!1),onResolve:E})]})},_2=({report:n,onClose:r,onResolve:a})=>{const[o,u]=S.useState("resolved"),[d,f]=S.useState("");return i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-gray-800 rounded-2xl p-6 max-w-2xl w-full border border-gray-700 max-h-[90vh] overflow-y-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h3",{className:"text-xl font-bold text-white",children:"Report Details"}),i.jsx("button",{onClick:r,className:"text-gray-400 hover:text-white",children:i.jsx(Yw,{size:24})})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"bg-white/5 p-4 rounded-lg",children:[i.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Reporter"}),i.jsx("div",{className:"font-medium text-white",children:n.reporter?.full_name||"Unknown"})]}),i.jsxs("div",{className:"bg-white/5 p-4 rounded-lg",children:[i.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Reported User"}),i.jsx("div",{className:"font-medium text-white",children:n.reported_user?.full_name||"Unknown"})]})]}),i.jsxs("div",{className:"bg-white/5 p-4 rounded-lg",children:[i.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Report Type"}),i.jsx("div",{className:"font-medium text-white",children:n.report_type}),n.category&&i.jsxs("div",{className:"text-sm text-gray-400 mt-1",children:["Category: ",n.category]})]}),i.jsxs("div",{className:"bg-white/5 p-4 rounded-lg",children:[i.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"Description"}),i.jsx("div",{className:"text-white",children:n.description||"No description provided"})]}),i.jsxs("div",{className:"bg-white/5 p-4 rounded-lg",children:[i.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Status"}),i.jsx("div",{className:"font-medium text-white",children:n.status}),n.reviewed_at&&i.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:["Reviewed: ",new Date(n.reviewed_at).toLocaleString()]})]}),n.admin_notes&&i.jsxs("div",{className:"bg-white/5 p-4 rounded-lg",children:[i.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"Admin Notes"}),i.jsx("div",{className:"text-white",children:n.admin_notes})]}),i.jsxs("div",{className:"border-t border-white/10 pt-4",children:[i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Action"}),i.jsxs("select",{value:o,onChange:m=>u(m.target.value),className:"w-full p-3 bg-gray-800 border border-white/10 rounded-lg text-white focus:outline-none focus:border-rose-500 [&>option]:bg-gray-800 [&>option]:text-white",children:[i.jsx("option",{value:"resolved",children:"Resolve"}),i.jsx("option",{value:"dismissed",children:"Dismiss"}),i.jsx("option",{value:"reviewed",children:"Mark as Reviewed"})]})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Admin Notes"}),i.jsx("textarea",{value:d,onChange:m=>f(m.target.value),placeholder:"Add notes about this report...",rows:4,className:"w-full p-3 bg-white/5 border border-white/10 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-rose-500"})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:r,className:"flex-1 px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg transition",children:"Cancel"}),i.jsx("button",{onClick:()=>a(n.id,o,d),className:"flex-1 px-4 py-2 bg-rose-600 hover:bg-rose-700 rounded-lg transition",children:"Save"})]})]})]})]})})},j2=({adminUser:n})=>{const[r,a]=S.useState([]),[o,u]=S.useState(!0),[d,f]=S.useState("pending");S.useEffect(()=>{m()},[d]);const m=async()=>{u(!0);try{let w=U.from("premium_requests").select("*").order("created_at",{ascending:!1});d!=="all"&&(w=w.eq("status",d));const{data:N,error:E}=await w;if(E)throw E;if(N&&N.length>0){const A=[...new Set(N.map($=>$.user_id).filter(Boolean))];if(A.length>0){const{data:$,error:D}=await U.from("profiles").select("id, full_name, avatar_url, email").in("id",A);if(D)console.warn("Error fetching profiles:",D);else{const k={};$&&$.forEach(P=>{k[P.id]=P});const H=N.map(P=>({...P,user:k[P.user_id]||null}));a(H);return}}}a(N||[])}catch(w){console.error("Error fetching requests:",w),alert("Error loading premium requests: "+w.message)}finally{u(!1)}},p=async(w,N,E)=>{try{const A=r.find(D=>D.id===w),{error:$}=await U.from("premium_requests").update({status:N,admin_notes:E,processed_by:n.id,processed_at:new Date().toISOString()}).eq("id",w);if($)throw $;if(N==="approved"&&A&&A.request_type==="profile_boost"){const D=new Date;D.setHours(D.getHours()+24),await U.from("profiles").update({boost_active:!0,boost_expires_at:D.toISOString()}).eq("id",A.user_id)}await U.from("admin_logs").insert({admin_id:n.id,admin_email:n.email,action_type:"premium_request_process",target_type:"premium_request",target_id:w,action_details:{status:N,notes:E,request_type:A?.request_type}}),alert("Request processed successfully"),m()}catch(A){console.error("Error processing request:",A),alert("Error: "+A.message)}},x=w=>{switch(w){case"pending":return"bg-yellow-500/20 text-yellow-400";case"approved":return"bg-green-500/20 text-green-400";case"rejected":return"bg-red-500/20 text-red-400";case"completed":return"bg-blue-500/20 text-blue-400";default:return"bg-gray-500/20 text-gray-400"}};return i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Premium Requests"}),i.jsxs("select",{value:d,onChange:w=>f(w.target.value),className:"px-4 py-2 bg-gray-800 border border-white/10 rounded-lg text-white focus:outline-none focus:border-rose-500 [&>option]:bg-gray-800 [&>option]:text-white",children:[i.jsx("option",{value:"all",children:"All Requests"}),i.jsx("option",{value:"pending",children:"Pending"}),i.jsx("option",{value:"approved",children:"Approved"}),i.jsx("option",{value:"rejected",children:"Rejected"}),i.jsx("option",{value:"completed",children:"Completed"})]})]}),o?i.jsx("div",{className:"text-center py-12 text-gray-400",children:"Loading requests..."}):i.jsx("div",{className:"space-y-4",children:r.map(w=>i.jsx(S2,{request:w,onProcess:p,statusColor:x},w.id))})]})},S2=({request:n,onProcess:r,statusColor:a})=>{const[o,u]=S.useState(!1),[d,f]=S.useState("approved"),[m,p]=S.useState("");return i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"bg-white/5 border border-white/10 rounded-xl p-4 hover:bg-white/10 transition",children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[i.jsx(rl,{size:20,className:"text-yellow-400"}),i.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${a(n.status)}`,children:n.status}),i.jsx("span",{className:"text-sm font-medium text-white capitalize",children:n.request_type?.replace("_"," ")})]}),i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("img",{src:n.user?.avatar_url||`https://api.dicebear.com/7.x/avataaars/svg?seed=${n.user?.full_name}`,alt:n.user?.full_name,className:"w-10 h-10 rounded-full"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-white",children:n.user?.full_name||"Unknown"}),i.jsx("div",{className:"text-sm text-gray-400",children:n.user?.email||"N/A"})]})]}),i.jsxs("div",{className:"text-xs text-gray-500",children:["Requested: ",new Date(n.requested_at).toLocaleString()]}),n.admin_notes&&i.jsxs("div",{className:"mt-2 text-sm text-gray-400",children:["Notes: ",n.admin_notes]})]}),n.status==="pending"&&i.jsx("button",{onClick:()=>u(!0),className:"px-4 py-2 bg-rose-600 hover:bg-rose-700 rounded-lg transition",children:"Process"})]})}),o&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-gray-800 rounded-2xl p-6 max-w-md w-full border border-gray-700",children:[i.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Process Request"}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Action"}),i.jsxs("select",{value:d,onChange:x=>f(x.target.value),className:"w-full p-3 bg-gray-800 border border-white/10 rounded-lg text-white focus:outline-none focus:border-rose-500 [&>option]:bg-gray-800 [&>option]:text-white",children:[i.jsx("option",{value:"approved",children:"Approve"}),i.jsx("option",{value:"rejected",children:"Reject"})]})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Notes"}),i.jsx("textarea",{value:m,onChange:x=>p(x.target.value),placeholder:"Add notes...",rows:3,className:"w-full p-3 bg-white/5 border border-white/10 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-rose-500"})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:()=>u(!1),className:"flex-1 px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg transition",children:"Cancel"}),i.jsx("button",{onClick:()=>{r(n.id,d,m),u(!1)},className:`flex-1 px-4 py-2 rounded-lg transition ${d==="approved"?"bg-green-600 hover:bg-green-700":"bg-red-600 hover:bg-red-700"}`,children:d==="approved"?"Approve":"Reject"})]})]})})]})},N2=({adminUser:n})=>{const[r,a]=S.useState([]),[o,u]=S.useState(!0),[d,f]=S.useState("all"),[m,p]=S.useState("");S.useEffect(()=>{x()},[d]);const x=async()=>{u(!0);try{let E=U.from("admin_logs").select("*").order("created_at",{ascending:!1}).limit(500);d!=="all"&&(E=E.eq("action_type",d));const{data:A,error:$}=await E;if($)throw $;a(A||[])}catch(E){console.error("Error fetching logs:",E)}finally{u(!1)}},w=E=>E.includes("ban")||E.includes("delete")?"text-red-400":E.includes("freeze")?"text-orange-400":E.includes("resolve")||E.includes("approve")?"text-green-400":"text-blue-400",N=r.filter(E=>{if(m){const A=m.toLowerCase();return E.admin_email?.toLowerCase().includes(A)||E.action_type?.toLowerCase().includes(A)||E.target_type?.toLowerCase().includes(A)}return!0});return i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Activity Logs"}),i.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[i.jsxs("div",{className:"flex-1 relative",children:[i.jsx(bf,{className:"absolute left-3 top-3.5 text-gray-400",size:18}),i.jsx("input",{type:"text",placeholder:"Search logs...",value:m,onChange:E=>p(E.target.value),className:"w-full pl-10 pr-4 py-2 bg-white/5 border border-white/10 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-rose-500"})]}),i.jsxs("select",{value:d,onChange:E=>f(E.target.value),className:"px-4 py-2 bg-gray-800 border border-white/10 rounded-lg text-white focus:outline-none focus:border-rose-500 [&>option]:bg-gray-800 [&>option]:text-white",children:[i.jsx("option",{value:"all",children:"All Actions"}),i.jsx("option",{value:"user_ban",children:"User Bans"}),i.jsx("option",{value:"user_unban",children:"User Unbans"}),i.jsx("option",{value:"user_freeze",children:"User Freezes"}),i.jsx("option",{value:"user_delete",children:"User Deletions"}),i.jsx("option",{value:"report_resolve",children:"Report Resolutions"}),i.jsx("option",{value:"premium_request_process",children:"Premium Requests"})]})]})]}),o?i.jsx("div",{className:"text-center py-12 text-gray-400",children:"Loading logs..."}):i.jsx("div",{className:"bg-white/5 border border-white/10 rounded-xl overflow-hidden",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-white/5",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Admin"}),i.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Action"}),i.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Target"}),i.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Details"}),i.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Time"})]})}),i.jsx("tbody",{className:"divide-y divide-white/10",children:N.map(E=>i.jsxs("tr",{className:"hover:bg-white/5",children:[i.jsx("td",{className:"px-4 py-3 text-gray-300 text-sm",children:E.admin_email}),i.jsx("td",{className:"px-4 py-3",children:i.jsx("span",{className:`text-sm font-medium ${w(E.action_type)}`,children:E.action_type?.replace(/_/g," ")})}),i.jsxs("td",{className:"px-4 py-3 text-gray-300 text-sm",children:[E.target_type,": ",E.target_id?.substring(0,8),"..."]}),i.jsx("td",{className:"px-4 py-3 text-gray-300 text-sm",children:E.action_details?i.jsxs("details",{className:"cursor-pointer",children:[i.jsx("summary",{className:"text-blue-400 hover:text-blue-300",children:"View"}),i.jsx("pre",{className:"mt-2 text-xs bg-black/20 p-2 rounded",children:JSON.stringify(E.action_details,null,2)})]}):"N/A"}),i.jsx("td",{className:"px-4 py-3 text-gray-300 text-sm",children:new Date(E.created_at).toLocaleString()})]},E.id))})]})})})]})};function E2(){const[n,r]=S.useState(null),[a,o]=S.useState(null),[u,d]=S.useState(!0),[f,m]=S.useState("discovery"),[p,x]=S.useState(null),[w,N]=S.useState("dashboard"),[E,A]=S.useState({users:0,matches:0,messages:0}),[$,D]=S.useState(!1),[k,H]=S.useState(null),[P,q]=S.useState("incoming"),[K,ie]=S.useState("welcome"),[X,F]=S.useState("login"),[fe,ve]=S.useState(null),[Se,Re]=S.useState(""),[Oe,ut]=S.useState(""),[lt,at]=S.useState(""),[I,R]=S.useState(""),[le,_e]=S.useState(""),[me,y]=S.useState(""),[T,J]=S.useState(""),[te,ue]=S.useState(""),[pe,de]=S.useState(""),[He,Ue]=S.useState(""),[Zt,Kr]=S.useState(""),[$n,Bn]=S.useState(0),[la,Pn]=S.useState(!1),[Bo,kf]=S.useState(null),[Xa,Hn]=S.useState(null),[Rr,Wr]=S.useState(null),[oa,cs]=S.useState({isOpen:!1,title:"",message:"",onConfirm:null,type:"danger"}),[Dt,Po]=S.useState(""),[Uu,ol]=S.useState(""),[ca,Mu]=S.useState(""),[Or,us]=S.useState({isOpen:!1,title:"",placeholder:"",onSubmit:null,showCategorySelect:!1,categories:[]}),[Rs,zr]=S.useState(!0),[Rt,Dr]=S.useState(!0),[Ut,Ja]=S.useState([]),[Ho,In]=S.useState(""),Vn=[" Travel"," Foodie"," Movies"," Reading"," Art"," Fitness"," Gaming"," Music"," Dancing"," Photography"," Pets"," Nature"],Ur=g=>{if(!g)return"";if(/^\d{4}-\d{2}-\d{2}$/.test(g))return g;const b=g.split("-");if(b.length===3&&b[0].length===2)return`${b[2]}-${b[1]}-${b[0]}`;const _=new Date(g);if(!isNaN(_.getTime())){const C=_.getFullYear(),L=String(_.getMonth()+1).padStart(2,"0"),z=String(_.getDate()).padStart(2,"0");return`${C}-${L}-${z}`}return g},[Qa,ds]=S.useState(""),[Os,ua]=S.useState(""),[Io,cl]=S.useState(""),[Za,Fa]=S.useState(!1),[ul,Vo]=S.useState(!1),[Gn,Go]=S.useState(!1),[Bt,da]=S.useState(null),[Lu,qu]=S.useState(!1),[Xr,kt]=S.useState(""),[It,en]=S.useState(""),[Yo,Cf]=S.useState(""),[$u,tn]=S.useState(!1),[Yn,Ko]=S.useState(!0),[hs,Jr]=S.useState(null),[Ft,er]=S.useState(!1),[pt,rn]=S.useState(null),[Bu,ha]=S.useState(0),[zs,Kn]=S.useState(null),[dl,sn]=S.useState(null),[Wo,fs]=S.useState(null),[an,Vt]=S.useState(null),[tr,Wn]=S.useState(!1),[ms,fa]=S.useState(null),[nn,Ds]=S.useState(null),[pr,Gt]=S.useState([]),[gr,Us]=S.useState(0),[Xn,ps]=S.useState(!1),[Jn,hl]=S.useState(""),[gs,Xo]=S.useState(""),[ln,fl]=S.useState(""),[Qr,Pu]=S.useState({lat:null,long:null}),[Qn,on]=S.useState(""),[rr,Zn]=S.useState(""),[Ge,sr]=S.useState([]),[xr,xs]=S.useState([]),[ye,Fn]=S.useState(null),[Mr,Je]=S.useState([]),[Ms,vs]=S.useState(""),[ys,cn]=S.useState(!1),[ei,ml]=S.useState(!1),[pl,gl]=S.useState(!1),[ti,ht]=S.useState({}),[Zr,ri]=S.useState([]),[ma,Jo]=S.useState([]),[Qo,xl]=S.useState({}),[un,si]=S.useState([]),[vl,yl]=S.useState([]),[bl,Zo]=S.useState(!1),[bs,dn]=S.useState([]),[Hu]=S.useState(["Inappropriate Content","Spam","Harassment","Fake Profile","Other"]),[wl,Fo]=S.useState(""),[hn,Yt]=S.useState(null),[_l,fn]=S.useState(null),[pa,mn]=S.useState(0),[ga,ec]=S.useState(null),[Me,jl]=S.useState(null),[ai,ni]=S.useState(!1),[Sl,ii]=S.useState([]),[Iu,Vu]=S.useState([]),[tc,rc]=S.useState([]),[sc,pn]=S.useState("dark"),[ac,li]=S.useState(!1),[Nl,El]=S.useState([]),[oi,nc]=S.useState(!1),[ci,gn]=S.useState(null),[xa,kl]=S.useState([]),[Cl,ui]=S.useState(!1),ws=S.useRef(null),di=S.useRef([]),[va,Ls]=S.useState([]),qs=S.useRef(null),ya=S.useRef(null),[Tl,ic]=S.useState(""),[hi,fi]=S.useState([]),[lc,_s]=S.useState(0),[Kt,Al]=S.useState(null),[js,$s]=S.useState([]),[Ss,oc]=S.useState("hd"),[Pt,Lr]=S.useState({});S.useRef(null),S.useRef(null);const qr=S.useRef(null),Fr=S.useRef(null);S.useRef(null),S.useRef(null);const mi=S.useRef(null);S.useEffect(()=>{window.location.hash.includes("access_token")&&(m("reset-password"),tn(!0)),U.auth.getSession().then(({data:{session:_}})=>{r(_),_?($r(_.user.id),uc()):d(!1)});const{data:{subscription:b}}=U.auth.onAuthStateChange((_,C)=>{_==="PASSWORD_RECOVERY"?(m("reset-password"),tn(!0)):(r(C),C?$r(C.user.id):(cc(),d(!1)))});return()=>b.unsubscribe()},[]);const cc=()=>{Re(""),ut(""),at(""),R(""),_e(""),y(""),J(""),ue(""),de(""),Ue(""),In(""),Ja([]),Jr(null),rn(null),Kn(null),fs(null),sn(null),Vt(null)};S.useEffect(()=>{const g=localStorage.getItem("sacred_city_filter"),b=localStorage.getItem("sacred_religion_filter"),_=localStorage.getItem("sacred_distance_filter"),C=localStorage.getItem("sacred_min_age_filter"),L=localStorage.getItem("sacred_max_age_filter");g&&hl(g),b&&Xo(b),_&&fl(_),C&&on(C),L&&Zn(L)},[]),S.useEffect(()=>{if(!n)return;const g=async()=>{try{await U.from("profiles").update({last_seen_at:new Date().toISOString()}).eq("id",n.user.id)}catch(C){console.error("Error updating last seen:",C)}};g();const b=setInterval(g,3e4),_=U.channel("app-presence").on("presence",{event:"sync"},()=>{const C=_.presenceState(),L=new Set;Object.values(C).forEach(z=>{Array.isArray(z)&&z.forEach(W=>{W.user_id&&L.add(W.user_id)})}),ri(Array.from(L))}).subscribe(async C=>{C==="SUBSCRIBED"&&await _.track({user_id:n.user.id,online_at:new Date().toISOString()})});return()=>{clearInterval(b),_&&U.removeChannel(_)}},[n]),S.useEffect(()=>{if(!n||xr.length===0)return;const g=async()=>{const _=xr.map(C=>C.id);try{const{data:C}=await U.from("profiles").select("id, last_seen_at").in("id",_);if(C){const L={};C.forEach(z=>{z.last_seen_at&&(L[z.id]=z.last_seen_at)}),xl(L)}}catch(C){console.error("Error fetching last seen:",C)}};g();const b=setInterval(g,6e4);return()=>clearInterval(b)},[n,xr]),S.useEffect(()=>{Me&&(async()=>{const{data:b,error:_}=await U.from("stories").select("*").gt("expires_at",new Date().toISOString()).order("created_at",{ascending:!1});if(_)console.error("Error fetching target stories:",_);else{const C=b&&b.some(L=>L.user_id===Me.id);nc(!!C)}})()},[Me]),S.useEffect(()=>{(async()=>{if(!Me||!n){ni(!1);return}try{const{data:b,error:_}=await U.from("matches").select("*").or(`user_a_id.eq.${n.user.id},user_b_id.eq.${n.user.id}`).eq("status","mutual");if(_){console.error("Error checking match status:",_),ni(!1);return}const C=b?.some(L=>L.user_a_id===n.user.id&&L.user_b_id===Me.id||L.user_b_id===n.user.id&&L.user_a_id===Me.id);ni(!!C)}catch(b){console.error("Error in checkMatchStatus:",b),ni(!1)}})()},[Me,n]),S.useEffect(()=>{a&&(zr(a.show_in_discovery??!0),Dr(a.show_online_status??!0))},[a]),S.useEffect(()=>{if(!n)return;const g=U.channel("global-messages-changes",{config:{broadcast:{self:!1}}}).on("postgres_changes",{event:"INSERT",schema:"public",table:"messages"},b=>{if(b.new.sender_id!==n.user.id){const _=Ge.find(C=>C.id===b.new.match_id);if(_){const C=_.user_a_id===n.user.id?_.user_b_id:_.user_a_id;ht(L=>{const z={...L,[C]:(L[C]||0)+1},W=Object.values(z).reduce((re,ce)=>re+ce,0);return _s(W),z}),Z(" New message!","success")}}}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"messages"},b=>{if(b.new.recipient_id===n.user.id){const _=Ge.find(C=>C.id===b.new.match_id);if(_){const C=_.user_a_id===n.user.id?_.user_b_id:_.user_a_id;if((_.user_a_id===n.user.id?_.user_b_id:_.user_a_id)===n.user.id)return;b.new.read_at&&ht(z=>{const W={...z,[C]:Math.max(0,(z[C]||0)-1)},re=Object.values(W).reduce((ce,ne)=>ce+ne,0);return _s(re),W})}}}).subscribe();return()=>U.removeChannel(g)},[n,Ge]),S.useEffect(()=>{const g=()=>{const C=window.location.pathname==="/admin";!n||C&&!p?(document.documentElement.classList.remove("dark"),document.body.style.setProperty("background-color","transparent","important"),document.body.style.setProperty("background-image","none","important"),document.documentElement.style.setProperty("background-color","transparent","important"),pn("light")):C&&p?(document.documentElement.classList.add("dark"),document.body.style.setProperty("background-color","#111827","important"),document.body.style.removeProperty("background-image"),document.documentElement.style.setProperty("background-color","#111827","important"),pn("dark")):(document.documentElement.classList.add("dark"),document.body.style.setProperty("background-color","#111827","important"),document.body.style.removeProperty("background-image"),document.documentElement.style.setProperty("background-color","#111827","important"),pn("dark"),localStorage.setItem("sacred_theme","dark"))};g();const b=()=>{setTimeout(g,0)};window.addEventListener("popstate",b);const _=setInterval(g,200);return()=>{window.removeEventListener("popstate",b),clearInterval(_)}},[n,p]),S.useEffect(()=>{const g=window.location.pathname==="/admin";(!n||g)&&(document.documentElement.classList.remove("dark"),document.body.style.setProperty("background-color","transparent","important"),document.body.style.setProperty("background-image","none","important"),document.documentElement.style.setProperty("background-color","transparent","important"))},[]);const Rl=()=>{gn(null),kl([]),m("stories")},Gu=()=>{const g=sc==="light"?"dark":"light";pn(g),localStorage.setItem("sacred_theme",g)};S.useEffect(()=>{if((f==="matches"||f==="interests")&&xn(),f==="crushes"&&vr(),f==="visitors"&&fc(),f==="stories"&&zl(),f==="setup"&&n&&!a?.lat&&!a?.long&&!Qr.lat){const g=setTimeout(()=>{sessionStorage.getItem("locationPrompted")||(sessionStorage.setItem("locationPrompted","true"),setTimeout(()=>{Ll()},1e3))},500);return()=>clearTimeout(g)}},[f,n,a,Qr]);async function ba(g){if(!g)return null;try{er(!0);const b=g.name.split(".").pop(),C=`${`${Math.random()}.${b}`}`,{error:L}=await U.storage.from("avatars").upload(C,g,{cacheControl:"3600",upsert:!1});if(L)throw console.error("Upload error:",L),L;const{data:{publicUrl:z}}=U.storage.from("avatars").getPublicUrl(C);return z}catch(b){return console.error("Upload error:",b),Z("Error uploading image: "+(b.message||"Please try again"),"error"),null}finally{er(!1)}}const Ol=async g=>{if(!n)return;const b=g.target.files[0];if(b){er(!0);try{if(!await Bs(b)){er(!1),Z("Video must be 15 seconds or less.","error");return}const C=b.name.split(".").pop(),L=`${Math.random()}.${C}`,z=`${n.user.id}/stories/${L}`,{error:W}=await U.storage.from("avatars").upload(z,b);if(W)throw W;const{data:{publicUrl:re}}=U.storage.from("avatars").getPublicUrl(z),ce=b.type.startsWith("video")?"video":"image",ne=new Date;ne.setHours(ne.getHours()+24),await U.from("stories").insert({user_id:n.user.id,media_url:re,media_type:ce,expires_at:ne.toISOString()}),Z("Story uploaded!","success"),m("stories")}catch(_){console.error("Story error:",_),Z("Failed to upload story.","error")}finally{er(!1)}}};async function $r(g){try{const{data:{session:b}}=await U.auth.getSession();if(!b||!b.user){console.warn("No session available for fetchProfile"),d(!1);return}const _=b;let C=!1,L=null;try{const{data:oe,error:xe}=await U.rpc("get_my_deleted_status");if(!xe&&oe&&oe.length>0)C=oe[0].is_deleted===!0,C&&(L={deletion_reason:oe[0].deletion_reason,deleted_at:oe[0].deleted_at});else if(xe){console.warn("Function check failed, trying direct query:",xe);const{data:ge,error:Qe}=await U.from("deleted_accounts").select("user_id, deletion_reason, deleted_at").eq("user_id",g).maybeSingle();!Qe&&ge?(C=!0,L={deletion_reason:ge.deletion_reason,deleted_at:ge.deleted_at}):Qe&&Qe.code!=="42501"&&console.warn("Could not check deleted account status:",Qe)}}catch(oe){console.warn("Could not verify deleted account status:",oe)}if(C){await U.auth.signOut(),Z("This account has been deleted. If you want to rejoin, please sign up again.","error"),d(!1);return}const{data:z,error:W}=await U.from("profiles").select("*").eq("id",g).single(),re=_?.user?.user_metadata;if(W)if(W.code==="PGRST116"){if(console.log(" New user detected. Reading from metadata and creating profile..."),re?.full_name&&Re(re.full_name),re?.gender&&ut(re.gender),re?.date_of_birth){const oe=Ur(re.date_of_birth);ue(oe)}re?.city&&at(re.city),re?.phone&&Kr(re.phone);try{const oe=_?.user?.email||null,xe=_?.user?.phone||null,ge={id:g,full_name:re?.full_name||(oe?oe.split("@")[0]:"New User"),email:oe||null,phone:re?.phone||xe||null,gender:re?.gender||null,date_of_birth:re?.date_of_birth?Ur(re.date_of_birth):null,city:re?.city||null,avatar_url:`https://api.dicebear.com/7.x/avataaars/svg?seed=${re?.full_name||"user"}`};console.log(" Creating profile with data:",ge);const{data:Qe,error:We}=await U.from("profiles").insert(ge).select().single();if(We)if(console.error(" Error creating profile from metadata:",We),We.code==="23505"){console.log("Profile already exists, updating with metadata...");const{id:et,...ft}=ge,{data:wr,error:ot}=await U.from("profiles").update(ft).eq("id",g).select().single();ot?console.error(" Error updating existing profile:",ot):(console.log(" Profile updated with all signup data:",wr),o(wr))}else console.warn("Continuing to setup view despite insert error");else console.log(" Profile created with all signup data:",Qe),o(Qe)}catch(oe){console.error(" Error creating profile:",oe)}m("username"),d(!1);return}else throw W;if(re&&z){let oe=!1;const xe={};if(re.gender&&!z.gender&&(ut(re.gender),xe.gender=re.gender,oe=!0),re.date_of_birth&&!z.date_of_birth){const ge=Ur(re.date_of_birth);ue(ge),xe.date_of_birth=ge,oe=!0}if(re.city&&!z.city&&(at(re.city),xe.city=re.city,oe=!0),re.phone&&!z.phone&&(Kr(re.phone),xe.phone=re.phone,oe=!0),oe)try{console.log(" Updating profile with missing metadata fields:",xe);const{data:ge,error:Qe}=await U.from("profiles").update(xe).eq("id",g).select().single();Qe?console.error(" Error updating profile with metadata:",Qe):(console.log(" Profile updated with metadata fields:",ge),o(ge),z=ge)}catch(ge){console.error(" Error updating profile with metadata:",ge)}}if(z?.is_deactivated){o(z),m("deactivated"),d(!1);return}const ce=z.date_of_birth?bu(z.date_of_birth):0;if(ce>0&&ce<18){Z("Access Denied: You must be at least 18 years old."),await U.auth.signOut(),d(!1);return}if(hc(),o(z),z.full_name&&Re(z.full_name),z.gender&&ut(z.gender),z.city&&at(z.city),z.religion&&R(z.religion),z.denomination&&_e(z.denomination),z.intent&&y(z.intent),z.bio&&J(z.bio),z.height&&de(String(z.height)),z.weight&&Ue(String(z.weight)),z.occupation&&In(z.occupation),z.hobbies&&Ja(typeof z.hobbies=="string"?z.hobbies.split(",").filter(Boolean):z.hobbies),z.phone?Kr(z.phone):_?.user?.phone&&Kr(_.user.phone),z.date_of_birth){const oe=Ur(z.date_of_birth);ue(oe)}else ue("");if(z.icebreaker_prompts)try{const oe=typeof z.icebreaker_prompts=="string"?JSON.parse(z.icebreaker_prompts||"[]"):Array.isArray(z.icebreaker_prompts)?z.icebreaker_prompts:[];dn(oe)}catch{dn([])}else dn([]);const ne=z.boost_active===!0&&(!z.boost_expires_at||new Date(z.boost_expires_at)>new Date);Zo(ne),z.show_in_discovery!==void 0&&zr(z.show_in_discovery),z.show_online_status!==void 0&&Dr(z.show_online_status);const{data:he}=await U.from("profiles").select("id").eq("is_verified",!0);he&&si(he.map(oe=>oe.id));const{data:be}=await U.from("super_likes").select("liked_id").eq("liker_id",g);be&&yl(be.map(oe=>oe.liked_id)),z?.full_name&&Re(z.full_name),z?.gender&&ut(z.gender),z?.city&&at(z.city),z?.religion&&R(z.religion),z?.denomination&&_e(z.denomination),z?.intent&&y(z.intent),z?.bio&&J(z.bio),z?.date_of_birth&&ue(z.date_of_birth),z?.height&&de(z.height),z?.weight&&Ue(z.weight),z?.hobbies&&Ja(z.hobbies.split(",").filter(Boolean)),z?.occupation&&In(z.occupation),da(z?.looking_for||null),z?.avatar_url_2&&fs(z.avatar_url_2),z?.avatar_url_3&&Vt(z.avatar_url_3),!z?.gender||!z?.intent?m("setup"):await Wt(g,z.gender,z)}catch(b){console.error("Error:",b.message)}finally{d(!1)}}const zl=async()=>{if(n)try{const{data:g,error:b}=await U.from("matches").select("user_a_id, user_b_id").or(`user_a_id.eq.${n.user.id},user_b_id.eq.${n.user.id}`).eq("status","mutual");if(b)throw b;const _=g?.map(W=>W.user_a_id===n.user.id?W.user_b_id:W.user_a_id)||[],C=_.length>0?[..._,n.user.id]:[n.user.id],{data:L,error:z}=await U.from("stories").select("*, profiles(full_name, avatar_url)").in("user_id",C).gt("expires_at",new Date().toISOString()).order("created_at",{ascending:!1});if(z)throw z;El(L||[])}catch(g){console.error("Error fetching stories:",g),El([])}},uc=async()=>{const{count:g}=await U.from("profiles").select("*",{count:"exact",head:!0}),{count:b}=await U.from("matches").select("*",{count:"exact",head:!0}),{count:_}=await U.from("messages").select("*",{count:"exact",head:!0});A({users:g||0,matches:b||0,messages:_||0})},Bs=g=>new Promise(b=>{if(g.type.startsWith("image")){b(!0);return}const _=document.createElement("video");_.preload="metadata",_.src=URL.createObjectURL(g),_.onloadedmetadata=function(){URL.revokeObjectURL(_.src),_.duration>15?b(!1):b(!0)},_.onerror=()=>{b(!1)}});async function Wt(g,b,_){if(!_)return;const C=_?.looking_for;let L=null,z=!1;if(C==="men")L="male";else if(C==="women")L="female";else if(C==="both")L=null;else{const xe=_?.intent;z=xe==="New friends"||xe==="new friends",L=z?null:b==="male"?"female":"male"}const{data:W}=await U.from("discovery_exclusions").select("excluded_user_id").eq("user_id",g),re=W?W.map(xe=>xe.excluded_user_id):[],{data:ce}=await U.from("matches").select("user_a_id, user_b_id, status").or(`user_a_id.eq.${g},user_b_id.eq.${g}`).in("status",["mutual","pending"]),ne=ce?ce.map(xe=>xe.user_a_id===g?xe.user_b_id:xe.user_a_id):[],he=[...new Set([...re,...ne])],be=_?.lat&&_?.long;let oe=U.from("profiles").select("*").neq("id",g).eq("is_deactivated",!1);if(!z&&L&&(oe=oe.eq("gender",L)),he.length>0){const xe=he.map(ge=>`"${ge}"`).join(",");oe=oe.not("id","in",`(${xe})`)}if(Jn?oe=oe.eq("city",Jn):ln||be||(oe=oe.eq("city",_?.city)),gs&&(oe=oe.eq("religion",gs)),be){const{data:xe,error:ge}=await oe.order("updated_at",{ascending:!1});if(ge)console.error("Error fetching candidates:",ge);else{const We=(xe?xe.filter(ft=>!he.includes(ft.id)):[]).map(ft=>{const wr=ft.date_of_birth?bu(ft.date_of_birth):0;if(Qn&&wr<Qn||rr&&wr>rr)return null;let ot=null;return ft.lat&&ft.long&&_.lat&&_.long&&(ot=mc(_.lat,_.long,ft.lat,ft.long)),{...ft,distance:ot,age:wr}}).filter(Boolean).sort((ft,wr)=>ft.distance!==null&&wr.distance!==null?ft.distance-wr.distance:ft.distance!==null?-1:wr.distance!==null?1:new Date(wr.updated_at)-new Date(ft.updated_at));let et=We;ln&&(et=We.filter(ft=>ft.distance!==null&&ft.distance<=parseInt(ln))),Gt(et||[]),Us(0)}}else{const{data:xe,error:ge}=await oe.order("updated_at",{ascending:!1});if(ge)console.error("Error fetching candidates:",ge);else{const Qe=xe?xe.filter(We=>!he.includes(We.id)):[];Gt(Qe||[]),Us(0)}}}const wa=g=>{if(!g)return 0;const _=[g.avatar_url,g.full_name,g.gender,g.date_of_birth,g.city,g.religion,g.intent,g.bio,g.height,g.weight,g.occupation,g.hobbies].filter(Boolean).length;return Math.round(_/12*100)},dc=async g=>{if(!g||g.length<2){fi([]);return}try{const{data:b,error:_}=await U.from("profiles").select("*").or(`full_name.ilike.%${g}%,city.ilike.%${g}%`).neq("id",n.user.id).limit(10);if(_)throw _;fi(b||[])}catch(b){console.error("Search error:",b)}},Ps=async()=>{if(n)try{const g={show_in_discovery:Rs,show_online_status:Rt,icebreaker_prompts:JSON.stringify(bs)};Bt!=null?g.looking_for=Bt:g.looking_for=null;const{data:b,error:_}=await U.from("profiles").update(g).eq("id",n.user.id).select();if(_)throw console.error("Supabase error:",_),_;Z("Preferences updated!","success"),$r(n.user.id),a&&await Wt(n.user.id,a.gender,a)}catch(g){console.error("Error updating preferences:",g);const b=g?.message||"Could not update settings.";Z(`Error: ${b}`,"error")}},hc=async()=>{if(!n||!("Notification"in window))return;if(await Notification.requestPermission()==="granted"){const b=`web_token_${Date.now()}`;await U.from("push_tokens").insert({user_id:n.user.id,token:b,platform:"web"},{onConflict:"ignore"})}},fc=async()=>{if(n)try{console.log(" Fetching visitors for user ID:",n.user.id);const{data:g,error:b}=await U.from("visits").select("viewer_id, created_at").eq("viewed_id",n.user.id).order("created_at",{ascending:!1}).limit(20);if(b)throw b;if(!g||g.length===0){console.log(" No visitors found."),rc([]);return}const _=g.map(W=>W.viewer_id),{data:C,error:L}=await U.from("profiles").select("id, full_name, avatar_url, city").in("id",_);if(L)throw L;const z=g.map(W=>{const re=C.find(ce=>ce.id===W.viewer_id);return{...W,viewer:re}});console.log(" Visitors Data Found:",z),rc(z)}catch(g){console.error(" Error fetching visitors:",g)}};function mc(g,b,_,C){const z=pi(_-g),W=pi(C-b),re=Math.sin(z/2)*Math.sin(z/2)+Math.cos(pi(g))*Math.cos(pi(_))*Math.sin(W/2)*Math.sin(W/2);return 6371*(2*Math.atan2(Math.sqrt(re),Math.sqrt(1-re)))}function pi(g){return g*(Math.PI/180)}const xn=async()=>{if(n)try{const{data:g,error:b}=await U.from("matches").select("*").or(`user_a_id.eq.${n.user.id},user_b_id.eq.${n.user.id}`).or("status.in.(mutual,pending)");if(b){console.error("Error fetching matches:",b),sr([]),xs([]),ht({});return}if(!g||g.length===0){sr(g),xs([]),ht({});return}const _=g.map(ce=>ce.user_a_id===n.user.id?ce.user_b_id:ce.user_a_id),C=[...new Set(_)],{data:L,error:z}=await U.from("profiles").select("*").in("id",C);if(z){console.error("Error fetching profiles:",z);return}L&&(sr(g),xs(L));const W={};if(g&&g.length>0){const ce=g.map(async he=>{const be=he.user_a_id===n.user.id?he.user_b_id:he.user_a_id,{count:oe}=await U.from("messages").select("*",{count:"exact",head:!0}).eq("match_id",he.id).neq("sender_id",n.user.id).is("read_at",null);return{partnerId:be,count:oe}});(await Promise.all(ce)).forEach(({partnerId:he,count:be})=>{be>0&&(W[he]=be)})}ht(W);const re=Object.values(W).reduce((ce,ne)=>ce+ne,0);_s(re)}catch(g){console.error("Critical error in fetchMyMatches:",g),sr([]),xs([]),ht({}),_s(0)}},Z=(g,b="success")=>{H({message:g,type:b}),setTimeout(()=>H(null),3e3)},gi=async(g,b=null)=>{if(b){if(jl(g),gn(b),n)try{await U.from("visits").insert({viewer_id:n.user.id,viewed_id:g.id},{onConflict:"ignore"})}catch{console.log("Visit tracking silent fail")}return}if(jl(g),Bn(0),m("profile-view"),n)try{await U.from("visits").insert({viewer_id:n.user.id,viewed_id:g.id},{onConflict:"ignore"})}catch{console.log("Visit tracking silent fail")}},pc=async g=>{if(fe)return;ve(g);const b=vl.includes(g);try{const{error:_}=await U.from("super_likes").select("id").limit(1);if(_){if(console.error("Super likes table check error:",_),_.code==="42P01"||_.message.includes("does not exist")){Z("Super like feature is not available yet. Please contact support.","error");return}throw _}if(b){const{error:C}=await U.from("super_likes").delete().match({liker_id:n.user.id,liked_id:g});if(C)throw C;yl(L=>L.filter(z=>z!==g)),Z("Super like removed.","success")}else{const{error:C}=await U.from("super_likes").insert({liker_id:n.user.id,liked_id:g});if(C){if(C.code==="23505"||C.message.includes("duplicate")){Z("You've already super liked this user.","info");return}throw C}yl(L=>[...L,g]),Z(" Super Liked! They'll see a special notification.","success")}}catch(_){let C="Error processing super like.";try{_&&(typeof _.message=="string"?C=_.message:typeof _.error=="string"?C=_.error:typeof _=="string"?C=_:_.code?C=`Error code: ${_.code}`:_.hint?C=_.hint:_.details&&(C=_.details))}catch{C="Error processing super like."}_&&typeof _=="object"&&!_.message&&!_.error&&console.error("Super like error code:",_.code||"unknown"),Z(C,"error")}finally{ve(null)}},Dl=async g=>{if(fe)return;ve(g);const _=!!Sl.find(C=>C.liked_id===g);try{if(_){ii(L=>L.filter(z=>z.liked_id!==g));const{error:C}=await U.from("likes").delete().match({liker_id:n.user.id,liked_id:g});C&&(console.error("Error unliking:",C),Z("Could not remove like."))}else{ii(L=>[...L,{id:Date.now(),liked_id:g,created_at:new Date().toISOString()}]);const{error:C}=await U.from("likes").insert({liker_id:n.user.id,liked_id:g});C&&C.code!=="23505"&&(console.error("Error liking:",C),Z("Could not save like."),ii(L=>L.filter(z=>z.liked_id!==g)))}}catch(C){console.error(C),Z("Error updating like")}finally{ve(null)}},vr=async()=>{if(n)try{const{data:g,error:b}=await U.from("likes").select("liked_id, created_at").eq("liker_id",n.user.id);b&&console.error("Error fetching sent likes:",b);const{data:_,error:C}=await U.from("likes").select("liker_id, created_at").eq("liked_id",n.user.id);C&&console.error("Error fetching received likes:",C);const L=[...(g||[]).map(z=>z.liked_id),...(_||[]).map(z=>z.liker_id)];if(L.length>0){const{data:z,error:W}=await U.from("profiles").select("*").in("id",L);if(W)throw W;const re=(g||[]).map(ne=>{const he=z.find(be=>be.id===ne.liked_id);return he?{...ne,profile:he}:ne}),ce=(_||[]).map(ne=>{const he=z.find(be=>be.id===ne.liker_id);return he?{...ne,profile:he}:ne});ii(re||[]),Vu(ce||[])}}catch(g){console.error("Critical error in fetchCrushes:",g)}},xi=g=>{if(!g.target.files||g.target.files.length===0)return;const b=g.target.files[0],_=URL.createObjectURL(b);fa(_),Ds("avatar_url"),Wn(!0),g.target.value=""},ar=g=>{!g||!nn||(nn==="avatar_url"?(Jr(g),rn(URL.createObjectURL(g))):nn==="avatar_url_2"?(Kn(g),fs(URL.createObjectURL(g))):nn==="avatar_url_3"&&(sn(g),Vt(URL.createObjectURL(g))),ms&&ms.startsWith("blob:")&&URL.revokeObjectURL(ms),fa(null),Ds(null))},_a=()=>{ms&&ms.startsWith("blob:")&&URL.revokeObjectURL(ms),Wn(!1),fa(null),Ds(null)},Ul=async g=>{if(g.preventDefault(),!Qa){Z("Please enter your current password.","error");return}if(Os.length<6){Z("New password must be at least 6 characters long.","error");return}if(Os!==Io){Z("New passwords do not match.","error");return}d(!0);try{const{error:b}=await U.auth.updateUser({password:Os});if(b)throw b;Z("Password updated successfully!","success"),m("profile"),ds(""),ua(""),cl("")}catch(b){Z("Error updating password: "+b.message,"error")}finally{d(!1)}},vi=async g=>{if(d(!0),g.type==="login")try{const{emailOrUsername:b,password:_,rememberMe:C}=g,L=(b||"").trim();let z=null;if(L.includes("@"))z=L;else{const ne=L.toLowerCase();if(!ne){Z("Please enter your email or username.","error"),d(!1);return}const{data:he,error:be}=await U.from("profiles").select("id, email").eq("username",ne).maybeSingle();if(be){console.error("Username lookup error:",be),Z("Something went wrong. Please try again.","error"),d(!1);return}if(!he||!he.email){Z("No account found with this username. Try your email or create an account.","error"),d(!1);return}z=he.email}let{data:W,error:re}=await U.from("login_attempts").select("*").eq("email",z).maybeSingle();if(re&&console.error("Error checking login attempts:",re),W){const ne=new Date(W.last_attempt_at),he=new Date;if((he-ne)/(1e3*60*60)>=24)await U.from("login_attempts").delete().eq("email",emailOrPhone),W=null;else if(W?.is_locked){const oe=new Date(W.locked_until);if(oe>he){const xe=Math.ceil((oe-he)/36e5);Z(`Account locked due to multiple failed login attempts. Please contact support@sacredhearts.app to unlock your account. Lock expires in ${xe} hour(s).`,"error"),d(!1);return}else await U.from("login_attempts").delete().eq("email",emailOrPhone),W=null}}let ce=null;try{const{error:ne,data:he}=await U.auth.signInWithPassword({email:emailOrPhone,password:_});if(ce=ne,!ne&&he?.user)try{const{data:{session:be},error:oe}=await U.auth.getSession();!oe&&be&&(console.log(" Session refreshed after login, user_metadata:",be.user?.user_metadata),r(be))}catch(be){console.warn("Could not refresh session after login:",be)}}catch(ne){ce=ne,console.error("SignIn exception:",ne)}if(ce){console.error("Login error:",ce);const ne=ce.message?.includes("Invalid login credentials")||ce.message?.includes("Email not confirmed")||ce.message?.includes("Invalid password"),he=ce.message?.includes("User not found")||ce.message?.includes("No user found");let be=!0;if(he&&(be=!1),be){const oe=W?W.attempt_count+1:1,xe=oe>=5,ge=xe?new Date(Date.now()+1440*60*1e3):null;try{W?await U.from("login_attempts").update({attempt_count:oe,is_locked:xe,locked_until:ge,last_attempt_at:new Date().toISOString(),updated_at:new Date().toISOString()}).eq("email",z):await U.from("login_attempts").insert({email:z,attempt_count:oe,is_locked:xe,locked_until:ge,last_attempt_at:new Date().toISOString()})}catch(Qe){console.error("Error updating login attempts:",Qe)}if(xe)Z("Account locked after 5 failed attempts. Please contact support@sacredhearts.app to unlock your account.","error");else{const Qe=5-oe;Z(`Incorrect password. ${Qe} attempt(s) remaining before account lockout.`,"error")}}else Z("No account found with this email or username. Please check and try again, or create a new account.","error");d(!1);return}else W&&await U.from("login_attempts").delete().eq("email",z)}catch(b){console.error("Login error:",b),Z("Invalid email or password. Please try again.","error"),d(!1)}else if(g.type==="signup"){const{method:b,signupName:_,signupGender:C,signupDOB:L,signupCity:z,signupEmail:W,signupPhone:re,password:ce}=g,ne=Ur(L),he={full_name:_?.trim()||"",gender:C?.trim()||"",date_of_birth:ne||"",city:z?.trim()||"",phone:b==="phone"&&re?.trim()||null};console.log(" Saving signup metadata to user_metadata:",he);try{if(b==="email"){const{error:be}=await U.auth.signUp({email:W,password:ce,options:{data:he}});if(be)throw be;Mu(W),D(!0)}else if(b==="phone"){const oe=(Qe=>{let We=Qe.replace(/[^\d+]/g,"");return We.startsWith("+")||(We=We.replace(/^0/,""),We.startsWith("233")?We="+"+We:We="+233"+We),We})(re);console.log("Formatted phone for signup:",oe);const{error:xe,data:ge}=await U.auth.signUp({phone:oe,password:ce,options:{data:he}});if(xe)throw console.error("Phone signup error details:",JSON.stringify(xe,null,2)),xe.status===429?new Error("Too many requests. Try again in a minute."):xe.message?.includes("phone")||xe.message?.includes("SMS")?new Error("SMS service error. Please check your phone number format (+233XXXXXXXXX) and try again."):xe;Po(oe),ol(ce),ie("verify")}}catch(be){console.error("Signup Error:",be);let oe=be.message;be.message.includes("Password")&&(oe="Password must be at least 6 characters."),Z(b==="phone"?oe:oe||"Signup failed.","error")}d(!1)}},yi=async g=>{if(n?.user?.id){d(!0);try{const{error:b}=await U.from("profiles").update({username:g,updated_at:new Date().toISOString()}).eq("id",n.user.id);if(b)throw b;o(_=>_&&{..._,username:g}),m("setup"),Z("Username saved! Complete your profile.","success")}catch(b){console.error("Username save error:",b),Z(b?.message||"Could not save username. Try again.","error")}finally{d(!1)}}},bi=async g=>{d(!0);try{await U.auth.resetPasswordForEmail(g),Z("Reset link sent to your email!","success"),kt(g)}catch(b){console.error("Reset Error:",b),Z("Error sending reset link.","error")}finally{d(!1)}},Hs=async g=>{d(!0);try{const{error:b}=await U.auth.updateUser({password:g});b?Z(b.message,"error"):(Z("Password updated successfully!","success"),tn(!1),m("form"),ie("form"),window.history.replaceState(null,"",window.location.pathname))}catch(b){console.error("Password Update Error:",b),Z("Error updating password.","error")}finally{d(!1)}},gc=async(g,b)=>{d(!0);try{const{data:_,error:C}=await U.rpc("verify_admin_password",{email_param:g,password_param:b});if(C||!_){Z("Invalid admin credentials","error"),d(!1);return}const{data:L,error:z}=await U.from("admin_users").select("*").eq("email",g).eq("is_active",!0).single();if(z||!L){Z("Invalid admin credentials","error"),d(!1);return}const{password_hash:W,...re}=L;x(re),Z("Admin login successful","success"),await U.from("admin_users").update({last_login:new Date().toISOString()}).eq("id",L.id)}catch(_){console.error("Admin login error:",_),Z("Admin login failed","error")}finally{d(!1)}},vn=()=>{x(null),N("dashboard"),Z("Admin logged out","success")},ja=async()=>{if(!ca){Z("No email to resend.","error");return}d(!0);try{await U.auth.resend({type:"signup",email:ca}),Z("Verification email sent again!","success")}catch(g){console.error("Resend Error:",g),Z("Could not resend email.","error")}finally{d(!1)}},Yu=async g=>{d(!0);try{console.log("Verifying OTP for phone:",Dt);const{data:b,error:_}=await U.auth.verifyOtp({phone:Dt,token:g,type:"sms"});if(_)throw console.error("OTP verification error:",JSON.stringify(_,null,2)),_;Z("Verified Successfully!","success"),Po(""),ol(""),ie("welcome")}catch(b){console.error("OTP Error:",b),Z("Invalid code. Please try again.","error")}finally{d(!1)}},Xt=async(g,b)=>{fe||cs({isOpen:!0,title:"Cancel Request?",message:"Are you sure you want to remove this connection request?",type:"danger",onConfirm:async()=>{ve(b);try{sr(_=>_.filter(C=>C.id!==b)),xs(_=>_.filter(C=>C.id!==g)),await U.from("matches").delete().eq("id",b),await U.from("discovery_exclusions").delete().or(`and(user_id.eq.${n.user.id},excluded_user_id.eq.${g}),and(user_id.eq.${g},excluded_user_id.eq.${n.user.id})`),Z("Request cancelled.","success")}catch(_){console.error("Cancel error:",_),Z("Could not cancel request.")}finally{ve(null)}}})},Ml=async(g,b)=>{fe||cs({isOpen:!0,title:"Unmatch User?",message:"This will remove the chat. You might see them in discovery again.",type:"danger",onConfirm:async()=>{ve(g);try{xs(_=>_.filter(C=>C.id!==g)),sr(_=>_.filter(C=>C.id!==b)),ht(_=>{const C={..._};delete C[g];const L=Object.values(C).reduce((z,W)=>z+W,0);return _s(L),C}),await U.from("matches").delete().eq("id",b),await U.from("matches").delete().match({user_a_id:g,user_b_id:n.user.id}),await U.from("discovery_exclusions").delete().or(`and(user_id.eq.${n.user.id},excluded_user_id.eq.${g}),and(user_id.eq.${g},excluded_user_id.eq.${n.user.id})`),a&&await Wt(n.user.id,a.gender,a),Z("Unmatched.","success")}catch(_){console.error("Unmatch error:",_),Z("Could not unmatch user.")}finally{ve(null)}}})},es=async(g,b)=>{fe||cs({isOpen:!0,title:"Block User?",message:"This user will be hidden from your discovery and chat list forever.",type:"danger",onConfirm:async()=>{ve(g);try{xs(_=>_.filter(C=>C.id!==g)),sr(_=>_.filter(C=>C.id!==b)),await U.from("matches").delete().or(`and(user_a_id.eq.${n.user.id},user_b_id.eq.${g}),and(user_b_id.eq.${n.user.id},user_a_id.eq.${g})`),await U.from("blocks").insert({blocker_id:n.user.id,blocked_id:g}),await U.from("discovery_exclusions").insert([{user_id:n.user.id,excluded_user_id:g},{user_id:g,excluded_user_id:n.user.id}],{onConflict:"ignore"}),a&&await Wt(n.user.id,a.gender,a),Z("User blocked.","success")}catch(_){console.error("Block error:",_),Z("Could not block user.")}finally{ve(null)}}})},Ll=async()=>{if(!navigator.geolocation){Z("Geolocation is not supported by your browser.","error");return}return new Promise(g=>{navigator.geolocation.getCurrentPosition(b=>{const _={lat:b.coords.latitude,long:b.coords.longitude};Pu(_),Z("Location enabled! You can now see distances to other users.","success"),g(_)},b=>{console.error("Location error:",b);let _="Location permission denied. ";b.code===b.PERMISSION_DENIED?_+="Please enable location in your browser settings to see distances.":b.code===b.POSITION_UNAVAILABLE?_+="Location information is unavailable.":_+="Failed to get location.",Z(_,"error"),g(null)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})})},wi=async g=>{if(g.preventDefault(),!n)return;const b=te||a?.date_of_birth||n?.user?.user_metadata?.date_of_birth||"";if(!b){Z("Please enter your Date of Birth.");return}let _=Ur(b.trim());if(!/^\d{4}-\d{2}-\d{2}$/.test(_)){const ne=b.trim().replace(/\D/g,"");if(ne.length===8){const he=ne.slice(0,2),be=ne.slice(2,4);_=`${ne.slice(4,8)}-${be}-${he}`,ue(_)}else{Z("Please enter date in YYYY-MM-DD format (e.g., 1990-12-25)","error");return}}const C=new Date(_);if(isNaN(C.getTime())){Z("Invalid date. Please check your date of birth.","error");return}const L=_;if(te!==_&&ue(_),bu(L)<18){Z("You must be 18+.");return}if(f==="setup"&&!hs&&!a?.avatar_url){Z("Please upload at least one profile photo to continue.","error");return}if(f==="profile"&&!Zt){Z("Phone number is required for account security.","error");return}d(!0),te||a?.date_of_birth;let z=a?.avatar_url,W=a?.avatar_url_2,re=a?.avatar_url_3;const ce=async(ne,he)=>ne&&await ba(ne)||he;try{z=await ce(hs,z),W=await ce(zs,W),re=await ce(dl,re),!te&&L&&ue(L);const ne=pe?parseInt(pe):null,he=He?parseInt(He):null;if(pe&&isNaN(ne))throw new Error("Height must be a valid number.");if(He&&isNaN(he))throw new Error("Weight must be a valid number.");const be={full_name:Se?.trim()||"",gender:Oe||"",city:lt?.trim()||"",religion:I||null,denomination:le||null,intent:me||null,bio:T||null,date_of_birth:L,avatar_url:z,avatar_url_2:W,avatar_url_3:re,height:ne,weight:he,occupation:Ho||null,hobbies:Ut.length>0?Ut.join(","):null,phone:Zt?.trim()||null,icebreaker_prompts:JSON.stringify(bs),updated_at:new Date};te!==L&&ue(L),Qr.lat&&Qr.long&&(be.lat=Qr.lat,be.long=Qr.long);const{data:oe,error:xe}=await U.from("profiles").select("id, gender, date_of_birth, city, phone").eq("id",n.user.id).maybeSingle();if(xe&&xe.code!=="PGRST116")throw xe;let ge={...be};if(oe)!ge.full_name&&oe.full_name&&(ge.full_name=oe.full_name),!ge.gender&&oe.gender&&(ge.gender=oe.gender),!ge.city&&oe.city&&(ge.city=oe.city),!ge.phone&&oe.phone&&(ge.phone=oe.phone);else{const et=n?.user?.user_metadata;if(et){if(!ge.gender&&et.gender&&(ge.gender=et.gender,Oe||ut(et.gender)),!ge.date_of_birth&&et.date_of_birth){const ft=Ur(et.date_of_birth);ge.date_of_birth=ft,te||ue(ft)}!ge.city&&et.city&&(ge.city=et.city,lt||at(et.city)),!ge.full_name&&et.full_name&&(ge.full_name=et.full_name,Se||Re(et.full_name)),!ge.phone&&et.phone&&(ge.phone=et.phone,Zt||Kr(et.phone))}}let Qe;if(oe){const{error:et}=await U.from("profiles").update(ge).eq("id",n.user.id);Qe=et}else{const{error:et}=await U.from("profiles").insert({id:n.user.id,...ge});Qe=et}if(Qe)throw Qe;Z("Profile Saved!","success");const We={previewUrl:pt,previewUrl2:Wo,previewUrl3:an};Jr(null),Kn(null),sn(null),await $r(n.user.id),setTimeout(()=>{if(a?.avatar_url&&We.previewUrl){if(We.previewUrl.startsWith("blob:"))try{URL.revokeObjectURL(We.previewUrl)}catch{}rn(null)}if(a?.avatar_url_2&&We.previewUrl2){if(We.previewUrl2.startsWith("blob:"))try{URL.revokeObjectURL(We.previewUrl2)}catch{}fs(null)}if(a?.avatar_url_3&&We.previewUrl3){if(We.previewUrl3.startsWith("blob:"))try{URL.revokeObjectURL(We.previewUrl3)}catch{}Vt(null)}},2e3)}catch(ne){console.error(ne),Z("Error saving profile: "+ne.message)}finally{d(!1)}},Ns=async()=>{if(n)try{const{data:g,error:b}=await U.from("blocks").select("id, blocked_id, created_at").eq("blocker_id",n.user.id).order("created_at",{ascending:!1});if(b)throw b;if(!g||g.length===0){Jo([]);return}const _=g.map(W=>W.blocked_id),{data:C,error:L}=await U.from("profiles").select("*").in("id",_);if(L)throw L;const z=g.map(W=>{const re=C.find(ce=>ce.id===W.blocked_id);return{...W,profile:re}});Jo(z)}catch(g){console.error("Error fetching blocked users:",g)}},ql=g=>{cs({isOpen:!0,title:"Unblock User?",message:"This user will be able to message you and appear in your discovery feed again.",type:"danger",onConfirm:async()=>{try{const{data:b}=await U.from("blocks").select("blocked_id").eq("id",g).single();if(!b)return;const{error:_}=await U.from("blocks").delete().eq("id",g);if(_)throw _;await U.from("discovery_exclusions").delete().or(`and(user_id.eq.${n.user.id},excluded_user_id.eq.${b.blocked_id}),and(user_id.eq.${b.blocked_id},excluded_user_id.eq.${n.user.id})`),Z("User unblocked.","success"),Ns(),a&&await Wt(n.user.id,a.gender,a)}catch(b){console.error("Unblock error:",b),Z("Could not unblock user.","error")}}})},yn=async g=>{if(!g||!n)return;const{data:b,error:_}=await U.from("messages").select("*").eq("match_id",g).order("created_at",{ascending:!0});if(_){console.error("Error fetching messages:",_);return}const C=(b||[]).filter(L=>L.deleted_by&&Array.isArray(L.deleted_by)?!L.deleted_by.includes(n.user.id):L.deleted_by&&typeof L.deleted_by=="object"?!(Array.isArray(L.deleted_by)?L.deleted_by:[]).some(W=>W===n.user.id||W===n.user.id.toString()):!0);Je(C)},$l=async()=>{const g=pr[gr];if(!g)return;if(Rr&&Rr.id===g.id)pr.find(C=>C.id===Rr.id)?(Us(C=>Math.max(0,C-1)),Wr(null),Pn(!1)):Z("Could not find profile to undo (it might have been refreshed).");else{Wr(g),Us(C=>C+1),Xa&&clearTimeout(Xa);const _=setTimeout(()=>{Wr(null)},2e3);Hn(_)}},Bl=async()=>{if(!n)return;const g=pr[gr];if(!g)return;d(!0);const{data:b,error:_}=await U.from("matches").select("*").eq("user_a_id",g.id).eq("user_b_id",n.user.id).limit(1),C=b?b[0]:null;if(_){console.error("Error checking match:",_),d(!1);return}if(Rr&&Rr.id===g.id)try{const{data:z,error:W}=await U.from("matches").select("*").eq("user_a_id",g.id).eq("user_b_id",n.user.id).limit(1),re=z?z[0]:null;re?(await U.from("matches").update({status:re.status}).eq("id",re.id),await U.from("discovery_exclusions").insert([{user_id:n.user.id,excluded_user_id:g.id},{user_id:g.id,excluded_user_id:n.user.id}],{onConflict:"ignore"}),Z("Re-connected!","success")):(await U.from("matches").insert({user_a_id:n.user.id,user_b_id:g.id,status:"pending"}),await U.from("discovery_exclusions").insert([{user_id:n.user.id,excluded_user_id:g.id},{user_id:g.id,excluded_user_id:n.user.id}]),Z("Connection Requested! ","success")),Wr(null)}catch(z){console.error("Re-connect error:",z),Z("Could not re-connect.")}finally{d(!1)}else{if(C)Wr(C),await U.from("matches").update({status:"mutual"}).eq("id",C.id),await U.from("discovery_exclusions").insert([{user_id:n.user.id,excluded_user_id:g.id},{user_id:g.id,excluded_user_id:n.user.id}],{onConflict:"ignore"}),Z(" It's a Match!","success");else{Z("Connection Requested! ","success");const{error:z}=await U.from("matches").insert({user_a_id:n.user.id,user_b_id:g.id,status:"pending"});await U.from("discovery_exclusions").insert([{user_id:n.user.id,excluded_user_id:g.id},{user_id:g.id,excluded_user_id:n.user.id}]),z&&console.error("Error connecting:",z)}Us(z=>z+1),Wr(null),d(!1)}},nr=()=>{if(!Rr)return;Xa&&clearTimeout(Xa),Hn(null),pr.find(b=>b.id===Rr.id)&&(Us(b=>Math.max(0,b-1)),Pn(!1),Wr(null))},Sa=g=>{const b=g.target.value;vs(b);const _=120,C=40;g.target.style.height="auto";const L=g.target.scrollHeight,z=Math.min(L,_);g.target.style.height=z+"px",g.target.style.overflowY=L>_?"auto":"hidden";const W=z>C;if(cn(W),!b.trim()){cn(!1);return}if(f==="chat"&&ye){const re=Ge.find(ce=>ce.user_a_id===n.user.id&&ce.user_b_id===ye.id||ce.user_b_id===n.user.id&&ce.user_a_id===ye.id);re&&U.channel(`typing:${re.id}`,{config:{broadcast:{self:!0}}}).send({type:"broadcast",event:"typing",payload:{userId:n.user.id}})}},Na=g=>{const b=g.target.files?.[0];if(!b)return;const _=new FileReader;_.onload=C=>{Al({file:b,preview:C.target.result,id:`camera_${Date.now()}`})},_.readAsDataURL(b),g.target.value=""},_i=g=>{const b=Array.from(g.target.files||[]);if(b.length===0)return;const _=[];let C=0;b.forEach((L,z)=>{const W=new FileReader;W.onload=re=>{_.push({file:L,preview:re.target.result,id:`gallery_${Date.now()}_${z}`,status:"pending"}),C++,C===b.length&&$s(ce=>[...ce,..._])},W.readAsDataURL(L)}),g.target.value=""},Ea=(g,b=.6)=>new Promise(_=>{const C=new FileReader;C.onload=L=>{const z=new Image;z.onload=()=>{const W=document.createElement("canvas"),re=W.getContext("2d");let ce=z.width,ne=z.height;const he=b===.6?1200:z.width;(ce>he||ne>he)&&(ce>ne?(ne=ne/ce*he,ce=he):(ce=ce/ne*he,ne=he)),W.width=ce,W.height=ne,re.drawImage(z,0,0,ce,ne),W.toBlob(be=>{_(be||g)},"image/jpeg",b)},z.src=L.target.result},C.readAsDataURL(g)}),ir=async()=>{if(!Kt||!ye)return;const g=Ge.find(_=>_.user_a_id===n.user.id&&_.user_b_id===ye.id||_.user_b_id===n.user.id&&_.user_a_id===ye.id);if(!g){Z("No active match found.","error");return}let b=null;try{Lr(oe=>({...oe,[Kt.id]:"sending"}));let _=Kt.file;Ss==="low"&&(_=await Ea(Kt.file,.6));const C=Kt.file.name.split(".").pop()||"jpg",L=`${n.user.id}_${Date.now()}.${C}`,z=`${n.user.id}/${L}`,W=Kt.preview;b=`temp_camera_${Date.now()}`;const re={id:b,match_id:g.id,sender_id:n.user.id,content:W,type:"image",created_at:new Date().toISOString(),read_at:null};Je(oe=>[...oe,re]),setTimeout(()=>{qr.current?.scrollIntoView({behavior:"smooth"})},100);const{error:ce}=await U.storage.from("avatars").upload(z,_,{contentType:`image/${C}`,upsert:!1});if(ce)throw ce;const{data:{publicUrl:ne}}=U.storage.from("avatars").getPublicUrl(z),{data:he,error:be}=await U.from("messages").insert({match_id:g.id,sender_id:n.user.id,content:ne,type:"image"}).select().single();if(be)throw be;Je(oe=>oe.map(xe=>xe.id===re.id?he:xe)),Lr(oe=>({...oe,[Kt.id]:"sent"})),Z("Photo sent!","success"),Al(null),setTimeout(()=>{qr.current?.scrollIntoView({behavior:"smooth"})},200)}catch(_){console.error("Image send error:",_),Lr(C=>({...C,[Kt.id]:"error"})),Z("Failed to send photo.","error"),typeof b<"u"&&Je(C=>C.filter(L=>L.id!==b))}},lr=async(g=null)=>{const b=g?js.filter(C=>g.includes(C.id)):js.filter(C=>C.status==="pending");if(b.length===0||!ye)return;const _=Ge.find(C=>C.user_a_id===n.user.id&&C.user_b_id===ye.id||C.user_b_id===n.user.id&&C.user_a_id===ye.id);if(!_){Z("No active match found.","error");return}for(const C of b)try{$s(xe=>xe.map(ge=>ge.id===C.id?{...ge,status:"sending"}:ge)),Lr(xe=>({...xe,[C.id]:"sending"}));let L=C.file;Ss==="low"&&(L=await Ea(C.file,.6));const z=C.file.name.split(".").pop()||"jpg",W=`${n.user.id}_${Date.now()}_${Math.random()}.${z}`,re=`${n.user.id}/${W}`,ce={id:`temp_${C.id}`,match_id:_.id,sender_id:n.user.id,content:C.preview,type:"image",created_at:new Date().toISOString(),read_at:null};Je(xe=>[...xe,ce]);const{error:ne}=await U.storage.from("avatars").upload(re,L,{contentType:`image/${z}`,upsert:!1});if(ne)throw ne;const{data:{publicUrl:he}}=U.storage.from("avatars").getPublicUrl(re),{data:be,error:oe}=await U.from("messages").insert({match_id:_.id,sender_id:n.user.id,content:he,type:"image"}).select().single();if(oe)throw oe;Je(xe=>xe.map(ge=>ge.id===ce.id?be:ge)),$s(xe=>xe.map(ge=>ge.id===C.id?{...ge,status:"sent"}:ge)),Lr(xe=>({...xe,[C.id]:"sent"}))}catch(L){console.error("Image send error:",L),$s(z=>z.map(W=>W.id===C.id?{...W,status:"error"}:W)),Lr(z=>({...z,[C.id]:"error"})),Z(`Failed to send ${C.file.name}`,"error")}setTimeout(()=>{$s(C=>C.filter(L=>L.status!=="sent")),qr.current?.scrollIntoView({behavior:"smooth"})},1e3),b.every(C=>C.status==="sent"||C.status==="error")&&Z("Photos sent!","success")},Es=g=>{$s(b=>b.filter(_=>_.id!==g))},yr=async()=>{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia){alert("Your browser does not support audio recording.");return}try{const g=await navigator.mediaDevices.getUserMedia({audio:!0}),b=new(window.AudioContext||window.webkitAudioContext),_=b.createAnalyser(),C=b.createMediaStreamSource(g);_.fftSize=256,C.connect(_),qs.current=b,ya.current=_;const L=new Uint8Array(_.frequencyBinCount),z=()=>{!Cl&&!ws.current||(_.getByteFrequencyData(L),Ls(Array.from(L.slice(0,20))),requestAnimationFrame(z))};z();let W="audio/webm";MediaRecorder.isTypeSupported("audio/webm;codecs=opus")?W="audio/webm;codecs=opus":MediaRecorder.isTypeSupported("audio/mp4")?W="audio/mp4":MediaRecorder.isTypeSupported("audio/ogg")&&(W="audio/ogg");const re=new MediaRecorder(g,{mimeType:W});ws.current=re,di.current=[],re.ondataavailable=ce=>{ce.data.size>0&&di.current.push(ce.data)},re.onstop=async()=>{qs.current&&(qs.current.close(),qs.current=null),ya.current&&(ya.current=null),Ls([]);const ce=new Blob(di.current,{type:W});await ts(ce,W),ui(!1)},re.start(),ui(!0)}catch(g){console.error("Error accessing microphone:",g),alert("Could not access microphone."),ui(!1)}},br=()=>{ws.current&&(ws.current.state!=="inactive"&&ws.current.stop(),ws.current.stream&&ws.current.stream.getTracks().forEach(g=>g.stop())),qs.current&&(qs.current.close().catch(console.error),qs.current=null),Ls([]),ui(!1)},ts=async(g,b="audio/webm")=>{let _=null,C=null;try{er(!0);const L=Ge.find(xe=>xe.user_a_id===n.user.id&&xe.user_b_id===ye.id||xe.user_b_id===n.user.id&&xe.user_a_id===ye.id);if(!L){Z("No active match found.","error");return}let z="webm";b.includes("mp4")?z="m4a":b.includes("ogg")?z="ogg":b.includes("webm")&&(z="webm");const W=`${n.user.id}_${Date.now()}.${z}`,re=`${n.user.id}/${W}`;C=URL.createObjectURL(g),_=`temp_${Date.now()}_${Math.random()}`;const ce={id:_,match_id:L.id,sender_id:n.user.id,content:C,type:"audio",created_at:new Date().toISOString(),read_at:null};Je(xe=>[...xe,ce]),setTimeout(()=>{qr.current?.scrollIntoView({behavior:"smooth"})},100);const{error:ne}=await U.storage.from("avatars").upload(re,g,{contentType:b,upsert:!1});if(ne)throw ne;const{data:{publicUrl:he}}=U.storage.from("avatars").getPublicUrl(re);C&&(URL.revokeObjectURL(C),C=null);const{data:be,error:oe}=await U.from("messages").insert({match_id:L.id,sender_id:n.user.id,content:he,type:"audio"}).select().single();if(oe)throw oe;Je(xe=>xe.map(ge=>ge.id===_?be:ge)),Z("Voice sent!","success"),setTimeout(()=>{qr.current?.scrollIntoView({behavior:"smooth"})},200)}catch(L){console.error("Audio upload error:",L),Z("Failed to send voice.","error"),_&&Je(z=>z.filter(W=>W.id!==_)),C&&URL.revokeObjectURL(C)}finally{er(!1)}},ji=g=>{Yt(g)},Pl=(g,b)=>{b.preventDefault(),b.stopPropagation(),ji(g)},Hl=(g,b)=>{b.stopPropagation(),ga&&clearTimeout(ga);const _=setTimeout(()=>{ji(g),navigator.vibrate&&navigator.vibrate(50)},300);ec(_)},Il=g=>{ga&&(clearTimeout(ga),ec(null))},Ct=g=>{if(!g){console.error("handleReplyAction: msg is null or undefined"),Z("Cannot reply to this message. Please try again.","error"),Yt(null);return}if(!g.id){console.error("handleReplyAction: msg.id is missing",g),Z("Cannot reply to this message. Missing message ID.","error"),Yt(null);return}const b=g.id.toString();if(b.startsWith("temp_")||b.startsWith("temp_msg_")||b.startsWith("temp_camera_")||b.startsWith("temp_ice_")){console.warn("Cannot reply to temporary message:",b),Z("Please wait for the message to be sent before replying.","error"),Yt(null);return}if(!(!isNaN(b)&&b.length>0||/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(b))){console.error("Invalid message ID format for reply:",b,"Type:",typeof g.id),Z("Cannot reply to this message. Invalid message reference.","error"),Yt(null);return}fn(g),Yt(null),Fr.current&&Fr.current.focus()},nt=g=>{navigator.clipboard.writeText(g),Z("Copied to clipboard","success"),Yt(null)},$e=()=>{Mr.find(b=>b.id===hn)&&(us({isOpen:!1,title:"Forward Message",placeholder:"Select a match to forward to",onSubmit:null}),Z("Forward: Select a match from your matches list","success"),Yt(null))},ks=g=>{us({isOpen:!0,title:"Report Message",placeholder:"Why are you reporting this message?",onSubmit:b=>{U.from("reports").insert({reporter_id:n.user.id,reported_id:ye.id,reason:b,message:g.content}),Z("Report submitted.","success"),Yt(null)}})},or=async g=>{if(!n)return;Je(W=>W.filter(re=>re.id!==g)),Yt(null);const{data:b,error:_}=await U.from("messages").select("deleted_by").eq("id",g).single();if(_){console.error("Error fetching message:",_),Z("Failed to delete message.","error");const W=Ge.find(re=>re.user_a_id===n.user.id&&re.user_b_id===ye.id||re.user_b_id===n.user.id&&re.user_a_id===ye.id);W&&await yn(W.id);return}let C=[];b?.deleted_by&&(Array.isArray(b.deleted_by)?C=[...b.deleted_by]:typeof b.deleted_by=="object"&&(C=Object.values(b.deleted_by).map(W=>typeof W=="string"?W:String(W))));const L=n.user.id.toString();!C.includes(L)&&!C.includes(n.user.id)&&C.push(L);const{error:z}=await U.from("messages").update({deleted_by:C}).eq("id",g);if(z){console.error("Delete error:",z),Z("Failed to delete message.","error");const W=Ge.find(re=>re.user_a_id===n.user.id&&re.user_b_id===ye.id||re.user_b_id===n.user.id&&re.user_a_id===ye.id);W&&await yn(W.id)}else Z("Message deleted.","success")},Si=async(g,b=null)=>{if(!n)return;const _=b||ye?.id;if(!_)return;let C=Ge.find(he=>he.user_a_id===n.user.id&&he.user_b_id===_||he.user_b_id===n.user.id&&he.user_a_id===_);if(!C){const{data:he,error:be}=await U.from("matches").insert({user_a_id:n.user.id,user_b_id:_,status:"pending"}).select().single();if(be){console.error("Error creating match:",be),Z("Failed to send prompt.","error");return}C=he,await xn(),f!=="chat"&&!b&&(m("chat"),Fn(ye||xr.find(oe=>oe.id===_)))}if(C.status==="mutual"){vs(g);return}const{data:L}=await U.from("messages").select("id").eq("match_id",C.id).eq("sender_id",n.user.id);if((L?.length||0)>=3){Z("You've reached the 3-message limit. Connect to continue chatting!","error");return}const W=`temp_ice_${Date.now()}`,re={id:W,match_id:C.id,sender_id:n.user.id,content:g,created_at:new Date().toISOString(),read_at:null,type:"text"};f==="chat"&&ye?.id===_&&Je(he=>[...he,re]);const{data:ce,error:ne}=await U.from("messages").insert({match_id:C.id,sender_id:n.user.id,content:g,read_at:null,type:"text"}).select().single();ne?(console.error("Error sending icebreaker:",ne),Z("Failed to send prompt.","error"),f==="chat"&&ye?.id===_&&Je(he=>he.filter(be=>be.id!==W))):(f==="chat"&&ye?.id===_&&Je(he=>he.map(be=>be.id===W?ce:be)),Z("Prompt sent!","success"),await xn(),C.id&&await yn(C.id))},rs=async()=>{if(!Ms.trim()||!ye||!n)return;const g=_l,b=Ms.trim(),_=Ge.find(ne=>ne.user_a_id===n.user.id&&ne.user_b_id===ye.id||ne.user_b_id===n.user.id&&ne.user_a_id===ye.id);if(!_){Z("You must connect first before sending messages.","error");return}if(_.status!=="mutual"){const{data:ne,error:he}=await U.from("messages").select("id").eq("match_id",_.id).eq("sender_id",n.user.id);if(!he&&ne&&ne.length>=3){Z("You've reached the 3-message limit. Wait for them to connect to continue chatting!","error");return}}let C=null;if(g?.id!==void 0&&g?.id!==null){const ne=g.id,he=String(ne);if(he.startsWith("temp_")||he.startsWith("temp_msg_")||he.startsWith("temp_camera_")||he.startsWith("temp_ice_")){console.error("Cannot reply to temporary message:",ne),Z("Please wait for the message to be sent before replying.","error"),fn(null);return}const oe=Number(he);if(Number.isFinite(oe))C=oe;else if(/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(he))C=he;else{console.error("Invalid ID format for replied_to_id:",ne,"Type:",typeof ne),Z("Invalid reply reference. Please try again.","error"),fn(null);return}}const L=`temp_msg_${Date.now()}_${Math.random()}`,z={id:L,match_id:_.id,sender_id:n.user.id,content:b,created_at:new Date().toISOString(),read_at:null,deleted_by:null,replied_to_id:C};Je(ne=>[...ne,z]),vs(""),fn(null),cn(!1),Fr.current&&(Fr.current.style.height="auto",Fr.current.style.height="40px"),setTimeout(()=>{qr.current?.scrollIntoView({behavior:"smooth"})},100);const W={match_id:_.id,sender_id:n.user.id,content:b,read_at:null,replied_to_id:C};let{data:re,error:ce}=await U.from("messages").insert(W).select().single();if(ce?.code==="22P02"&&C!==null){console.warn("Reply insert failed due to replied_to_id type mismatch. Retrying without replied_to_id.",ce);const ne={match_id:_.id,sender_id:n.user.id,content:b,read_at:null},he=await U.from("messages").insert(ne).select().single();re=he.data,ce=he.error,ce||Z("Reply couldn't be attached yet (database needs reply column fix).","info")}if(ce)console.error("Error sending message:",ce),Z("Failed to send message.","error"),Je(ne=>ne.filter(he=>he.id!==L));else{Je(ne=>ne.map(he=>he.id===L?re:he)),_.status!=="mutual"&&mn(ne=>ne+1);try{const ne=_.user_a_id===n.user.id?_.user_b_id:_.user_a_id;await U.functions.invoke("send-push-notification",{recipient_id:ne,title:`New message from ${a.full_name}`,body:b}),Z("Message sent!","success")}catch(ne){console.log("Push notification simulation failed (this is expected if not configured with FCM):",ne),Z("Message sent!","success")}setTimeout(()=>{qr.current?.scrollIntoView({behavior:"smooth"})},200)}};S.useEffect(()=>{if(!n||f!=="chat"||!ye){mn(0);return}const g=Ge.find(_=>_.user_a_id===n.user.id&&_.user_b_id===ye.id||_.user_b_id===n.user.id&&_.user_a_id===ye.id);if(!g){mn(0);return}if(g.status==="mutual"){mn(0);return}(async()=>{const{data:_,error:C}=await U.from("messages").select("id").eq("match_id",g.id).eq("sender_id",n.user.id);!C&&_&&mn(_.length)})()},[n,f,ye,Ge]),S.useEffect(()=>{if(!n||f!=="chat"||!ye)return;const g=Ge.find(_=>_.user_a_id===n.user.id&&_.user_b_id===ye.id||_.user_b_id===n.user.id&&_.user_a_id===ye.id);if(!g)return;(async()=>{try{await U.from("messages").update({read_at:new Date().toISOString()}).eq("match_id",g.id).neq("sender_id",n.user.id).is("read_at",null),ht(_=>{const C={..._,[ye.id]:0},L=Object.values(C).reduce((z,W)=>z+W,0);return _s(L),C})}catch(_){console.error("Error marking messages as seen:",_)}})()},[n,f,ye,Ge]),S.useEffect(()=>{if(!n||f!=="chat"||!ye)return;const g=Ge.find(C=>C.user_a_id===n.user.id&&C.user_b_id===ye.id||C.user_b_id===n.user.id&&C.user_a_id===ye.id);if(!g)return;const b=g.id,_=U.channel(`messages:${b}`,{config:{broadcast:{self:!1}}}).on("postgres_changes",{event:"INSERT",schema:"public",table:"messages",filter:`match_id=eq.${b}`},C=>{const L=C.new;L.deleted_by&&(Array.isArray(L.deleted_by)&&L.deleted_by.includes(n.user.id)||typeof L.deleted_by=="object"&&Object.values(L.deleted_by).includes(n.user.id)||Array.isArray(L.deleted_by)&&L.deleted_by.some(W=>W===n.user.id.toString()))||(Je(W=>{if(W.some(ce=>ce.id===C.new.id))return W;if(C.new.sender_id===n.user.id){const ce=W.find(ne=>(ne.id.toString().startsWith("temp_")||ne.id.toString().startsWith("temp_msg_"))&&ne.sender_id===n.user.id&&ne.content===C.new.content&&Math.abs(new Date(ne.created_at).getTime()-new Date(C.new.created_at).getTime())<3e3);return ce?W.map(ne=>ne.id===ce.id?C.new:ne):W}return[...W,C.new]}),f==="chat"&&C.new.sender_id!==n.user.id&&U.from("messages").update({read_at:new Date().toISOString()}).eq("id",C.new.id).neq("sender_id",n.user.id))}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"messages",filter:`match_id=eq.${b}`},C=>{const L=C.new,z=L.deleted_by&&(Array.isArray(L.deleted_by)&&L.deleted_by.includes(n.user.id)||typeof L.deleted_by=="object"&&Object.values(L.deleted_by).includes(n.user.id)||Array.isArray(L.deleted_by)&&L.deleted_by.some(W=>W===n.user.id.toString()));Je(z?W=>W.filter(re=>re.id!==L.id):W=>W.map(re=>re.id===L.id?L:re))}).subscribe();return mi.current=_,()=>{mi.current&&U.removeChannel(mi.current)}},[n,f,ye,Ge]),S.useEffect(()=>{if(!n||f!=="chat"||!ye)return;const g=Ge.find(C=>C.user_a_id===n.user.id&&C.user_b_id===ye.id||C.user_b_id===n.user.id&&C.user_a_id===ye.id);if(!g)return;const b=g.id,_=U.channel(`typing:${b}`,{config:{broadcast:{self:!1}}}).on("broadcast",{event:"typing"},()=>{ml(!0),setTimeout(()=>ml(!1),3e3)}).subscribe();return()=>U.removeChannel(_)},[n,f,ye]),S.useEffect(()=>{f==="chat"&&Mr.length>0&&qr.current?.scrollIntoView({behavior:"smooth"})},[Mr]);const xc=window.location.pathname==="/admin"&&!p;return i.jsxs("div",{className:(n||p)&&!xc?"dark":"",children:[k&&i.jsxs("div",{className:`fixed top-20 left-1/2 transform -translate-x-1/2 px-6 py-3 rounded-xl shadow-xl z-[100] transition-all duration-300 flex items-center gap-2 animate-bounce-in ${k.type==="success"?"bg-gray-800 text-white":"bg-red-500 text-white"}`,children:[k.type==="success"?i.jsx(Ir,{size:18}):i.jsx(As,{size:18}),i.jsx("span",{className:"font-bold text-sm",children:k.message})]}),i.jsx(Gj,{children:i.jsxs(wj,{children:[i.jsx(el,{path:"/admin",element:p?i.jsxs("div",{className:"min-h-screen bg-gray-900",children:[i.jsx("div",{className:"bg-gray-800 border-b border-gray-700",children:i.jsxs("div",{className:"flex items-center justify-between px-6 py-4",children:[i.jsxs("div",{className:"flex items-center gap-6",children:[i.jsx("button",{onClick:()=>N("dashboard"),className:`px-4 py-2 rounded-lg transition text-white ${w==="dashboard"?"bg-rose-600":"bg-gray-700 hover:bg-gray-600"}`,children:"Dashboard"}),i.jsx("button",{onClick:()=>N("users"),className:`px-4 py-2 rounded-lg transition text-white ${w==="users"?"bg-rose-600":"bg-gray-700 hover:bg-gray-600"}`,children:"Users"}),i.jsx("button",{onClick:()=>N("reports"),className:`px-4 py-2 rounded-lg transition text-white ${w==="reports"?"bg-rose-600":"bg-gray-700 hover:bg-gray-600"}`,children:"Reports"}),i.jsx("button",{onClick:()=>N("premium"),className:`px-4 py-2 rounded-lg transition text-white ${w==="premium"?"bg-rose-600":"bg-gray-700 hover:bg-gray-600"}`,children:"Premium"}),i.jsx("button",{onClick:()=>N("logs"),className:`px-4 py-2 rounded-lg transition text-white ${w==="logs"?"bg-rose-600":"bg-gray-700 hover:bg-gray-600"}`,children:"Logs"})]}),i.jsx("button",{onClick:vn,className:"px-4 py-2 bg-red-600 hover:bg-red-700 rounded-lg transition text-white",children:"Logout"})]})}),w==="dashboard"&&i.jsx(y2,{adminUser:p,onLogout:vn}),w==="users"&&i.jsx(b2,{adminUser:p}),w==="reports"&&i.jsx(w2,{adminUser:p}),w==="premium"&&i.jsx(j2,{adminUser:p}),w==="logs"&&i.jsx(N2,{adminUser:p})]}):i.jsx(v2,{onLogin:gc,loading:u})}),i.jsx(el,{path:"/terms",element:i.jsx(d2,{})}),i.jsx(el,{path:"/privacy",element:i.jsx(h2,{})}),i.jsx(el,{path:"/guidelines",element:i.jsx(f2,{})}),i.jsx(el,{path:"*",element:i.jsxs(i.Fragment,{children:[u&&i.jsx(k2,{}),f==="reset-password"&&($u?i.jsx(p2,{onUpdatePassword:Hs,onBack:()=>{tn(!1),m("form"),ie("form"),window.history.replaceState(null,"",window.location.pathname)},loading:u}):i.jsx(jg,{onResetRequest:bi,email:Xr,onBack:()=>{m("form"),ie("form")},loading:u})),$&&i.jsxs("div",{className:"relative min-h-screen w-full overflow-hidden flex items-center justify-center",children:[i.jsxs("div",{className:"absolute inset-0 -z-10 h-full w-full",children:[i.jsx("img",{src:nl,className:"w-full h-full object-cover",alt:"Background"}),i.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm"})]}),i.jsxs("div",{className:"relative z-10 w-full max-w-md mx-4 bg-white/10 backdrop-blur-xl border border-white/20 rounded-3xl shadow-2xl p-8 text-center",children:[i.jsx("div",{className:"mb-6",children:i.jsx("div",{className:"w-20 h-20 bg-green-500/20 rounded-full flex items-center justify-center mx-auto border-2 border-green-500/40",children:i.jsx(Dn,{size:42,className:"text-green-400 drop-shadow-lg"})})}),i.jsx("h2",{className:"text-2xl font-extrabold text-white mb-2",children:"Almost There!"}),i.jsxs("p",{className:"text-sm sm:text-base text-white/90 font-light leading-relaxed",children:["We sent a magic link to ",i.jsx("br",{}),i.jsx("span",{className:"font-bold text-rose-300",children:ca||"your email"})]}),i.jsxs("div",{className:"flex flex-col gap-3 mt-6",children:[i.jsx("button",{onClick:()=>D(!1),className:"w-full bg-white text-rose-600 font-bold py-3.5 rounded-xl shadow-lg hover:bg-gray-100 active:scale-[0.98] transition-all duration-200",children:"I've Verified My Email"}),i.jsx("button",{onClick:ja,disabled:u,className:"w-full text-xs font-bold text-white/70 hover:text-white bg-white/5 py-2 rounded-lg hover:bg-white/10 transition disabled:opacity-50",children:u?"Sending...":"Resend Verification Email"})]})]})]}),!n&&i.jsxs("div",{children:[K==="welcome"&&i.jsx(n2,{onLoginClick:()=>{F("login"),ie("form")},onSignupClick:()=>{F("signup"),ie("form")}}),K==="form"&&i.jsx(i2,{mode:X,onSubmit:vi,onBack:()=>ie("welcome"),onForgotClick:()=>ie("reset"),loading:u}),K==="verify"&&i.jsx(m2,{onVerify:Yu,phone:Dt,onBack:()=>ie("form"),loading:u}),K==="reset"&&i.jsx(jg,{onResetRequest:bi,email:Xr,onBack:()=>ie("form"),loading:u})]}),n&&f==="username"&&i.jsx(x2,{fullName:Se||a?.full_name,onSubmit:yi,loading:u}),n&&f!=="username"&&i.jsxs("div",{className:"app-shell min-h-screen w-full h-full overflow-hidden",children:[i.jsx(t2,{profile:a,stats:E,setView:m,onLogout:async()=>{await U.auth.signOut(),ie("welcome"),pn("light"),localStorage.setItem("sacred_theme","light"),document.documentElement.classList.remove("dark"),document.body.style.backgroundColor="transparent",document.body.style.backgroundImage="none"},onFilterClick:()=>ps(!0),theme:sc,toggleTheme:Gu}),i.jsxs("main",{className:"scrollable-content relative",children:[i.jsxs("div",{className:"absolute inset-0 pointer-events-none -z-10",children:[i.jsx("div",{className:"absolute top-0 left-0 w-72 h-72 bg-rose-200 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-pulse-slow"}),i.jsx("div",{className:"absolute bottom-0 right-0 w-96 h-96 bg-purple-200 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-pulse-slow"})]}),(f==="profile"||f==="setup")&&i.jsx("div",{className:"w-full max-w-md mx-auto px-4 pt-2",children:i.jsxs("div",{className:"bg-black/20 backdrop-blur-xl border border-white/20 rounded-3xl shadow-2xl p-6 sm:p-8",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6 px-2",children:[i.jsx("button",{onClick:()=>m("privacy"),className:"text-white/80 hover:text-rose-300 p-2 transition rounded-full hover:bg-white/5","aria-label":"Privacy & Security Settings",children:i.jsx(Qt,{size:24})}),i.jsxs("div",{className:"text-center flex-1",children:[i.jsx("div",{className:"flex items-center justify-center gap-3 mb-4",children:i.jsxs("label",{htmlFor:"avatar-input-main",className:"cursor-pointer relative",children:[i.jsxs("div",{className:"w-20 h-20 rounded-full border-4 border-white/30 overflow-hidden relative cursor-pointer group shadow-lg",children:[i.jsx("img",{src:pt||a?.avatar_url||`https://api.dicebear.com/7.x/avataaars/svg?seed=${a?.full_name}`,className:"w-full h-full object-cover"}),i.jsx("div",{className:"absolute inset-0 bg-black/30 flex items-center justify-center opacity-0 group-hover:opacity-100 transition text-white",children:i.jsx(ag,{size:20})})]}),a?.is_verified&&i.jsx("div",{className:"absolute -bottom-1 -right-1 bg-blue-500 rounded-full w-5 h-5 flex items-center justify-center border-2 border-white shadow-md z-10",title:"Verified Account",children:i.jsx(Ir,{size:10,className:"text-white",strokeWidth:3})})]})}),i.jsx("input",{type:"file",id:"avatar-input-main",className:"hidden",accept:"image/*",onChange:xi}),i.jsx("div",{className:"flex items-center justify-center gap-2",children:i.jsx("h2",{className:"text-xl font-bold text-white mb-1",children:f==="profile"?"Edit Profile":"Complete Profile"})}),i.jsx("p",{className:"text-xs text-white/70 mt-1",children:"Help us find your perfect match."})]}),i.jsx("button",{onClick:()=>m("settings"),className:"text-white/80 hover:text-rose-300 p-2 transition rounded-full hover:bg-white/5","aria-label":"General Settings",children:i.jsx(R_,{size:24})})]}),(f==="profile"||f==="setup")&&i.jsxs("div",{className:"mb-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-2",children:[i.jsx("span",{className:"text-xs font-bold text-white/80 uppercase tracking-wider",children:"Profile Strength"}),i.jsxs("span",{className:`text-xs font-bold ${wa(a||{})===100?"text-green-400":"text-rose-300"}`,children:[wa(a||{}),"%"]})]}),i.jsx("div",{className:"w-full bg-white/10 rounded-full h-2.5 overflow-hidden",children:i.jsx("div",{className:`h-2.5 rounded-full transition-all duration-1000 ${wa(a||{})===100?"bg-green-500":"bg-rose-600"}`,style:{width:`${wa(a||{})}%`}})})]}),(f==="profile"||f==="setup")&&i.jsxs("form",{onSubmit:wi,className:"space-y-4",onReset:g=>{g.preventDefault()},children:[i.jsx("div",{className:"grid grid-cols-3 gap-3",children:[{file:hs,setFile:Jr,preview:pt,setPreview:rn,profileKey:"avatar_url",isPrimary:!0},{file:zs,setFile:Kn,preview:Wo,setPreview:fs,profileKey:"avatar_url_2"},{file:dl,setFile:sn,preview:an,setPreview:Vt,profileKey:"avatar_url_3"}].map((g,b)=>i.jsxs("label",{htmlFor:`avatar-input-${b}`,onClick:_=>{_.stopPropagation(),Ft&&_.preventDefault()},className:`relative aspect-square rounded-xl overflow-hidden border-2 ${g.isPrimary?"border-rose-300/50":"border-white/20"} cursor-pointer group transition hover:border-rose-300 ${Ft?"opacity-50 cursor-not-allowed pointer-events-none":""} touch-manipulation block`,style:{WebkitTapHighlightColor:"transparent"},children:[i.jsx("img",{src:g.preview?g.preview:a?.[g.profileKey]?a[g.profileKey]:g.isPrimary?`https://api.dicebear.com/7.x/avataaars/svg?seed=${a?.full_name||"user"}`:'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="200"><rect width="200" height="200" fill="%23e5e7eb"/></svg>',className:"w-full h-full object-cover opacity-90",alt:g.isPrimary?"Profile":"Additional photo"},g.preview?`preview-${g.profileKey}`:`profile-${g.profileKey}`),Ft&&g.file&&i.jsxs("div",{className:"absolute inset-0 bg-black/70 flex flex-col items-center justify-center z-10",children:[i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white mb-2"}),i.jsx("span",{className:"text-white text-xs font-medium",children:"Uploading..."})]}),!Ft&&i.jsx("div",{className:"absolute inset-0 bg-black/30 flex items-center justify-center opacity-0 group-hover:opacity-100 transition text-white",children:i.jsx(ag,{size:18,className:"text-white"})}),f==="setup"&&g.isPrimary&&!g.preview&&!a?.avatar_url&&i.jsx("div",{className:"absolute top-1 right-1 bg-red-500 text-white text-xs font-bold px-1.5 py-0.5 rounded",children:"Required"}),i.jsx("input",{type:"file",id:`avatar-input-${b}`,className:"hidden",accept:"image/*",disabled:Ft,onClick:_=>{_.stopPropagation()},onChange:_=>{if(_.preventDefault(),_.stopPropagation(),Ft){_.target.value="";return}const C=_.target.files?.[0];if(C){const L=URL.createObjectURL(C);fa(L),Ds(g.profileKey),Wn(!0)}_.target.value=""}})]},b))}),i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute left-3 top-3.5 text-white/60",children:i.jsx(Ln,{size:18,strokeWidth:1.5})}),i.jsx("input",{type:"text",placeholder:"Full Name",className:"w-full p-3 pl-10 border border-white/20 bg-white/10 text-white placeholder-white/40 rounded-xl focus:ring-2 focus:ring-rose-500 focus:bg-white/20 outline-none transition",value:Se,onChange:g=>Re(g.target.value)})]}),f==="profile"?i.jsxs("div",{className:"w-full p-3 bg-white/5 border border-white/20 rounded-xl text-white/70",children:["Gender: ",Oe==="male"?"Man":"Woman"," (Locked)"]}):i.jsxs("select",{className:"w-full p-3 pl-3 border border-white/20 bg-white/10 text-white rounded-xl focus:ring-2 focus:ring-rose-500 focus:bg-white/20 outline-none [&>option]:text-gray-800",value:Oe,onChange:g=>ut(g.target.value),children:[i.jsx("option",{value:"",children:"Gender"}),i.jsx("option",{value:"male",children:"Man"}),i.jsx("option",{value:"female",children:"Woman"})]}),i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute left-3 top-3.5 text-white/60",children:i.jsx(yf,{size:18,strokeWidth:1.5})}),i.jsx("input",{type:"text",placeholder:"YYYY-MM-DD (e.g., 1990-12-25)",inputMode:"numeric",className:"w-full p-3 pl-10 border border-white/20 bg-white/10 text-white rounded-xl focus:ring-2 focus:ring-rose-500 focus:bg-white/20 outline-none transition placeholder-white/40",value:te,onChange:g=>{let b=g.target.value;b=b.replace(/[^\d-]/g,""),b.length>10&&(b=b.slice(0,10)),b.length>4&&b[4]!=="-"&&(b=b.slice(0,4)+"-"+b.slice(4)),b.length>7&&b[7]!=="-"&&(b=b.slice(0,7)+"-"+b.slice(7)),ue(b)},onBlur:g=>{const b=g.target.value.trim();if(b&&!/^\d{4}-\d{2}-\d{2}$/.test(b)){const _=b.replace(/\D/g,"");if(_.length===8){const C=`${_.slice(0,4)}-${_.slice(4,6)}-${_.slice(6,8)}`;ue(C)}else Z("Please enter date in YYYY-MM-DD format (e.g., 1990-12-25)","error")}}})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-white/60 font-bold mb-1 pl-1",children:"Height (cm)"}),i.jsx("input",{type:"number",placeholder:"e.g. 180",className:"w-full p-3 border border-white/20 bg-white/10 text-white placeholder-white/40 rounded-xl focus:ring-2 focus:ring-rose-500 focus:bg-white/20 outline-none",value:pe,onChange:g=>de(g.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-white/60 font-bold mb-1 pl-1",children:"Weight (kg)"}),i.jsx("input",{type:"number",placeholder:"e.g. 75",className:"w-full p-3 border border-white/20 bg-white/10 text-white placeholder-white/40 rounded-xl focus:ring-2 focus:ring-rose-500 focus:bg-white/20 outline-none",value:He,onChange:g=>Ue(g.target.value)})]})]}),i.jsxs("div",{className:"relative",children:[i.jsx("label",{className:"block text-xs text-white/60 font-bold mb-1 pl-1",children:"Occupation"}),i.jsx("input",{type:"text",placeholder:"e.g. Software Engineer, Student",className:"w-full p-3 border border-white/20 bg-white/10 text-white placeholder-white/40 rounded-xl focus:ring-2 focus:ring-rose-500 focus:bg-white/20 outline-none",value:Ho,onChange:g=>In(g.target.value)})]}),i.jsxs("div",{className:"mt-4",children:[i.jsx("label",{className:"block text-xs text-white/60 font-bold mb-2 pl-1",children:"Hobbies (Select)"}),i.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 gap-2",children:Vn.map(g=>{const b=Ut.includes(g);return i.jsx("button",{type:"button",onClick:()=>{Ja(b?_=>_.filter(C=>C!==g):_=>[..._,g])},className:`
                                                            text-xs py-2 rounded-lg border transition font-medium
                                                            ${b?"bg-rose-600 text-white border-rose-500":"bg-white/10 text-white/70 border-white/20 hover:bg-white/20"}
                                                        `,children:g},g)})})]}),i.jsxs("select",{className:"w-full p-3 pl-3 border border-white/20 bg-white/10 text-white rounded-xl focus:ring-2 focus:ring-rose-500 focus:bg-white/20 outline-none [&>option]:text-gray-800",value:lt,onChange:g=>at(g.target.value),children:[i.jsx("option",{value:"",children:"City"}),i.jsx("option",{value:"Accra",children:"Accra"}),i.jsx("option",{value:"Kumasi",children:"Kumasi"}),i.jsx("option",{value:"Tema",children:"Tema"}),i.jsx("option",{value:"Tamale",children:"Tamale"}),i.jsx("option",{value:"Cape Coast",children:"Cape Coast"}),i.jsx("option",{value:"Takoradi",children:"Takoradi"}),i.jsx("option",{value:"Sunyani",children:"Sunyani"}),i.jsx("option",{value:"Ho",children:"Ho"}),i.jsx("option",{value:"Wa",children:"Wa"}),i.jsx("option",{value:"Techiman",children:"Techiman"}),i.jsx("option",{value:"Goaso",children:"Goaso"}),i.jsx("option",{value:"Nalerigu",children:"Nalerigu"}),i.jsx("option",{value:"Sefwi Wiaso",children:"Sefwi Wiaso"}),i.jsx("option",{value:"Damango",children:"Damango"}),i.jsx("option",{value:"Dambai",children:"Dambai"}),i.jsx("option",{value:"Bolgatanga",children:"Bolgatanga"})]}),i.jsxs("select",{className:"w-full p-3 pl-3 border border-white/20 bg-white/10 text-white rounded-xl focus:ring-2 focus:ring-rose-500 focus:bg-white/20 outline-none [&>option]:text-gray-800",value:I,onChange:g=>R(g.target.value),children:[i.jsx("option",{value:"",children:"Religion"}),i.jsx("option",{value:"Christian",children:"Christian"}),i.jsx("option",{value:"Muslim",children:"Muslim"}),i.jsx("option",{value:"Others",children:"Others"})]}),i.jsxs("select",{className:"w-full p-3 pl-3 border border-white/20 bg-white/10 text-white rounded-xl focus:ring-2 focus:ring-rose-500 focus:bg-white/20 outline-none [&>option]:text-gray-800",value:me,onChange:g=>y(g.target.value),children:[i.jsx("option",{value:"",children:"Intent"}),i.jsx("option",{value:"Serious Dating",children:"Serious Dating"}),i.jsx("option",{value:"Marriage",children:"Marriage"}),i.jsx("option",{value:"New Friends",children:"New Friends"})]}),i.jsx("textarea",{className:"w-full p-3 border border-white/20 bg-white/10 text-white placeholder-white/40 rounded-xl focus:ring-2 focus:ring-rose-500 focus:bg-white/20 outline-none",placeholder:"About me...",rows:"3",value:T,onChange:g=>J(g.target.value)}),f==="profile"&&i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute left-3 top-3.5 text-white/60",children:i.jsx(Co,{size:18,strokeWidth:1.5})}),i.jsx("input",{type:"tel",placeholder:"Phone Number (+233...)",required:f==="profile",className:"w-full p-3 pl-10 border border-white/20 bg-white/10 text-white placeholder-white/40 rounded-xl focus:ring-2 focus:ring-rose-500 focus:bg-white/20 outline-none transition",value:Zt,onChange:g=>Kr(g.target.value)}),i.jsx("p",{className:"text-xs text-white/50 mt-1 ml-1",children:"Required for account security and verification"})]}),f==="setup"&&!Qr.lat&&!a?.lat&&i.jsx("div",{className:"bg-rose-500/20 border border-rose-400/30 rounded-xl p-4 mb-4",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx(ra,{size:20,className:"text-rose-300 mt-0.5 flex-shrink-0"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"text-white font-semibold text-sm mb-1",children:"Enable Location"}),i.jsx("p",{className:"text-white/70 text-xs mb-3",children:"Allow location access to see distances to other users and help them find you!"}),i.jsxs("button",{type:"button",onClick:Ll,className:"w-full bg-rose-600 hover:bg-rose-700 text-white font-bold py-2 px-4 rounded-lg transition text-sm flex items-center justify-center gap-2",children:[i.jsx(ra,{size:16}),"Enable Location"]})]})]})}),i.jsx("button",{type:"submit",disabled:u,className:"w-full bg-rose-600 text-white font-bold py-3.5 rounded-xl shadow-lg shadow-rose-600/40 hover:bg-rose-700 active:scale-95 transition flex items-center justify-center gap-2",children:u?"Saving...":i.jsxs(i.Fragment,{children:[i.jsx(C_,{size:18,className:"mr-2"}),f==="setup"?"Complete Profile":"Update Profile"]})})]}),f==="profile"&&i.jsxs("div",{className:"mt-6 pt-6 border-t border-white/10 grid grid-cols-2 gap-3",children:[i.jsxs("button",{onClick:()=>{Ns(),m("blocked")},className:"bg-white/10 hover:bg-white/20 text-white py-3 rounded-xl font-medium text-sm flex items-center justify-center gap-2 border border-white/20 transition",children:[i.jsx(As,{size:16})," Blocked"]}),i.jsxs("button",{onClick:async()=>{await U.auth.signOut(),ie("welcome")},className:"bg-red-500/20 hover:bg-red-500/30 text-red-200 border border-red-500/30 py-3 rounded-xl font-medium text-sm flex items-center justify-center gap-2 hover:border-red-500/50 transition",children:[i.jsx(Gg,{size:16})," Logout"]})]})]})}),f==="discovery"&&i.jsx("div",{className:"w-full max-w-md mx-auto px-4 pt-2",children:i.jsxs("div",{className:"flex flex-col items-center justify-start min-h-[60vh]",children:[!pr[gr]&&i.jsxs("div",{className:"text-center p-8 bg-white rounded-2xl shadow-sm w-full mt-10",children:[i.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"No More Profiles"}),i.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"Adjust your filters to see more people."}),i.jsx("button",{onClick:()=>n&&a&&Wt(n.user.id,a.gender,a),className:"mt-4 text-rose-600 font-bold text-sm",children:"Refresh"})]}),pr[gr]&&i.jsx(a2,{candidate:pr[gr],onPass:$l,onConnect:Bl,onViewProfile:gi,onLike:Dl,onSuperLike:pc,loading:fe===pr[gr]?.id,isLiked:Sl.some(g=>g.liked_id===pr[gr]?.id),isSuperLiked:vl.includes(pr[gr]?.id),isVerified:un.includes(pr[gr]?.id),lastPassed:Rr,handleUndo:nr})]})}),f==="search"&&i.jsxs("div",{className:"w-full max-w-md mx-auto px-4 pt-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Find People"}),i.jsxs("div",{className:"relative mb-6",children:[i.jsx("input",{type:"text",placeholder:"Search by name or city...",className:"w-full p-4 pl-12 pr-4 rounded-2xl shadow-sm bg-white/10 border-white/20 text-white placeholder-white/40 focus:ring-2 focus:ring-rose-500 focus:bg-white/20 outline-none transition",value:Tl,onChange:g=>{ic(g.target.value),dc(g.target.value)}}),i.jsx("div",{className:"absolute left-4 top-4.5 text-gray-400",children:i.jsx(Sw,{size:20})})]}),i.jsx("div",{className:"space-y-3 pb-20",children:hi.length===0&&Tl.length>1?i.jsx("div",{className:"text-center text-gray-400 mt-10",children:"No users found."}):hi.map(g=>i.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-50 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("img",{src:g.avatar_url||`https://api.dicebear.com/7.x/avataaars/svg?seed=${g.full_name}`,className:"w-12 h-12 rounded-full bg-gray-100"}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-gray-900",children:g.full_name}),i.jsx("p",{className:"text-xs text-rose-600",children:g.city})]})]}),i.jsx("button",{onClick:()=>{gi(g)},className:"text-rose-600 font-bold text-xs bg-rose-50 px-3 py-2 rounded-full",children:"View"})]},g.id))})]}),f==="stories"&&i.jsxs("div",{className:"w-full max-w-md mx-auto px-4 pt-6",children:[i.jsxs("h2",{className:"text-2xl font-bold text-gray-800 mb-6 flex items-center justify-between",children:["Daily Stories",i.jsx("label",{htmlFor:"story-upload",className:"cursor-pointer bg-rose-50 text-rose-600 text-xs font-bold px-3 py-2 rounded-full hover:bg-rose-100 transition",children:"+ Add Story"}),i.jsx("input",{type:"file",id:"story-upload",className:"hidden",accept:"image/*,video/*",onChange:Ol})]}),i.jsxs("div",{className:"flex gap-4 pb-20 overflow-x-auto scrollbar-hide",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:[(()=>{const g=Nl.filter(_=>_.user_id===n?.user?.id).sort((_,C)=>new Date(C.created_at)-new Date(_.created_at)),b=g.length>0;return i.jsxs("div",{className:"flex-shrink-0 flex flex-col items-center gap-2",children:[i.jsxs("div",{onClick:b?()=>{gn(g[0]),kl(g)}:void 0,className:`w-20 h-20 rounded-full relative ${b?"cursor-pointer":""}`,children:[b&&i.jsx("div",{className:"absolute inset-0 rounded-full p-[3px] bg-gradient-to-tr from-rose-400 via-pink-500 to-orange-400"}),i.jsx("div",{className:`w-full h-full rounded-full ${b?"absolute inset-[3px] border-2 border-white":"border-2 border-gray-300"} overflow-hidden`,children:i.jsx("img",{src:pt||a?.avatar_url||`https://api.dicebear.com/7.x/avataaars/svg?seed=${a?.full_name}`,className:"w-full h-full object-cover"})}),i.jsx("label",{htmlFor:"story-upload",className:"absolute bottom-0 right-0 bg-blue-500 text-white w-6 h-6 rounded-full border-2 border-white flex items-center justify-center cursor-pointer z-10",children:i.jsx(E_,{size:12})})]}),i.jsx("span",{className:"text-xs font-medium truncate w-20 text-center text-gray-200 dark:text-gray-300",children:b?"My Story":"Add Story"})]})})(),(()=>{const g={};return Nl.forEach(b=>{b.user_id!==n?.user?.id&&(g[b.user_id]||(g[b.user_id]={user:b.profiles,stories:[]}),g[b.user_id].stories.push(b))}),Object.values(g).forEach(b=>{b.stories.sort((_,C)=>new Date(C.created_at)-new Date(_.created_at))}),Object.values(g).map((b,_)=>{const C=b.stories[0],L=b.user;return i.jsxs("div",{className:"flex-shrink-0 flex flex-col items-center gap-2 cursor-pointer",onClick:()=>{gn(C),kl(b.stories)},children:[i.jsxs("div",{className:"relative w-20 h-20",children:[i.jsx("div",{className:"absolute inset-0 rounded-full p-[3px] bg-gradient-to-tr from-rose-400 via-pink-500 to-orange-400"}),i.jsx("div",{className:"absolute inset-[3px] rounded-full border-2 border-white overflow-hidden",children:i.jsx("img",{src:L.avatar_url||`https://api.dicebear.com/7.x/avataaars/svg?seed=${L.full_name}`,alt:L.full_name,className:"w-full h-full object-cover"})})]}),i.jsx("span",{className:"text-[10px] font-medium text-gray-200 dark:text-gray-300 truncate w-20 text-center",children:L.full_name})]},L.id||_)})})(),Nl.length===0&&i.jsx("div",{className:"w-full text-center text-gray-400 mt-10",children:"No active stories right now."})]})]}),f==="interests"&&i.jsxs("div",{className:"w-full max-w-md mx-auto px-4 pt-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-6 text-center",children:"Interests"}),i.jsx("p",{className:"text-sm text-gray-500 mb-6 text-center",children:"Pending connections and requests."}),i.jsx("div",{className:"space-y-3 pb-20",children:Ge.filter(g=>g.status==="pending").length===0?i.jsx("div",{className:"text-center text-gray-400 mt-10",children:"No pending interests yet."}):Ge.filter(g=>g.status==="pending").map(g=>{const b=g.user_a_id===n.user.id?g.user_b_id:g.user_a_id,_=xr.find(L=>L.id===b);if(!_)return null;const C=g.user_a_id!==n.user.id;return g.user_a_id,n.user.id,i.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-yellow-50 flex items-center gap-4",children:[i.jsx("img",{src:_.avatar_url||`https://api.dicebear.com/7.x/avataaars/svg?seed=${_.full_name}`,className:"w-12 h-12 rounded-full bg-gray-100"}),i.jsxs("div",{className:"flex-grow min-w-0",children:[i.jsx("h3",{className:"font-bold text-gray-900 truncate",children:_.full_name}),i.jsx("p",{className:"text-xs text-rose-600 truncate",children:_.city})]}),i.jsx("div",{className:"flex gap-2",children:C?i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:async()=>{await U.from("matches").update({status:"mutual"}).eq("id",g.id),await U.from("discovery_exclusions").insert([{user_id:n.user.id,excluded_user_id:b},{user_id:b,excluded_user_id:n.user.id}],{onConflict:"ignore"}),Z("Match Accepted!","success"),xn(),a&&await Wt(n.user.id,a.gender,a)},className:"bg-green-100 text-green-600 p-2 rounded-full hover:bg-green-200 transition",children:i.jsx(Ir,{size:20})}),i.jsx("button",{onClick:async()=>{await U.from("matches").delete().eq("id",g.id),await U.from("discovery_exclusions").delete().or(`and(user_id.eq.${n.user.id},excluded_user_id.eq.${b}),and(user_id.eq.${b},excluded_user_id.eq.${n.user.id})`),xn()},className:"bg-red-100 text-red-600 p-2 rounded-full",children:i.jsx(Cr,{size:20})})]}):i.jsx("button",{onClick:()=>Xt(b,g.id),disabled:fe===g.id,className:`text-xs font-bold text-gray-400 border border-gray-200 px-3 py-1.5 rounded-full hover:bg-red-50 hover:text-red-500 transition ${fe===g.id?"opacity-50 cursor-not-allowed":""}`,children:"Unsend"})})]},g.id)})})]}),f==="crushes"&&i.jsx(u2,{myCrushes:Sl,incomingCrushes:Iu,onViewProfile:gi}),f==="matches"&&i.jsxs("div",{className:"w-full max-w-md mx-auto px-4 pt-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-6 text-center",children:"Your Connections"}),i.jsx("div",{className:"space-y-3 pb-20",children:(()=>{const g=xr.filter(b=>{const _=Ge.find(C=>C.user_a_id===n.user.id&&C.user_b_id===b.id||C.user_b_id===n.user.id&&C.user_a_id===b.id);return _&&_.status==="mutual"});return g.length===0?i.jsx("div",{className:"text-center text-gray-400 mt-10",children:"No connections yet."}):g.map(b=>{const _=Ge.find(C=>C.user_a_id===n.user.id&&C.user_b_id===b.id||C.user_b_id===n.user.id&&C.user_a_id===b.id);return i.jsxs("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-xl shadow-sm flex items-center gap-4 p-4",children:[i.jsx("img",{src:b.avatar_url||`https://api.dicebear.com/7.x/avataaars/svg?seed=${b.full_name}`,className:"w-12 h-12 rounded-full bg-gray-100"}),i.jsx("div",{className:"flex-grow min-w-0",children:i.jsxs("div",{className:"flex flex-col items-start",children:[i.jsx("h3",{className:"font-bold text-gray-900 truncate",children:b.full_name}),i.jsxs("div",{className:"flex items-center gap-1 text-xs mt-0.5",children:[i.jsx(ra,{size:10,className:"text-rose-600"}),i.jsx("span",{className:"text-rose-600",children:b.city}),Zr.includes(b.id)&&i.jsxs("span",{className:"text-[9px] text-green-500 font-medium flex items-center gap-1",children:[i.jsx("div",{className:"w-1 h-1 bg-green-400 rounded-full"})," Online"]})]}),b.bio&&i.jsx("p",{className:"text-xs text-gray-500 line-clamp-1 mt-1",children:b.bio})]})}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("div",{className:"relative",children:[i.jsx("button",{onClick:async()=>{m("chat"),Fn(b),_&&(ht(C=>{const L={...C,[b.id]:0},z=Object.values(L).reduce((W,re)=>W+re,0);return _s(z),L}),Je([]),await yn(_.id),await U.from("messages").update({read_at:new Date}).eq("match_id",_.id).neq("sender_id",n.user.id).is("read_at",null))},className:"bg-rose-50 text-rose-600 p-2 rounded-full hover:bg-rose-100 transition",children:i.jsx(Eu,{size:20})}),ti[b.id]>0&&i.jsx("span",{className:"absolute -top-1 -right-1 bg-rose-600 text-white text-[10px] font-bold h-5 w-5 flex items-center justify-center rounded-full border-2 border-white animate-bounce-in",children:ti[b.id]>9?"9+":ti[b.id]})]}),i.jsx("button",{onClick:()=>{_&&Ml(b.id,_.id)},disabled:fe===b.id,className:`text-gray-400 hover:text-gray-600 p-2 rounded-full transition hover:bg-gray-100 ${fe===b.id?"opacity-50 cursor-not-allowed":""}`,title:"Unmatch",children:i.jsx(Cr,{size:18})}),i.jsx("button",{onClick:()=>{_&&es(b.id,_.id)},disabled:fe===b.id,className:`text-gray-400 hover:text-red-500 p-2 rounded-full transition hover:bg-red-50 ${fe===b.id?"opacity-50 cursor-not-allowed":""}`,title:"Block User",children:i.jsx(As,{size:18})})]})]},b.id)})})()})]}),f==="visitors"&&i.jsxs("div",{className:"w-full max-w-md mx-auto px-4 pt-6",children:[i.jsxs("h2",{className:"text-2xl font-bold text-gray-800 mb-6 text-center flex items-center justify-center gap-2",children:[i.jsx(mr,{className:"text-rose-500"})," Profile Visitors"]}),i.jsx("div",{className:"space-y-3 pb-20",children:tc.length===0?i.jsxs("div",{className:"text-center text-gray-400 mt-10 bg-white p-6 rounded-xl border border-dashed border-gray-200",children:[i.jsx(mr,{size:32,className:"mx-auto mb-2 text-gray-300"}),i.jsx("p",{className:"text-sm",children:"No visitors yet."})]}):tc.filter(g=>g.viewer).map((g,b)=>{const _=g.viewer,C=new Date(g.created_at).toLocaleDateString();return i.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-50 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("img",{src:_.avatar_url||`https://api.dicebear.com/7.x/avataaars/svg?seed=${_.full_name}`,className:"w-12 h-12 rounded-full bg-gray-100 object-cover"}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-gray-900",children:_.full_name}),i.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[i.jsx(ra,{size:12})," ",_.city]})]})]}),i.jsx("div",{className:"text-right",children:i.jsx("span",{className:"text-[10px] bg-gray-100 text-gray-500 px-2 py-1 rounded-full",children:C})})]},g.id||`visitor-${b}`)})})]}),f==="blocked"&&i.jsxs("div",{className:"w-full max-w-md mx-auto px-4 pt-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6 px-2",children:[i.jsx("button",{onClick:()=>m("profile"),className:"text-gray-600",children:i.jsx(Vr,{size:24})}),i.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Blocked Users"}),i.jsx("div",{className:"w-6"})," "]}),i.jsx("div",{className:"space-y-3 pb-20",children:ma.length===0?i.jsx("div",{className:"text-center text-gray-400 mt-10",children:"You have not blocked anyone."}):ma.map(g=>i.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("img",{src:g.profile?.avatar_url||`https://api.dicebear.com/7.x/avataaars/svg?seed=${g.profile?.full_name}`,className:"w-10 h-10 rounded-full bg-gray-100"}),i.jsx("span",{className:"font-bold text-gray-800",children:g.profile?.full_name})]}),i.jsx("button",{onClick:()=>ql(g.id),className:"bg-gray-100 text-gray-700 font-bold py-1.5 px-4 rounded-lg text-sm hover:bg-gray-200 transition",children:"Unblock"})]},g.id))})]}),f==="settings"&&i.jsxs("div",{className:"w-full max-w-md mx-auto px-4 pt-6 pb-20",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6 px-2",children:[i.jsx("button",{onClick:()=>m("profile"),className:"text-white/80 hover:text-rose-300",children:i.jsx(Vr,{size:24})}),i.jsx("h2",{className:"text-xl font-bold text-white",children:"Settings"}),i.jsx("div",{className:"w-6"})]}),i.jsxs("div",{className:"bg-white/5 border border-white/10 p-6 rounded-2xl space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-white",children:"Show in Discovery"}),i.jsx("p",{className:"text-xs text-white/60",children:"If turned off, new users won't see your profile."})]}),i.jsx("button",{onClick:()=>zr(!Rs),className:`w-12 h-7 rounded-full p-1 transition-colors duration-200 ${Rs?"bg-rose-600":"bg-white/20"}`,children:i.jsx("div",{className:`bg-white w-5 h-5 rounded-full shadow-md transform transition-transform duration-200 ${Rs?"translate-x-5":"translate-x-0"}`})})]}),i.jsxs("div",{className:"flex items-center justify-between border-t border-white/10 pt-6",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-white",children:"Show Online Status"}),i.jsx("p",{className:"text-xs text-white/60",children:"Others will see a green dot next to your name."})]}),i.jsx("button",{onClick:()=>Dr(!Rt),className:`w-12 h-7 rounded-full p-1 transition-colors duration-200 ${Rt?"bg-rose-600":"bg-white/20"}`,children:i.jsx("div",{className:`bg-white w-5 h-5 rounded-full shadow-md transform transition-transform duration-200 ${Rt?"translate-x-5":"translate-x-0"}`})})]}),i.jsxs("div",{className:"border-t border-white/10 pt-6",children:[i.jsxs("h3",{className:"font-bold text-white mb-3 flex items-center gap-2",children:[i.jsx(Wa,{size:18}),"Contact Details"]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"bg-white/5 p-3 rounded-xl border border-white/10",children:[i.jsx("div",{className:"text-xs text-white/60 mb-1",children:"Email"}),i.jsxs("div",{className:"text-white font-medium flex items-center gap-2",children:[i.jsx(Wa,{size:14}),n?.user?.email||"Not set"]})]}),i.jsxs("div",{className:"bg-white/5 p-3 rounded-xl border border-white/10",children:[i.jsx("div",{className:"text-xs text-white/60 mb-1",children:"Phone Number"}),i.jsxs("div",{className:"text-white font-medium flex items-center gap-2",children:[i.jsx(Co,{size:14}),a?.phone||n?.user?.phone||"Not set"]})]}),i.jsx("p",{className:"text-xs text-white/40 mt-2",children:"These are your contact details. Email is required for account verification and password recovery."})]})]}),i.jsxs("div",{className:"border-t border-white/10 pt-6",children:[i.jsxs("h3",{className:"font-bold text-white mb-3 flex items-center gap-2",children:[i.jsx(Un,{size:18}),"Looking For"]}),i.jsx("p",{className:"text-xs text-white/60 mb-4",children:"Choose who you want to see in your discovery feed"}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("button",{onClick:()=>{da(Bt==="men"?null:"men")},className:`w-full p-3 rounded-xl border-2 transition ${Bt==="men"?"bg-rose-600/20 border-rose-500 text-white":"bg-white/5 border-white/20 text-white/70 hover:bg-white/10"}`,children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"font-medium",children:"Men"}),Bt==="men"&&i.jsx(Dn,{size:18,className:"text-rose-400"})]})}),i.jsx("button",{onClick:()=>{da(Bt==="women"?null:"women")},className:`w-full p-3 rounded-xl border-2 transition ${Bt==="women"?"bg-rose-600/20 border-rose-500 text-white":"bg-white/5 border-white/20 text-white/70 hover:bg-white/10"}`,children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"font-medium",children:"Women"}),Bt==="women"&&i.jsx(Dn,{size:18,className:"text-rose-400"})]})}),i.jsx("button",{onClick:()=>{da(Bt==="both"?null:"both")},className:`w-full p-3 rounded-xl border-2 transition ${Bt==="both"?"bg-rose-600/20 border-rose-500 text-white":"bg-white/5 border-white/20 text-white/70 hover:bg-white/10"}`,children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"font-medium",children:"Both"}),Bt==="both"&&i.jsx(Dn,{size:18,className:"text-rose-400"})]})})]})]}),i.jsx("button",{onClick:Ps,className:"w-full bg-white/10 hover:bg-white/20 text-white font-bold py-3 rounded-xl border border-white/20 mt-4 transition",children:"Save Changes"}),i.jsxs("div",{className:"border-t border-white/10 pt-6",children:[i.jsxs("h3",{className:"font-bold text-white mb-3 flex items-center gap-2",children:[i.jsx(qh,{size:18}),"Share & Invite Friends"]}),i.jsx("p",{className:"text-xs text-white/60 mb-4",children:"Invite friends to join Sacred Hearts"}),i.jsxs("button",{onClick:async()=>{const g={title:"Sacred Hearts",text:"Join me on Sacred Hearts - a platform for meaningful connections!",url:window.location.origin};try{navigator.share?(await navigator.share(g),Z("Thanks for sharing!","success")):(await navigator.clipboard.writeText(g.url),Z("Link copied to clipboard!","success"))}catch(b){if(b.name!=="AbortError")try{await navigator.clipboard.writeText(g.url),Z("Link copied to clipboard!","success")}catch{Z("Failed to share. Please copy the link manually.","error")}}},className:"w-full bg-white/10 hover:bg-white/20 text-white font-medium py-3 rounded-xl border border-white/20 transition flex items-center justify-center gap-2",children:[i.jsx(qh,{size:18}),"Share App"]})]}),i.jsxs("div",{className:"border-t border-white/10 pt-6",children:[i.jsxs("h3",{className:"font-bold text-white mb-3 flex items-center gap-2",children:[i.jsx(rl,{size:18}),"Profile Boost"]}),i.jsx("p",{className:"text-xs text-white/60 mb-4",children:"Get more visibility for 24 hours"}),i.jsx("button",{onClick:()=>{if(bl){Z("Boost already active!","info");return}cs({isOpen:!0,title:"Boost Your Profile?",message:"Your profile will be shown to more people for 24 hours. This is a premium feature.",type:"info",onConfirm:async()=>{try{const g=new Date;g.setHours(g.getHours()+24),await U.from("profiles").update({boost_active:!0,boost_expires_at:g.toISOString()}).eq("id",n.user.id),Zo(!0),Z("Profile boosted! ","success"),$r(n.user.id)}catch{Z("Error activating boost.","error")}}})},className:`w-full py-3 rounded-xl font-medium transition ${bl?"bg-yellow-500/20 text-yellow-300 border border-yellow-500/30":"bg-gradient-to-r from-yellow-500 to-orange-500 text-white hover:from-yellow-600 hover:to-orange-600"}`,children:bl?" Boost Active":" Boost My Profile"})]}),i.jsxs("div",{className:"border-t border-white/10 pt-6",children:[i.jsxs("h3",{className:"font-bold text-white mb-3 flex items-center gap-2",children:[i.jsx(rg,{size:18}),"Icebreaker Prompts"]}),i.jsx("p",{className:"text-xs text-white/60 mb-4",children:"Add conversation starters to your profile"}),i.jsxs("div",{className:"space-y-2",children:[bs.length===0?i.jsx("p",{className:"text-xs text-white/40 italic",children:"No prompts yet. Add one below!"}):bs.map((g,b)=>i.jsxs("div",{className:"bg-white/5 p-3 rounded-lg border border-white/10 flex items-center justify-between",children:[i.jsx("p",{className:"text-sm text-white/80 flex-1",children:g}),i.jsx("button",{onClick:()=>{dn(_=>_.filter((C,L)=>L!==b)),U.from("profiles").update({icebreaker_prompts:JSON.stringify(bs.filter((_,C)=>C!==b))}).eq("id",n.user.id)},className:"text-red-400 hover:text-red-300 ml-2",children:i.jsx(Cr,{size:14})})]},b)),i.jsx("button",{onClick:()=>{us({isOpen:!0,title:"Add Icebreaker Prompt",placeholder:"Enter a conversation starter (e.g., 'What's your favorite hobby?')",onSubmit:async g=>{if(g&&g.trim()){const b=[...bs,g.trim()];dn(b);try{await U.from("profiles").update({icebreaker_prompts:JSON.stringify(b)}).eq("id",n.user.id),Z("Prompt added!","success")}catch{Z("Error saving prompt.","error")}}}})},className:"w-full bg-white/5 hover:bg-white/10 text-white py-2 rounded-lg border border-white/20 text-sm transition",children:"+ Add Prompt"})]})]})]})]}),f==="deactivated"&&a?.is_deactivated&&i.jsx("div",{className:"w-full max-w-md mx-auto px-4 pt-6 pb-20",children:i.jsxs("div",{className:"bg-black/20 backdrop-blur-xl border border-white/20 rounded-3xl shadow-2xl p-8 text-center",children:[i.jsx("div",{className:"mb-6",children:i.jsx("div",{className:"w-20 h-20 bg-orange-500/20 rounded-full flex items-center justify-center mx-auto border-2 border-orange-500/40",children:i.jsx(Qt,{size:42,className:"text-orange-400 drop-shadow-lg"})})}),i.jsx("h2",{className:"text-2xl font-extrabold text-white mb-2",children:"Account Deactivated"}),i.jsx("p",{className:"text-sm text-white/80 mb-6",children:"Your account has been deactivated. You can reactivate it anytime to continue using the app."}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("button",{onClick:async()=>{try{d(!0);const{error:g}=await U.from("profiles").update({is_deactivated:!1,deactivated_at:null,show_in_discovery:!0}).eq("id",n.user.id);if(g)throw g;o(b=>({...b,is_deactivated:!1})),zr(!0),await $r(n.user.id),m("discovery"),Z("Account reactivated successfully! Welcome back!","success")}catch(g){console.error("Error reactivating account:",g),Z("Error reactivating account. Please try again.","error")}finally{d(!1)}},className:"w-full bg-rose-600 hover:bg-rose-700 text-white py-3 rounded-xl font-bold transition shadow-lg",children:"Reactivate My Account"}),i.jsx("p",{className:"text-xs text-white/60",children:"For permanent account deletion, please contact our support team."})]})]})}),f==="privacy"&&i.jsxs("div",{className:"w-full max-w-md mx-auto px-4 pt-6 pb-20",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6 px-2",children:[i.jsx("button",{onClick:()=>m("profile"),className:"text-white/80 hover:text-rose-300",children:i.jsx(Vr,{size:24})}),i.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[i.jsx(Qt,{size:20}),"Privacy & Security"]}),i.jsx("div",{className:"w-6"})]}),i.jsxs("div",{className:"bg-white/5 border border-white/10 p-6 rounded-2xl space-y-6",children:[i.jsxs("div",{className:"border-b border-white/10 pb-6",children:[i.jsxs("h3",{className:"font-bold text-white mb-3 flex items-center gap-2",children:[i.jsx(Qt,{size:18}),"Change Password"]}),i.jsxs("form",{onSubmit:Ul,className:"space-y-3",children:[i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:Za?"text":"password",placeholder:"Current Password",className:"w-full p-3 pr-10 bg-white/5 border border-white/20 rounded-xl text-white placeholder-white/50 focus:outline-none focus:border-rose-500",value:Qa,onChange:g=>ds(g.target.value)}),i.jsx("button",{type:"button",onClick:()=>Fa(!Za),className:"absolute right-3 top-3.5 text-white/60 hover:text-white transition",children:Za?i.jsx(Ka,{size:18}):i.jsx(mr,{size:18})})]}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:ul?"text":"password",placeholder:"New Password",className:"w-full p-3 pr-10 bg-white/5 border border-white/20 rounded-xl text-white placeholder-white/50 focus:outline-none focus:border-rose-500",value:Os,onChange:g=>ua(g.target.value)}),i.jsx("button",{type:"button",onClick:()=>Vo(!ul),className:"absolute right-3 top-3.5 text-white/60 hover:text-white transition",children:ul?i.jsx(Ka,{size:18}):i.jsx(mr,{size:18})})]}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:Gn?"text":"password",placeholder:"Confirm New Password",className:"w-full p-3 pr-10 bg-white/5 border border-white/20 rounded-xl text-white placeholder-white/50 focus:outline-none focus:border-rose-500",value:Io,onChange:g=>cl(g.target.value)}),i.jsx("button",{type:"button",onClick:()=>Go(!Gn),className:"absolute right-3 top-3.5 text-white/60 hover:text-white transition",children:Gn?i.jsx(Ka,{size:18}):i.jsx(mr,{size:18})})]}),i.jsx("button",{type:"submit",disabled:u,className:"w-full bg-rose-600 hover:bg-rose-700 text-white py-3 rounded-xl font-medium transition disabled:opacity-50",children:u?"Updating...":"Update Password"})]})]}),i.jsxs("div",{className:"border-t border-white/10 pt-6 space-y-4",children:[i.jsx("h3",{className:"font-bold text-white mb-3",children:"Account Actions"}),i.jsx("button",{onClick:()=>{const g=!Rs;cs({isOpen:!0,title:g?"Unhide Account?":"Hide Account?",message:g?"Your profile will be visible in discovery again.":"Your profile will be hidden from discovery. You can unhide anytime.",type:"warning",onConfirm:async()=>{try{const b=!Rs;await U.from("profiles").update({show_in_discovery:b}).eq("id",n.user.id),zr(b),Z(g?"Account unhidden.":"Account hidden.","success")}catch{Z("Error updating account visibility.","error")}}})},className:"w-full bg-yellow-500/20 hover:bg-yellow-500/30 text-yellow-300 py-3 rounded-xl font-medium border border-yellow-500/30 transition",children:Rs?"Hide My Account":"Unhide My Account"}),i.jsx("button",{onClick:()=>{cs({isOpen:!0,title:"Deactivate Account?",message:"Your account will be deactivated and you won't be able to log in. You can reactivate your account anytime you want. For permanent account deletion, please contact our support team.",type:"warning",onConfirm:async()=>{us({isOpen:!0,title:"Why are you deactivating your account?",placeholder:"Please tell us why (this helps us improve). You can reactivate anytime...",onSubmit:async g=>{if(!g||!g.trim()){Z("Please provide a reason for deactivation.","error");return}try{const{error:b}=await U.from("profiles").update({is_deactivated:!0,deactivated_at:new Date().toISOString(),deactivation_reason:g.trim(),show_in_discovery:!1}).eq("id",n.user.id);if(b){console.error("Error deactivating account:",b),Z("Error deactivating account. Please try again.","error"),us({...Or,isOpen:!1});return}try{await U.from("admin_logs").insert({admin_id:null,admin_email:null,action_type:"account_deactivated",target_type:"user",target_id:n.user.id,action_details:{reason:g.trim(),email:n.user.email,full_name:a?.full_name}})}catch(_){console.error("Error logging to admin:",_)}o(_=>({..._,is_deactivated:!0})),zr(!1),await U.auth.signOut(),Z("Account deactivated successfully. You can reactivate anytime by logging in again.","success"),us({...Or,isOpen:!1})}catch(b){console.error("Error deactivating account:",b),Z("Error deactivating account. Please try again.","error")}}})}})},className:"w-full bg-orange-500/20 hover:bg-orange-500/30 text-orange-300 py-3 rounded-xl font-medium border border-orange-500/30 transition",children:"Deactivate My Account"})]}),i.jsx("div",{className:"border-t border-white/10 pt-6 mt-6",children:i.jsxs("div",{className:"text-center space-y-1",children:[i.jsx("p",{className:"text-xs text-white/50 font-medium",children:"Version 1.6.1"}),i.jsx("p",{className:"text-xs text-white/40",children:" 2026 SacredHearts"})]})})]})]}),f==="stats"&&i.jsxs("div",{className:"w-full max-w-md mx-auto px-4 pt-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Platform Growth"}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm text-center border border-rose-50",children:[i.jsx("div",{className:"text-3xl font-bold text-rose-600",children:E.users}),i.jsx("div",{className:"text-xs text-gray-500 font-medium mt-1",children:"Users"})]}),i.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm text-center border border-rose-50",children:[i.jsx("div",{className:"text-3xl font-bold text-rose-600",children:E.matches}),i.jsx("div",{className:"text-xs text-gray-500 font-medium mt-1",children:"Matches"})]}),i.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm text-center border border-rose-50 col-span-2",children:[i.jsx("div",{className:"text-3xl font-bold text-rose-600",children:E.messages}),i.jsx("div",{className:"text-xs text-gray-500 font-medium mt-1",children:"Messages"})]})]}),i.jsx("div",{className:"mt-8 p-4 bg-blue-50 rounded-xl border border-blue-100",children:i.jsx("p",{className:"text-sm text-blue-500 font-medium text-center",children:" Tip: Refresh this tab to see real-time growth."})})]}),f==="chat"&&ye&&i.jsxs("div",{className:"fixed inset-0 z-[60] bg-gray-900 flex flex-col h-full sm:max-w-md sm:mx-auto sm:my-4 sm:rounded-2xl sm:border sm:border-gray-700 sm:shadow-2xl sm:h-[90vh] sm:relative sm:inset-auto",children:[i.jsxs("div",{className:"bg-rose-600 text-white p-4 flex items-center justify-between shadow-sm",children:[i.jsxs("div",{className:"flex items-center gap-3 flex-grow min-w-0",children:[i.jsx("button",{onClick:()=>m("matches"),children:i.jsx(Vr,{size:24})}),i.jsxs("button",{onClick:()=>{jl(ye),m("profile-view")},className:"relative cursor-pointer",children:[i.jsx("img",{src:ye.avatar_url||`https://api.dicebear.com/7.x/avataaars/svg?seed=${ye.full_name}`,className:"w-10 h-10 rounded-full border-2 border-white hover:opacity-80 transition"}),Zr.includes(ye.id)&&i.jsx("div",{className:"absolute bottom-0 right-0 w-3 h-3 bg-green-400 border-2 border-rose-600 rounded-full"})]}),i.jsxs("div",{className:"min-w-0",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"font-bold truncate",children:ye.full_name}),Zr.includes(ye.id)&&i.jsx("span",{className:"text-[10px] font-bold text-green-200",children:"Online"})]}),i.jsxs("div",{className:"text-xs text-rose-200 truncate mt-0.5 flex items-center gap-1",children:[i.jsx(ra,{size:10})," ",ye.city]})]})]}),i.jsxs("div",{className:"flex items-center gap-2 ml-2 shrink-0",children:[i.jsx("button",{onClick:()=>Z("Audio call feature coming soon!","success"),className:"bg-white/10 hover:bg-white/20 text-white p-2 rounded-full transition shadow-sm border border-white/10",title:"Audio Call",children:i.jsx(Co,{size:16})}),i.jsx("button",{onClick:()=>Z("Video call feature coming soon!","success"),className:"bg-white/10 hover:bg-white/20 text-white p-2 rounded-full transition shadow-sm border border-white/10",title:"Video Call",children:i.jsx(X_,{size:16})}),i.jsxs("button",{onClick:()=>{Fo(""),us({isOpen:!0,title:"Report User",placeholder:"Please provide additional details...",showCategorySelect:!0,categories:Hu,onSubmit:async g=>{if(!wl){Z("Please select a category.","error");return}try{await U.from("reports").insert({reporter_id:n.user.id,reported_id:ye.id,reason:wl,message:g||"User reported via chat interface"}).then(()=>{Z("Report submitted.","success")}).catch(b=>{Z("Error reporting user.")})}catch{Z("Error reporting user.")}}})},className:"bg-white/10 hover:bg-white/20 text-white text-[10px] font-semibold px-2 py-1.5 rounded-full transition shadow-sm flex items-center gap-1.5 border border-white/10",title:"Report User",children:[i.jsx(As,{size:12})," Report"]})]})]}),i.jsxs("div",{className:"flex-grow overflow-y-auto p-4 bg-black space-y-3 chat-scroll",style:{backgroundImage:`radial-gradient(circle at 20% 50%, rgba(255,255,255,0.03) 0%, transparent 50%),
                                                 radial-gradient(circle at 80% 80%, rgba(255,255,255,0.03) 0%, transparent 50%),
                                                 radial-gradient(circle at 40% 20%, rgba(255,255,255,0.02) 0%, transparent 50%)`,backgroundSize:"100% 100%",backgroundRepeat:"no-repeat"},children:[Mr.map(g=>{const b=g.sender_id===n.user.id,_=g.type==="image"||g.content.startsWith("http"),C=g.type==="audio";return i.jsx("div",{className:`flex ${b?"justify-end":"justify-start"}`,children:i.jsxs("div",{onClick:L=>Pl(g.id,L),onPointerDown:L=>{L.pointerType==="touch"&&Hl(g.id,L)},onPointerUp:Il,onPointerCancel:Il,onContextMenu:L=>{L.preventDefault(),ji(g.id)},style:{touchAction:"manipulation"},className:`max-w-[75%] rounded-2xl text-sm flex flex-col relative transition-all duration-200 cursor-pointer ${b?"bg-rose-600 text-white rounded-br-none":"bg-gray-700 text-white border border-gray-600 rounded-bl-none"} ${_?"bg-transparent border-none p-0":C?"p-2":"px-4 py-2"} 
                                              
                                              // --- STYLING IF SELECTED ---
                                              ${hn===g.id?"ring-4 ring-rose-300 opacity-90 scale-[0.98]":""}
                                            }`,children:[g.replied_to_id&&(()=>{const L=Mr.find(re=>String(re.id)===String(g.replied_to_id)),z=L?L.type==="image"?" Photo":L.type==="audio"?" Audio":L.content.length>50?L.content.substring(0,50)+"...":L.content:"Message",W=L?.sender_id===n.user.id;return i.jsxs("div",{className:`text-[10px] mb-2 pb-2 border-l-3 ${b?"border-white/40":"border-gray-400/40"} pl-2 flex flex-col gap-0.5`,children:[i.jsxs("div",{className:`flex items-center gap-1 ${b?"text-white/80":"text-gray-300"}`,children:[i.jsx(Lh,{size:10}),i.jsx("span",{className:"font-medium",children:W?"You":ye?.full_name||"User"})]}),i.jsx("div",{className:`${b?"text-white/60":"text-gray-400"} truncate`,children:z})]})})(),C?i.jsx("div",{className:"flex items-center gap-2",children:i.jsx("audio",{controls:!0,src:g.content,className:"w-48 max-w-full h-10",preload:"metadata",onError:L=>{console.error("Audio playback error:",L),Z("Unable to play audio. Please try again.","error")},children:"Your browser does not support audio element."})}):_?i.jsx("img",{src:g.content,alt:"Sent photo",className:"rounded-2xl max-w-full object-cover shadow-sm border border-gray-100"}):i.jsx("div",{className:"break-words",children:g.content}),b&&i.jsxs("div",{className:"flex justify-end items-center gap-1 mt-2 opacity-70",children:[i.jsx("span",{className:"text-[9px] text-white/60",children:new Date(g.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),!_&&!C&&i.jsx("div",{className:"flex items-center gap-0.5",children:g.read_at?i.jsxs("div",{className:"flex items-center gap-0.5",children:[i.jsx(Dw,{size:14,className:"text-blue-400",strokeWidth:2.5}),i.jsx("span",{className:"text-[9px] font-medium text-blue-400",children:"Read"})]}):i.jsx(Ir,{size:12,className:"text-gray-400"})})]}),!b&&i.jsx("div",{className:"flex justify-start items-center gap-1 mt-1 opacity-70",children:i.jsx("span",{className:"text-[9px] text-gray-300",children:new Date(g.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})})]})},g.id)}),i.jsx("div",{ref:qr})]}),hn&&(()=>{const g=hn.toString(),b=Mr.find(L=>!L||!L.id?!1:L.id.toString()===g||L.id===g||L.id===hn);if(!b)return null;b.sender_id,n.user.id;const _=b.type==="image"||b.content.startsWith("http"),C=b.type==="audio";return i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"fixed inset-0 bg-black/50 z-[60]",onClick:()=>Yt(null)}),i.jsxs("div",{className:"fixed bottom-0 left-0 right-0 bg-gray-800 border-t border-gray-700 shadow-[0_-5px_15px_rgba(0,0,0,0.3)] p-4 z-[70] animate-fade-in-up sm:absolute sm:bottom-auto sm:left-auto sm:right-auto",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("span",{className:"text-xs font-bold text-gray-300 uppercase tracking-wider",children:"Selected Message"}),i.jsx("button",{onClick:()=>Yt(null),className:"text-gray-400 hover:text-white transition",children:i.jsx(Cr,{size:20})})]}),i.jsxs("div",{className:"flex justify-around items-center",children:[i.jsxs("button",{onClick:()=>Ct(b),className:"flex flex-col items-center gap-1.5 text-gray-300 hover:text-rose-400 transition",children:[i.jsx("div",{className:"p-3 rounded-full bg-gray-700 hover:bg-rose-500/20 transition",children:i.jsx(Lh,{size:22})}),i.jsx("span",{className:"text-[10px] font-medium",children:"Reply"})]}),i.jsxs("button",{onClick:$e,className:"flex flex-col items-center gap-1.5 text-gray-300 hover:text-rose-400 transition",children:[i.jsx("div",{className:"p-3 rounded-full bg-gray-700 hover:bg-rose-500/20 transition",children:i.jsx(qh,{size:22})}),i.jsx("span",{className:"text-[10px] font-medium",children:"Forward"})]}),!_&&!C&&i.jsxs("button",{onClick:()=>nt(b.content),className:"flex flex-col items-center gap-1.5 text-gray-300 hover:text-rose-400 transition",children:[i.jsx("div",{className:"p-3 rounded-full bg-gray-700 hover:bg-rose-500/20 transition",children:i.jsx(Qw,{size:22})}),i.jsx("span",{className:"text-[10px] font-medium",children:"Copy"})]}),i.jsxs("button",{onClick:()=>ks(b),className:"flex flex-col items-center gap-1.5 text-gray-300 hover:text-rose-400 transition",children:[i.jsx("div",{className:"p-3 rounded-full bg-gray-700 hover:bg-rose-500/20 transition",children:i.jsx(r_,{size:22})}),i.jsx("span",{className:"text-[10px] font-medium",children:"Report"})]}),i.jsxs("button",{onClick:()=>or(b.id),className:"flex flex-col items-center gap-1.5 text-red-400 hover:text-red-300 transition",children:[i.jsx("div",{className:"p-3 rounded-full bg-red-900/30 hover:bg-red-900/50 transition",children:i.jsx(wf,{size:22})}),i.jsx("span",{className:"text-[10px] font-medium",children:"Delete for you"})]})]})]})]})})(),i.jsxs("div",{className:"p-3 border-t border-gray-800 bg-black flex flex-col gap-2",children:[i.jsxs("div",{className:"flex justify-between items-center w-full mb-1",children:[i.jsx("div",{})," ",ei&&i.jsx("div",{className:"text-xs text-rose-600 font-medium animate-pulse flex items-center gap-1",children:i.jsx("span",{children:"User is typing..."})})]}),_l&&i.jsxs("div",{className:"flex items-center justify-between bg-rose-900/50 border border-rose-700 rounded-lg p-2 mb-2 animate-fade-in-up",children:[i.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[i.jsx("div",{className:"bg-rose-700 text-white rounded-full p-1",children:i.jsx(Lh,{size:12})}),i.jsxs("span",{className:"text-xs text-rose-200 font-medium truncate max-w-[200px]",children:["Replying to: ",_l.content]})]}),i.jsx("button",{onClick:()=>fn(null),className:"text-rose-400 hover:text-rose-300 p-1",children:i.jsx(Cr,{size:14})})]}),ye&&(()=>{const g=Ge.find(C=>C.user_a_id===n.user.id&&C.user_b_id===ye.id||C.user_b_id===n.user.id&&C.user_a_id===ye.id);if(g&&g.status==="mutual")return null;let b=[];if(ye.icebreaker_prompts)try{b=typeof ye.icebreaker_prompts=="string"?JSON.parse(ye.icebreaker_prompts||"[]"):Array.isArray(ye.icebreaker_prompts)?ye.icebreaker_prompts:[]}catch(C){console.error("Error parsing prompts:",C)}return b.length===0?null:pa<3?i.jsxs("div",{className:"mb-2",children:[i.jsxs("p",{className:"text-xs text-gray-300 mb-2 font-medium",children:[" Start a conversation (",pa,"/3 messages used)"]}),i.jsx("div",{className:"flex flex-wrap gap-2",children:b.slice(0,3).map((C,L)=>i.jsx("button",{onClick:()=>Si(C),className:"text-xs bg-rose-50 hover:bg-rose-100 border border-rose-200 text-rose-700 px-3 py-1.5 rounded-lg transition font-medium",children:C},L))})]}):i.jsx("div",{className:"bg-yellow-900/50 border border-yellow-700 rounded-lg p-3 mb-2",children:i.jsx("p",{className:"text-xs text-yellow-200 font-medium text-center",children:"You've sent 3 messages. Wait for them to connect to continue chatting! "})})})(),i.jsxs("div",{className:"flex items-center gap-2 w-full",children:[!Ms.trim()&&i.jsxs(i.Fragment,{children:[i.jsx("label",{htmlFor:"chat-camera-upload",className:"cursor-pointer text-gray-400 hover:text-rose-500 transition p-2 flex-shrink-0",children:i.jsx(Ow,{size:20})}),i.jsx("input",{type:"file",id:"chat-camera-upload",className:"hidden",accept:"image/*",capture:"user",onChange:Na})]}),i.jsx("textarea",{ref:Fr,rows:"1",style:{maxHeight:"120px",minHeight:"40px",resize:"none"},className:`flex-grow px-4 py-2 outline-none focus:ring-1 focus:ring-rose-100 resize-none bg-gray-900 text-white placeholder-gray-400 border border-gray-700 ${ys?"rounded-xl":"rounded-full"} ${(()=>{const g=Ge.find(b=>b.user_a_id===n.user.id&&b.user_b_id===ye.id||b.user_b_id===n.user.id&&b.user_a_id===ye.id);return g&&g.status!=="mutual"&&pa>=3?"opacity-50 cursor-not-allowed":""})()}`,placeholder:(()=>{const g=Ge.find(b=>b.user_a_id===n.user.id&&b.user_b_id===ye.id||b.user_b_id===n.user.id&&b.user_a_id===ye.id);return g&&g.status!=="mutual"&&pa>=3?"3-message limit reached. Wait for them to connect...":"Type a message..."})(),value:Ms,onChange:Sa,onKeyDown:g=>{const b=Ge.find(_=>_.user_a_id===n.user.id&&_.user_b_id===ye.id||_.user_b_id===n.user.id&&_.user_a_id===ye.id);if(b&&b.status!=="mutual"&&pa>=3){g.preventDefault();return}g.key==="Enter"&&!g.shiftKey&&(g.preventDefault(),rs())},disabled:(()=>{const g=Ge.find(b=>b.user_a_id===n.user.id&&b.user_b_id===ye.id||b.user_b_id===n.user.id&&b.user_a_id===ye.id);return g&&g.status!=="mutual"&&pa>=3})()}),Ms.trim()?i.jsx("button",{onClick:rs,className:"bg-rose-600 text-white p-2.5 rounded-full shadow-md hover:bg-rose-700 active:scale-95 transition flex-shrink-0",children:i.jsx(Un,{size:20,fill:"white"})}):i.jsxs(i.Fragment,{children:[i.jsx("label",{htmlFor:"chat-gallery-upload",className:"cursor-pointer text-gray-400 hover:text-rose-500 transition p-2 flex-shrink-0",children:i.jsx(i_,{size:20})}),i.jsx("input",{type:"file",id:"chat-gallery-upload",className:"hidden",accept:"image/*",multiple:!0,onChange:_i}),i.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[Cl&&i.jsxs("div",{className:"flex items-center gap-1 bg-red-100 px-3 py-1.5 rounded-full",children:[va.length>0&&i.jsx("div",{className:"flex items-center gap-0.5 h-4",children:va.slice(0,8).map((g,b)=>i.jsx("div",{className:"bg-red-500 rounded-full transition-all duration-75",style:{width:"2px",height:`${Math.max(2,g/255*12)}px`}},b))}),i.jsx("span",{className:"text-xs text-red-600 font-medium",children:"Recording..."})]}),i.jsx("button",{onPointerDown:yr,onPointerUp:br,onTouchStart:yr,onTouchEnd:br,disabled:!ye||Ft,className:`p-2 rounded-full transition flex-shrink-0 ${Cl?"bg-red-500 text-white animate-pulse":"text-gray-400 hover:text-rose-500"} ${Ft?"opacity-50 cursor-not-allowed":""}`,"aria-label":"Hold to Record",children:i.jsx(j_,{size:20})})]})]})]})]}),Kt&&i.jsxs("div",{className:"fixed inset-0 bg-black z-[70] flex flex-col",children:[i.jsx("div",{className:"flex-1 flex items-center justify-center p-4",children:i.jsx("img",{src:Kt.preview,alt:"Preview",className:"max-w-full max-h-full object-contain"})}),i.jsxs("div",{className:"bg-gray-900 p-4 flex items-center justify-between gap-4",children:[i.jsx("button",{onClick:()=>Al(null),className:"px-6 py-3 bg-gray-700 hover:bg-gray-600 text-white rounded-xl font-medium transition",children:"Cancel"}),i.jsx("div",{className:"flex items-center gap-2 bg-gray-800 px-3 py-2 rounded-lg",children:i.jsx("button",{onClick:()=>oc(Ss==="hd"?"low":"hd"),className:`px-3 py-1 rounded text-xs font-medium transition ${Ss==="hd"?"bg-rose-600 text-white":"bg-gray-700 text-gray-300"}`,children:Ss==="hd"?"HD":"Low"})}),i.jsx("button",{onClick:ir,disabled:Pt[Kt.id]==="sending",className:"px-6 py-3 bg-rose-600 hover:bg-rose-700 text-white rounded-xl font-medium transition disabled:opacity-50 flex items-center gap-2",children:Pt[Kt.id]==="sending"?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),i.jsx("span",{children:"Sending..."})]}):i.jsxs(i.Fragment,{children:[i.jsx(Ir,{size:18}),i.jsx("span",{children:"Send"})]})})]})]}),js.length>0&&i.jsxs("div",{className:"fixed inset-0 bg-black z-[70] flex flex-col",children:[i.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:i.jsx("div",{className:"grid grid-cols-2 gap-2 max-w-2xl mx-auto",children:js.map(g=>i.jsxs("div",{className:"relative aspect-square group",children:[i.jsx("img",{src:g.preview,alt:"Preview",className:"w-full h-full object-cover rounded-lg"}),i.jsx("button",{onClick:()=>Es(g.id),className:"absolute top-2 right-2 bg-red-500 hover:bg-red-600 text-white rounded-full p-1.5 opacity-0 group-hover:opacity-100 transition",children:i.jsx(Cr,{size:16})}),g.status==="sending"&&i.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center rounded-lg",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"})}),g.status==="sent"&&i.jsx("div",{className:"absolute inset-0 bg-green-500/30 flex items-center justify-center rounded-lg",children:i.jsx(Ir,{size:24,className:"text-white"})}),g.status==="error"&&i.jsx("div",{className:"absolute inset-0 bg-red-500/30 flex items-center justify-center rounded-lg",children:i.jsx(As,{size:24,className:"text-white"})})]},g.id))})}),i.jsxs("div",{className:"bg-gray-900 p-4 flex items-center justify-between gap-4 border-t border-gray-800",children:[i.jsx("button",{onClick:()=>$s([]),className:"px-6 py-3 bg-gray-700 hover:bg-gray-600 text-white rounded-xl font-medium transition",children:"Cancel"}),i.jsx("div",{className:"flex items-center gap-2 bg-gray-800 px-3 py-2 rounded-lg",children:i.jsx("button",{onClick:()=>oc(Ss==="hd"?"low":"hd"),className:`px-3 py-1 rounded text-xs font-medium transition ${Ss==="hd"?"bg-rose-600 text-white":"bg-gray-700 text-gray-300"}`,children:Ss==="hd"?"HD":"Low"})}),i.jsx("button",{onClick:()=>lr(),disabled:js.every(g=>g.status==="sending"||g.status==="sent"),className:"px-6 py-3 bg-rose-600 hover:bg-rose-700 text-white rounded-xl font-medium transition disabled:opacity-50 flex items-center gap-2",children:js.some(g=>g.status==="sending")?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),i.jsx("span",{children:"Sending..."})]}):i.jsxs(i.Fragment,{children:[i.jsx(Ir,{size:18}),i.jsxs("span",{children:["Send ",js.filter(g=>g.status==="pending").length," Photo",js.filter(g=>g.status==="pending").length!==1?"s":""]})]})})]})]})]}),f==="profile-view"&&Me&&i.jsxs("div",{className:"w-full max-w-md mx-auto bg-white min-h-screen shadow-xl pb-20 animate-fade-in-up",children:[i.jsx("div",{className:"relative w-full aspect-[3/4] bg-gray-200 overflow-hidden group",children:(()=>{const g=[Me.avatar_url,Me.avatar_url_2,Me.avatar_url_3].filter(Boolean);return i.jsxs(i.Fragment,{children:[i.jsx("img",{src:g[$n]||`https://api.dicebear.com/7.x/avataaars/svg?seed=${Me.full_name}`,className:"w-full h-full object-cover transition-transform duration-500"}),g.length>1&&i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:()=>Bn(b=>(b+1)%g.length),className:"absolute left-2 top-1/2 -translate-y-1/2 bg-white/80 hover:bg-white p-2 rounded-full shadow-lg text-gray-800",children:i.jsx(Lw,{size:20})}),i.jsx("button",{onClick:()=>Bn(b=>(b-1+g.length)%g.length),className:"absolute right-2 top-1/2 -translate-y-1/2 bg-white/80 hover:bg-white p-2 rounded-full shadow-lg text-gray-800",children:i.jsx($w,{size:20})})]}),g.length>1&&i.jsx("div",{className:"absolute bottom-4 left-0 right-0 flex justify-center gap-2",children:g.map((b,_)=>i.jsx("div",{className:`w-2 h-2 rounded-full transition ${_===$n?"bg-white scale-125":"bg-white/50"}`},_))}),i.jsx("button",{onClick:()=>m("discovery"),className:"absolute top-4 left-4 bg-black/20 hover:bg-black/40 backdrop-blur-md p-2 rounded-full text-white transition",children:i.jsx(Vr,{size:20})})]})})()}),i.jsxs("div",{className:"relative -mt-6 bg-white rounded-t-3xl px-6 pt-8 pb-8 shadow-[0_-5px_15px_rgba(0,0,0,0.1)]",children:[i.jsxs("div",{className:"flex justify-between items-start mb-4",children:[i.jsxs("div",{className:"relative",children:[oi&&i.jsx("div",{className:"absolute -top-1 -right-1 w-24 h-24 rounded-full border-4 border-rose-500 z-10 pointer-events-none"}),i.jsxs("div",{className:"relative",children:[oi&&i.jsx("div",{className:"absolute inset-0 rounded-full p-[3px] bg-gradient-to-tr from-rose-400 via-pink-500 to-orange-400 z-0 scale-105"}),i.jsx("div",{className:`w-24 h-24 rounded-full border-2 overflow-hidden bg-gray-200 ${oi?"border-white":"border-gray-200"}`,children:i.jsx("img",{src:Me.avatar_url||`https://api.dicebear.com/7.x/avataaars/svg?seed=${Me.full_name}`,className:"w-full h-full object-cover"})})]})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900 leading-tight",children:Me.full_name}),Me.is_verified&&i.jsx("div",{className:"bg-blue-500 rounded-full w-4 h-4 flex items-center justify-center",title:"Verified Account",children:i.jsx(Ir,{size:8,className:"text-white",strokeWidth:3})})]}),i.jsxs("p",{className:"text-rose-600 font-medium text-sm flex items-center gap-1 mt-1",children:[i.jsx(ra,{size:14})," ",Me.city]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-3xl font-serif font-bold text-gray-800",children:Me.date_of_birth?bu(Me.date_of_birth):""}),i.jsx("div",{className:"text-xs text-gray-400 uppercase tracking-widest",children:"Age"})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[i.jsxs("div",{className:"bg-gray-50 p-3 rounded-xl text-center border border-gray-100",children:[i.jsx("span",{className:"block text-2xl font-bold text-rose-600",children:Me.height?Me.height+"cm":"-"}),i.jsx("span",{className:"text-[10px] text-gray-400 uppercase font-bold tracking-wide",children:"Height"})]}),i.jsxs("div",{className:"bg-gray-50 p-3 rounded-xl text-center border border-gray-100",children:[i.jsx("span",{className:"block text-2xl font-bold text-rose-600",children:Me.weight?Me.weight+"kg":"-"}),i.jsx("span",{className:"text-[10px] text-gray-400 uppercase font-bold tracking-wide",children:"Weight"})]})]}),Me.occupation&&i.jsxs("div",{className:"mb-4",children:[i.jsx("h3",{className:"text-sm font-bold text-gray-900 uppercase tracking-wide mb-1",children:"Occupation"}),i.jsx("p",{className:"text-gray-800 font-medium",children:Me.occupation})]}),i.jsxs("div",{className:"flex gap-2 mb-6",children:[i.jsx("span",{className:"px-3 py-1 rounded-full bg-rose-50 text-rose-700 text-xs font-bold border border-rose-100",children:Me.religion}),i.jsx("span",{className:"px-3 py-1 rounded-full bg-gray-100 text-gray-600 text-xs font-bold border border-gray-200",children:Me.intent})]}),Me.hobbies&&i.jsxs("div",{className:"mb-6",children:[i.jsx("h3",{className:"text-sm font-bold text-gray-900 uppercase tracking-wide mb-2",children:"Interests"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:Me.hobbies.split(",").filter(Boolean).map((g,b)=>i.jsx("span",{className:"px-3 py-1 rounded-full bg-rose-50 text-rose-700 text-xs font-bold border border-rose-100",children:g},b))})]}),Me.bio&&i.jsxs("div",{className:"mb-8",children:[i.jsx("h3",{className:"text-sm font-bold text-gray-900 uppercase tracking-wide mb-2",children:"About Me"}),i.jsxs("p",{className:"text-gray-600 text-sm leading-relaxed",children:['"',Me.bio,'"']})]}),Me.icebreaker_prompts&&(()=>{let g=[];try{g=typeof Me.icebreaker_prompts=="string"?JSON.parse(Me.icebreaker_prompts||"[]"):Array.isArray(Me.icebreaker_prompts)?Me.icebreaker_prompts:[]}catch(b){console.error("Error parsing icebreaker prompts:",b)}return g.length>0?i.jsxs("div",{className:"mb-8",children:[i.jsxs("h3",{className:"text-sm font-bold text-gray-900 uppercase tracking-wide mb-3 flex items-center gap-2",children:[i.jsx(rg,{size:16}),"Conversation Starters"]}),i.jsx("div",{className:"space-y-2",children:g.slice(0,3).map((b,_)=>i.jsxs("button",{onClick:()=>{ai?Ge.find(L=>L.user_a_id===n.user.id&&L.user_b_id===Me.id||L.user_b_id===n.user.id&&L.user_a_id===Me.id)&&(Fn(Me),m("chat"),setTimeout(()=>{vs(b),Fr.current&&Fr.current.focus()},100)):Si(b,Me.id)},className:"w-full text-left bg-rose-50 hover:bg-rose-100 border border-rose-200 text-rose-700 px-4 py-3 rounded-xl transition text-sm font-medium",children:[" ",b]},_))}),!ai&&i.jsx("p",{className:"text-xs text-gray-500 mt-2 italic",children:"You can send up to 3 messages before connecting"})]}):null})(),i.jsx("div",{className:"flex gap-3",children:!ai&&i.jsxs("button",{onClick:()=>{m("discovery"),Bl()},disabled:u,className:"flex-1 bg-rose-600 text-white font-bold py-3.5 rounded-2xl hover:bg-rose-700 transition active:scale-95 flex items-center justify-center gap-2",children:[i.jsx(Un,{size:20,fill:"white"})," Connect"]})})]})]})]}),f!=="chat"&&!Xn&&i.jsx(r2,{currentView:f,setView:m,unreadMessageCount:lc}),Xn&&i.jsx("div",{className:"fixed inset-0 z-[70] flex items-end sm:items-center justify-center bg-black/50",children:i.jsxs("div",{className:"bg-white w-full max-w-md rounded-t-2xl sm:rounded-2xl p-6 animate-fade-in-up shadow-2xl",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Filter Discovery"}),i.jsx("button",{onClick:()=>ps(!1),className:"text-gray-400",children:i.jsx(Cr,{size:24})})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-wide mb-3",children:"Demographics"}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-[10px] text-gray-500 mb-1 font-bold",children:"Min Age"}),i.jsxs("select",{className:"w-full p-2.5 text-sm border border-white/20 rounded-lg bg-white/10 text-white focus:ring-2 focus:ring-rose-500 focus:bg-white/20 outline-none transition [&>option]:text-gray-800",value:Qn||"",onChange:g=>on(g.target.value),children:[i.jsx("option",{value:"",children:"Any"}),Array.from({length:60},(g,b)=>b+18).map(g=>i.jsx("option",{value:g,children:g},g))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-[10px] text-gray-500 mb-1 font-bold",children:"Max Age"}),i.jsxs("select",{className:"w-full p-2.5 text-sm border border-white/20 rounded-lg bg-white/10 text-white focus:ring-2 focus:ring-rose-500 focus:bg-white/20 outline-none transition [&>option]:text-gray-800",value:rr||"",onChange:g=>Zn(g.target.value),children:[i.jsx("option",{value:"",children:"Any"}),Array.from({length:60},(g,b)=>b+18).map(g=>i.jsx("option",{value:g,children:g},g))]})]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("label",{className:"text-[10px] text-gray-500 mb-1 font-bold",children:"Religion"}),i.jsxs("select",{className:"w-full p-2.5 text-sm border border-white/20 rounded-lg bg-white/10 text-white focus:ring-2 focus:ring-rose-500 focus:bg-white/20 outline-none transition [&>option]:text-gray-800",value:gs,onChange:g=>Xo(g.target.value),children:[i.jsx("option",{value:"",children:"All Religions"}),i.jsx("option",{value:"Christian",children:"Christian"}),i.jsx("option",{value:"Muslim",children:"Muslim"}),i.jsx("option",{value:"Others",children:"Others"})]})]})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-wide mb-3",children:"Location"}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{className:"col-span-2",children:[i.jsx("label",{className:"text-[10px] text-gray-500 mb-1 font-bold",children:"City"}),i.jsxs("select",{className:"w-full p-2.5 text-sm border border-white/20 rounded-lg bg-white/10 text-white focus:ring-2 focus:ring-rose-500 focus:bg-white/20 outline-none transition [&>option]:text-gray-800",value:Jn,onChange:g=>hl(g.target.value),children:[i.jsx("option",{value:"",children:"All Cities"}),i.jsx("option",{value:"Accra",children:"Accra"}),i.jsx("option",{value:"Kumasi",children:"Kumasi"}),i.jsx("option",{value:"Tema",children:"Tema"}),i.jsx("option",{value:"Tamale",children:"Tamale"}),i.jsx("option",{value:"Cape Coast",children:"Cape Coast"}),i.jsx("option",{value:"Takoradi",children:"Takoradi"}),i.jsx("option",{value:"Sunyani",children:"Sunyani"}),i.jsx("option",{value:"Ho",children:"Ho"}),i.jsx("option",{value:"Wa",children:"Wa"}),i.jsx("option",{value:"Techiman",children:"Techiman"}),i.jsx("option",{value:"Goaso",children:"Goaso"}),i.jsx("option",{value:"Nalerigu",children:"Nalerigu"}),i.jsx("option",{value:"Sefwi Wiaso",children:"Sefwi Wiaso"}),i.jsx("option",{value:"Damango",children:"Damango"}),i.jsx("option",{value:"Dambai",children:"Dambai"}),i.jsx("option",{value:"Bolgatanga",children:"Bolgatanga"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-[10px] text-gray-500 mb-1 font-bold",children:"Distance"}),i.jsxs("select",{className:"w-full p-2.5 text-sm border border-white/20 rounded-lg bg-white/10 text-white focus:ring-2 focus:ring-rose-500 focus:bg-white/20 outline-none transition [&>option]:text-gray-800",value:ln||"",onChange:g=>fl(g.target.value),children:[i.jsx("option",{value:"",children:"Any Distance"}),i.jsx("option",{value:"10",children:"Within 10 km"}),i.jsx("option",{value:"25",children:"Within 25 km"}),i.jsx("option",{value:"50",children:"Within 50 km"}),i.jsx("option",{value:"100",children:"Within 100 km"})]})]})]})]}),i.jsx("button",{onClick:()=>{ps(!1),localStorage.setItem("sacred_min_age_filter",Qn),localStorage.setItem("sacred_max_age_filter",rr),n&&a&&a.gender&&Wt(n.user.id,a.gender,a)},className:"w-full bg-rose-600 text-white font-bold py-3 rounded-lg shadow-lg",children:"Apply Filters"})]})]})}),ci&&i.jsx(Z_,{story:ci,stories:xa,onClose:Rl,currentUserId:n?.user?.id,matchedUserId:ci?.user_id}),tr&&ms&&i.jsx(j1,{imageSrc:ms,onClose:_a,onCropComplete:ar}),i.jsx(l2,{isOpen:oa.isOpen,onClose:()=>cs({...oa,isOpen:!1}),onConfirm:oa.onConfirm,title:oa.title,message:oa.message,type:oa.type}),i.jsx(o2,{isOpen:Or.isOpen,onClose:()=>us({...Or,isOpen:!1}),onSubmit:Or.onSubmit,title:Or.title,placeholder:Or.placeholder,showCategorySelect:Or.showCategorySelect,categories:Or.categories,selectedCategory:wl,onCategoryChange:Fo})]})]})})]})})]})}function bu(n){if(!n)return"";const r=n.split("-");if(r.length!==3)return"";const a=parseInt(r[0],10),o=parseInt(r[1],10)-1,u=parseInt(r[2],10),d=new Date,f=new Date(a,o,u);let m=d.getFullYear()-f.getFullYear();const p=d.getMonth()-f.getMonth();return(p<0||p===0&&d.getDate()<f.getDate())&&m--,m}const k2=()=>{const[n,r]=S.useState(!1);return i.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-50",children:i.jsx("img",{src:Gr,onLoad:()=>r(!0),className:"h-40 w-full max-w-[250px] object-contain animate-pulse"})})};document.documentElement.classList.remove("dark");document.documentElement.style.setProperty("background-color","transparent","important");document.body.style.setProperty("background-color","transparent","important");document.body.style.setProperty("background-image","none","important");Lv.createRoot(document.getElementById("root")).render(i.jsx(S.StrictMode,{children:i.jsx(E2,{})}));
